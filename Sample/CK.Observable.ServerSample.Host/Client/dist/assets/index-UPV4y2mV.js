var Yh=Object.defineProperty;var Yl=u=>{throw TypeError(u)};var Gh=(u,r,c)=>r in u?Yh(u,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):u[r]=c;var Be=(u,r,c)=>Gh(u,typeof r!="symbol"?r+"":r,c),Zo=(u,r,c)=>r.has(u)||Yl("Cannot "+c);var L=(u,r,c)=>(Zo(u,r,"read from private field"),c?c.call(u):r.get(u)),Qe=(u,r,c)=>r.has(u)?Yl("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(u):r.set(u,c),Ue=(u,r,c,b)=>(Zo(u,r,"write to private field"),b?b.call(u,c):r.set(u,c),c),je=(u,r,c)=>(Zo(u,r,"access private method"),c);var Bn=(u,r,c,b)=>({set _(_){Ue(u,r,_,c)},get _(){return L(u,r,b)}});(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))b(_);new MutationObserver(_=>{for(const E of _)if(E.type==="childList")for(const A of E.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&b(A)}).observe(document,{childList:!0,subtree:!0});function c(_){const E={};return _.integrity&&(E.integrity=_.integrity),_.referrerPolicy&&(E.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?E.credentials="include":_.crossOrigin==="anonymous"?E.credentials="omit":E.credentials="same-origin",E}function b(_){if(_.ep)return;_.ep=!0;const E=c(_);fetch(_.href,E)}})();function Ac(u,r){return function(){return u.apply(r,arguments)}}const{toString:Xh}=Object.prototype,{getPrototypeOf:Is}=Object,oi=(u=>r=>{const c=Xh.call(r);return u[c]||(u[c]=c.slice(8,-1).toLowerCase())})(Object.create(null)),Lt=u=>(u=u.toLowerCase(),r=>oi(r)===u),si=u=>r=>typeof r===u,{isArray:Wr}=Array,rn=si("undefined");function Zh(u){return u!==null&&!rn(u)&&u.constructor!==null&&!rn(u.constructor)&&Pt(u.constructor.isBuffer)&&u.constructor.isBuffer(u)}const Cc=Lt("ArrayBuffer");function ef(u){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(u):r=u&&u.buffer&&Cc(u.buffer),r}const tf=si("string"),Pt=si("function"),Tc=si("number"),ai=u=>u!==null&&typeof u=="object",rf=u=>u===!0||u===!1,jn=u=>{if(oi(u)!=="object")return!1;const r=Is(u);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in u)&&!(Symbol.iterator in u)},nf=Lt("Date"),of=Lt("File"),sf=Lt("Blob"),af=Lt("FileList"),lf=u=>ai(u)&&Pt(u.pipe),cf=u=>{let r;return u&&(typeof FormData=="function"&&u instanceof FormData||Pt(u.append)&&((r=oi(u))==="formdata"||r==="object"&&Pt(u.toString)&&u.toString()==="[object FormData]"))},uf=Lt("URLSearchParams"),[hf,ff,df,pf]=["ReadableStream","Request","Response","Headers"].map(Lt),gf=u=>u.trim?u.trim():u.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function an(u,r,{allOwnKeys:c=!1}={}){if(u===null||typeof u>"u")return;let b,_;if(typeof u!="object"&&(u=[u]),Wr(u))for(b=0,_=u.length;b<_;b++)r.call(null,u[b],b,u);else{const E=c?Object.getOwnPropertyNames(u):Object.keys(u),A=E.length;let q;for(b=0;b<A;b++)q=E[b],r.call(null,u[q],q,u)}}function Ic(u,r){r=r.toLowerCase();const c=Object.keys(u);let b=c.length,_;for(;b-- >0;)if(_=c[b],r===_.toLowerCase())return _;return null}const kc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Rc=u=>!rn(u)&&u!==kc;function ss(){const{caseless:u}=Rc(this)&&this||{},r={},c=(b,_)=>{const E=u&&Ic(r,_)||_;jn(r[E])&&jn(b)?r[E]=ss(r[E],b):jn(b)?r[E]=ss({},b):Wr(b)?r[E]=b.slice():r[E]=b};for(let b=0,_=arguments.length;b<_;b++)arguments[b]&&an(arguments[b],c);return r}const mf=(u,r,c,{allOwnKeys:b}={})=>(an(r,(_,E)=>{c&&Pt(_)?u[E]=Ac(_,c):u[E]=_},{allOwnKeys:b}),u),bf=u=>(u.charCodeAt(0)===65279&&(u=u.slice(1)),u),yf=(u,r,c,b)=>{u.prototype=Object.create(r.prototype,b),u.prototype.constructor=u,Object.defineProperty(u,"super",{value:r.prototype}),c&&Object.assign(u.prototype,c)},wf=(u,r,c,b)=>{let _,E,A;const q={};if(r=r||{},u==null)return r;do{for(_=Object.getOwnPropertyNames(u),E=_.length;E-- >0;)A=_[E],(!b||b(A,u,r))&&!q[A]&&(r[A]=u[A],q[A]=!0);u=c!==!1&&Is(u)}while(u&&(!c||c(u,r))&&u!==Object.prototype);return r},_f=(u,r,c)=>{u=String(u),(c===void 0||c>u.length)&&(c=u.length),c-=r.length;const b=u.indexOf(r,c);return b!==-1&&b===c},vf=u=>{if(!u)return null;if(Wr(u))return u;let r=u.length;if(!Tc(r))return null;const c=new Array(r);for(;r-- >0;)c[r]=u[r];return c},Ef=(u=>r=>u&&r instanceof u)(typeof Uint8Array<"u"&&Is(Uint8Array)),Sf=(u,r)=>{const b=(u&&u[Symbol.iterator]).call(u);let _;for(;(_=b.next())&&!_.done;){const E=_.value;r.call(u,E[0],E[1])}},Af=(u,r)=>{let c;const b=[];for(;(c=u.exec(r))!==null;)b.push(c);return b},Cf=Lt("HTMLFormElement"),Tf=u=>u.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(c,b,_){return b.toUpperCase()+_}),Gl=(({hasOwnProperty:u})=>(r,c)=>u.call(r,c))(Object.prototype),If=Lt("RegExp"),Oc=(u,r)=>{const c=Object.getOwnPropertyDescriptors(u),b={};an(c,(_,E)=>{let A;(A=r(_,E,u))!==!1&&(b[E]=A||_)}),Object.defineProperties(u,b)},kf=u=>{Oc(u,(r,c)=>{if(Pt(u)&&["arguments","caller","callee"].indexOf(c)!==-1)return!1;const b=u[c];if(Pt(b)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+c+"'")})}})},Rf=(u,r)=>{const c={},b=_=>{_.forEach(E=>{c[E]=!0})};return Wr(u)?b(u):b(String(u).split(r)),c},Of=()=>{},Pf=(u,r)=>u!=null&&Number.isFinite(u=+u)?u:r,es="abcdefghijklmnopqrstuvwxyz",Xl="0123456789",Pc={DIGIT:Xl,ALPHA:es,ALPHA_DIGIT:es+es.toUpperCase()+Xl},xf=(u=16,r=Pc.ALPHA_DIGIT)=>{let c="";const{length:b}=r;for(;u--;)c+=r[Math.random()*b|0];return c};function Bf(u){return!!(u&&Pt(u.append)&&u[Symbol.toStringTag]==="FormData"&&u[Symbol.iterator])}const Nf=u=>{const r=new Array(10),c=(b,_)=>{if(ai(b)){if(r.indexOf(b)>=0)return;if(!("toJSON"in b)){r[_]=b;const E=Wr(b)?[]:{};return an(b,(A,q)=>{const K=c(A,_+1);!rn(K)&&(E[q]=K)}),r[_]=void 0,E}}return b};return c(u,0)},Mf=Lt("AsyncFunction"),jf=u=>u&&(ai(u)||Pt(u))&&Pt(u.then)&&Pt(u.catch),le={isArray:Wr,isArrayBuffer:Cc,isBuffer:Zh,isFormData:cf,isArrayBufferView:ef,isString:tf,isNumber:Tc,isBoolean:rf,isObject:ai,isPlainObject:jn,isReadableStream:hf,isRequest:ff,isResponse:df,isHeaders:pf,isUndefined:rn,isDate:nf,isFile:of,isBlob:sf,isRegExp:If,isFunction:Pt,isStream:lf,isURLSearchParams:uf,isTypedArray:Ef,isFileList:af,forEach:an,merge:ss,extend:mf,trim:gf,stripBOM:bf,inherits:yf,toFlatObject:wf,kindOf:oi,kindOfTest:Lt,endsWith:_f,toArray:vf,forEachEntry:Sf,matchAll:Af,isHTMLForm:Cf,hasOwnProperty:Gl,hasOwnProp:Gl,reduceDescriptors:Oc,freezeMethods:kf,toObjectSet:Rf,toCamelCase:Tf,noop:Of,toFiniteNumber:Pf,findKey:Ic,global:kc,isContextDefined:Rc,ALPHABET:Pc,generateString:xf,isSpecCompliantForm:Bf,toJSONObject:Nf,isAsyncFn:Mf,isThenable:jf};function We(u,r,c,b,_){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=u,this.name="AxiosError",r&&(this.code=r),c&&(this.config=c),b&&(this.request=b),_&&(this.response=_)}le.inherits(We,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:le.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const xc=We.prototype,Bc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(u=>{Bc[u]={value:u}});Object.defineProperties(We,Bc);Object.defineProperty(xc,"isAxiosError",{value:!0});We.from=(u,r,c,b,_,E)=>{const A=Object.create(xc);return le.toFlatObject(u,A,function(K){return K!==Error.prototype},q=>q!=="isAxiosError"),We.call(A,u.message,r,c,b,_),A.cause=u,A.name=u.name,E&&Object.assign(A,E),A};const Uf=null;function as(u){return le.isPlainObject(u)||le.isArray(u)}function Nc(u){return le.endsWith(u,"[]")?u.slice(0,-2):u}function Zl(u,r,c){return u?u.concat(r).map(function(_,E){return _=Nc(_),!c&&E?"["+_+"]":_}).join(c?".":""):r}function Lf(u){return le.isArray(u)&&!u.some(as)}const Df=le.toFlatObject(le,{},null,function(r){return/^is[A-Z]/.test(r)});function li(u,r,c){if(!le.isObject(u))throw new TypeError("target must be an object");r=r||new FormData,c=le.toFlatObject(c,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Ce,qe){return!le.isUndefined(qe[Ce])});const b=c.metaTokens,_=c.visitor||F,E=c.dots,A=c.indexes,K=(c.Blob||typeof Blob<"u"&&Blob)&&le.isSpecCompliantForm(r);if(!le.isFunction(_))throw new TypeError("visitor must be a function");function se(xe){if(xe===null)return"";if(le.isDate(xe))return xe.toISOString();if(!K&&le.isBlob(xe))throw new We("Blob is not supported. Use a Buffer instead.");return le.isArrayBuffer(xe)||le.isTypedArray(xe)?K&&typeof Blob=="function"?new Blob([xe]):Buffer.from(xe):xe}function F(xe,Ce,qe){let Fe=xe;if(xe&&!qe&&typeof xe=="object"){if(le.endsWith(Ce,"{}"))Ce=b?Ce:Ce.slice(0,-2),xe=JSON.stringify(xe);else if(le.isArray(xe)&&Lf(xe)||(le.isFileList(xe)||le.endsWith(Ce,"[]"))&&(Fe=le.toArray(xe)))return Ce=Nc(Ce),Fe.forEach(function(Ge,sr){!(le.isUndefined(Ge)||Ge===null)&&r.append(A===!0?Zl([Ce],sr,E):A===null?Ce:Ce+"[]",se(Ge))}),!1}return as(xe)?!0:(r.append(Zl(qe,Ce,E),se(xe)),!1)}const Re=[],Ke=Object.assign(Df,{defaultVisitor:F,convertValue:se,isVisitable:as});function Je(xe,Ce){if(!le.isUndefined(xe)){if(Re.indexOf(xe)!==-1)throw Error("Circular reference detected in "+Ce.join("."));Re.push(xe),le.forEach(xe,function(Fe,vt){(!(le.isUndefined(Fe)||Fe===null)&&_.call(r,Fe,le.isString(vt)?vt.trim():vt,Ce,Ke))===!0&&Je(Fe,Ce?Ce.concat(vt):[vt])}),Re.pop()}}if(!le.isObject(u))throw new TypeError("data must be an object");return Je(u),r}function ec(u){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(u).replace(/[!'()~]|%20|%00/g,function(b){return r[b]})}function ks(u,r){this._pairs=[],u&&li(u,this,r)}const Mc=ks.prototype;Mc.append=function(r,c){this._pairs.push([r,c])};Mc.toString=function(r){const c=r?function(b){return r.call(this,b,ec)}:ec;return this._pairs.map(function(_){return c(_[0])+"="+c(_[1])},"").join("&")};function Ff(u){return encodeURIComponent(u).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function jc(u,r,c){if(!r)return u;const b=c&&c.encode||Ff,_=c&&c.serialize;let E;if(_?E=_(r,c):E=le.isURLSearchParams(r)?r.toString():new ks(r,c).toString(b),E){const A=u.indexOf("#");A!==-1&&(u=u.slice(0,A)),u+=(u.indexOf("?")===-1?"?":"&")+E}return u}class tc{constructor(){this.handlers=[]}use(r,c,b){return this.handlers.push({fulfilled:r,rejected:c,synchronous:b?b.synchronous:!1,runWhen:b?b.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){le.forEach(this.handlers,function(b){b!==null&&r(b)})}}const Uc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},$f=typeof URLSearchParams<"u"?URLSearchParams:ks,Wf=typeof FormData<"u"?FormData:null,Hf=typeof Blob<"u"?Blob:null,qf={isBrowser:!0,classes:{URLSearchParams:$f,FormData:Wf,Blob:Hf},protocols:["http","https","file","blob","url","data"]},Rs=typeof window<"u"&&typeof document<"u",Vf=(u=>Rs&&["ReactNative","NativeScript","NS"].indexOf(u)<0)(typeof navigator<"u"&&navigator.product),zf=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Kf=Rs&&window.location.href||"http://localhost",Jf=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Rs,hasStandardBrowserEnv:Vf,hasStandardBrowserWebWorkerEnv:zf,origin:Kf},Symbol.toStringTag,{value:"Module"})),Ut={...Jf,...qf};function Qf(u,r){return li(u,new Ut.classes.URLSearchParams,Object.assign({visitor:function(c,b,_,E){return Ut.isNode&&le.isBuffer(c)?(this.append(b,c.toString("base64")),!1):E.defaultVisitor.apply(this,arguments)}},r))}function Yf(u){return le.matchAll(/\w+|\[(\w*)]/g,u).map(r=>r[0]==="[]"?"":r[1]||r[0])}function Gf(u){const r={},c=Object.keys(u);let b;const _=c.length;let E;for(b=0;b<_;b++)E=c[b],r[E]=u[E];return r}function Lc(u){function r(c,b,_,E){let A=c[E++];if(A==="__proto__")return!0;const q=Number.isFinite(+A),K=E>=c.length;return A=!A&&le.isArray(_)?_.length:A,K?(le.hasOwnProp(_,A)?_[A]=[_[A],b]:_[A]=b,!q):((!_[A]||!le.isObject(_[A]))&&(_[A]=[]),r(c,b,_[A],E)&&le.isArray(_[A])&&(_[A]=Gf(_[A])),!q)}if(le.isFormData(u)&&le.isFunction(u.entries)){const c={};return le.forEachEntry(u,(b,_)=>{r(Yf(b),_,c,0)}),c}return null}function Xf(u,r,c){if(le.isString(u))try{return(r||JSON.parse)(u),le.trim(u)}catch(b){if(b.name!=="SyntaxError")throw b}return(c||JSON.stringify)(u)}const ln={transitional:Uc,adapter:["xhr","http","fetch"],transformRequest:[function(r,c){const b=c.getContentType()||"",_=b.indexOf("application/json")>-1,E=le.isObject(r);if(E&&le.isHTMLForm(r)&&(r=new FormData(r)),le.isFormData(r))return _?JSON.stringify(Lc(r)):r;if(le.isArrayBuffer(r)||le.isBuffer(r)||le.isStream(r)||le.isFile(r)||le.isBlob(r)||le.isReadableStream(r))return r;if(le.isArrayBufferView(r))return r.buffer;if(le.isURLSearchParams(r))return c.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let q;if(E){if(b.indexOf("application/x-www-form-urlencoded")>-1)return Qf(r,this.formSerializer).toString();if((q=le.isFileList(r))||b.indexOf("multipart/form-data")>-1){const K=this.env&&this.env.FormData;return li(q?{"files[]":r}:r,K&&new K,this.formSerializer)}}return E||_?(c.setContentType("application/json",!1),Xf(r)):r}],transformResponse:[function(r){const c=this.transitional||ln.transitional,b=c&&c.forcedJSONParsing,_=this.responseType==="json";if(le.isResponse(r)||le.isReadableStream(r))return r;if(r&&le.isString(r)&&(b&&!this.responseType||_)){const A=!(c&&c.silentJSONParsing)&&_;try{return JSON.parse(r)}catch(q){if(A)throw q.name==="SyntaxError"?We.from(q,We.ERR_BAD_RESPONSE,this,null,this.response):q}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ut.classes.FormData,Blob:Ut.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};le.forEach(["delete","get","head","post","put","patch"],u=>{ln.headers[u]={}});const Zf=le.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ed=u=>{const r={};let c,b,_;return u&&u.split(`
`).forEach(function(A){_=A.indexOf(":"),c=A.substring(0,_).trim().toLowerCase(),b=A.substring(_+1).trim(),!(!c||r[c]&&Zf[c])&&(c==="set-cookie"?r[c]?r[c].push(b):r[c]=[b]:r[c]=r[c]?r[c]+", "+b:b)}),r},rc=Symbol("internals");function en(u){return u&&String(u).trim().toLowerCase()}function Un(u){return u===!1||u==null?u:le.isArray(u)?u.map(Un):String(u)}function td(u){const r=Object.create(null),c=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let b;for(;b=c.exec(u);)r[b[1]]=b[2];return r}const rd=u=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(u.trim());function ts(u,r,c,b,_){if(le.isFunction(b))return b.call(this,r,c);if(_&&(r=c),!!le.isString(r)){if(le.isString(b))return r.indexOf(b)!==-1;if(le.isRegExp(b))return b.test(r)}}function nd(u){return u.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,c,b)=>c.toUpperCase()+b)}function id(u,r){const c=le.toCamelCase(" "+r);["get","set","has"].forEach(b=>{Object.defineProperty(u,b+c,{value:function(_,E,A){return this[b].call(this,r,_,E,A)},configurable:!0})})}let Tt=class{constructor(r){r&&this.set(r)}set(r,c,b){const _=this;function E(q,K,se){const F=en(K);if(!F)throw new Error("header name must be a non-empty string");const Re=le.findKey(_,F);(!Re||_[Re]===void 0||se===!0||se===void 0&&_[Re]!==!1)&&(_[Re||K]=Un(q))}const A=(q,K)=>le.forEach(q,(se,F)=>E(se,F,K));if(le.isPlainObject(r)||r instanceof this.constructor)A(r,c);else if(le.isString(r)&&(r=r.trim())&&!rd(r))A(ed(r),c);else if(le.isHeaders(r))for(const[q,K]of r.entries())E(K,q,b);else r!=null&&E(c,r,b);return this}get(r,c){if(r=en(r),r){const b=le.findKey(this,r);if(b){const _=this[b];if(!c)return _;if(c===!0)return td(_);if(le.isFunction(c))return c.call(this,_,b);if(le.isRegExp(c))return c.exec(_);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,c){if(r=en(r),r){const b=le.findKey(this,r);return!!(b&&this[b]!==void 0&&(!c||ts(this,this[b],b,c)))}return!1}delete(r,c){const b=this;let _=!1;function E(A){if(A=en(A),A){const q=le.findKey(b,A);q&&(!c||ts(b,b[q],q,c))&&(delete b[q],_=!0)}}return le.isArray(r)?r.forEach(E):E(r),_}clear(r){const c=Object.keys(this);let b=c.length,_=!1;for(;b--;){const E=c[b];(!r||ts(this,this[E],E,r,!0))&&(delete this[E],_=!0)}return _}normalize(r){const c=this,b={};return le.forEach(this,(_,E)=>{const A=le.findKey(b,E);if(A){c[A]=Un(_),delete c[E];return}const q=r?nd(E):String(E).trim();q!==E&&delete c[E],c[q]=Un(_),b[q]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const c=Object.create(null);return le.forEach(this,(b,_)=>{b!=null&&b!==!1&&(c[_]=r&&le.isArray(b)?b.join(", "):b)}),c}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,c])=>r+": "+c).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...c){const b=new this(r);return c.forEach(_=>b.set(_)),b}static accessor(r){const b=(this[rc]=this[rc]={accessors:{}}).accessors,_=this.prototype;function E(A){const q=en(A);b[q]||(id(_,A),b[q]=!0)}return le.isArray(r)?r.forEach(E):E(r),this}};Tt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);le.reduceDescriptors(Tt.prototype,({value:u},r)=>{let c=r[0].toUpperCase()+r.slice(1);return{get:()=>u,set(b){this[c]=b}}});le.freezeMethods(Tt);function rs(u,r){const c=this||ln,b=r||c,_=Tt.from(b.headers);let E=b.data;return le.forEach(u,function(q){E=q.call(c,E,_.normalize(),r?r.status:void 0)}),_.normalize(),E}function Dc(u){return!!(u&&u.__CANCEL__)}function Hr(u,r,c){We.call(this,u??"canceled",We.ERR_CANCELED,r,c),this.name="CanceledError"}le.inherits(Hr,We,{__CANCEL__:!0});function Fc(u,r,c){const b=c.config.validateStatus;!c.status||!b||b(c.status)?u(c):r(new We("Request failed with status code "+c.status,[We.ERR_BAD_REQUEST,We.ERR_BAD_RESPONSE][Math.floor(c.status/100)-4],c.config,c.request,c))}function od(u){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(u);return r&&r[1]||""}function sd(u,r){u=u||10;const c=new Array(u),b=new Array(u);let _=0,E=0,A;return r=r!==void 0?r:1e3,function(K){const se=Date.now(),F=b[E];A||(A=se),c[_]=K,b[_]=se;let Re=E,Ke=0;for(;Re!==_;)Ke+=c[Re++],Re=Re%u;if(_=(_+1)%u,_===E&&(E=(E+1)%u),se-A<r)return;const Je=F&&se-F;return Je?Math.round(Ke*1e3/Je):void 0}}function ad(u,r){let c=0;const b=1e3/r;let _=null;return function(){const A=this===!0,q=Date.now();if(A||q-c>b)return _&&(clearTimeout(_),_=null),c=q,u.apply(null,arguments);_||(_=setTimeout(()=>(_=null,c=Date.now(),u.apply(null,arguments)),b-(q-c)))}}const $n=(u,r,c=3)=>{let b=0;const _=sd(50,250);return ad(E=>{const A=E.loaded,q=E.lengthComputable?E.total:void 0,K=A-b,se=_(K),F=A<=q;b=A;const Re={loaded:A,total:q,progress:q?A/q:void 0,bytes:K,rate:se||void 0,estimated:se&&q&&F?(q-A)/se:void 0,event:E,lengthComputable:q!=null};Re[r?"download":"upload"]=!0,u(Re)},c)},ld=Ut.hasStandardBrowserEnv?function(){const r=/(msie|trident)/i.test(navigator.userAgent),c=document.createElement("a");let b;function _(E){let A=E;return r&&(c.setAttribute("href",A),A=c.href),c.setAttribute("href",A),{href:c.href,protocol:c.protocol?c.protocol.replace(/:$/,""):"",host:c.host,search:c.search?c.search.replace(/^\?/,""):"",hash:c.hash?c.hash.replace(/^#/,""):"",hostname:c.hostname,port:c.port,pathname:c.pathname.charAt(0)==="/"?c.pathname:"/"+c.pathname}}return b=_(window.location.href),function(A){const q=le.isString(A)?_(A):A;return q.protocol===b.protocol&&q.host===b.host}}():function(){return function(){return!0}}(),cd=Ut.hasStandardBrowserEnv?{write(u,r,c,b,_,E){const A=[u+"="+encodeURIComponent(r)];le.isNumber(c)&&A.push("expires="+new Date(c).toGMTString()),le.isString(b)&&A.push("path="+b),le.isString(_)&&A.push("domain="+_),E===!0&&A.push("secure"),document.cookie=A.join("; ")},read(u){const r=document.cookie.match(new RegExp("(^|;\\s*)("+u+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(u){this.write(u,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function ud(u){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(u)}function hd(u,r){return r?u.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):u}function $c(u,r){return u&&!ud(r)?hd(u,r):r}const nc=u=>u instanceof Tt?{...u}:u;function Nr(u,r){r=r||{};const c={};function b(se,F,Re){return le.isPlainObject(se)&&le.isPlainObject(F)?le.merge.call({caseless:Re},se,F):le.isPlainObject(F)?le.merge({},F):le.isArray(F)?F.slice():F}function _(se,F,Re){if(le.isUndefined(F)){if(!le.isUndefined(se))return b(void 0,se,Re)}else return b(se,F,Re)}function E(se,F){if(!le.isUndefined(F))return b(void 0,F)}function A(se,F){if(le.isUndefined(F)){if(!le.isUndefined(se))return b(void 0,se)}else return b(void 0,F)}function q(se,F,Re){if(Re in r)return b(se,F);if(Re in u)return b(void 0,se)}const K={url:E,method:E,data:E,baseURL:A,transformRequest:A,transformResponse:A,paramsSerializer:A,timeout:A,timeoutMessage:A,withCredentials:A,withXSRFToken:A,adapter:A,responseType:A,xsrfCookieName:A,xsrfHeaderName:A,onUploadProgress:A,onDownloadProgress:A,decompress:A,maxContentLength:A,maxBodyLength:A,beforeRedirect:A,transport:A,httpAgent:A,httpsAgent:A,cancelToken:A,socketPath:A,responseEncoding:A,validateStatus:q,headers:(se,F)=>_(nc(se),nc(F),!0)};return le.forEach(Object.keys(Object.assign({},u,r)),function(F){const Re=K[F]||_,Ke=Re(u[F],r[F],F);le.isUndefined(Ke)&&Re!==q||(c[F]=Ke)}),c}const Wc=u=>{const r=Nr({},u);let{data:c,withXSRFToken:b,xsrfHeaderName:_,xsrfCookieName:E,headers:A,auth:q}=r;r.headers=A=Tt.from(A),r.url=jc($c(r.baseURL,r.url),u.params,u.paramsSerializer),q&&A.set("Authorization","Basic "+btoa((q.username||"")+":"+(q.password?unescape(encodeURIComponent(q.password)):"")));let K;if(le.isFormData(c)){if(Ut.hasStandardBrowserEnv||Ut.hasStandardBrowserWebWorkerEnv)A.setContentType(void 0);else if((K=A.getContentType())!==!1){const[se,...F]=K?K.split(";").map(Re=>Re.trim()).filter(Boolean):[];A.setContentType([se||"multipart/form-data",...F].join("; "))}}if(Ut.hasStandardBrowserEnv&&(b&&le.isFunction(b)&&(b=b(r)),b||b!==!1&&ld(r.url))){const se=_&&E&&cd.read(E);se&&A.set(_,se)}return r},fd=typeof XMLHttpRequest<"u",dd=fd&&function(u){return new Promise(function(c,b){const _=Wc(u);let E=_.data;const A=Tt.from(_.headers).normalize();let{responseType:q}=_,K;function se(){_.cancelToken&&_.cancelToken.unsubscribe(K),_.signal&&_.signal.removeEventListener("abort",K)}let F=new XMLHttpRequest;F.open(_.method.toUpperCase(),_.url,!0),F.timeout=_.timeout;function Re(){if(!F)return;const Je=Tt.from("getAllResponseHeaders"in F&&F.getAllResponseHeaders()),Ce={data:!q||q==="text"||q==="json"?F.responseText:F.response,status:F.status,statusText:F.statusText,headers:Je,config:u,request:F};Fc(function(Fe){c(Fe),se()},function(Fe){b(Fe),se()},Ce),F=null}"onloadend"in F?F.onloadend=Re:F.onreadystatechange=function(){!F||F.readyState!==4||F.status===0&&!(F.responseURL&&F.responseURL.indexOf("file:")===0)||setTimeout(Re)},F.onabort=function(){F&&(b(new We("Request aborted",We.ECONNABORTED,_,F)),F=null)},F.onerror=function(){b(new We("Network Error",We.ERR_NETWORK,_,F)),F=null},F.ontimeout=function(){let xe=_.timeout?"timeout of "+_.timeout+"ms exceeded":"timeout exceeded";const Ce=_.transitional||Uc;_.timeoutErrorMessage&&(xe=_.timeoutErrorMessage),b(new We(xe,Ce.clarifyTimeoutError?We.ETIMEDOUT:We.ECONNABORTED,_,F)),F=null},E===void 0&&A.setContentType(null),"setRequestHeader"in F&&le.forEach(A.toJSON(),function(xe,Ce){F.setRequestHeader(Ce,xe)}),le.isUndefined(_.withCredentials)||(F.withCredentials=!!_.withCredentials),q&&q!=="json"&&(F.responseType=_.responseType),typeof _.onDownloadProgress=="function"&&F.addEventListener("progress",$n(_.onDownloadProgress,!0)),typeof _.onUploadProgress=="function"&&F.upload&&F.upload.addEventListener("progress",$n(_.onUploadProgress)),(_.cancelToken||_.signal)&&(K=Je=>{F&&(b(!Je||Je.type?new Hr(null,u,F):Je),F.abort(),F=null)},_.cancelToken&&_.cancelToken.subscribe(K),_.signal&&(_.signal.aborted?K():_.signal.addEventListener("abort",K)));const Ke=od(_.url);if(Ke&&Ut.protocols.indexOf(Ke)===-1){b(new We("Unsupported protocol "+Ke+":",We.ERR_BAD_REQUEST,u));return}F.send(E||null)})},pd=(u,r)=>{let c=new AbortController,b;const _=function(K){if(!b){b=!0,A();const se=K instanceof Error?K:this.reason;c.abort(se instanceof We?se:new Hr(se instanceof Error?se.message:se))}};let E=r&&setTimeout(()=>{_(new We(`timeout ${r} of ms exceeded`,We.ETIMEDOUT))},r);const A=()=>{u&&(E&&clearTimeout(E),E=null,u.forEach(K=>{K&&(K.removeEventListener?K.removeEventListener("abort",_):K.unsubscribe(_))}),u=null)};u.forEach(K=>K&&K.addEventListener&&K.addEventListener("abort",_));const{signal:q}=c;return q.unsubscribe=A,[q,()=>{E&&clearTimeout(E),E=null}]},gd=function*(u,r){let c=u.byteLength;if(!r||c<r){yield u;return}let b=0,_;for(;b<c;)_=b+r,yield u.slice(b,_),b=_},md=async function*(u,r,c){for await(const b of u)yield*gd(ArrayBuffer.isView(b)?b:await c(String(b)),r)},ic=(u,r,c,b,_)=>{const E=md(u,r,_);let A=0;return new ReadableStream({type:"bytes",async pull(q){const{done:K,value:se}=await E.next();if(K){q.close(),b();return}let F=se.byteLength;c&&c(A+=F),q.enqueue(new Uint8Array(se))},cancel(q){return b(q),E.return()}},{highWaterMark:2})},oc=(u,r)=>{const c=u!=null;return b=>setTimeout(()=>r({lengthComputable:c,total:u,loaded:b}))},ci=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Hc=ci&&typeof ReadableStream=="function",ls=ci&&(typeof TextEncoder=="function"?(u=>r=>u.encode(r))(new TextEncoder):async u=>new Uint8Array(await new Response(u).arrayBuffer())),bd=Hc&&(()=>{let u=!1;const r=new Request(Ut.origin,{body:new ReadableStream,method:"POST",get duplex(){return u=!0,"half"}}).headers.has("Content-Type");return u&&!r})(),sc=64*1024,cs=Hc&&!!(()=>{try{return le.isReadableStream(new Response("").body)}catch{}})(),Wn={stream:cs&&(u=>u.body)};ci&&(u=>{["text","arrayBuffer","blob","formData","stream"].forEach(r=>{!Wn[r]&&(Wn[r]=le.isFunction(u[r])?c=>c[r]():(c,b)=>{throw new We(`Response type '${r}' is not supported`,We.ERR_NOT_SUPPORT,b)})})})(new Response);const yd=async u=>{if(u==null)return 0;if(le.isBlob(u))return u.size;if(le.isSpecCompliantForm(u))return(await new Request(u).arrayBuffer()).byteLength;if(le.isArrayBufferView(u))return u.byteLength;if(le.isURLSearchParams(u)&&(u=u+""),le.isString(u))return(await ls(u)).byteLength},wd=async(u,r)=>{const c=le.toFiniteNumber(u.getContentLength());return c??yd(r)},_d=ci&&(async u=>{let{url:r,method:c,data:b,signal:_,cancelToken:E,timeout:A,onDownloadProgress:q,onUploadProgress:K,responseType:se,headers:F,withCredentials:Re="same-origin",fetchOptions:Ke}=Wc(u);se=se?(se+"").toLowerCase():"text";let[Je,xe]=_||E||A?pd([_,E],A):[],Ce,qe;const Fe=()=>{!Ce&&setTimeout(()=>{Je&&Je.unsubscribe()}),Ce=!0};let vt;try{if(K&&bd&&c!=="get"&&c!=="head"&&(vt=await wd(F,b))!==0){let xt=new Request(r,{method:"POST",body:b,duplex:"half"}),Ht;le.isFormData(b)&&(Ht=xt.headers.get("content-type"))&&F.setContentType(Ht),xt.body&&(b=ic(xt.body,sc,oc(vt,$n(K)),null,ls))}le.isString(Re)||(Re=Re?"cors":"omit"),qe=new Request(r,{...Ke,signal:Je,method:c.toUpperCase(),headers:F.normalize().toJSON(),body:b,duplex:"half",withCredentials:Re});let Ge=await fetch(qe);const sr=cs&&(se==="stream"||se==="response");if(cs&&(q||sr)){const xt={};["status","statusText","headers"].forEach(qr=>{xt[qr]=Ge[qr]});const Ht=le.toFiniteNumber(Ge.headers.get("content-length"));Ge=new Response(ic(Ge.body,sc,q&&oc(Ht,$n(q,!0)),sr&&Fe,ls),xt)}se=se||"text";let un=await Wn[le.findKey(Wn,se)||"text"](Ge,u);return!sr&&Fe(),xe&&xe(),await new Promise((xt,Ht)=>{Fc(xt,Ht,{data:un,headers:Tt.from(Ge.headers),status:Ge.status,statusText:Ge.statusText,config:u,request:qe})})}catch(Ge){throw Fe(),Ge&&Ge.name==="TypeError"&&/fetch/i.test(Ge.message)?Object.assign(new We("Network Error",We.ERR_NETWORK,u,qe),{cause:Ge.cause||Ge}):We.from(Ge,Ge&&Ge.code,u,qe)}}),us={http:Uf,xhr:dd,fetch:_d};le.forEach(us,(u,r)=>{if(u){try{Object.defineProperty(u,"name",{value:r})}catch{}Object.defineProperty(u,"adapterName",{value:r})}});const ac=u=>`- ${u}`,vd=u=>le.isFunction(u)||u===null||u===!1,qc={getAdapter:u=>{u=le.isArray(u)?u:[u];const{length:r}=u;let c,b;const _={};for(let E=0;E<r;E++){c=u[E];let A;if(b=c,!vd(c)&&(b=us[(A=String(c)).toLowerCase()],b===void 0))throw new We(`Unknown adapter '${A}'`);if(b)break;_[A||"#"+E]=b}if(!b){const E=Object.entries(_).map(([q,K])=>`adapter ${q} `+(K===!1?"is not supported by the environment":"is not available in the build"));let A=r?E.length>1?`since :
`+E.map(ac).join(`
`):" "+ac(E[0]):"as no adapter specified";throw new We("There is no suitable adapter to dispatch the request "+A,"ERR_NOT_SUPPORT")}return b},adapters:us};function ns(u){if(u.cancelToken&&u.cancelToken.throwIfRequested(),u.signal&&u.signal.aborted)throw new Hr(null,u)}function lc(u){return ns(u),u.headers=Tt.from(u.headers),u.data=rs.call(u,u.transformRequest),["post","put","patch"].indexOf(u.method)!==-1&&u.headers.setContentType("application/x-www-form-urlencoded",!1),qc.getAdapter(u.adapter||ln.adapter)(u).then(function(b){return ns(u),b.data=rs.call(u,u.transformResponse,b),b.headers=Tt.from(b.headers),b},function(b){return Dc(b)||(ns(u),b&&b.response&&(b.response.data=rs.call(u,u.transformResponse,b.response),b.response.headers=Tt.from(b.response.headers))),Promise.reject(b)})}const Vc="1.7.2",Os={};["object","boolean","number","function","string","symbol"].forEach((u,r)=>{Os[u]=function(b){return typeof b===u||"a"+(r<1?"n ":" ")+u}});const cc={};Os.transitional=function(r,c,b){function _(E,A){return"[Axios v"+Vc+"] Transitional option '"+E+"'"+A+(b?". "+b:"")}return(E,A,q)=>{if(r===!1)throw new We(_(A," has been removed"+(c?" in "+c:"")),We.ERR_DEPRECATED);return c&&!cc[A]&&(cc[A]=!0,console.warn(_(A," has been deprecated since v"+c+" and will be removed in the near future"))),r?r(E,A,q):!0}};function Ed(u,r,c){if(typeof u!="object")throw new We("options must be an object",We.ERR_BAD_OPTION_VALUE);const b=Object.keys(u);let _=b.length;for(;_-- >0;){const E=b[_],A=r[E];if(A){const q=u[E],K=q===void 0||A(q,E,u);if(K!==!0)throw new We("option "+E+" must be "+K,We.ERR_BAD_OPTION_VALUE);continue}if(c!==!0)throw new We("Unknown option "+E,We.ERR_BAD_OPTION)}}const hs={assertOptions:Ed,validators:Os},ur=hs.validators;let xr=class{constructor(r){this.defaults=r,this.interceptors={request:new tc,response:new tc}}async request(r,c){try{return await this._request(r,c)}catch(b){if(b instanceof Error){let _;Error.captureStackTrace?Error.captureStackTrace(_={}):_=new Error;const E=_.stack?_.stack.replace(/^.+\n/,""):"";try{b.stack?E&&!String(b.stack).endsWith(E.replace(/^.+\n.+\n/,""))&&(b.stack+=`
`+E):b.stack=E}catch{}}throw b}}_request(r,c){typeof r=="string"?(c=c||{},c.url=r):c=r||{},c=Nr(this.defaults,c);const{transitional:b,paramsSerializer:_,headers:E}=c;b!==void 0&&hs.assertOptions(b,{silentJSONParsing:ur.transitional(ur.boolean),forcedJSONParsing:ur.transitional(ur.boolean),clarifyTimeoutError:ur.transitional(ur.boolean)},!1),_!=null&&(le.isFunction(_)?c.paramsSerializer={serialize:_}:hs.assertOptions(_,{encode:ur.function,serialize:ur.function},!0)),c.method=(c.method||this.defaults.method||"get").toLowerCase();let A=E&&le.merge(E.common,E[c.method]);E&&le.forEach(["delete","get","head","post","put","patch","common"],xe=>{delete E[xe]}),c.headers=Tt.concat(A,E);const q=[];let K=!0;this.interceptors.request.forEach(function(Ce){typeof Ce.runWhen=="function"&&Ce.runWhen(c)===!1||(K=K&&Ce.synchronous,q.unshift(Ce.fulfilled,Ce.rejected))});const se=[];this.interceptors.response.forEach(function(Ce){se.push(Ce.fulfilled,Ce.rejected)});let F,Re=0,Ke;if(!K){const xe=[lc.bind(this),void 0];for(xe.unshift.apply(xe,q),xe.push.apply(xe,se),Ke=xe.length,F=Promise.resolve(c);Re<Ke;)F=F.then(xe[Re++],xe[Re++]);return F}Ke=q.length;let Je=c;for(Re=0;Re<Ke;){const xe=q[Re++],Ce=q[Re++];try{Je=xe(Je)}catch(qe){Ce.call(this,qe);break}}try{F=lc.call(this,Je)}catch(xe){return Promise.reject(xe)}for(Re=0,Ke=se.length;Re<Ke;)F=F.then(se[Re++],se[Re++]);return F}getUri(r){r=Nr(this.defaults,r);const c=$c(r.baseURL,r.url);return jc(c,r.params,r.paramsSerializer)}};le.forEach(["delete","get","head","options"],function(r){xr.prototype[r]=function(c,b){return this.request(Nr(b||{},{method:r,url:c,data:(b||{}).data}))}});le.forEach(["post","put","patch"],function(r){function c(b){return function(E,A,q){return this.request(Nr(q||{},{method:r,headers:b?{"Content-Type":"multipart/form-data"}:{},url:E,data:A}))}}xr.prototype[r]=c(),xr.prototype[r+"Form"]=c(!0)});let Sd=class zc{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let c;this.promise=new Promise(function(E){c=E});const b=this;this.promise.then(_=>{if(!b._listeners)return;let E=b._listeners.length;for(;E-- >0;)b._listeners[E](_);b._listeners=null}),this.promise.then=_=>{let E;const A=new Promise(q=>{b.subscribe(q),E=q}).then(_);return A.cancel=function(){b.unsubscribe(E)},A},r(function(E,A,q){b.reason||(b.reason=new Hr(E,A,q),c(b.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const c=this._listeners.indexOf(r);c!==-1&&this._listeners.splice(c,1)}static source(){let r;return{token:new zc(function(_){r=_}),cancel:r}}};function Ad(u){return function(c){return u.apply(null,c)}}function Cd(u){return le.isObject(u)&&u.isAxiosError===!0}const fs={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(fs).forEach(([u,r])=>{fs[r]=u});function Kc(u){const r=new xr(u),c=Ac(xr.prototype.request,r);return le.extend(c,xr.prototype,r,{allOwnKeys:!0}),le.extend(c,r,null,{allOwnKeys:!0}),c.create=function(_){return Kc(Nr(u,_))},c}const ct=Kc(ln);ct.Axios=xr;ct.CanceledError=Hr;ct.CancelToken=Sd;ct.isCancel=Dc;ct.VERSION=Vc;ct.toFormData=li;ct.AxiosError=We;ct.Cancel=ct.CanceledError;ct.all=function(r){return Promise.all(r)};ct.spread=Ad;ct.isAxiosError=Cd;ct.mergeConfig=Nr;ct.AxiosHeaders=Tt;ct.formToJSON=u=>Lc(le.isHTMLForm(u)?new FormData(u):u);ct.getAdapter=qc.getAdapter;ct.HttpStatusCode=fs;ct.default=ct;const{Axios:Pp,AxiosError:xp,CanceledError:Bp,isCancel:Np,CancelToken:Mp,VERSION:jp,all:Up,Cancel:Lp,isAxiosError:Dp,spread:Fp,toFormData:$p,AxiosHeaders:Td,HttpStatusCode:Wp,formToJSON:Hp,getAdapter:qp,mergeConfig:Vp}=ct;class Hn extends Error{constructor(c,b,_,E,A,q){super(_[0]);Be(this,"errorType");Be(this,"errors");Be(this,"validationMessages");Be(this,"innerError");Be(this,"logKey");Be(this,"command");this.command=c,this.errorType=b?"ValidationError":E?"CommunicationError":"ExecutionError",this.innerError=E,this.errors=_,this.validationMessages=A,this.logKey=q}}var Qn;const Yn=class Yn{constructor(r,c,b){Be(this,"mqttClientId");Be(this,"domainName");Be(this,"transactionNumber");Be(this,"_brand");this.mqttClientId=r??"",this.domainName=c??"",this.transactionNumber=b??0,Ye["CK.Observable.MQTTWatcher.IMQTTObservableWatcherStartOrRestartCommand"].set(this)}get commandModel(){return L(Yn,Qn)}};Qn=new WeakMap,Qe(Yn,Qn,{applyAmbientValues(r,c,b){}});let qn=Yn;var Gn;const Xn=class Xn{constructor(r){Be(this,"sliderValue");Be(this,"_brand");this.sliderValue=r??0,Ye["CK.Observable.ServerSample.App.ISliderCommand"].set(this)}get commandModel(){return L(Xn,Gn)}};Gn=new WeakMap,Qe(Xn,Gn,{applyAmbientValues(r,c,b){}});let Vn=Xn;var Zn;const ei=class ei{constructor(r,c,b){Be(this,"clientId");Be(this,"domainName");Be(this,"transactionNumber");Be(this,"_brand");this.clientId=r??"",this.domainName=c??"",this.transactionNumber=b??0,Ye["CK.Observable.SignalRWatcher.ISignalRObservableWatcherStartOrRestartCommand"].set(this)}get commandModel(){return L(ei,Zn)}};Zn=new WeakMap,Qe(ei,Zn,{applyAmbientValues(r,c,b){}});let zn=ei;class Id{constructor(r,c,b){Be(this,"result");Be(this,"validationMessages");Be(this,"correlationId");Be(this,"_brand");this.result=r,this.validationMessages=c,this.correlationId=b,Ye.AspNetResult.set(this)}}class Jc{constructor(r,c,b){Be(this,"isValidationError");Be(this,"errors");Be(this,"logKey");Be(this,"_brand");this.isValidationError=r??!1,this.errors=c??[],this.logKey=b,Ye.AspNetCrisResultError.set(this)}}class kd{constructor(r,c,b,_){Be(this,"currentCultureName");Be(this,"actorId");Be(this,"actualActorId");Be(this,"deviceId");Be(this,"_brand");this.currentCultureName=r??"",this.actorId=c??0,this.actualActorId=b??0,this.deviceId=_??"",Ye["CK.Cris.AmbientValues.IAmbientValues"].set(this)}}var dr;(function(u){u[u.None=0]="None",u[u.Info=4]="Info",u[u.Warn=8]="Warn",u[u.Error=16]="Error"})(dr||(dr={}));var ti;const ir=class ir{constructor(r,c,b=0){Be(this,"level");Be(this,"message");Be(this,"depth");this.level=r,this.message=c,this.depth=b,Ye.SimpleUserMessage.set(this)}static get invalid(){return L(ir,ti)??Ue(ir,ti,new ir(dr.None,"",0))}toString(){return"["+dr[this.level]+"] "+this.message}toJSON(){return this.level!==dr.None?[this.level,this.message,this.depth]:[0]}static parse(r){if(r instanceof Array){if(r.length===1){if(r[0]===0)return ir.invalid}else if(r.length==3){const c=r[0];if(c===dr.Info||c===dr.Warn||c===dr.Error){const b=r[1];if(typeof b=="string"){const _=r[2];if(typeof _=="number"&&_>=0&&_<=255)return new ir(c,b,_)}}}}throw new Error("Unable to parse '{{o}}' as SimpleUserMessage.")}};ti=new WeakMap,Qe(ir,ti);let ds=ir;const Ye={toTypedJson(u){if(u==null)return null;const r=u[St];if(!r)throw new Error("Untyped object. A type must be specified with CTSType.");return[r.name,r.json(u)]},fromTypedJson(u){if(u==null)return;if(!(u instanceof Array&&u.length===2))throw new Error("Expected 2-cells array.");var r=Ye[u[0]];if(!r)throw new Error(`Invalid type name: ${u[0]}.`);if(!r.set)throw new Error(`Type name '${u[0]}' is not serializable.`);const c=r.nosj(u[1]);return c!==null&&typeof c=="object"?r.set(c):c},stringify(u,r=!0){var c=Ye.toTypedJson(u);return JSON.stringify(r?c:c[1])},parse(u){return Ye.fromTypedJson(JSON.parse(u))},"CK.Observable.MQTTWatcher.IMQTTObservableWatcherStartOrRestartCommand":{name:"CK.Observable.MQTTWatcher.IMQTTObservableWatcherStartOrRestartCommand",set(u){return u[St]=this,u},json(u){return u},nosj(u){if(u!=null)return new qn(Ye.string.nosj(u.mqttClientId),Ye.string.nosj(u.domainName),Ye.int.nosj(u.transactionNumber))}},"CK.Observable.ServerSample.App.ISliderCommand":{name:"CK.Observable.ServerSample.App.ISliderCommand",set(u){return u[St]=this,u},json(u){return u},nosj(u){if(u!=null)return new Vn(Ye.float.nosj(u.sliderValue))}},"CK.Observable.SignalRWatcher.ISignalRObservableWatcherStartOrRestartCommand":{name:"CK.Observable.SignalRWatcher.ISignalRObservableWatcherStartOrRestartCommand",set(u){return u[St]=this,u},json(u){return u},nosj(u){if(u!=null)return new zn(Ye.string.nosj(u.clientId),Ye.string.nosj(u.domainName),Ye.int.nosj(u.transactionNumber))}},AspNetResult:{name:"AspNetResult",set(u){return u[St]=this,u},json(u){if(!u)return null;let r={};return r.result=Ye.toTypedJson(u.result),r.validationMessages=u.validationMessages,r.correlationId=u.correlationId,r},nosj(u){if(u!=null)return new Id(Ye.fromTypedJson(u.result),Ye["L(SimpleUserMessage)"].nosj(u.validationMessages),Ye.string.nosj(u.correlationId))}},AspNetCrisResultError:{name:"AspNetCrisResultError",set(u){return u[St]=this,u},json(u){return u},nosj(u){if(u!=null)return new Jc(Ye.bool.nosj(u.isValidationError),Ye["L(string)"].nosj(u.errors),Ye.string.nosj(u.logKey))}},"CK.Cris.AmbientValues.IAmbientValues":{name:"CK.Cris.AmbientValues.IAmbientValues",set(u){return u[St]=this,u},json(u){return u},nosj(u){if(u!=null)return new kd(Ye.string.nosj(u.currentCultureName),Ye.int.nosj(u.actorId),Ye.int.nosj(u.actualActorId),Ye.string.nosj(u.deviceId))}},"CK.Cris.AmbientValues.IAmbientValuesCollectCommand":{name:"CK.Cris.AmbientValues.IAmbientValuesCollectCommand",set(u){return u[St]=this,u},json(u){return u},nosj(u){if(u!=null)return new Kn}},"CK.Cris.ICommand<CK.Cris.AmbientValues.IAmbientValues>":{name:"CK.Cris.ICommand<CK.Cris.AmbientValues.IAmbientValues>"},string:{name:"string",set(u){return u=Object(u),u[St]=this,u},json(u){return u},nosj(u){return u??void 0}},"CK.Cris.ICommand<string>":{name:"CK.Cris.ICommand<string>"},"CK.Cris.ICommand":{name:"CK.Cris.ICommand"},"CK.Cris.IAbstractCommand":{name:"CK.Cris.IAbstractCommand"},"CK.Cris.ICrisPoco":{name:"CK.Cris.ICrisPoco"},"CK.Core.IPoco":{name:"CK.Core.IPoco"},int:{name:"int",set(u){return u=Object(u),u[St]=this,u},json(u){return u},nosj(u){return u??void 0}},bool:{name:"bool",set(u){return u=Object(u),u[St]=this,u},json(u){return u},nosj(u){return u??void 0}},object:{name:"object"},SimpleUserMessage:{name:"SimpleUserMessage",set(u){return u[St]=this,u},json(u){return u},nosj(u){return u!=null?ds.parse(u):void 0}},"L(SimpleUserMessage)":{name:"L(SimpleUserMessage)",set(u){return u[St]=this,u},json(u){return u},nosj(u){if(u==null)return;if(!(u instanceof Array))throw new Error("Expected Array.");const r=Ye.SimpleUserMessage;return u.map(r.nosj)}},"L(string?)":{name:"L(string?)",set(u){return u[St]=this,u},json(u){return u},nosj(u){if(u==null)return;if(!(u instanceof Array))throw new Error("Expected Array.");const r=Ye.string;return u.map(r.nosj)}},"L(string)":{name:"L(string)",json(u){return u},nosj(u){if(u==null)return;if(!(u instanceof Array))throw new Error("Expected Array.");const r=Ye.string;return u.map(r.nosj)}},float:{name:"float",set(u){return u=Object(u),u[St]=this,u},json(u){return u},nosj(u){return u??void 0}}},St=Symbol.for("CK.CTSType");var ri;const ni=class ni{constructor(){Be(this,"_brand");Ye["CK.Cris.AmbientValues.IAmbientValuesCollectCommand"].set(this)}get commandModel(){return L(ni,ri)}};ri=new WeakMap,Qe(ni,ri,{applyAmbientValues(r,c,b){}});let Kn=ni;class Rd{constructor(){Be(this,"currentCultureName");Be(this,"actorId");Be(this,"actualActorId");Be(this,"deviceId");this.currentCultureName=null,this.actorId=null,this.actualActorId=null,this.deviceId=null}}class Od{constructor(){Be(this,"_ambientValuesRequest");Be(this,"_ambientValues");Be(this,"_subscribers");Be(this,"_isConnected");Be(this,"ambientValuesOverride");this.ambientValuesOverride=new Rd,this._isConnected=!1,this._subscribers=new Set}get isConnected(){return this._isConnected}addOnIsConnectedChanged(r){r&&this._subscribers.add(r)}removeOnIsConnectedChange(r){return this._subscribers.delete(r)}setIsConnected(r){this._isConnected!==r&&(this._isConnected=r,r||this.updateAmbientValuesAsync(),this._subscribers.forEach(c=>c(this)))}updateAmbientValuesAsync(){return this._ambientValuesRequest?this._ambientValuesRequest:(this._ambientValues=void 0,this._ambientValuesRequest=this.waitForAmbientValuesAsync())}async sendAsync(r){let c=this._ambientValues;return c===void 0&&(c=await this.updateAmbientValuesAsync()),r.commandModel.applyAmbientValues(r,c,this.ambientValuesOverride),await this.doSendAsync(r)}async sendOrThrowAsync(r){const c=await this.sendAsync(r);if(c.result instanceof Hn)throw c.result;return c.result}async waitForAmbientValuesAsync(){for(;;){var r=await this.doSendAsync(new Kn);if(r.result instanceof Hn)console.error("Error while getting AmbientValues. Retrying.",r.result),this.setIsConnected(!1);else return this._ambientValuesRequest=void 0,this._ambientValues=r.result,this.setIsConnected(!0),this._ambientValues}}}const Pd={responseType:"text",headers:{common:new Td({"Content-Type":"application/json"})}};class xd extends Od{constructor(c,b){super();Be(this,"axios");Be(this,"crisEndpointUrl");Be(this,"axiosConfig");this.axios=c,this.crisEndpointUrl=b,this.axiosConfig=Pd}async doSendAsync(c){try{const _=JSON.stringify(Ye.toTypedJson(c)),E=await this.axios.post(this.crisEndpointUrl,_,this.axiosConfig),A=Ye.AspNetResult.nosj(JSON.parse(E.data));let q=A.result;return q instanceof Jc&&(q=new Hn(c,q.isValidationError,q.errors,void 0,A.validationMessages,q.logKey)),{command:c,result:q,validationMessages:A.validationMessages,correlationId:A.correlationId}}catch(_){var b;return _ instanceof Error?b=_:(console.error(_),b=new Error(`Unhandled error ${_}.`)),this.setIsConnected(!1),{command:c,result:new Hn(c,!1,["Communication error"],b)}}}}class Fr extends Error{constructor(r,c){const b=new.target.prototype;super(`${r}: Status code '${c}'`),this.statusCode=c,this.__proto__=b}}class Ps extends Error{constructor(r="A timeout occurred."){const c=new.target.prototype;super(r),this.__proto__=c}}class nn extends Error{constructor(r="An abort occurred."){const c=new.target.prototype;super(r),this.__proto__=c}}class Bd extends Error{constructor(r,c){const b=new.target.prototype;super(r),this.transport=c,this.errorType="UnsupportedTransportError",this.__proto__=b}}class Nd extends Error{constructor(r,c){const b=new.target.prototype;super(r),this.transport=c,this.errorType="DisabledTransportError",this.__proto__=b}}class Md extends Error{constructor(r,c){const b=new.target.prototype;super(r),this.transport=c,this.errorType="FailedToStartTransportError",this.__proto__=b}}class jd extends Error{constructor(r){const c=new.target.prototype;super(r),this.errorType="FailedToNegotiateWithServerError",this.__proto__=c}}class Ud extends Error{constructor(r,c){const b=new.target.prototype;super(r),this.innerErrors=c,this.__proto__=b}}class Qc{constructor(r,c,b){this.statusCode=r,this.statusText=c,this.content=b}}class xs{get(r,c){return this.send({...c,method:"GET",url:r})}post(r,c){return this.send({...c,method:"POST",url:r})}delete(r,c){return this.send({...c,method:"DELETE",url:r})}getCookieString(r){return""}}var be;(function(u){u[u.Trace=0]="Trace",u[u.Debug=1]="Debug",u[u.Information=2]="Information",u[u.Warning=3]="Warning",u[u.Error=4]="Error",u[u.Critical=5]="Critical",u[u.None=6]="None"})(be||(be={}));class on{constructor(){}log(r,c){}}on.instance=new on;const Ld="6.0.23";class gt{static isRequired(r,c){if(r==null)throw new Error(`The '${c}' argument is required.`)}static isNotEmpty(r,c){if(!r||r.match(/^\s*$/))throw new Error(`The '${c}' argument should not be empty.`)}static isIn(r,c,b){if(!(r in c))throw new Error(`Unknown ${b} value: ${r}.`)}}class wt{static get isBrowser(){return typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return typeof self=="object"&&"importScripts"in self}static get isReactNative(){return typeof window=="object"&&typeof window.document>"u"}static get isNode(){return!this.isBrowser&&!this.isWebWorker&&!this.isReactNative}}function sn(u,r){let c="";return Bs(u)?(c=`Binary data of length ${u.byteLength}`,r&&(c+=`. Content: '${Dd(u)}'`)):typeof u=="string"&&(c=`String data of length ${u.length}`,r&&(c+=`. Content: '${u}'`)),c}function Dd(u){const r=new Uint8Array(u);let c="";return r.forEach(b=>{const _=b<16?"0":"";c+=`0x${_}${b.toString(16)} `}),c.substr(0,c.length-1)}function Bs(u){return u&&typeof ArrayBuffer<"u"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}async function Yc(u,r,c,b,_,E,A){let q={};if(_){const Ke=await _();Ke&&(q={Authorization:`Bearer ${Ke}`})}const[K,se]=$r();q[K]=se,u.log(be.Trace,`(${r} transport) sending data. ${sn(E,A.logMessageContent)}.`);const F=Bs(E)?"arraybuffer":"text",Re=await c.post(b,{content:E,headers:{...q,...A.headers},responseType:F,timeout:A.timeout,withCredentials:A.withCredentials});u.log(be.Trace,`(${r} transport) request complete. Response status: ${Re.statusCode}.`)}function Fd(u){return u===void 0?new Jn(be.Information):u===null?on.instance:u.log!==void 0?u:new Jn(u)}class $d{constructor(r,c){this._subject=r,this._observer=c}dispose(){const r=this._subject.observers.indexOf(this._observer);r>-1&&this._subject.observers.splice(r,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(c=>{})}}class Jn{constructor(r){this._minLevel=r,this.out=console}log(r,c){if(r>=this._minLevel){const b=`[${new Date().toISOString()}] ${be[r]}: ${c}`;switch(r){case be.Critical:case be.Error:this.out.error(b);break;case be.Warning:this.out.warn(b);break;case be.Information:this.out.info(b);break;default:this.out.log(b);break}}}}function $r(){let u="X-SignalR-User-Agent";return wt.isNode&&(u="User-Agent"),[u,Wd(Ld,Hd(),Vd(),qd())]}function Wd(u,r,c,b){let _="Microsoft SignalR/";const E=u.split(".");return _+=`${E[0]}.${E[1]}`,_+=` (${u}; `,r&&r!==""?_+=`${r}; `:_+="Unknown OS; ",_+=`${c}`,b?_+=`; ${b}`:_+="; Unknown Runtime Version",_+=")",_}function Hd(){if(wt.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function qd(){if(wt.isNode)return process.versions.node}function Vd(){return wt.isNode?"NodeJS":"Browser"}function uc(u){return u.stack?u.stack:u.message?u.message:`${u}`}function zd(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}class Kd extends xs{constructor(r){if(super(),this._logger=r,typeof fetch>"u"){const c=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(c("tough-cookie")).CookieJar,this._fetchType=c("node-fetch"),this._fetchType=c("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(zd());if(typeof AbortController>"u"){const c=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=c("abort-controller")}else this._abortControllerType=AbortController}async send(r){if(r.abortSignal&&r.abortSignal.aborted)throw new nn;if(!r.method)throw new Error("No method defined.");if(!r.url)throw new Error("No url defined.");const c=new this._abortControllerType;let b;r.abortSignal&&(r.abortSignal.onabort=()=>{c.abort(),b=new nn});let _=null;if(r.timeout){const K=r.timeout;_=setTimeout(()=>{c.abort(),this._logger.log(be.Warning,"Timeout from HTTP request."),b=new Ps},K)}let E;try{E=await this._fetchType(r.url,{body:r.content,cache:"no-cache",credentials:r.withCredentials===!0?"include":"same-origin",headers:{"Content-Type":"text/plain;charset=UTF-8","X-Requested-With":"XMLHttpRequest",...r.headers},method:r.method,mode:"cors",redirect:"follow",signal:c.signal})}catch(K){throw b||(this._logger.log(be.Warning,`Error from HTTP request. ${K}.`),K)}finally{_&&clearTimeout(_),r.abortSignal&&(r.abortSignal.onabort=null)}if(!E.ok){const K=await hc(E,"text");throw new Fr(K||E.statusText,E.status)}const q=await hc(E,r.responseType);return new Qc(E.status,E.statusText,q)}getCookieString(r){let c="";return wt.isNode&&this._jar&&this._jar.getCookies(r,(b,_)=>c=_.join("; ")),c}}function hc(u,r){let c;switch(r){case"arraybuffer":c=u.arrayBuffer();break;case"text":c=u.text();break;case"blob":case"document":case"json":throw new Error(`${r} is not supported.`);default:c=u.text();break}return c}class Jd extends xs{constructor(r){super(),this._logger=r}send(r){return r.abortSignal&&r.abortSignal.aborted?Promise.reject(new nn):r.method?r.url?new Promise((c,b)=>{const _=new XMLHttpRequest;_.open(r.method,r.url,!0),_.withCredentials=r.withCredentials===void 0?!0:r.withCredentials,_.setRequestHeader("X-Requested-With","XMLHttpRequest"),_.setRequestHeader("Content-Type","text/plain;charset=UTF-8");const E=r.headers;E&&Object.keys(E).forEach(A=>{_.setRequestHeader(A,E[A])}),r.responseType&&(_.responseType=r.responseType),r.abortSignal&&(r.abortSignal.onabort=()=>{_.abort(),b(new nn)}),r.timeout&&(_.timeout=r.timeout),_.onload=()=>{r.abortSignal&&(r.abortSignal.onabort=null),_.status>=200&&_.status<300?c(new Qc(_.status,_.statusText,_.response||_.responseText)):b(new Fr(_.response||_.responseText||_.statusText,_.status))},_.onerror=()=>{this._logger.log(be.Warning,`Error from HTTP request. ${_.status}: ${_.statusText}.`),b(new Fr(_.statusText,_.status))},_.ontimeout=()=>{this._logger.log(be.Warning,"Timeout from HTTP request."),b(new Ps)},_.send(r.content||"")}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class Qd extends xs{constructor(r){if(super(),typeof fetch<"u"||wt.isNode)this._httpClient=new Kd(r);else if(typeof XMLHttpRequest<"u")this._httpClient=new Jd(r);else throw new Error("No usable HttpClient found.")}send(r){return r.abortSignal&&r.abortSignal.aborted?Promise.reject(new nn):r.method?r.url?this._httpClient.send(r):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(r){return this._httpClient.getCookieString(r)}}class Rt{static write(r){return`${r}${Rt.RecordSeparator}`}static parse(r){if(r[r.length-1]!==Rt.RecordSeparator)throw new Error("Message is incomplete.");const c=r.split(Rt.RecordSeparator);return c.pop(),c}}Rt.RecordSeparatorCode=30;Rt.RecordSeparator=String.fromCharCode(Rt.RecordSeparatorCode);class Yd{writeHandshakeRequest(r){return Rt.write(JSON.stringify(r))}parseHandshakeResponse(r){let c,b;if(Bs(r)){const q=new Uint8Array(r),K=q.indexOf(Rt.RecordSeparatorCode);if(K===-1)throw new Error("Message is incomplete.");const se=K+1;c=String.fromCharCode.apply(null,Array.prototype.slice.call(q.slice(0,se))),b=q.byteLength>se?q.slice(se).buffer:null}else{const q=r,K=q.indexOf(Rt.RecordSeparator);if(K===-1)throw new Error("Message is incomplete.");const se=K+1;c=q.substring(0,se),b=q.length>se?q.substring(se):null}const _=Rt.parse(c),E=JSON.parse(_[0]);if(E.type)throw new Error("Expected a handshake response from the server.");return[b,E]}}var tt;(function(u){u[u.Invocation=1]="Invocation",u[u.StreamItem=2]="StreamItem",u[u.Completion=3]="Completion",u[u.StreamInvocation=4]="StreamInvocation",u[u.CancelInvocation=5]="CancelInvocation",u[u.Ping=6]="Ping",u[u.Close=7]="Close"})(tt||(tt={}));let Gd=class{constructor(){this.observers=[]}next(r){for(const c of this.observers)c.next(r)}error(r){for(const c of this.observers)c.error&&c.error(r)}complete(){for(const r of this.observers)r.complete&&r.complete()}subscribe(r){return this.observers.push(r),new $d(this,r)}};const Xd=30*1e3,Zd=15*1e3;var st;(function(u){u.Disconnected="Disconnected",u.Connecting="Connecting",u.Connected="Connected",u.Disconnecting="Disconnecting",u.Reconnecting="Reconnecting"})(st||(st={}));class Ns{constructor(r,c,b,_){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(be.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://docs.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},gt.isRequired(r,"connection"),gt.isRequired(c,"logger"),gt.isRequired(b,"protocol"),this.serverTimeoutInMilliseconds=Xd,this.keepAliveIntervalInMilliseconds=Zd,this._logger=c,this._protocol=b,this.connection=r,this._reconnectPolicy=_,this._handshakeProtocol=new Yd,this.connection.onreceive=E=>this._processIncomingData(E),this.connection.onclose=E=>this._connectionClosed(E),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=st.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:tt.Ping})}static create(r,c,b,_){return new Ns(r,c,b,_)}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(r){if(this._connectionState!==st.Disconnected&&this._connectionState!==st.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!r)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=r}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==st.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=st.Connecting,this._logger.log(be.Debug,"Starting HubConnection.");try{await this._startInternal(),wt.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=st.Connected,this._connectionStarted=!0,this._logger.log(be.Debug,"HubConnection connected successfully.")}catch(r){return this._connectionState=st.Disconnected,this._logger.log(be.Debug,`HubConnection failed to start successfully because of error '${r}'.`),Promise.reject(r)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const r=new Promise((c,b)=>{this._handshakeResolver=c,this._handshakeRejecter=b});await this.connection.start(this._protocol.transferFormat);try{const c={protocol:this._protocol.name,version:this._protocol.version};if(this._logger.log(be.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(c)),this._logger.log(be.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await r,this._stopDuringStartError)throw this._stopDuringStartError}catch(c){throw this._logger.log(be.Debug,`Hub handshake failed with error '${c}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(c),c}}async stop(){const r=this._startPromise;this._stopPromise=this._stopInternal(),await this._stopPromise;try{await r}catch{}}_stopInternal(r){return this._connectionState===st.Disconnected?(this._logger.log(be.Debug,`Call to HubConnection.stop(${r}) ignored because it is already in the disconnected state.`),Promise.resolve()):this._connectionState===st.Disconnecting?(this._logger.log(be.Debug,`Call to HttpConnection.stop(${r}) ignored because the connection is already in the disconnecting state.`),this._stopPromise):(this._connectionState=st.Disconnecting,this._logger.log(be.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(be.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=r||new Error("The connection was stopped before the hub handshake could complete."),this.connection.stop(r)))}stream(r,...c){const[b,_]=this._replaceStreamingParams(c),E=this._createStreamInvocation(r,c,_);let A;const q=new Gd;return q.cancelCallback=()=>{const K=this._createCancelInvocation(E.invocationId);return delete this._callbacks[E.invocationId],A.then(()=>this._sendWithProtocol(K))},this._callbacks[E.invocationId]=(K,se)=>{if(se){q.error(se);return}else K&&(K.type===tt.Completion?K.error?q.error(new Error(K.error)):q.complete():q.next(K.item))},A=this._sendWithProtocol(E).catch(K=>{q.error(K),delete this._callbacks[E.invocationId]}),this._launchStreams(b,A),q}_sendMessage(r){return this._resetKeepAliveInterval(),this.connection.send(r)}_sendWithProtocol(r){return this._sendMessage(this._protocol.writeMessage(r))}send(r,...c){const[b,_]=this._replaceStreamingParams(c),E=this._sendWithProtocol(this._createInvocation(r,c,!0,_));return this._launchStreams(b,E),E}invoke(r,...c){const[b,_]=this._replaceStreamingParams(c),E=this._createInvocation(r,c,!1,_);return new Promise((q,K)=>{this._callbacks[E.invocationId]=(F,Re)=>{if(Re){K(Re);return}else F&&(F.type===tt.Completion?F.error?K(new Error(F.error)):q(F.result):K(new Error(`Unexpected message type: ${F.type}`)))};const se=this._sendWithProtocol(E).catch(F=>{K(F),delete this._callbacks[E.invocationId]});this._launchStreams(b,se)})}on(r,c){!r||!c||(r=r.toLowerCase(),this._methods[r]||(this._methods[r]=[]),this._methods[r].indexOf(c)===-1&&this._methods[r].push(c))}off(r,c){if(!r)return;r=r.toLowerCase();const b=this._methods[r];if(b)if(c){const _=b.indexOf(c);_!==-1&&(b.splice(_,1),b.length===0&&delete this._methods[r])}else delete this._methods[r]}onclose(r){r&&this._closedCallbacks.push(r)}onreconnecting(r){r&&this._reconnectingCallbacks.push(r)}onreconnected(r){r&&this._reconnectedCallbacks.push(r)}_processIncomingData(r){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(r=this._processHandshakeResponse(r),this._receivedHandshakeResponse=!0),r){const c=this._protocol.parseMessages(r,this._logger);for(const b of c)switch(b.type){case tt.Invocation:this._invokeClientMethod(b);break;case tt.StreamItem:case tt.Completion:{const _=this._callbacks[b.invocationId];if(_){b.type===tt.Completion&&delete this._callbacks[b.invocationId];try{_(b)}catch(E){this._logger.log(be.Error,`Stream callback threw error: ${uc(E)}`)}}break}case tt.Ping:break;case tt.Close:{this._logger.log(be.Information,"Close message received from server.");const _=b.error?new Error("Server returned an error on close: "+b.error):void 0;b.allowReconnect===!0?this.connection.stop(_):this._stopPromise=this._stopInternal(_);break}default:this._logger.log(be.Warning,`Invalid message type: ${b.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(r){let c,b;try{[b,c]=this._handshakeProtocol.parseHandshakeResponse(r)}catch(_){const E="Error parsing handshake response: "+_;this._logger.log(be.Error,E);const A=new Error(E);throw this._handshakeRejecter(A),A}if(c.error){const _="Server returned handshake error: "+c.error;this._logger.log(be.Error,_);const E=new Error(_);throw this._handshakeRejecter(E),E}else this._logger.log(be.Debug,"Server handshake complete.");return this._handshakeResolver(),b}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let r=this._nextKeepAlive-new Date().getTime();r<0&&(r=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===st.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}},r)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}_invokeClientMethod(r){const c=this._methods[r.target.toLowerCase()];if(c){try{c.forEach(b=>b.apply(this,r.arguments))}catch(b){this._logger.log(be.Error,`A callback for the method ${r.target.toLowerCase()} threw error '${b}'.`)}if(r.invocationId){const b="Server requested a response, which is not supported in this version of the client.";this._logger.log(be.Error,b),this._stopPromise=this._stopInternal(new Error(b))}}else this._logger.log(be.Warning,`No client method with the name '${r.target}' found.`)}_connectionClosed(r){this._logger.log(be.Debug,`HubConnection.connectionClosed(${r}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||r||new Error("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(r||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===st.Disconnecting?this._completeClose(r):this._connectionState===st.Connected&&this._reconnectPolicy?this._reconnect(r):this._connectionState===st.Connected&&this._completeClose(r)}_completeClose(r){if(this._connectionStarted){this._connectionState=st.Disconnected,this._connectionStarted=!1,wt.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(c=>c.apply(this,[r]))}catch(c){this._logger.log(be.Error,`An onclose callback called with error '${r}' threw error '${c}'.`)}}}async _reconnect(r){const c=Date.now();let b=0,_=r!==void 0?r:new Error("Attempting to reconnect due to a unknown error."),E=this._getNextRetryDelay(b++,0,_);if(E===null){this._logger.log(be.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(r);return}if(this._connectionState=st.Reconnecting,r?this._logger.log(be.Information,`Connection reconnecting because of error '${r}'.`):this._logger.log(be.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(A=>A.apply(this,[r]))}catch(A){this._logger.log(be.Error,`An onreconnecting callback called with error '${r}' threw error '${A}'.`)}if(this._connectionState!==st.Reconnecting){this._logger.log(be.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;E!==null;){if(this._logger.log(be.Information,`Reconnect attempt number ${b} will start in ${E} ms.`),await new Promise(A=>{this._reconnectDelayHandle=setTimeout(A,E)}),this._reconnectDelayHandle=void 0,this._connectionState!==st.Reconnecting){this._logger.log(be.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=st.Connected,this._logger.log(be.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(A=>A.apply(this,[this.connection.connectionId]))}catch(A){this._logger.log(be.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${A}'.`)}return}catch(A){if(this._logger.log(be.Information,`Reconnect attempt failed because of error '${A}'.`),this._connectionState!==st.Reconnecting){this._logger.log(be.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===st.Disconnecting&&this._completeClose();return}_=A instanceof Error?A:new Error(A.toString()),E=this._getNextRetryDelay(b++,Date.now()-c,_)}}this._logger.log(be.Information,`Reconnect retries have been exhausted after ${Date.now()-c} ms and ${b} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(r,c,b){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:c,previousRetryCount:r,retryReason:b})}catch(_){return this._logger.log(be.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${r}, ${c}) threw error '${_}'.`),null}}_cancelCallbacksWithError(r){const c=this._callbacks;this._callbacks={},Object.keys(c).forEach(b=>{const _=c[b];try{_(null,r)}catch(E){this._logger.log(be.Error,`Stream 'error' callback called with '${r}' threw error: ${uc(E)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(r,c,b,_){if(b)return _.length!==0?{arguments:c,streamIds:_,target:r,type:tt.Invocation}:{arguments:c,target:r,type:tt.Invocation};{const E=this._invocationId;return this._invocationId++,_.length!==0?{arguments:c,invocationId:E.toString(),streamIds:_,target:r,type:tt.Invocation}:{arguments:c,invocationId:E.toString(),target:r,type:tt.Invocation}}}_launchStreams(r,c){if(r.length!==0){c||(c=Promise.resolve());for(const b in r)r[b].subscribe({complete:()=>{c=c.then(()=>this._sendWithProtocol(this._createCompletionMessage(b)))},error:_=>{let E;_ instanceof Error?E=_.message:_&&_.toString?E=_.toString():E="Unknown error",c=c.then(()=>this._sendWithProtocol(this._createCompletionMessage(b,E)))},next:_=>{c=c.then(()=>this._sendWithProtocol(this._createStreamItemMessage(b,_)))}})}}_replaceStreamingParams(r){const c=[],b=[];for(let _=0;_<r.length;_++){const E=r[_];if(this._isObservable(E)){const A=this._invocationId;this._invocationId++,c[A]=E,b.push(A.toString()),r.splice(_,1)}}return[c,b]}_isObservable(r){return r&&r.subscribe&&typeof r.subscribe=="function"}_createStreamInvocation(r,c,b){const _=this._invocationId;return this._invocationId++,b.length!==0?{arguments:c,invocationId:_.toString(),streamIds:b,target:r,type:tt.StreamInvocation}:{arguments:c,invocationId:_.toString(),target:r,type:tt.StreamInvocation}}_createCancelInvocation(r){return{invocationId:r,type:tt.CancelInvocation}}_createStreamItemMessage(r,c){return{invocationId:r,item:c,type:tt.StreamItem}}_createCompletionMessage(r,c,b){return c?{error:c,invocationId:r,type:tt.Completion}:{invocationId:r,result:b,type:tt.Completion}}}const ep=[0,2e3,1e4,3e4,null];class fc{constructor(r){this._retryDelays=r!==void 0?[...r,null]:ep}nextRetryDelayInMilliseconds(r){return this._retryDelays[r.previousRetryCount]}}class Br{}Br.Authorization="Authorization";Br.Cookie="Cookie";var ht;(function(u){u[u.None=0]="None",u[u.WebSockets=1]="WebSockets",u[u.ServerSentEvents=2]="ServerSentEvents",u[u.LongPolling=4]="LongPolling"})(ht||(ht={}));var _t;(function(u){u[u.Text=1]="Text",u[u.Binary=2]="Binary"})(_t||(_t={}));let tp=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class dc{constructor(r,c,b,_){this._httpClient=r,this._accessTokenFactory=c,this._logger=b,this._pollAbort=new tp,this._options=_,this._running=!1,this.onreceive=null,this.onclose=null}get pollAborted(){return this._pollAbort.aborted}async connect(r,c){if(gt.isRequired(r,"url"),gt.isRequired(c,"transferFormat"),gt.isIn(c,_t,"transferFormat"),this._url=r,this._logger.log(be.Trace,"(LongPolling transport) Connecting."),c===_t.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[b,_]=$r(),E={[b]:_,...this._options.headers},A={abortSignal:this._pollAbort.signal,headers:E,timeout:1e5,withCredentials:this._options.withCredentials};c===_t.Binary&&(A.responseType="arraybuffer");const q=await this._getAccessToken();this._updateHeaderToken(A,q);const K=`${r}&_=${Date.now()}`;this._logger.log(be.Trace,`(LongPolling transport) polling: ${K}.`);const se=await this._httpClient.get(K,A);se.statusCode!==200?(this._logger.log(be.Error,`(LongPolling transport) Unexpected response code: ${se.statusCode}.`),this._closeError=new Fr(se.statusText||"",se.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,A)}async _getAccessToken(){return this._accessTokenFactory?await this._accessTokenFactory():null}_updateHeaderToken(r,c){if(r.headers||(r.headers={}),c){r.headers[Br.Authorization]=`Bearer ${c}`;return}r.headers[Br.Authorization]&&delete r.headers[Br.Authorization]}async _poll(r,c){try{for(;this._running;){const b=await this._getAccessToken();this._updateHeaderToken(c,b);try{const _=`${r}&_=${Date.now()}`;this._logger.log(be.Trace,`(LongPolling transport) polling: ${_}.`);const E=await this._httpClient.get(_,c);E.statusCode===204?(this._logger.log(be.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):E.statusCode!==200?(this._logger.log(be.Error,`(LongPolling transport) Unexpected response code: ${E.statusCode}.`),this._closeError=new Fr(E.statusText||"",E.statusCode),this._running=!1):E.content?(this._logger.log(be.Trace,`(LongPolling transport) data received. ${sn(E.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(E.content)):this._logger.log(be.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(_){this._running?_ instanceof Ps?this._logger.log(be.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=_,this._running=!1):this._logger.log(be.Trace,`(LongPolling transport) Poll errored after shutdown: ${_.message}`)}}}finally{this._logger.log(be.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(r){return this._running?Yc(this._logger,"LongPolling",this._httpClient,this._url,this._accessTokenFactory,r,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(be.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(be.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const r={},[c,b]=$r();r[c]=b;const _={headers:{...r,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials},E=await this._getAccessToken();this._updateHeaderToken(_,E),await this._httpClient.delete(this._url,_),this._logger.log(be.Trace,"(LongPolling transport) DELETE request sent.")}finally{this._logger.log(be.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let r="(LongPolling transport) Firing onclose event.";this._closeError&&(r+=" Error: "+this._closeError),this._logger.log(be.Trace,r),this.onclose(this._closeError)}}}class rp{constructor(r,c,b,_){this._httpClient=r,this._accessTokenFactory=c,this._logger=b,this._options=_,this.onreceive=null,this.onclose=null}async connect(r,c){if(gt.isRequired(r,"url"),gt.isRequired(c,"transferFormat"),gt.isIn(c,_t,"transferFormat"),this._logger.log(be.Trace,"(SSE transport) Connecting."),this._url=r,this._accessTokenFactory){const b=await this._accessTokenFactory();b&&(r+=(r.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(b)}`)}return new Promise((b,_)=>{let E=!1;if(c!==_t.Text){_(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let A;if(wt.isBrowser||wt.isWebWorker)A=new this._options.EventSource(r,{withCredentials:this._options.withCredentials});else{const q=this._httpClient.getCookieString(r),K={};K.Cookie=q;const[se,F]=$r();K[se]=F,A=new this._options.EventSource(r,{withCredentials:this._options.withCredentials,headers:{...K,...this._options.headers}})}try{A.onmessage=q=>{if(this.onreceive)try{this._logger.log(be.Trace,`(SSE transport) data received. ${sn(q.data,this._options.logMessageContent)}.`),this.onreceive(q.data)}catch(K){this._close(K);return}},A.onerror=q=>{E?this._close():_(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},A.onopen=()=>{this._logger.log(be.Information,`SSE connected to ${this._url}`),this._eventSource=A,E=!0,b()}}catch(q){_(q);return}})}async send(r){return this._eventSource?Yc(this._logger,"SSE",this._httpClient,this._url,this._accessTokenFactory,r,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(r){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(r))}}class np{constructor(r,c,b,_,E,A){this._logger=b,this._accessTokenFactory=c,this._logMessageContent=_,this._webSocketConstructor=E,this._httpClient=r,this.onreceive=null,this.onclose=null,this._headers=A}async connect(r,c){if(gt.isRequired(r,"url"),gt.isRequired(c,"transferFormat"),gt.isIn(c,_t,"transferFormat"),this._logger.log(be.Trace,"(WebSockets transport) Connecting."),this._accessTokenFactory){const b=await this._accessTokenFactory();b&&(r+=(r.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(b)}`)}return new Promise((b,_)=>{r=r.replace(/^http/,"ws");let E;const A=this._httpClient.getCookieString(r);let q=!1;if(wt.isNode){const K={},[se,F]=$r();K[se]=F,A&&(K[Br.Cookie]=`${A}`),E=new this._webSocketConstructor(r,void 0,{headers:{...K,...this._headers}})}E||(E=new this._webSocketConstructor(r)),c===_t.Binary&&(E.binaryType="arraybuffer"),E.onopen=K=>{this._logger.log(be.Information,`WebSocket connected to ${r}.`),this._webSocket=E,q=!0,b()},E.onerror=K=>{let se=null;typeof ErrorEvent<"u"&&K instanceof ErrorEvent?se=K.error:se="There was an error with the transport",this._logger.log(be.Information,`(WebSockets transport) ${se}.`)},E.onmessage=K=>{if(this._logger.log(be.Trace,`(WebSockets transport) data received. ${sn(K.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(K.data)}catch(se){this._close(se);return}},E.onclose=K=>{if(q)this._close(K);else{let se=null;typeof ErrorEvent<"u"&&K instanceof ErrorEvent?se=K.error:se="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",_(new Error(se))}}})}send(r){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(be.Trace,`(WebSockets transport) sending data. ${sn(r,this._logMessageContent)}.`),this._webSocket.send(r),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(r){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(be.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(r)&&(r.wasClean===!1||r.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${r.code} (${r.reason||"no reason given"}).`)):r instanceof Error?this.onclose(r):this.onclose())}_isCloseEvent(r){return r&&typeof r.wasClean=="boolean"&&typeof r.code=="number"}}const pc=100;class ip{constructor(r,c={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,gt.isRequired(r,"url"),this._logger=Fd(c.logger),this.baseUrl=this._resolveUrl(r),c=c||{},c.logMessageContent=c.logMessageContent===void 0?!1:c.logMessageContent,typeof c.withCredentials=="boolean"||c.withCredentials===void 0)c.withCredentials=c.withCredentials===void 0?!0:c.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");c.timeout=c.timeout===void 0?100*1e3:c.timeout;let b=null,_=null;if(wt.isNode&&typeof require<"u"){const E=typeof __webpack_require__=="function"?__non_webpack_require__:require;b=E("ws"),_=E("eventsource")}!wt.isNode&&typeof WebSocket<"u"&&!c.WebSocket?c.WebSocket=WebSocket:wt.isNode&&!c.WebSocket&&b&&(c.WebSocket=b),!wt.isNode&&typeof EventSource<"u"&&!c.EventSource?c.EventSource=EventSource:wt.isNode&&!c.EventSource&&typeof _<"u"&&(c.EventSource=_),this._httpClient=c.httpClient||new Qd(this._logger),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=c,this.onreceive=null,this.onclose=null}async start(r){if(r=r||_t.Binary,gt.isIn(r,_t,"transferFormat"),this._logger.log(be.Debug,`Starting connection with transfer format '${_t[r]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(r),await this._startInternalPromise,this._connectionState==="Disconnecting"){const c="Failed to start the HttpConnection before stop() was called.";return this._logger.log(be.Error,c),await this._stopPromise,Promise.reject(new Error(c))}else if(this._connectionState!=="Connected"){const c="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(be.Error,c),Promise.reject(new Error(c))}this._connectionStarted=!0}send(r){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new Ms(this.transport)),this._sendQueue.send(r))}async stop(r){if(this._connectionState==="Disconnected")return this._logger.log(be.Debug,`Call to HttpConnection.stop(${r}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(be.Debug,`Call to HttpConnection.stop(${r}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(c=>{this._stopPromiseResolver=c}),await this._stopInternal(r),await this._stopPromise}async _stopInternal(r){this._stopError=r;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(c){this._logger.log(be.Error,`HttpConnection.transport.stop() threw error '${c}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(be.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(r){let c=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===ht.WebSockets)this.transport=this._constructTransport(ht.WebSockets),await this._startTransport(c,r);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let b=null,_=0;do{if(b=await this._getNegotiationResponse(c),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new Error("The connection was stopped during negotiation.");if(b.error)throw new Error(b.error);if(b.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(b.url&&(c=b.url),b.accessToken){const E=b.accessToken;this._accessTokenFactory=()=>E}_++}while(b.url&&_<pc);if(_===pc&&b.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(c,this._options.transport,b,r)}this.transport instanceof dc&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(be.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(b){return this._logger.log(be.Error,"Failed to start the connection: "+b),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(b)}}async _getNegotiationResponse(r){const c={};if(this._accessTokenFactory){const A=await this._accessTokenFactory();A&&(c[Br.Authorization]=`Bearer ${A}`)}const[b,_]=$r();c[b]=_;const E=this._resolveNegotiateUrl(r);this._logger.log(be.Debug,`Sending negotiation request: ${E}.`);try{const A=await this._httpClient.post(E,{content:"",headers:{...c,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(A.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${A.statusCode}'`));const q=JSON.parse(A.content);return(!q.negotiateVersion||q.negotiateVersion<1)&&(q.connectionToken=q.connectionId),q}catch(A){let q="Failed to complete negotiation with the server: "+A;return A instanceof Fr&&A.statusCode===404&&(q=q+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(be.Error,q),Promise.reject(new jd(q))}}_createConnectUrl(r,c){return c?r+(r.indexOf("?")===-1?"?":"&")+`id=${c}`:r}async _createTransport(r,c,b,_){let E=this._createConnectUrl(r,b.connectionToken);if(this._isITransport(c)){this._logger.log(be.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=c,await this._startTransport(E,_),this.connectionId=b.connectionId;return}const A=[],q=b.availableTransports||[];let K=b;for(const se of q){const F=this._resolveTransportOrError(se,c,_);if(F instanceof Error)A.push(`${se.transport} failed:`),A.push(F);else if(this._isITransport(F)){if(this.transport=F,!K){try{K=await this._getNegotiationResponse(r)}catch(Re){return Promise.reject(Re)}E=this._createConnectUrl(r,K.connectionToken)}try{await this._startTransport(E,_),this.connectionId=K.connectionId;return}catch(Re){if(this._logger.log(be.Error,`Failed to start the transport '${se.transport}': ${Re}`),K=void 0,A.push(new Md(`${se.transport} failed: ${Re}`,ht[se.transport])),this._connectionState!=="Connecting"){const Ke="Failed to select transport before stop() was called.";return this._logger.log(be.Debug,Ke),Promise.reject(new Error(Ke))}}}}return A.length>0?Promise.reject(new Ud(`Unable to connect to the server with any of the available transports. ${A.join(" ")}`,A)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(r){switch(r){case ht.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new np(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case ht.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new rp(this._httpClient,this._accessTokenFactory,this._logger,this._options);case ht.LongPolling:return new dc(this._httpClient,this._accessTokenFactory,this._logger,this._options);default:throw new Error(`Unknown transport: ${r}.`)}}_startTransport(r,c){return this.transport.onreceive=this.onreceive,this.transport.onclose=b=>this._stopConnection(b),this.transport.connect(r,c)}_resolveTransportOrError(r,c,b){const _=ht[r.transport];if(_==null)return this._logger.log(be.Debug,`Skipping transport '${r.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${r.transport}' because it is not supported by this client.`);if(op(c,_))if(r.transferFormats.map(A=>_t[A]).indexOf(b)>=0){if(_===ht.WebSockets&&!this._options.WebSocket||_===ht.ServerSentEvents&&!this._options.EventSource)return this._logger.log(be.Debug,`Skipping transport '${ht[_]}' because it is not supported in your environment.'`),new Bd(`'${ht[_]}' is not supported in your environment.`,_);this._logger.log(be.Debug,`Selecting transport '${ht[_]}'.`);try{return this._constructTransport(_)}catch(A){return A}}else return this._logger.log(be.Debug,`Skipping transport '${ht[_]}' because it does not support the requested transfer format '${_t[b]}'.`),new Error(`'${ht[_]}' does not support ${_t[b]}.`);else return this._logger.log(be.Debug,`Skipping transport '${ht[_]}' because it was disabled by the client.`),new Nd(`'${ht[_]}' is disabled by the client.`,_)}_isITransport(r){return r&&typeof r=="object"&&"connect"in r}_stopConnection(r){if(this._logger.log(be.Debug,`HttpConnection.stopConnection(${r}) called while in state ${this._connectionState}.`),this.transport=void 0,r=this._stopError||r,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(be.Debug,`Call to HttpConnection.stopConnection(${r}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(be.Warning,`Call to HttpConnection.stopConnection(${r}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${r}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),r?this._logger.log(be.Error,`Connection disconnected with error '${r}'.`):this._logger.log(be.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(c=>{this._logger.log(be.Error,`TransportSendQueue.stop() threw error '${c}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(r)}catch(c){this._logger.log(be.Error,`HttpConnection.onclose(${r}) threw error '${c}'.`)}}}_resolveUrl(r){if(r.lastIndexOf("https://",0)===0||r.lastIndexOf("http://",0)===0)return r;if(!wt.isBrowser)throw new Error(`Cannot resolve '${r}'.`);const c=window.document.createElement("a");return c.href=r,this._logger.log(be.Information,`Normalizing '${r}' to '${c.href}'.`),c.href}_resolveNegotiateUrl(r){const c=r.indexOf("?");let b=r.substring(0,c===-1?r.length:c);return b[b.length-1]!=="/"&&(b+="/"),b+="negotiate",b+=c===-1?"":r.substring(c),b.indexOf("negotiateVersion")===-1&&(b+=c===-1?"?":"&",b+="negotiateVersion="+this._negotiateVersion),b}}function op(u,r){return!u||(r&u)!==0}class Ms{constructor(r){this._transport=r,this._buffer=[],this._executing=!0,this._sendBufferedData=new Nn,this._transportResult=new Nn,this._sendLoopPromise=this._sendLoop()}send(r){return this._bufferData(r),this._transportResult||(this._transportResult=new Nn),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(r){if(this._buffer.length&&typeof this._buffer[0]!=typeof r)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof r}`);this._buffer.push(r),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new Nn;const r=this._transportResult;this._transportResult=void 0;const c=typeof this._buffer[0]=="string"?this._buffer.join(""):Ms._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(c),r.resolve()}catch(b){r.reject(b)}}}static _concatBuffers(r){const c=r.map(E=>E.byteLength).reduce((E,A)=>E+A),b=new Uint8Array(c);let _=0;for(const E of r)b.set(new Uint8Array(E),_),_+=E.byteLength;return b.buffer}}class Nn{constructor(){this.promise=new Promise((r,c)=>[this._resolver,this._rejecter]=[r,c])}resolve(){this._resolver()}reject(r){this._rejecter(r)}}const sp="json";class ap{constructor(){this.name=sp,this.version=1,this.transferFormat=_t.Text}parseMessages(r,c){if(typeof r!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!r)return[];c===null&&(c=on.instance);const b=Rt.parse(r),_=[];for(const E of b){const A=JSON.parse(E);if(typeof A.type!="number")throw new Error("Invalid payload.");switch(A.type){case tt.Invocation:this._isInvocationMessage(A);break;case tt.StreamItem:this._isStreamItemMessage(A);break;case tt.Completion:this._isCompletionMessage(A);break;case tt.Ping:break;case tt.Close:break;default:c.log(be.Information,"Unknown message type '"+A.type+"' ignored.");continue}_.push(A)}return _}writeMessage(r){return Rt.write(JSON.stringify(r))}_isInvocationMessage(r){this._assertNotEmptyString(r.target,"Invalid payload for Invocation message."),r.invocationId!==void 0&&this._assertNotEmptyString(r.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(r){if(this._assertNotEmptyString(r.invocationId,"Invalid payload for StreamItem message."),r.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(r){if(r.result&&r.error)throw new Error("Invalid payload for Completion message.");!r.result&&r.error&&this._assertNotEmptyString(r.error,"Invalid payload for Completion message."),this._assertNotEmptyString(r.invocationId,"Invalid payload for Completion message.")}_assertNotEmptyString(r,c){if(typeof r!="string"||r==="")throw new Error(c)}}const lp={trace:be.Trace,debug:be.Debug,info:be.Information,information:be.Information,warn:be.Warning,warning:be.Warning,error:be.Error,critical:be.Critical,none:be.None};function cp(u){const r=lp[u.toLowerCase()];if(typeof r<"u")return r;throw new Error(`Unknown log level: ${u}`)}class up{configureLogging(r){if(gt.isRequired(r,"logging"),hp(r))this.logger=r;else if(typeof r=="string"){const c=cp(r);this.logger=new Jn(c)}else this.logger=new Jn(r);return this}withUrl(r,c){return gt.isRequired(r,"url"),gt.isNotEmpty(r,"url"),this.url=r,typeof c=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...c}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:c},this}withHubProtocol(r){return gt.isRequired(r,"protocol"),this.protocol=r,this}withAutomaticReconnect(r){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return r?Array.isArray(r)?this.reconnectPolicy=new fc(r):this.reconnectPolicy=r:this.reconnectPolicy=new fc,this}build(){const r=this.httpConnectionOptions||{};if(r.logger===void 0&&(r.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const c=new ip(this.url,r);return Ns.create(c,this.logger||on.instance,this.protocol||new ap,this.reconnectPolicy)}}function hp(u){return u.log!==void 0}class fp{nextRetryDelayInMilliseconds(r){return null}}const ii=class ii{constructor(r,c){Be(this,"crisEndpoint");Be(this,"connection");this.crisEndpoint=c,this.connection=new up().withUrl(r,ht.None).withAutomaticReconnect(ii.noRetryPolicy).build()}async startAsync(){try{return await this.connection.start(),!0}catch(r){return console.log(r),!1}}async startListeningAsync(r){const c={},b=r.map(async _=>{const E=new zn(this.connection.connectionId,_.domainName,_.transactionCount),A=await this.crisEndpoint.sendOrThrowAsync(E);A?c[_.domainName]=JSON.parse(A):(console.warn(`Domain ${_.domainName} doesn't exists.`),c[_.domainName]="")});return await Promise.all(b),c}onMessage(r){this.connection.on("OnStateEventsAsync",(c,b)=>{r(c,JSON.parse(b))})}onClose(r){this.connection.onclose(r)}async stopAsync(){await this.connection.stop()}};Be(ii,"noRetryPolicy",new fp);let ps=ii;var gc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},dp={};(()=>{var u=Object.defineProperty,r=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,b=Object.prototype.hasOwnProperty,_=(e,s)=>()=>(e&&(s=e(e=0)),s),E=(e,s)=>()=>(s||e((s={exports:{}}).exports,s),s.exports),A=(e,s)=>{for(var t in s)u(e,t,{get:s[t],enumerable:!0})},q=(e,s,t,h)=>{if(s&&typeof s=="object"||typeof s=="function")for(let p of c(s))!b.call(e,p)&&p!==t&&u(e,p,{get:()=>s[p],enumerable:!(h=r(s,p))||h.enumerable});return e},K=e=>q(u({},"__esModule",{value:!0}),e),se,F=_(()=>{se={deviceMemory:8,hardwareConcurrency:8,language:"en-US"}}),Re={};A(Re,{_debugEnd:()=>Hi,_debugProcess:()=>Wi,_events:()=>oo,_eventsCount:()=>so,_exiting:()=>ki,_fatalExceptions:()=>Di,_getActiveHandles:()=>un,_getActiveRequests:()=>sr,_kill:()=>Pi,_linkedBinding:()=>vt,_maxListeners:()=>io,_preload_modules:()=>to,_rawDebug:()=>Ci,_startProfilerIdleNotifier:()=>qi,_stopProfilerIdleNotifier:()=>Vi,_tickCallback:()=>$i,abort:()=>Qi,addListener:()=>ao,allowedNodeEnvironmentFlags:()=>Ui,arch:()=>fi,argv:()=>gi,argv0:()=>eo,assert:()=>xt,binding:()=>_i,chdir:()=>Si,config:()=>Ri,cpuUsage:()=>zr,cwd:()=>Ei,debugPort:()=>Zi,default:()=>mo,dlopen:()=>Ge,domain:()=>Ii,emit:()=>fo,emitWarning:()=>wi,env:()=>pi,execArgv:()=>mi,execPath:()=>Xi,exit:()=>Mi,features:()=>Li,hasUncaughtExceptionCaptureCallback:()=>Ht,hrtime:()=>hn,kill:()=>Ni,listeners:()=>js,memoryUsage:()=>Bi,moduleLoadList:()=>Ti,nextTick:()=>Ce,off:()=>co,on:()=>qt,once:()=>lo,openStdin:()=>ji,pid:()=>Yi,platform:()=>di,ppid:()=>Gi,prependListener:()=>po,prependOnceListener:()=>go,reallyExit:()=>Oi,release:()=>Ai,removeAllListeners:()=>ho,removeListener:()=>uo,resourceUsage:()=>xi,setSourceMapsEnabled:()=>ro,setUncaughtExceptionCaptureCallback:()=>Fi,stderr:()=>Ki,stdin:()=>Ji,stdout:()=>zi,title:()=>hi,umask:()=>vi,uptime:()=>qr,version:()=>bi,versions:()=>yi});function Ke(e){throw new Error("Node.js process "+e+" is not supported by JSPM core outside of Node.js")}function Je(){!gr||!mr||(gr=!1,mr.length?Dt=mr.concat(Dt):Vr=-1,Dt.length&&xe())}function xe(){if(!gr){var e=setTimeout(Je,0);gr=!0;for(var s=Dt.length;s;){for(mr=Dt,Dt=[];++Vr<s;)mr&&mr[Vr].run();Vr=-1,s=Dt.length}mr=null,gr=!1,clearTimeout(e)}}function Ce(e){var s=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)s[t-1]=arguments[t];Dt.push(new qe(e,s)),Dt.length===1&&!gr&&setTimeout(xe,0)}function qe(e,s){this.fun=e,this.array=s}function Fe(){}function vt(e){Ke("_linkedBinding")}function Ge(e){Ke("dlopen")}function sr(){return[]}function un(){return[]}function xt(e,s){if(!e)throw new Error(s||"assertion error")}function Ht(){return!1}function qr(){return Vt.now()/1e3}function hn(e){var s=Math.floor((Date.now()-Vt.now())*.001),t=Vt.now()*.001,h=Math.floor(t)+s,p=Math.floor(t%1*1e9);return e&&(h=h-e[0],p=p-e[1],p<0&&(h--,p+=fn)),[h,p]}function qt(){return mo}function js(e){return[]}var Dt,gr,mr,Vr,hi,fi,di,pi,gi,mi,bi,yi,wi,_i,vi,Ei,Si,Ai,Ci,Ti,Ii,ki,Ri,Oi,Pi,zr,xi,Bi,Ni,Mi,ji,Ui,Li,Di,Fi,$i,Wi,Hi,qi,Vi,zi,Ki,Ji,Qi,Yi,Gi,Xi,Zi,eo,to,ro,Vt,no,fn,io,oo,so,ao,lo,co,uo,ho,fo,po,go,mo,du=_(()=>{_e(),we(),F(),Dt=[],gr=!1,Vr=-1,qe.prototype.run=function(){this.fun.apply(null,this.array)},hi="browser",fi="x64",di="browser",pi={PATH:"/usr/bin",LANG:se.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},gi=["/usr/bin/node"],mi=[],bi="v16.8.0",yi={},wi=function(e,s){console.warn((s?s+": ":"")+e)},_i=function(e){Ke("binding")},vi=function(e){return 0},Ei=function(){return"/"},Si=function(e){},Ai={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},Ci=Fe,Ti=[],Ii={},ki=!1,Ri={},Oi=Fe,Pi=Fe,zr=function(){return{}},xi=zr,Bi=zr,Ni=Fe,Mi=Fe,ji=Fe,Ui={},Li={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},Di=Fe,Fi=Fe,$i=Fe,Wi=Fe,Hi=Fe,qi=Fe,Vi=Fe,zi=void 0,Ki=void 0,Ji=void 0,Qi=Fe,Yi=2,Gi=1,Xi="/bin/usr/node",Zi=9229,eo="node",to=[],ro=Fe,Vt={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},Vt.now===void 0&&(no=Date.now(),Vt.timing&&Vt.timing.navigationStart&&(no=Vt.timing.navigationStart),Vt.now=()=>Date.now()-no),fn=1e9,hn.bigint=function(e){var s=hn(e);return typeof BigInt>"u"?s[0]*fn+s[1]:BigInt(s[0]*fn)+BigInt(s[1])},io=10,oo={},so=0,ao=qt,lo=qt,co=qt,uo=qt,ho=qt,fo=Fe,po=qt,go=qt,mo={version:bi,versions:yi,arch:fi,platform:di,release:Ai,_rawDebug:Ci,moduleLoadList:Ti,binding:_i,_linkedBinding:vt,_events:oo,_eventsCount:so,_maxListeners:io,on:qt,addListener:ao,once:lo,off:co,removeListener:uo,removeAllListeners:ho,emit:fo,prependListener:po,prependOnceListener:go,listeners:js,domain:Ii,_exiting:ki,config:Ri,dlopen:Ge,uptime:qr,_getActiveRequests:sr,_getActiveHandles:un,reallyExit:Oi,_kill:Pi,cpuUsage:zr,resourceUsage:xi,memoryUsage:Bi,kill:Ni,exit:Mi,openStdin:ji,allowedNodeEnvironmentFlags:Ui,assert:xt,features:Li,_fatalExceptions:Di,setUncaughtExceptionCaptureCallback:Fi,hasUncaughtExceptionCaptureCallback:Ht,emitWarning:wi,nextTick:Ce,_tickCallback:$i,_debugProcess:Wi,_debugEnd:Hi,_startProfilerIdleNotifier:qi,_stopProfilerIdleNotifier:Vi,stdout:zi,stdin:Ji,stderr:Ki,abort:Qi,umask:vi,chdir:Si,cwd:Ei,env:pi,title:hi,argv:gi,execArgv:mi,pid:Yi,ppid:Gi,execPath:Xi,debugPort:Zi,hrtime:hn,argv0:eo,_preload_modules:to,setSourceMapsEnabled:ro}}),we=_(()=>{du()}),mt={};A(mt,{Buffer:()=>dn,INSPECT_MAX_BYTES:()=>Us,default:()=>zt,kMaxLength:()=>Ls});function pu(){if(bo)return Mr;bo=!0,Mr.byteLength=a,Mr.toByteArray=l,Mr.fromByteArray=w;for(var e=[],s=[],t=typeof Uint8Array<"u"?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,o=h.length;p<o;++p)e[p]=h[p],s[h.charCodeAt(p)]=p;s[45]=62,s[95]=63;function n(v){var S=v.length;if(S%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var C=v.indexOf("=");C===-1&&(C=S);var x=C===S?0:4-C%4;return[C,x]}function a(v){var S=n(v),C=S[0],x=S[1];return(C+x)*3/4-x}function i(v,S,C){return(S+C)*3/4-C}function l(v){var S,C=n(v),x=C[0],W=C[1],k=new t(i(v,x,W)),P=0,z=W>0?x-4:x,Q;for(Q=0;Q<z;Q+=4)S=s[v.charCodeAt(Q)]<<18|s[v.charCodeAt(Q+1)]<<12|s[v.charCodeAt(Q+2)]<<6|s[v.charCodeAt(Q+3)],k[P++]=S>>16&255,k[P++]=S>>8&255,k[P++]=S&255;return W===2&&(S=s[v.charCodeAt(Q)]<<2|s[v.charCodeAt(Q+1)]>>4,k[P++]=S&255),W===1&&(S=s[v.charCodeAt(Q)]<<10|s[v.charCodeAt(Q+1)]<<4|s[v.charCodeAt(Q+2)]>>2,k[P++]=S>>8&255,k[P++]=S&255),k}function g(v){return e[v>>18&63]+e[v>>12&63]+e[v>>6&63]+e[v&63]}function y(v,S,C){for(var x,W=[],k=S;k<C;k+=3)x=(v[k]<<16&16711680)+(v[k+1]<<8&65280)+(v[k+2]&255),W.push(g(x));return W.join("")}function w(v){for(var S,C=v.length,x=C%3,W=[],k=16383,P=0,z=C-x;P<z;P+=k)W.push(y(v,P,P+k>z?z:P+k));return x===1?(S=v[C-1],W.push(e[S>>2]+e[S<<4&63]+"==")):x===2&&(S=(v[C-2]<<8)+v[C-1],W.push(e[S>>10]+e[S>>4&63]+e[S<<2&63]+"=")),W.join("")}return Mr}function gu(){return yo?Kr:(yo=!0,Kr.read=function(e,s,t,h,p){var o,n,a=p*8-h-1,i=(1<<a)-1,l=i>>1,g=-7,y=t?p-1:0,w=t?-1:1,v=e[s+y];for(y+=w,o=v&(1<<-g)-1,v>>=-g,g+=a;g>0;o=o*256+e[s+y],y+=w,g-=8);for(n=o&(1<<-g)-1,o>>=-g,g+=h;g>0;n=n*256+e[s+y],y+=w,g-=8);if(o===0)o=1-l;else{if(o===i)return n?NaN:(v?-1:1)*(1/0);n=n+Math.pow(2,h),o=o-l}return(v?-1:1)*n*Math.pow(2,o-h)},Kr.write=function(e,s,t,h,p,o){var n,a,i,l=o*8-p-1,g=(1<<l)-1,y=g>>1,w=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=h?0:o-1,S=h?1:-1,C=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(a=isNaN(s)?1:0,n=g):(n=Math.floor(Math.log(s)/Math.LN2),s*(i=Math.pow(2,-n))<1&&(n--,i*=2),n+y>=1?s+=w/i:s+=w*Math.pow(2,1-y),s*i>=2&&(n++,i/=2),n+y>=g?(a=0,n=g):n+y>=1?(a=(s*i-1)*Math.pow(2,p),n=n+y):(a=s*Math.pow(2,y-1)*Math.pow(2,p),n=0));p>=8;e[t+v]=a&255,v+=S,a/=256,p-=8);for(n=n<<p|a,l+=p;l>0;e[t+v]=n&255,v+=S,n/=256,l-=8);e[t+v-S]|=C*128},Kr)}function mu(){if(wo)return ar;wo=!0;let e=pu(),s=gu(),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;ar.Buffer=n,ar.SlowBuffer=W,ar.INSPECT_MAX_BYTES=50;let h=2147483647;ar.kMaxLength=h,n.TYPED_ARRAY_SUPPORT=p(),!n.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function p(){try{let d=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(d,f),d.foo()===42}catch{return!1}}Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}});function o(d){if(d>h)throw new RangeError('The value "'+d+'" is invalid for option "size"');let f=new Uint8Array(d);return Object.setPrototypeOf(f,n.prototype),f}function n(d,f,m){if(typeof d=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(d)}return a(d,f,m)}n.poolSize=8192;function a(d,f,m){if(typeof d=="string")return y(d,f);if(ArrayBuffer.isView(d))return v(d);if(d==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d);if(re(d,ArrayBuffer)||d&&re(d.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(re(d,SharedArrayBuffer)||d&&re(d.buffer,SharedArrayBuffer)))return S(d,f,m);if(typeof d=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let T=d.valueOf&&d.valueOf();if(T!=null&&T!==d)return n.from(T,f,m);let B=C(d);if(B)return B;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof d[Symbol.toPrimitive]=="function")return n.from(d[Symbol.toPrimitive]("string"),f,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d)}n.from=function(d,f,m){return a(d,f,m)},Object.setPrototypeOf(n.prototype,Uint8Array.prototype),Object.setPrototypeOf(n,Uint8Array);function i(d){if(typeof d!="number")throw new TypeError('"size" argument must be of type number');if(d<0)throw new RangeError('The value "'+d+'" is invalid for option "size"')}function l(d,f,m){return i(d),d<=0?o(d):f!==void 0?typeof m=="string"?o(d).fill(f,m):o(d).fill(f):o(d)}n.alloc=function(d,f,m){return l(d,f,m)};function g(d){return i(d),o(d<0?0:x(d)|0)}n.allocUnsafe=function(d){return g(d)},n.allocUnsafeSlow=function(d){return g(d)};function y(d,f){if((typeof f!="string"||f==="")&&(f="utf8"),!n.isEncoding(f))throw new TypeError("Unknown encoding: "+f);let m=k(d,f)|0,T=o(m),B=T.write(d,f);return B!==m&&(T=T.slice(0,B)),T}function w(d){let f=d.length<0?0:x(d.length)|0,m=o(f);for(let T=0;T<f;T+=1)m[T]=d[T]&255;return m}function v(d){if(re(d,Uint8Array)){let f=new Uint8Array(d);return S(f.buffer,f.byteOffset,f.byteLength)}return w(d)}function S(d,f,m){if(f<0||d.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(d.byteLength<f+(m||0))throw new RangeError('"length" is outside of buffer bounds');let T;return f===void 0&&m===void 0?T=new Uint8Array(d):m===void 0?T=new Uint8Array(d,f):T=new Uint8Array(d,f,m),Object.setPrototypeOf(T,n.prototype),T}function C(d){if(n.isBuffer(d)){let f=x(d.length)|0,m=o(f);return m.length===0||d.copy(m,0,0,f),m}if(d.length!==void 0)return typeof d.length!="number"||j(d.length)?o(0):w(d);if(d.type==="Buffer"&&Array.isArray(d.data))return w(d.data)}function x(d){if(d>=h)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h.toString(16)+" bytes");return d|0}function W(d){return+d!=d&&(d=0),n.alloc(+d)}n.isBuffer=function(d){return d!=null&&d._isBuffer===!0&&d!==n.prototype},n.compare=function(d,f){if(re(d,Uint8Array)&&(d=n.from(d,d.offset,d.byteLength)),re(f,Uint8Array)&&(f=n.from(f,f.offset,f.byteLength)),!n.isBuffer(d)||!n.isBuffer(f))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(d===f)return 0;let m=d.length,T=f.length;for(let B=0,G=Math.min(m,T);B<G;++B)if(d[B]!==f[B]){m=d[B],T=f[B];break}return m<T?-1:T<m?1:0},n.isEncoding=function(d){switch(String(d).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(d,f){if(!Array.isArray(d))throw new TypeError('"list" argument must be an Array of Buffers');if(d.length===0)return n.alloc(0);let m;if(f===void 0)for(f=0,m=0;m<d.length;++m)f+=d[m].length;let T=n.allocUnsafe(f),B=0;for(m=0;m<d.length;++m){let G=d[m];if(re(G,Uint8Array))B+G.length>T.length?(n.isBuffer(G)||(G=n.from(G)),G.copy(T,B)):Uint8Array.prototype.set.call(T,G,B);else if(n.isBuffer(G))G.copy(T,B);else throw new TypeError('"list" argument must be an Array of Buffers');B+=G.length}return T};function k(d,f){if(n.isBuffer(d))return d.length;if(ArrayBuffer.isView(d)||re(d,ArrayBuffer))return d.byteLength;if(typeof d!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof d);let m=d.length,T=arguments.length>2&&arguments[2]===!0;if(!T&&m===0)return 0;let B=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return m;case"utf8":case"utf-8":return J(d).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m*2;case"hex":return m>>>1;case"base64":return ce(d).length;default:if(B)return T?-1:J(d).length;f=(""+f).toLowerCase(),B=!0}}n.byteLength=k;function P(d,f,m){let T=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((m===void 0||m>this.length)&&(m=this.length),m<=0)||(m>>>=0,f>>>=0,m<=f))return"";for(d||(d="utf8");;)switch(d){case"hex":return ee(this,f,m);case"utf8":case"utf-8":return te(this,f,m);case"ascii":return ke(this,f,m);case"latin1":case"binary":return ye(this,f,m);case"base64":return O(this,f,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Oe(this,f,m);default:if(T)throw new TypeError("Unknown encoding: "+d);d=(d+"").toLowerCase(),T=!0}}n.prototype._isBuffer=!0;function z(d,f,m){let T=d[f];d[f]=d[m],d[m]=T}n.prototype.swap16=function(){let d=this.length;if(d%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let f=0;f<d;f+=2)z(this,f,f+1);return this},n.prototype.swap32=function(){let d=this.length;if(d%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let f=0;f<d;f+=4)z(this,f,f+3),z(this,f+1,f+2);return this},n.prototype.swap64=function(){let d=this.length;if(d%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let f=0;f<d;f+=8)z(this,f,f+7),z(this,f+1,f+6),z(this,f+2,f+5),z(this,f+3,f+4);return this},n.prototype.toString=function(){let d=this.length;return d===0?"":arguments.length===0?te(this,0,d):P.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(d){if(!n.isBuffer(d))throw new TypeError("Argument must be a Buffer");return this===d?!0:n.compare(this,d)===0},n.prototype.inspect=function(){let d="",f=ar.INSPECT_MAX_BYTES;return d=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(d+=" ... "),"<Buffer "+d+">"},t&&(n.prototype[t]=n.prototype.inspect),n.prototype.compare=function(d,f,m,T,B){if(re(d,Uint8Array)&&(d=n.from(d,d.offset,d.byteLength)),!n.isBuffer(d))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof d);if(f===void 0&&(f=0),m===void 0&&(m=d?d.length:0),T===void 0&&(T=0),B===void 0&&(B=this.length),f<0||m>d.length||T<0||B>this.length)throw new RangeError("out of range index");if(T>=B&&f>=m)return 0;if(T>=B)return-1;if(f>=m)return 1;if(f>>>=0,m>>>=0,T>>>=0,B>>>=0,this===d)return 0;let G=B-T,he=m-f,De=Math.min(G,he),Ve=this.slice(T,B),ze=d.slice(f,m);for(let Le=0;Le<De;++Le)if(Ve[Le]!==ze[Le]){G=Ve[Le],he=ze[Le];break}return G<he?-1:he<G?1:0};function Q(d,f,m,T,B){if(d.length===0)return-1;if(typeof m=="string"?(T=m,m=0):m>2147483647?m=2147483647:m<-2147483648&&(m=-2147483648),m=+m,j(m)&&(m=B?0:d.length-1),m<0&&(m=d.length+m),m>=d.length){if(B)return-1;m=d.length-1}else if(m<0)if(B)m=0;else return-1;if(typeof f=="string"&&(f=n.from(f,T)),n.isBuffer(f))return f.length===0?-1:M(d,f,m,T,B);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?B?Uint8Array.prototype.indexOf.call(d,f,m):Uint8Array.prototype.lastIndexOf.call(d,f,m):M(d,[f],m,T,B);throw new TypeError("val must be string, number or Buffer")}function M(d,f,m,T,B){let G=1,he=d.length,De=f.length;if(T!==void 0&&(T=String(T).toLowerCase(),T==="ucs2"||T==="ucs-2"||T==="utf16le"||T==="utf-16le")){if(d.length<2||f.length<2)return-1;G=2,he/=2,De/=2,m/=2}function Ve(Le,He){return G===1?Le[He]:Le.readUInt16BE(He*G)}let ze;if(B){let Le=-1;for(ze=m;ze<he;ze++)if(Ve(d,ze)===Ve(f,Le===-1?0:ze-Le)){if(Le===-1&&(Le=ze),ze-Le+1===De)return Le*G}else Le!==-1&&(ze-=ze-Le),Le=-1}else for(m+De>he&&(m=he-De),ze=m;ze>=0;ze--){let Le=!0;for(let He=0;He<De;He++)if(Ve(d,ze+He)!==Ve(f,He)){Le=!1;break}if(Le)return ze}return-1}n.prototype.includes=function(d,f,m){return this.indexOf(d,f,m)!==-1},n.prototype.indexOf=function(d,f,m){return Q(this,d,f,m,!0)},n.prototype.lastIndexOf=function(d,f,m){return Q(this,d,f,m,!1)};function N(d,f,m,T){m=Number(m)||0;let B=d.length-m;T?(T=Number(T),T>B&&(T=B)):T=B;let G=f.length;T>G/2&&(T=G/2);let he;for(he=0;he<T;++he){let De=parseInt(f.substr(he*2,2),16);if(j(De))return he;d[m+he]=De}return he}function $(d,f,m,T){return H(J(f,d.length-m),d,m,T)}function X(d,f,m,T){return H(Y(f),d,m,T)}function ae(d,f,m,T){return H(ce(f),d,m,T)}function pe(d,f,m,T){return H(ge(f,d.length-m),d,m,T)}n.prototype.write=function(d,f,m,T){if(f===void 0)T="utf8",m=this.length,f=0;else if(m===void 0&&typeof f=="string")T=f,m=this.length,f=0;else if(isFinite(f))f=f>>>0,isFinite(m)?(m=m>>>0,T===void 0&&(T="utf8")):(T=m,m=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let B=this.length-f;if((m===void 0||m>B)&&(m=B),d.length>0&&(m<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");T||(T="utf8");let G=!1;for(;;)switch(T){case"hex":return N(this,d,f,m);case"utf8":case"utf-8":return $(this,d,f,m);case"ascii":case"latin1":case"binary":return X(this,d,f,m);case"base64":return ae(this,d,f,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pe(this,d,f,m);default:if(G)throw new TypeError("Unknown encoding: "+T);T=(""+T).toLowerCase(),G=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function O(d,f,m){return f===0&&m===d.length?e.fromByteArray(d):e.fromByteArray(d.slice(f,m))}function te(d,f,m){m=Math.min(d.length,m);let T=[],B=f;for(;B<m;){let G=d[B],he=null,De=G>239?4:G>223?3:G>191?2:1;if(B+De<=m){let Ve,ze,Le,He;switch(De){case 1:G<128&&(he=G);break;case 2:Ve=d[B+1],(Ve&192)===128&&(He=(G&31)<<6|Ve&63,He>127&&(he=He));break;case 3:Ve=d[B+1],ze=d[B+2],(Ve&192)===128&&(ze&192)===128&&(He=(G&15)<<12|(Ve&63)<<6|ze&63,He>2047&&(He<55296||He>57343)&&(he=He));break;case 4:Ve=d[B+1],ze=d[B+2],Le=d[B+3],(Ve&192)===128&&(ze&192)===128&&(Le&192)===128&&(He=(G&15)<<18|(Ve&63)<<12|(ze&63)<<6|Le&63,He>65535&&He<1114112&&(he=He))}}he===null?(he=65533,De=1):he>65535&&(he-=65536,T.push(he>>>10&1023|55296),he=56320|he&1023),T.push(he),B+=De}return ie(T)}let de=4096;function ie(d){let f=d.length;if(f<=de)return String.fromCharCode.apply(String,d);let m="",T=0;for(;T<f;)m+=String.fromCharCode.apply(String,d.slice(T,T+=de));return m}function ke(d,f,m){let T="";m=Math.min(d.length,m);for(let B=f;B<m;++B)T+=String.fromCharCode(d[B]&127);return T}function ye(d,f,m){let T="";m=Math.min(d.length,m);for(let B=f;B<m;++B)T+=String.fromCharCode(d[B]);return T}function ee(d,f,m){let T=d.length;(!f||f<0)&&(f=0),(!m||m<0||m>T)&&(m=T);let B="";for(let G=f;G<m;++G)B+=V[d[G]];return B}function Oe(d,f,m){let T=d.slice(f,m),B="";for(let G=0;G<T.length-1;G+=2)B+=String.fromCharCode(T[G]+T[G+1]*256);return B}n.prototype.slice=function(d,f){let m=this.length;d=~~d,f=f===void 0?m:~~f,d<0?(d+=m,d<0&&(d=0)):d>m&&(d=m),f<0?(f+=m,f<0&&(f=0)):f>m&&(f=m),f<d&&(f=d);let T=this.subarray(d,f);return Object.setPrototypeOf(T,n.prototype),T};function me(d,f,m){if(d%1!==0||d<0)throw new RangeError("offset is not uint");if(d+f>m)throw new RangeError("Trying to access beyond buffer length")}n.prototype.readUintLE=n.prototype.readUIntLE=function(d,f,m){d=d>>>0,f=f>>>0,m||me(d,f,this.length);let T=this[d],B=1,G=0;for(;++G<f&&(B*=256);)T+=this[d+G]*B;return T},n.prototype.readUintBE=n.prototype.readUIntBE=function(d,f,m){d=d>>>0,f=f>>>0,m||me(d,f,this.length);let T=this[d+--f],B=1;for(;f>0&&(B*=256);)T+=this[d+--f]*B;return T},n.prototype.readUint8=n.prototype.readUInt8=function(d,f){return d=d>>>0,f||me(d,1,this.length),this[d]},n.prototype.readUint16LE=n.prototype.readUInt16LE=function(d,f){return d=d>>>0,f||me(d,2,this.length),this[d]|this[d+1]<<8},n.prototype.readUint16BE=n.prototype.readUInt16BE=function(d,f){return d=d>>>0,f||me(d,2,this.length),this[d]<<8|this[d+1]},n.prototype.readUint32LE=n.prototype.readUInt32LE=function(d,f){return d=d>>>0,f||me(d,4,this.length),(this[d]|this[d+1]<<8|this[d+2]<<16)+this[d+3]*16777216},n.prototype.readUint32BE=n.prototype.readUInt32BE=function(d,f){return d=d>>>0,f||me(d,4,this.length),this[d]*16777216+(this[d+1]<<16|this[d+2]<<8|this[d+3])},n.prototype.readBigUInt64LE=Z(function(d){d=d>>>0,ue(d,"offset");let f=this[d],m=this[d+7];(f===void 0||m===void 0)&&Pe(d,this.length-8);let T=f+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24,B=this[++d]+this[++d]*2**8+this[++d]*2**16+m*2**24;return BigInt(T)+(BigInt(B)<<BigInt(32))}),n.prototype.readBigUInt64BE=Z(function(d){d=d>>>0,ue(d,"offset");let f=this[d],m=this[d+7];(f===void 0||m===void 0)&&Pe(d,this.length-8);let T=f*2**24+this[++d]*2**16+this[++d]*2**8+this[++d],B=this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+m;return(BigInt(T)<<BigInt(32))+BigInt(B)}),n.prototype.readIntLE=function(d,f,m){d=d>>>0,f=f>>>0,m||me(d,f,this.length);let T=this[d],B=1,G=0;for(;++G<f&&(B*=256);)T+=this[d+G]*B;return B*=128,T>=B&&(T-=Math.pow(2,8*f)),T},n.prototype.readIntBE=function(d,f,m){d=d>>>0,f=f>>>0,m||me(d,f,this.length);let T=f,B=1,G=this[d+--T];for(;T>0&&(B*=256);)G+=this[d+--T]*B;return B*=128,G>=B&&(G-=Math.pow(2,8*f)),G},n.prototype.readInt8=function(d,f){return d=d>>>0,f||me(d,1,this.length),this[d]&128?(255-this[d]+1)*-1:this[d]},n.prototype.readInt16LE=function(d,f){d=d>>>0,f||me(d,2,this.length);let m=this[d]|this[d+1]<<8;return m&32768?m|4294901760:m},n.prototype.readInt16BE=function(d,f){d=d>>>0,f||me(d,2,this.length);let m=this[d+1]|this[d]<<8;return m&32768?m|4294901760:m},n.prototype.readInt32LE=function(d,f){return d=d>>>0,f||me(d,4,this.length),this[d]|this[d+1]<<8|this[d+2]<<16|this[d+3]<<24},n.prototype.readInt32BE=function(d,f){return d=d>>>0,f||me(d,4,this.length),this[d]<<24|this[d+1]<<16|this[d+2]<<8|this[d+3]},n.prototype.readBigInt64LE=Z(function(d){d=d>>>0,ue(d,"offset");let f=this[d],m=this[d+7];(f===void 0||m===void 0)&&Pe(d,this.length-8);let T=this[d+4]+this[d+5]*2**8+this[d+6]*2**16+(m<<24);return(BigInt(T)<<BigInt(32))+BigInt(f+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24)}),n.prototype.readBigInt64BE=Z(function(d){d=d>>>0,ue(d,"offset");let f=this[d],m=this[d+7];(f===void 0||m===void 0)&&Pe(d,this.length-8);let T=(f<<24)+this[++d]*2**16+this[++d]*2**8+this[++d];return(BigInt(T)<<BigInt(32))+BigInt(this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+m)}),n.prototype.readFloatLE=function(d,f){return d=d>>>0,f||me(d,4,this.length),s.read(this,d,!0,23,4)},n.prototype.readFloatBE=function(d,f){return d=d>>>0,f||me(d,4,this.length),s.read(this,d,!1,23,4)},n.prototype.readDoubleLE=function(d,f){return d=d>>>0,f||me(d,8,this.length),s.read(this,d,!0,52,8)},n.prototype.readDoubleBE=function(d,f){return d=d>>>0,f||me(d,8,this.length),s.read(this,d,!1,52,8)};function Ne(d,f,m,T,B,G){if(!n.isBuffer(d))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>B||f<G)throw new RangeError('"value" argument is out of bounds');if(m+T>d.length)throw new RangeError("Index out of range")}n.prototype.writeUintLE=n.prototype.writeUIntLE=function(d,f,m,T){if(d=+d,f=f>>>0,m=m>>>0,!T){let he=Math.pow(2,8*m)-1;Ne(this,d,f,m,he,0)}let B=1,G=0;for(this[f]=d&255;++G<m&&(B*=256);)this[f+G]=d/B&255;return f+m},n.prototype.writeUintBE=n.prototype.writeUIntBE=function(d,f,m,T){if(d=+d,f=f>>>0,m=m>>>0,!T){let he=Math.pow(2,8*m)-1;Ne(this,d,f,m,he,0)}let B=m-1,G=1;for(this[f+B]=d&255;--B>=0&&(G*=256);)this[f+B]=d/G&255;return f+m},n.prototype.writeUint8=n.prototype.writeUInt8=function(d,f,m){return d=+d,f=f>>>0,m||Ne(this,d,f,1,255,0),this[f]=d&255,f+1},n.prototype.writeUint16LE=n.prototype.writeUInt16LE=function(d,f,m){return d=+d,f=f>>>0,m||Ne(this,d,f,2,65535,0),this[f]=d&255,this[f+1]=d>>>8,f+2},n.prototype.writeUint16BE=n.prototype.writeUInt16BE=function(d,f,m){return d=+d,f=f>>>0,m||Ne(this,d,f,2,65535,0),this[f]=d>>>8,this[f+1]=d&255,f+2},n.prototype.writeUint32LE=n.prototype.writeUInt32LE=function(d,f,m){return d=+d,f=f>>>0,m||Ne(this,d,f,4,4294967295,0),this[f+3]=d>>>24,this[f+2]=d>>>16,this[f+1]=d>>>8,this[f]=d&255,f+4},n.prototype.writeUint32BE=n.prototype.writeUInt32BE=function(d,f,m){return d=+d,f=f>>>0,m||Ne(this,d,f,4,4294967295,0),this[f]=d>>>24,this[f+1]=d>>>16,this[f+2]=d>>>8,this[f+3]=d&255,f+4};function I(d,f,m,T,B){fe(f,T,B,d,m,7);let G=Number(f&BigInt(4294967295));d[m++]=G,G=G>>8,d[m++]=G,G=G>>8,d[m++]=G,G=G>>8,d[m++]=G;let he=Number(f>>BigInt(32)&BigInt(4294967295));return d[m++]=he,he=he>>8,d[m++]=he,he=he>>8,d[m++]=he,he=he>>8,d[m++]=he,m}function oe(d,f,m,T,B){fe(f,T,B,d,m,7);let G=Number(f&BigInt(4294967295));d[m+7]=G,G=G>>8,d[m+6]=G,G=G>>8,d[m+5]=G,G=G>>8,d[m+4]=G;let he=Number(f>>BigInt(32)&BigInt(4294967295));return d[m+3]=he,he=he>>8,d[m+2]=he,he=he>>8,d[m+1]=he,he=he>>8,d[m]=he,m+8}n.prototype.writeBigUInt64LE=Z(function(d,f=0){return I(this,d,f,BigInt(0),BigInt("0xffffffffffffffff"))}),n.prototype.writeBigUInt64BE=Z(function(d,f=0){return oe(this,d,f,BigInt(0),BigInt("0xffffffffffffffff"))}),n.prototype.writeIntLE=function(d,f,m,T){if(d=+d,f=f>>>0,!T){let De=Math.pow(2,8*m-1);Ne(this,d,f,m,De-1,-De)}let B=0,G=1,he=0;for(this[f]=d&255;++B<m&&(G*=256);)d<0&&he===0&&this[f+B-1]!==0&&(he=1),this[f+B]=(d/G>>0)-he&255;return f+m},n.prototype.writeIntBE=function(d,f,m,T){if(d=+d,f=f>>>0,!T){let De=Math.pow(2,8*m-1);Ne(this,d,f,m,De-1,-De)}let B=m-1,G=1,he=0;for(this[f+B]=d&255;--B>=0&&(G*=256);)d<0&&he===0&&this[f+B+1]!==0&&(he=1),this[f+B]=(d/G>>0)-he&255;return f+m},n.prototype.writeInt8=function(d,f,m){return d=+d,f=f>>>0,m||Ne(this,d,f,1,127,-128),d<0&&(d=255+d+1),this[f]=d&255,f+1},n.prototype.writeInt16LE=function(d,f,m){return d=+d,f=f>>>0,m||Ne(this,d,f,2,32767,-32768),this[f]=d&255,this[f+1]=d>>>8,f+2},n.prototype.writeInt16BE=function(d,f,m){return d=+d,f=f>>>0,m||Ne(this,d,f,2,32767,-32768),this[f]=d>>>8,this[f+1]=d&255,f+2},n.prototype.writeInt32LE=function(d,f,m){return d=+d,f=f>>>0,m||Ne(this,d,f,4,2147483647,-2147483648),this[f]=d&255,this[f+1]=d>>>8,this[f+2]=d>>>16,this[f+3]=d>>>24,f+4},n.prototype.writeInt32BE=function(d,f,m){return d=+d,f=f>>>0,m||Ne(this,d,f,4,2147483647,-2147483648),d<0&&(d=4294967295+d+1),this[f]=d>>>24,this[f+1]=d>>>16,this[f+2]=d>>>8,this[f+3]=d&255,f+4},n.prototype.writeBigInt64LE=Z(function(d,f=0){return I(this,d,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),n.prototype.writeBigInt64BE=Z(function(d,f=0){return oe(this,d,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ae(d,f,m,T,B,G){if(m+T>d.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("Index out of range")}function Me(d,f,m,T,B){return f=+f,m=m>>>0,B||Ae(d,f,m,4),s.write(d,f,m,T,23,4),m+4}n.prototype.writeFloatLE=function(d,f,m){return Me(this,d,f,!0,m)},n.prototype.writeFloatBE=function(d,f,m){return Me(this,d,f,!1,m)};function Ee(d,f,m,T,B){return f=+f,m=m>>>0,B||Ae(d,f,m,8),s.write(d,f,m,T,52,8),m+8}n.prototype.writeDoubleLE=function(d,f,m){return Ee(this,d,f,!0,m)},n.prototype.writeDoubleBE=function(d,f,m){return Ee(this,d,f,!1,m)},n.prototype.copy=function(d,f,m,T){if(!n.isBuffer(d))throw new TypeError("argument should be a Buffer");if(m||(m=0),!T&&T!==0&&(T=this.length),f>=d.length&&(f=d.length),f||(f=0),T>0&&T<m&&(T=m),T===m||d.length===0||this.length===0)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(m<0||m>=this.length)throw new RangeError("Index out of range");if(T<0)throw new RangeError("sourceEnd out of bounds");T>this.length&&(T=this.length),d.length-f<T-m&&(T=d.length-f+m);let B=T-m;return this===d&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(f,m,T):Uint8Array.prototype.set.call(d,this.subarray(m,T),f),B},n.prototype.fill=function(d,f,m,T){if(typeof d=="string"){if(typeof f=="string"?(T=f,f=0,m=this.length):typeof m=="string"&&(T=m,m=this.length),T!==void 0&&typeof T!="string")throw new TypeError("encoding must be a string");if(typeof T=="string"&&!n.isEncoding(T))throw new TypeError("Unknown encoding: "+T);if(d.length===1){let G=d.charCodeAt(0);(T==="utf8"&&G<128||T==="latin1")&&(d=G)}}else typeof d=="number"?d=d&255:typeof d=="boolean"&&(d=Number(d));if(f<0||this.length<f||this.length<m)throw new RangeError("Out of range index");if(m<=f)return this;f=f>>>0,m=m===void 0?this.length:m>>>0,d||(d=0);let B;if(typeof d=="number")for(B=f;B<m;++B)this[B]=d;else{let G=n.isBuffer(d)?d:n.from(d,T),he=G.length;if(he===0)throw new TypeError('The value "'+d+'" is invalid for argument "value"');for(B=0;B<m-f;++B)this[B+f]=G[B%he]}return this};let D={};function R(d,f,m){D[d]=class extends m{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${d}]`,this.stack,delete this.name}get code(){return d}set code(T){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:T,writable:!0})}toString(){return`${this.name} [${d}]: ${this.message}`}}}R("ERR_BUFFER_OUT_OF_BOUNDS",function(d){return d?`${d} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),R("ERR_INVALID_ARG_TYPE",function(d,f){return`The "${d}" argument must be of type number. Received type ${typeof f}`},TypeError),R("ERR_OUT_OF_RANGE",function(d,f,m){let T=`The value of "${d}" is out of range.`,B=m;return Number.isInteger(m)&&Math.abs(m)>2**32?B=ne(String(m)):typeof m=="bigint"&&(B=String(m),(m>BigInt(2)**BigInt(32)||m<-(BigInt(2)**BigInt(32)))&&(B=ne(B)),B+="n"),T+=` It must be ${f}. Received ${B}`,T},RangeError);function ne(d){let f="",m=d.length,T=d[0]==="-"?1:0;for(;m>=T+4;m-=3)f=`_${d.slice(m-3,m)}${f}`;return`${d.slice(0,m)}${f}`}function Se(d,f,m){ue(f,"offset"),(d[f]===void 0||d[f+m]===void 0)&&Pe(f,d.length-(m+1))}function fe(d,f,m,T,B,G){if(d>m||d<f){let he=typeof f=="bigint"?"n":"",De;throw f===0||f===BigInt(0)?De=`>= 0${he} and < 2${he} ** ${(G+1)*8}${he}`:De=`>= -(2${he} ** ${(G+1)*8-1}${he}) and < 2 ** ${(G+1)*8-1}${he}`,new D.ERR_OUT_OF_RANGE("value",De,d)}Se(T,B,G)}function ue(d,f){if(typeof d!="number")throw new D.ERR_INVALID_ARG_TYPE(f,"number",d)}function Pe(d,f,m){throw Math.floor(d)!==d?(ue(d,m),new D.ERR_OUT_OF_RANGE("offset","an integer",d)):f<0?new D.ERR_BUFFER_OUT_OF_BOUNDS:new D.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${f}`,d)}let Ie=/[^+/0-9A-Za-z-_]/g;function U(d){if(d=d.split("=")[0],d=d.trim().replace(Ie,""),d.length<2)return"";for(;d.length%4!==0;)d=d+"=";return d}function J(d,f){f=f||1/0;let m,T=d.length,B=null,G=[];for(let he=0;he<T;++he){if(m=d.charCodeAt(he),m>55295&&m<57344){if(!B){if(m>56319){(f-=3)>-1&&G.push(239,191,189);continue}else if(he+1===T){(f-=3)>-1&&G.push(239,191,189);continue}B=m;continue}if(m<56320){(f-=3)>-1&&G.push(239,191,189),B=m;continue}m=(B-55296<<10|m-56320)+65536}else B&&(f-=3)>-1&&G.push(239,191,189);if(B=null,m<128){if((f-=1)<0)break;G.push(m)}else if(m<2048){if((f-=2)<0)break;G.push(m>>6|192,m&63|128)}else if(m<65536){if((f-=3)<0)break;G.push(m>>12|224,m>>6&63|128,m&63|128)}else if(m<1114112){if((f-=4)<0)break;G.push(m>>18|240,m>>12&63|128,m>>6&63|128,m&63|128)}else throw new Error("Invalid code point")}return G}function Y(d){let f=[];for(let m=0;m<d.length;++m)f.push(d.charCodeAt(m)&255);return f}function ge(d,f){let m,T,B,G=[];for(let he=0;he<d.length&&!((f-=2)<0);++he)m=d.charCodeAt(he),T=m>>8,B=m%256,G.push(B),G.push(T);return G}function ce(d){return e.toByteArray(U(d))}function H(d,f,m,T){let B;for(B=0;B<T&&!(B+m>=f.length||B>=d.length);++B)f[B+m]=d[B];return B}function re(d,f){return d instanceof f||d!=null&&d.constructor!=null&&d.constructor.name!=null&&d.constructor.name===f.name}function j(d){return d!==d}let V=function(){let d="0123456789abcdef",f=new Array(256);for(let m=0;m<16;++m){let T=m*16;for(let B=0;B<16;++B)f[T+B]=d[m]+d[B]}return f}();function Z(d){return typeof BigInt>"u"?ve:d}function ve(){throw new Error("BigInt not supported")}return ar}var Mr,bo,Kr,yo,ar,wo,zt,dn,Us,Ls,bt=_(()=>{_e(),we(),F(),Mr={},bo=!1,Kr={},yo=!1,ar={},wo=!1,zt=mu(),zt.Buffer,zt.SlowBuffer,zt.INSPECT_MAX_BYTES,zt.kMaxLength,dn=zt.Buffer,Us=zt.INSPECT_MAX_BYTES,Ls=zt.kMaxLength}),_e=_(()=>{bt()}),bu=E(e=>{_e(),we(),F(),Object.defineProperty(e,"__esModule",{value:!0});var s=class{constructor(t){this.aliasToTopic={},this.max=t}put(t,h){return h===0||h>this.max?!1:(this.aliasToTopic[h]=t,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(t){return this.aliasToTopic[t]}clear(){this.aliasToTopic={}}};e.default=s}),ut=E((e,s)=>{_e(),we(),F(),s.exports={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,h){return t.includes(h)},ArrayPrototypeIndexOf(t,h){return t.indexOf(h)},ArrayPrototypeJoin(t,h){return t.join(h)},ArrayPrototypeMap(t,h){return t.map(h)},ArrayPrototypePop(t,h){return t.pop(h)},ArrayPrototypePush(t,h){return t.push(h)},ArrayPrototypeSlice(t,h,p){return t.slice(h,p)},Error,FunctionPrototypeCall(t,h,...p){return t.call(h,...p)},FunctionPrototypeSymbolHasInstance(t,h){return Function.prototype[Symbol.hasInstance].call(t,h)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,h){return Object.defineProperties(t,h)},ObjectDefineProperty(t,h,p){return Object.defineProperty(t,h,p)},ObjectGetOwnPropertyDescriptor(t,h){return Object.getOwnPropertyDescriptor(t,h)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,h){return Object.setPrototypeOf(t,h)},Promise,PromisePrototypeCatch(t,h){return t.catch(h)},PromisePrototypeThen(t,h,p){return t.then(h,p)},PromiseReject(t){return Promise.reject(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,h){return t.test(h)},SafeSet:Set,String,StringPrototypeSlice(t,h,p){return t.slice(h,p)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(t,h,p){return t.set(h,p)},Uint8Array}}),Kt=E((e,s)=>{_e(),we(),F();var t=(bt(),K(mt)),h=Object.getPrototypeOf(async function(){}).constructor,p=globalThis.Blob||t.Blob,o=typeof p<"u"?function(a){return a instanceof p}:function(a){return!1},n=class extends Error{constructor(a){if(!Array.isArray(a))throw new TypeError(`Expected input to be an Array, got ${typeof a}`);let i="";for(let l=0;l<a.length;l++)i+=`    ${a[l].stack}
`;super(i),this.name="AggregateError",this.errors=a}};s.exports={AggregateError:n,kEmptyObject:Object.freeze({}),once(a){let i=!1;return function(...l){i||(i=!0,a.apply(this,l))}},createDeferredPromise:function(){let a,i;return{promise:new Promise((l,g)=>{a=l,i=g}),resolve:a,reject:i}},promisify(a){return new Promise((i,l)=>{a((g,...y)=>g?l(g):i(...y))})},debuglog(){return function(){}},format(a,...i){return a.replace(/%([sdifj])/g,function(...[l,g]){let y=i.shift();return g==="f"?y.toFixed(6):g==="j"?JSON.stringify(y):g==="s"&&typeof y=="object"?`${y.constructor!==Object?y.constructor.name:""} {}`.trim():y.toString()})},inspect(a){switch(typeof a){case"string":if(a.includes("'"))if(a.includes('"')){if(!a.includes("`")&&!a.includes("${"))return`\`${a}\``}else return`"${a}"`;return`'${a}'`;case"number":return isNaN(a)?"NaN":Object.is(a,-0)?String(a):a;case"bigint":return`${String(a)}n`;case"boolean":case"undefined":return String(a);case"object":return"{}"}},types:{isAsyncFunction(a){return a instanceof h},isArrayBufferView(a){return ArrayBuffer.isView(a)}},isBlob:o},s.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),_o=E((e,s)=>{_e(),we(),F();var{AbortController:t,AbortSignal:h}=typeof self<"u"?self:typeof window<"u"?window:void 0;s.exports=t,s.exports.AbortSignal=h,s.exports.default=t}),At=E((e,s)=>{_e(),we(),F();var{format:t,inspect:h,AggregateError:p}=Kt(),o=globalThis.AggregateError||p,n=Symbol("kIsNodeError"),a=["string","function","number","object","Function","Object","boolean","bigint","symbol"],i=/^([A-Z][a-z0-9]*)+$/,l="__node_internal_",g={};function y(k,P){if(!k)throw new g.ERR_INTERNAL_ASSERTION(P)}function w(k){let P="",z=k.length,Q=k[0]==="-"?1:0;for(;z>=Q+4;z-=3)P=`_${k.slice(z-3,z)}${P}`;return`${k.slice(0,z)}${P}`}function v(k,P,z){if(typeof P=="function")return y(P.length<=z.length,`Code: ${k}; The provided arguments length (${z.length}) does not match the required ones (${P.length}).`),P(...z);let Q=(P.match(/%[dfijoOs]/g)||[]).length;return y(Q===z.length,`Code: ${k}; The provided arguments length (${z.length}) does not match the required ones (${Q}).`),z.length===0?P:t(P,...z)}function S(k,P,z){z||(z=Error);class Q extends z{constructor(...N){super(v(k,P,N))}toString(){return`${this.name} [${k}]: ${this.message}`}}Object.defineProperties(Q.prototype,{name:{value:z.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${k}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),Q.prototype.code=k,Q.prototype[n]=!0,g[k]=Q}function C(k){let P=l+k.name;return Object.defineProperty(k,"name",{value:P}),k}function x(k,P){if(k&&P&&k!==P){if(Array.isArray(P.errors))return P.errors.push(k),P;let z=new o([P,k],P.message);return z.code=P.code,z}return k||P}var W=class extends Error{constructor(k="The operation was aborted",P=void 0){if(P!==void 0&&typeof P!="object")throw new g.ERR_INVALID_ARG_TYPE("options","Object",P);super(k,P),this.code="ABORT_ERR",this.name="AbortError"}};S("ERR_ASSERTION","%s",Error),S("ERR_INVALID_ARG_TYPE",(k,P,z)=>{y(typeof k=="string","'name' must be a string"),Array.isArray(P)||(P=[P]);let Q="The ";k.endsWith(" argument")?Q+=`${k} `:Q+=`"${k}" ${k.includes(".")?"property":"argument"} `,Q+="must be ";let M=[],N=[],$=[];for(let ae of P)y(typeof ae=="string","All expected entries have to be of type string"),a.includes(ae)?M.push(ae.toLowerCase()):i.test(ae)?N.push(ae):(y(ae!=="object",'The value "object" should be written as "Object"'),$.push(ae));if(N.length>0){let ae=M.indexOf("object");ae!==-1&&(M.splice(M,ae,1),N.push("Object"))}if(M.length>0){switch(M.length){case 1:Q+=`of type ${M[0]}`;break;case 2:Q+=`one of type ${M[0]} or ${M[1]}`;break;default:{let ae=M.pop();Q+=`one of type ${M.join(", ")}, or ${ae}`}}(N.length>0||$.length>0)&&(Q+=" or ")}if(N.length>0){switch(N.length){case 1:Q+=`an instance of ${N[0]}`;break;case 2:Q+=`an instance of ${N[0]} or ${N[1]}`;break;default:{let ae=N.pop();Q+=`an instance of ${N.join(", ")}, or ${ae}`}}$.length>0&&(Q+=" or ")}switch($.length){case 0:break;case 1:$[0].toLowerCase()!==$[0]&&(Q+="an "),Q+=`${$[0]}`;break;case 2:Q+=`one of ${$[0]} or ${$[1]}`;break;default:{let ae=$.pop();Q+=`one of ${$.join(", ")}, or ${ae}`}}if(z==null)Q+=`. Received ${z}`;else if(typeof z=="function"&&z.name)Q+=`. Received function ${z.name}`;else if(typeof z=="object"){var X;if((X=z.constructor)!==null&&X!==void 0&&X.name)Q+=`. Received an instance of ${z.constructor.name}`;else{let ae=h(z,{depth:-1});Q+=`. Received ${ae}`}}else{let ae=h(z,{colors:!1});ae.length>25&&(ae=`${ae.slice(0,25)}...`),Q+=`. Received type ${typeof z} (${ae})`}return Q},TypeError),S("ERR_INVALID_ARG_VALUE",(k,P,z="is invalid")=>{let Q=h(P);return Q.length>128&&(Q=Q.slice(0,128)+"..."),`The ${k.includes(".")?"property":"argument"} '${k}' ${z}. Received ${Q}`},TypeError),S("ERR_INVALID_RETURN_VALUE",(k,P,z)=>{var Q;let M=z!=null&&(Q=z.constructor)!==null&&Q!==void 0&&Q.name?`instance of ${z.constructor.name}`:`type ${typeof z}`;return`Expected ${k} to be returned from the "${P}" function but got ${M}.`},TypeError),S("ERR_MISSING_ARGS",(...k)=>{y(k.length>0,"At least one arg needs to be specified");let P,z=k.length;switch(k=(Array.isArray(k)?k:[k]).map(Q=>`"${Q}"`).join(" or "),z){case 1:P+=`The ${k[0]} argument`;break;case 2:P+=`The ${k[0]} and ${k[1]} arguments`;break;default:{let Q=k.pop();P+=`The ${k.join(", ")}, and ${Q} arguments`}break}return`${P} must be specified`},TypeError),S("ERR_OUT_OF_RANGE",(k,P,z)=>{y(P,'Missing "range" argument');let Q;return Number.isInteger(z)&&Math.abs(z)>2**32?Q=w(String(z)):typeof z=="bigint"?(Q=String(z),(z>2n**32n||z<-(2n**32n))&&(Q=w(Q)),Q+="n"):Q=h(z),`The value of "${k}" is out of range. It must be ${P}. Received ${Q}`},RangeError),S("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),S("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),S("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),S("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),S("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),S("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),S("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),S("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),S("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),S("ERR_STREAM_WRITE_AFTER_END","write after end",Error),S("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),s.exports={AbortError:W,aggregateTwoErrors:C(x),hideStackFrames:C,codes:g}}),pn=E((e,s)=>{_e(),we(),F();var{ArrayIsArray:t,ArrayPrototypeIncludes:h,ArrayPrototypeJoin:p,ArrayPrototypeMap:o,NumberIsInteger:n,NumberIsNaN:a,NumberMAX_SAFE_INTEGER:i,NumberMIN_SAFE_INTEGER:l,NumberParseInt:g,ObjectPrototypeHasOwnProperty:y,RegExpPrototypeExec:w,String:v,StringPrototypeToUpperCase:S,StringPrototypeTrim:C}=ut(),{hideStackFrames:x,codes:{ERR_SOCKET_BAD_PORT:W,ERR_INVALID_ARG_TYPE:k,ERR_INVALID_ARG_VALUE:P,ERR_OUT_OF_RANGE:z,ERR_UNKNOWN_SIGNAL:Q}}=At(),{normalizeEncoding:M}=Kt(),{isAsyncFunction:N,isArrayBufferView:$}=Kt().types,X={};function ae(H){return H===(H|0)}function pe(H){return H===H>>>0}var O=/^[0-7]+$/,te="must be a 32-bit unsigned integer or an octal string";function de(H,re,j){if(typeof H>"u"&&(H=j),typeof H=="string"){if(w(O,H)===null)throw new P(re,H,te);H=g(H,8)}return ye(H,re),H}var ie=x((H,re,j=l,V=i)=>{if(typeof H!="number")throw new k(re,"number",H);if(!n(H))throw new z(re,"an integer",H);if(H<j||H>V)throw new z(re,`>= ${j} && <= ${V}`,H)}),ke=x((H,re,j=-2147483648,V=2147483647)=>{if(typeof H!="number")throw new k(re,"number",H);if(!n(H))throw new z(re,"an integer",H);if(H<j||H>V)throw new z(re,`>= ${j} && <= ${V}`,H)}),ye=x((H,re,j=!1)=>{if(typeof H!="number")throw new k(re,"number",H);if(!n(H))throw new z(re,"an integer",H);let V=j?1:0,Z=4294967295;if(H<V||H>Z)throw new z(re,`>= ${V} && <= ${Z}`,H)});function ee(H,re){if(typeof H!="string")throw new k(re,"string",H)}function Oe(H,re,j=void 0,V){if(typeof H!="number")throw new k(re,"number",H);if(j!=null&&H<j||V!=null&&H>V||(j!=null||V!=null)&&a(H))throw new z(re,`${j!=null?`>= ${j}`:""}${j!=null&&V!=null?" && ":""}${V!=null?`<= ${V}`:""}`,H)}var me=x((H,re,j)=>{if(!h(j,H)){let V="must be one of: "+p(o(j,Z=>typeof Z=="string"?`'${Z}'`:v(Z)),", ");throw new P(re,H,V)}});function Ne(H,re){if(typeof H!="boolean")throw new k(re,"boolean",H)}function I(H,re,j){return H==null||!y(H,re)?j:H[re]}var oe=x((H,re,j=null)=>{let V=I(j,"allowArray",!1),Z=I(j,"allowFunction",!1);if(!I(j,"nullable",!1)&&H===null||!V&&t(H)||typeof H!="object"&&(!Z||typeof H!="function"))throw new k(re,"Object",H)}),Ae=x((H,re)=>{if(H!=null&&typeof H!="object"&&typeof H!="function")throw new k(re,"a dictionary",H)}),Me=x((H,re,j=0)=>{if(!t(H))throw new k(re,"Array",H);if(H.length<j){let V=`must be longer than ${j}`;throw new P(re,H,V)}});function Ee(H,re){Me(H,re);for(let j=0;j<H.length;j++)ee(H[j],`${re}[${j}]`)}function D(H,re){Me(H,re);for(let j=0;j<H.length;j++)Ne(H[j],`${re}[${j}]`)}function R(H,re="signal"){if(ee(H,re),X[H]===void 0)throw X[S(H)]!==void 0?new Q(H+" (signals must use all capital letters)"):new Q(H)}var ne=x((H,re="buffer")=>{if(!$(H))throw new k(re,["Buffer","TypedArray","DataView"],H)});function Se(H,re){let j=M(re),V=H.length;if(j==="hex"&&V%2!==0)throw new P("encoding",re,`is invalid for data of length ${V}`)}function fe(H,re="Port",j=!0){if(typeof H!="number"&&typeof H!="string"||typeof H=="string"&&C(H).length===0||+H!==+H>>>0||H>65535||H===0&&!j)throw new W(re,H,j);return H|0}var ue=x((H,re)=>{if(H!==void 0&&(H===null||typeof H!="object"||!("aborted"in H)))throw new k(re,"AbortSignal",H)}),Pe=x((H,re)=>{if(typeof H!="function")throw new k(re,"Function",H)}),Ie=x((H,re)=>{if(typeof H!="function"||N(H))throw new k(re,"Function",H)}),U=x((H,re)=>{if(H!==void 0)throw new k(re,"undefined",H)});function J(H,re,j){if(!h(j,H))throw new k(re,`('${p(j,"|")}')`,H)}var Y=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ge(H,re){if(typeof H>"u"||!w(Y,H))throw new P(re,H,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function ce(H){if(typeof H=="string")return ge(H,"hints"),H;if(t(H)){let re=H.length,j="";if(re===0)return j;for(let V=0;V<re;V++){let Z=H[V];ge(Z,"hints"),j+=Z,V!==re-1&&(j+=", ")}return j}throw new P("hints",H,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}s.exports={isInt32:ae,isUint32:pe,parseFileMode:de,validateArray:Me,validateStringArray:Ee,validateBooleanArray:D,validateBoolean:Ne,validateBuffer:ne,validateDictionary:Ae,validateEncoding:Se,validateFunction:Pe,validateInt32:ke,validateInteger:ie,validateNumber:Oe,validateObject:oe,validateOneOf:me,validatePlainFunction:Ie,validatePort:fe,validateSignalName:R,validateString:ee,validateUint32:ye,validateUndefined:U,validateUnion:J,validateAbortSignal:ue,validateLinkHeaderValue:ce}}),br=E((e,s)=>{_e(),we(),F();var t=s.exports={},h,p;function o(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?h=setTimeout:h=o}catch{h=o}try{typeof clearTimeout=="function"?p=clearTimeout:p=n}catch{p=n}})();function a(W){if(h===setTimeout)return setTimeout(W,0);if((h===o||!h)&&setTimeout)return h=setTimeout,setTimeout(W,0);try{return h(W,0)}catch{try{return h.call(null,W,0)}catch{return h.call(this,W,0)}}}function i(W){if(p===clearTimeout)return clearTimeout(W);if((p===n||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(W);try{return p(W)}catch{try{return p.call(null,W)}catch{return p.call(this,W)}}}var l=[],g=!1,y,w=-1;function v(){!g||!y||(g=!1,y.length?l=y.concat(l):w=-1,l.length&&S())}function S(){if(!g){var W=a(v);g=!0;for(var k=l.length;k;){for(y=l,l=[];++w<k;)y&&y[w].run();w=-1,k=l.length}y=null,g=!1,i(W)}}t.nextTick=function(W){var k=new Array(arguments.length-1);if(arguments.length>1)for(var P=1;P<arguments.length;P++)k[P-1]=arguments[P];l.push(new C(W,k)),l.length===1&&!g&&a(S)};function C(W,k){this.fun=W,this.array=k}C.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function x(){}t.on=x,t.addListener=x,t.once=x,t.off=x,t.removeListener=x,t.removeAllListeners=x,t.emit=x,t.prependListener=x,t.prependOnceListener=x,t.listeners=function(W){return[]},t.binding=function(W){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(W){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}}),Jt=E((e,s)=>{_e(),we(),F();var{Symbol:t,SymbolAsyncIterator:h,SymbolIterator:p,SymbolFor:o}=ut(),n=t("kDestroyed"),a=t("kIsErrored"),i=t("kIsReadable"),l=t("kIsDisturbed"),g=o("nodejs.webstream.isClosedPromise"),y=o("nodejs.webstream.controllerErrorFunction");function w(I,oe=!1){var Ae;return!!(I&&typeof I.pipe=="function"&&typeof I.on=="function"&&(!oe||typeof I.pause=="function"&&typeof I.resume=="function")&&(!I._writableState||((Ae=I._readableState)===null||Ae===void 0?void 0:Ae.readable)!==!1)&&(!I._writableState||I._readableState))}function v(I){var oe;return!!(I&&typeof I.write=="function"&&typeof I.on=="function"&&(!I._readableState||((oe=I._writableState)===null||oe===void 0?void 0:oe.writable)!==!1))}function S(I){return!!(I&&typeof I.pipe=="function"&&I._readableState&&typeof I.on=="function"&&typeof I.write=="function")}function C(I){return I&&(I._readableState||I._writableState||typeof I.write=="function"&&typeof I.on=="function"||typeof I.pipe=="function"&&typeof I.on=="function")}function x(I){return!!(I&&!C(I)&&typeof I.pipeThrough=="function"&&typeof I.getReader=="function"&&typeof I.cancel=="function")}function W(I){return!!(I&&!C(I)&&typeof I.getWriter=="function"&&typeof I.abort=="function")}function k(I){return!!(I&&!C(I)&&typeof I.readable=="object"&&typeof I.writable=="object")}function P(I){return x(I)||W(I)||k(I)}function z(I,oe){return I==null?!1:oe===!0?typeof I[h]=="function":oe===!1?typeof I[p]=="function":typeof I[h]=="function"||typeof I[p]=="function"}function Q(I){if(!C(I))return null;let oe=I._writableState,Ae=I._readableState,Me=oe||Ae;return!!(I.destroyed||I[n]||Me!=null&&Me.destroyed)}function M(I){if(!v(I))return null;if(I.writableEnded===!0)return!0;let oe=I._writableState;return oe!=null&&oe.errored?!1:typeof(oe==null?void 0:oe.ended)!="boolean"?null:oe.ended}function N(I,oe){if(!v(I))return null;if(I.writableFinished===!0)return!0;let Ae=I._writableState;return Ae!=null&&Ae.errored?!1:typeof(Ae==null?void 0:Ae.finished)!="boolean"?null:!!(Ae.finished||oe===!1&&Ae.ended===!0&&Ae.length===0)}function $(I){if(!w(I))return null;if(I.readableEnded===!0)return!0;let oe=I._readableState;return!oe||oe.errored?!1:typeof(oe==null?void 0:oe.ended)!="boolean"?null:oe.ended}function X(I,oe){if(!w(I))return null;let Ae=I._readableState;return Ae!=null&&Ae.errored?!1:typeof(Ae==null?void 0:Ae.endEmitted)!="boolean"?null:!!(Ae.endEmitted||oe===!1&&Ae.ended===!0&&Ae.length===0)}function ae(I){return I&&I[i]!=null?I[i]:typeof(I==null?void 0:I.readable)!="boolean"?null:Q(I)?!1:w(I)&&I.readable&&!X(I)}function pe(I){return typeof(I==null?void 0:I.writable)!="boolean"?null:Q(I)?!1:v(I)&&I.writable&&!M(I)}function O(I,oe){return C(I)?Q(I)?!0:!((oe==null?void 0:oe.readable)!==!1&&ae(I)||(oe==null?void 0:oe.writable)!==!1&&pe(I)):null}function te(I){var oe,Ae;return C(I)?I.writableErrored?I.writableErrored:(oe=(Ae=I._writableState)===null||Ae===void 0?void 0:Ae.errored)!==null&&oe!==void 0?oe:null:null}function de(I){var oe,Ae;return C(I)?I.readableErrored?I.readableErrored:(oe=(Ae=I._readableState)===null||Ae===void 0?void 0:Ae.errored)!==null&&oe!==void 0?oe:null:null}function ie(I){if(!C(I))return null;if(typeof I.closed=="boolean")return I.closed;let oe=I._writableState,Ae=I._readableState;return typeof(oe==null?void 0:oe.closed)=="boolean"||typeof(Ae==null?void 0:Ae.closed)=="boolean"?(oe==null?void 0:oe.closed)||(Ae==null?void 0:Ae.closed):typeof I._closed=="boolean"&&ke(I)?I._closed:null}function ke(I){return typeof I._closed=="boolean"&&typeof I._defaultKeepAlive=="boolean"&&typeof I._removedConnection=="boolean"&&typeof I._removedContLen=="boolean"}function ye(I){return typeof I._sent100=="boolean"&&ke(I)}function ee(I){var oe;return typeof I._consuming=="boolean"&&typeof I._dumped=="boolean"&&((oe=I.req)===null||oe===void 0?void 0:oe.upgradeOrConnect)===void 0}function Oe(I){if(!C(I))return null;let oe=I._writableState,Ae=I._readableState,Me=oe||Ae;return!Me&&ye(I)||!!(Me&&Me.autoDestroy&&Me.emitClose&&Me.closed===!1)}function me(I){var oe;return!!(I&&((oe=I[l])!==null&&oe!==void 0?oe:I.readableDidRead||I.readableAborted))}function Ne(I){var oe,Ae,Me,Ee,D,R,ne,Se,fe,ue;return!!(I&&((oe=(Ae=(Me=(Ee=(D=(R=I[a])!==null&&R!==void 0?R:I.readableErrored)!==null&&D!==void 0?D:I.writableErrored)!==null&&Ee!==void 0?Ee:(ne=I._readableState)===null||ne===void 0?void 0:ne.errorEmitted)!==null&&Me!==void 0?Me:(Se=I._writableState)===null||Se===void 0?void 0:Se.errorEmitted)!==null&&Ae!==void 0?Ae:(fe=I._readableState)===null||fe===void 0?void 0:fe.errored)!==null&&oe!==void 0?oe:!((ue=I._writableState)===null||ue===void 0)&&ue.errored))}s.exports={kDestroyed:n,isDisturbed:me,kIsDisturbed:l,isErrored:Ne,kIsErrored:a,isReadable:ae,kIsReadable:i,kIsClosedPromise:g,kControllerErrorFunction:y,isClosed:ie,isDestroyed:Q,isDuplexNodeStream:S,isFinished:O,isIterable:z,isReadableNodeStream:w,isReadableStream:x,isReadableEnded:$,isReadableFinished:X,isReadableErrored:de,isNodeStream:C,isWebStream:P,isWritable:pe,isWritableNodeStream:v,isWritableStream:W,isWritableEnded:M,isWritableFinished:N,isWritableErrored:te,isServerRequest:ee,isServerResponse:ye,willEmitClose:Oe,isTransformStream:k}}),lr=E((e,s)=>{_e(),we(),F();var t=br(),{AbortError:h,codes:p}=At(),{ERR_INVALID_ARG_TYPE:o,ERR_STREAM_PREMATURE_CLOSE:n}=p,{kEmptyObject:a,once:i}=Kt(),{validateAbortSignal:l,validateFunction:g,validateObject:y,validateBoolean:w}=pn(),{Promise:v,PromisePrototypeThen:S}=ut(),{isClosed:C,isReadable:x,isReadableNodeStream:W,isReadableStream:k,isReadableFinished:P,isReadableErrored:z,isWritable:Q,isWritableNodeStream:M,isWritableStream:N,isWritableFinished:$,isWritableErrored:X,isNodeStream:ae,willEmitClose:pe,kIsClosedPromise:O}=Jt();function te(ee){return ee.setHeader&&typeof ee.abort=="function"}var de=()=>{};function ie(ee,Oe,me){var Ne,I;if(arguments.length===2?(me=Oe,Oe=a):Oe==null?Oe=a:y(Oe,"options"),g(me,"callback"),l(Oe.signal,"options.signal"),me=i(me),k(ee)||N(ee))return ke(ee,Oe,me);if(!ae(ee))throw new o("stream",["ReadableStream","WritableStream","Stream"],ee);let oe=(Ne=Oe.readable)!==null&&Ne!==void 0?Ne:W(ee),Ae=(I=Oe.writable)!==null&&I!==void 0?I:M(ee),Me=ee._writableState,Ee=ee._readableState,D=()=>{ee.writable||Se()},R=pe(ee)&&W(ee)===oe&&M(ee)===Ae,ne=$(ee,!1),Se=()=>{ne=!0,ee.destroyed&&(R=!1),!(R&&(!ee.readable||oe))&&(!oe||fe)&&me.call(ee)},fe=P(ee,!1),ue=()=>{fe=!0,ee.destroyed&&(R=!1),!(R&&(!ee.writable||Ae))&&(!Ae||ne)&&me.call(ee)},Pe=ce=>{me.call(ee,ce)},Ie=C(ee),U=()=>{Ie=!0;let ce=X(ee)||z(ee);if(ce&&typeof ce!="boolean")return me.call(ee,ce);if(oe&&!fe&&W(ee,!0)&&!P(ee,!1))return me.call(ee,new n);if(Ae&&!ne&&!$(ee,!1))return me.call(ee,new n);me.call(ee)},J=()=>{Ie=!0;let ce=X(ee)||z(ee);if(ce&&typeof ce!="boolean")return me.call(ee,ce);me.call(ee)},Y=()=>{ee.req.on("finish",Se)};te(ee)?(ee.on("complete",Se),R||ee.on("abort",U),ee.req?Y():ee.on("request",Y)):Ae&&!Me&&(ee.on("end",D),ee.on("close",D)),!R&&typeof ee.aborted=="boolean"&&ee.on("aborted",U),ee.on("end",ue),ee.on("finish",Se),Oe.error!==!1&&ee.on("error",Pe),ee.on("close",U),Ie?t.nextTick(U):Me!=null&&Me.errorEmitted||Ee!=null&&Ee.errorEmitted?R||t.nextTick(J):(!oe&&(!R||x(ee))&&(ne||Q(ee)===!1)||!Ae&&(!R||Q(ee))&&(fe||x(ee)===!1)||Ee&&ee.req&&ee.aborted)&&t.nextTick(J);let ge=()=>{me=de,ee.removeListener("aborted",U),ee.removeListener("complete",Se),ee.removeListener("abort",U),ee.removeListener("request",Y),ee.req&&ee.req.removeListener("finish",Se),ee.removeListener("end",D),ee.removeListener("close",D),ee.removeListener("finish",Se),ee.removeListener("end",ue),ee.removeListener("error",Pe),ee.removeListener("close",U)};if(Oe.signal&&!Ie){let ce=()=>{let H=me;ge(),H.call(ee,new h(void 0,{cause:Oe.signal.reason}))};if(Oe.signal.aborted)t.nextTick(ce);else{let H=me;me=i((...re)=>{Oe.signal.removeEventListener("abort",ce),H.apply(ee,re)}),Oe.signal.addEventListener("abort",ce)}}return ge}function ke(ee,Oe,me){let Ne=!1,I=de;if(Oe.signal)if(I=()=>{Ne=!0,me.call(ee,new h(void 0,{cause:Oe.signal.reason}))},Oe.signal.aborted)t.nextTick(I);else{let Ae=me;me=i((...Me)=>{Oe.signal.removeEventListener("abort",I),Ae.apply(ee,Me)}),Oe.signal.addEventListener("abort",I)}let oe=(...Ae)=>{Ne||t.nextTick(()=>me.apply(ee,Ae))};return S(ee[O].promise,oe,oe),de}function ye(ee,Oe){var me;let Ne=!1;return Oe===null&&(Oe=a),(me=Oe)!==null&&me!==void 0&&me.cleanup&&(w(Oe.cleanup,"cleanup"),Ne=Oe.cleanup),new v((I,oe)=>{let Ae=ie(ee,Oe,Me=>{Ne&&Ae(),Me?oe(Me):I()})})}s.exports=ie,s.exports.finished=ye}),jr=E((e,s)=>{_e(),we(),F();var t=br(),{aggregateTwoErrors:h,codes:{ERR_MULTIPLE_CALLBACK:p},AbortError:o}=At(),{Symbol:n}=ut(),{kDestroyed:a,isDestroyed:i,isFinished:l,isServerRequest:g}=Jt(),y=n("kDestroy"),w=n("kConstruct");function v(O,te,de){O&&(O.stack,te&&!te.errored&&(te.errored=O),de&&!de.errored&&(de.errored=O))}function S(O,te){let de=this._readableState,ie=this._writableState,ke=ie||de;return ie!=null&&ie.destroyed||de!=null&&de.destroyed?(typeof te=="function"&&te(),this):(v(O,ie,de),ie&&(ie.destroyed=!0),de&&(de.destroyed=!0),ke.constructed?C(this,O,te):this.once(y,function(ye){C(this,h(ye,O),te)}),this)}function C(O,te,de){let ie=!1;function ke(ye){if(ie)return;ie=!0;let ee=O._readableState,Oe=O._writableState;v(ye,Oe,ee),Oe&&(Oe.closed=!0),ee&&(ee.closed=!0),typeof de=="function"&&de(ye),ye?t.nextTick(x,O,ye):t.nextTick(W,O)}try{O._destroy(te||null,ke)}catch(ye){ke(ye)}}function x(O,te){k(O,te),W(O)}function W(O){let te=O._readableState,de=O._writableState;de&&(de.closeEmitted=!0),te&&(te.closeEmitted=!0),(de!=null&&de.emitClose||te!=null&&te.emitClose)&&O.emit("close")}function k(O,te){let de=O._readableState,ie=O._writableState;ie!=null&&ie.errorEmitted||de!=null&&de.errorEmitted||(ie&&(ie.errorEmitted=!0),de&&(de.errorEmitted=!0),O.emit("error",te))}function P(){let O=this._readableState,te=this._writableState;O&&(O.constructed=!0,O.closed=!1,O.closeEmitted=!1,O.destroyed=!1,O.errored=null,O.errorEmitted=!1,O.reading=!1,O.ended=O.readable===!1,O.endEmitted=O.readable===!1),te&&(te.constructed=!0,te.destroyed=!1,te.closed=!1,te.closeEmitted=!1,te.errored=null,te.errorEmitted=!1,te.finalCalled=!1,te.prefinished=!1,te.ended=te.writable===!1,te.ending=te.writable===!1,te.finished=te.writable===!1)}function z(O,te,de){let ie=O._readableState,ke=O._writableState;if(ke!=null&&ke.destroyed||ie!=null&&ie.destroyed)return this;ie!=null&&ie.autoDestroy||ke!=null&&ke.autoDestroy?O.destroy(te):te&&(te.stack,ke&&!ke.errored&&(ke.errored=te),ie&&!ie.errored&&(ie.errored=te),de?t.nextTick(k,O,te):k(O,te))}function Q(O,te){if(typeof O._construct!="function")return;let de=O._readableState,ie=O._writableState;de&&(de.constructed=!1),ie&&(ie.constructed=!1),O.once(w,te),!(O.listenerCount(w)>1)&&t.nextTick(M,O)}function M(O){let te=!1;function de(ie){if(te){z(O,ie??new p);return}te=!0;let ke=O._readableState,ye=O._writableState,ee=ye||ke;ke&&(ke.constructed=!0),ye&&(ye.constructed=!0),ee.destroyed?O.emit(y,ie):ie?z(O,ie,!0):t.nextTick(N,O)}try{O._construct(ie=>{t.nextTick(de,ie)})}catch(ie){t.nextTick(de,ie)}}function N(O){O.emit(w)}function $(O){return(O==null?void 0:O.setHeader)&&typeof O.abort=="function"}function X(O){O.emit("close")}function ae(O,te){O.emit("error",te),t.nextTick(X,O)}function pe(O,te){!O||i(O)||(!te&&!l(O)&&(te=new o),g(O)?(O.socket=null,O.destroy(te)):$(O)?O.abort():$(O.req)?O.req.abort():typeof O.destroy=="function"?O.destroy(te):typeof O.close=="function"?O.close():te?t.nextTick(ae,O,te):t.nextTick(X,O),O.destroyed||(O[a]=!0))}s.exports={construct:Q,destroyer:pe,destroy:S,undestroy:P,errorOrDestroy:z}});function Xe(){Xe.init.call(this)}function gn(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function Ds(e){return e._maxListeners===void 0?Xe.defaultMaxListeners:e._maxListeners}function Fs(e,s,t,h){var p,o,n,a;if(gn(t),(o=e._events)===void 0?(o=e._events=Object.create(null),e._eventsCount=0):(o.newListener!==void 0&&(e.emit("newListener",s,t.listener?t.listener:t),o=e._events),n=o[s]),n===void 0)n=o[s]=t,++e._eventsCount;else if(typeof n=="function"?n=o[s]=h?[t,n]:[n,t]:h?n.unshift(t):n.push(t),(p=Ds(e))>0&&n.length>p&&!n.warned){n.warned=!0;var i=new Error("Possible EventEmitter memory leak detected. "+n.length+" "+String(s)+" listeners added. Use emitter.setMaxListeners() to increase limit");i.name="MaxListenersExceededWarning",i.emitter=e,i.type=s,i.count=n.length,a=i,console&&console.warn&&console.warn(a)}return e}function yu(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function $s(e,s,t){var h={fired:!1,wrapFn:void 0,target:e,type:s,listener:t},p=yu.bind(h);return p.listener=t,h.wrapFn=p,p}function Ws(e,s,t){var h=e._events;if(h===void 0)return[];var p=h[s];return p===void 0?[]:typeof p=="function"?t?[p.listener||p]:[p]:t?function(o){for(var n=new Array(o.length),a=0;a<n.length;++a)n[a]=o[a].listener||o[a];return n}(p):qs(p,p.length)}function Hs(e){var s=this._events;if(s!==void 0){var t=s[e];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}function qs(e,s){for(var t=new Array(s),h=0;h<s;++h)t[h]=e[h];return t}var Vs,zs,yr,vo,Eo,So,It,Ks=_(()=>{_e(),we(),F(),yr=typeof Reflect=="object"?Reflect:null,vo=yr&&typeof yr.apply=="function"?yr.apply:function(e,s,t){return Function.prototype.apply.call(e,s,t)},zs=yr&&typeof yr.ownKeys=="function"?yr.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},Eo=Number.isNaN||function(e){return e!=e},Vs=Xe,Xe.EventEmitter=Xe,Xe.prototype._events=void 0,Xe.prototype._eventsCount=0,Xe.prototype._maxListeners=void 0,So=10,Object.defineProperty(Xe,"defaultMaxListeners",{enumerable:!0,get:function(){return So},set:function(e){if(typeof e!="number"||e<0||Eo(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");So=e}}),Xe.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Xe.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Eo(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},Xe.prototype.getMaxListeners=function(){return Ds(this)},Xe.prototype.emit=function(e){for(var s=[],t=1;t<arguments.length;t++)s.push(arguments[t]);var h=e==="error",p=this._events;if(p!==void 0)h=h&&p.error===void 0;else if(!h)return!1;if(h){var o;if(s.length>0&&(o=s[0]),o instanceof Error)throw o;var n=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw n.context=o,n}var a=p[e];if(a===void 0)return!1;if(typeof a=="function")vo(a,this,s);else{var i=a.length,l=qs(a,i);for(t=0;t<i;++t)vo(l[t],this,s)}return!0},Xe.prototype.addListener=function(e,s){return Fs(this,e,s,!1)},Xe.prototype.on=Xe.prototype.addListener,Xe.prototype.prependListener=function(e,s){return Fs(this,e,s,!0)},Xe.prototype.once=function(e,s){return gn(s),this.on(e,$s(this,e,s)),this},Xe.prototype.prependOnceListener=function(e,s){return gn(s),this.prependListener(e,$s(this,e,s)),this},Xe.prototype.removeListener=function(e,s){var t,h,p,o,n;if(gn(s),(h=this._events)===void 0)return this;if((t=h[e])===void 0)return this;if(t===s||t.listener===s)--this._eventsCount==0?this._events=Object.create(null):(delete h[e],h.removeListener&&this.emit("removeListener",e,t.listener||s));else if(typeof t!="function"){for(p=-1,o=t.length-1;o>=0;o--)if(t[o]===s||t[o].listener===s){n=t[o].listener,p=o;break}if(p<0)return this;p===0?t.shift():function(a,i){for(;i+1<a.length;i++)a[i]=a[i+1];a.pop()}(t,p),t.length===1&&(h[e]=t[0]),h.removeListener!==void 0&&this.emit("removeListener",e,n||s)}return this},Xe.prototype.off=Xe.prototype.removeListener,Xe.prototype.removeAllListeners=function(e){var s,t,h;if((t=this._events)===void 0)return this;if(t.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):t[e]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete t[e]),this;if(arguments.length===0){var p,o=Object.keys(t);for(h=0;h<o.length;++h)(p=o[h])!=="removeListener"&&this.removeAllListeners(p);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(s=t[e])=="function")this.removeListener(e,s);else if(s!==void 0)for(h=s.length-1;h>=0;h--)this.removeListener(e,s[h]);return this},Xe.prototype.listeners=function(e){return Ws(this,e,!0)},Xe.prototype.rawListeners=function(e){return Ws(this,e,!1)},Xe.listenerCount=function(e,s){return typeof e.listenerCount=="function"?e.listenerCount(s):Hs.call(e,s)},Xe.prototype.listenerCount=Hs,Xe.prototype.eventNames=function(){return this._eventsCount>0?zs(this._events):[]},It=Vs,It.EventEmitter,It.defaultMaxListeners,It.init,It.listenerCount,It.EventEmitter,It.defaultMaxListeners,It.init,It.listenerCount}),wr={};A(wr,{EventEmitter:()=>Js,default:()=>It,defaultMaxListeners:()=>Qs,init:()=>Ys,listenerCount:()=>Gs,on:()=>Xs,once:()=>Zs});var Js,Qs,Ys,Gs,Xs,Zs,Ur=_(()=>{_e(),we(),F(),Ks(),Ks(),It.once=function(e,s){return new Promise((t,h)=>{function p(...n){o!==void 0&&e.removeListener("error",o),t(n)}let o;s!=="error"&&(o=n=>{e.removeListener(name,p),h(n)},e.once("error",o)),e.once(s,p)})},It.on=function(e,s){let t=[],h=[],p=null,o=!1,n={async next(){let l=t.shift();if(l)return createIterResult(l,!1);if(p){let g=Promise.reject(p);return p=null,g}return o?createIterResult(void 0,!0):new Promise((g,y)=>h.push({resolve:g,reject:y}))},async return(){e.removeListener(s,a),e.removeListener("error",i),o=!0;for(let l of h)l.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(l){p=l,e.removeListener(s,a),e.removeListener("error",i)},[Symbol.asyncIterator](){return this}};return e.on(s,a),e.on("error",i),n;function a(...l){let g=h.shift();g?g.resolve(createIterResult(l,!1)):t.push(l)}function i(l){o=!0;let g=h.shift();g?g.reject(l):p=l,n.return()}},{EventEmitter:Js,defaultMaxListeners:Qs,init:Ys,listenerCount:Gs,on:Xs,once:Zs}=It}),Ao=E((e,s)=>{_e(),we(),F();var{ArrayIsArray:t,ObjectSetPrototypeOf:h}=ut(),{EventEmitter:p}=(Ur(),K(wr));function o(a){p.call(this,a)}h(o.prototype,p.prototype),h(o,p),o.prototype.pipe=function(a,i){let l=this;function g(W){a.writable&&a.write(W)===!1&&l.pause&&l.pause()}l.on("data",g);function y(){l.readable&&l.resume&&l.resume()}a.on("drain",y),!a._isStdio&&(!i||i.end!==!1)&&(l.on("end",v),l.on("close",S));let w=!1;function v(){w||(w=!0,a.end())}function S(){w||(w=!0,typeof a.destroy=="function"&&a.destroy())}function C(W){x(),p.listenerCount(this,"error")===0&&this.emit("error",W)}n(l,"error",C),n(a,"error",C);function x(){l.removeListener("data",g),a.removeListener("drain",y),l.removeListener("end",v),l.removeListener("close",S),l.removeListener("error",C),a.removeListener("error",C),l.removeListener("end",x),l.removeListener("close",x),a.removeListener("close",x)}return l.on("end",x),l.on("close",x),a.on("close",x),a.emit("pipe",l),a};function n(a,i,l){if(typeof a.prependListener=="function")return a.prependListener(i,l);!a._events||!a._events[i]?a.on(i,l):t(a._events[i])?a._events[i].unshift(l):a._events[i]=[l,a._events[i]]}s.exports={Stream:o,prependListener:n}}),mn=E((e,s)=>{_e(),we(),F();var{AbortError:t,codes:h}=At(),{isNodeStream:p,isWebStream:o,kControllerErrorFunction:n}=Jt(),a=lr(),{ERR_INVALID_ARG_TYPE:i}=h,l=(g,y)=>{if(typeof g!="object"||!("aborted"in g))throw new i(y,"AbortSignal",g)};s.exports.addAbortSignal=function(g,y){if(l(g,"signal"),!p(y)&&!o(y))throw new i("stream",["ReadableStream","WritableStream","Stream"],y);return s.exports.addAbortSignalNoValidate(g,y)},s.exports.addAbortSignalNoValidate=function(g,y){if(typeof g!="object"||!("aborted"in g))return y;let w=p(y)?()=>{y.destroy(new t(void 0,{cause:g.reason}))}:()=>{y[n](new t(void 0,{cause:g.reason}))};return g.aborted?w():(g.addEventListener("abort",w),a(y,()=>g.removeEventListener("abort",w))),y}}),wu=E((e,s)=>{_e(),we(),F();var{StringPrototypeSlice:t,SymbolIterator:h,TypedArrayPrototypeSet:p,Uint8Array:o}=ut(),{Buffer:n}=(bt(),K(mt)),{inspect:a}=Kt();s.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(i){let l={data:i,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}unshift(i){let l={data:i,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}shift(){if(this.length===0)return;let i=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,i}clear(){this.head=this.tail=null,this.length=0}join(i){if(this.length===0)return"";let l=this.head,g=""+l.data;for(;(l=l.next)!==null;)g+=i+l.data;return g}concat(i){if(this.length===0)return n.alloc(0);let l=n.allocUnsafe(i>>>0),g=this.head,y=0;for(;g;)p(l,g.data,y),y+=g.data.length,g=g.next;return l}consume(i,l){let g=this.head.data;if(i<g.length){let y=g.slice(0,i);return this.head.data=g.slice(i),y}return i===g.length?this.shift():l?this._getString(i):this._getBuffer(i)}first(){return this.head.data}*[h](){for(let i=this.head;i;i=i.next)yield i.data}_getString(i){let l="",g=this.head,y=0;do{let w=g.data;if(i>w.length)l+=w,i-=w.length;else{i===w.length?(l+=w,++y,g.next?this.head=g.next:this.head=this.tail=null):(l+=t(w,0,i),this.head=g,g.data=t(w,i));break}++y}while((g=g.next)!==null);return this.length-=y,l}_getBuffer(i){let l=n.allocUnsafe(i),g=i,y=this.head,w=0;do{let v=y.data;if(i>v.length)p(l,v,g-i),i-=v.length;else{i===v.length?(p(l,v,g-i),++w,y.next?this.head=y.next:this.head=this.tail=null):(p(l,new o(v.buffer,v.byteOffset,i),g-i),this.head=y,y.data=v.slice(i));break}++w}while((y=y.next)!==null);return this.length-=w,l}[Symbol.for("nodejs.util.inspect.custom")](i,l){return a(this,{...l,depth:0,customInspect:!1})}}}),Co=E((e,s)=>{_e(),we(),F();var{MathFloor:t,NumberIsInteger:h}=ut(),{ERR_INVALID_ARG_VALUE:p}=At().codes;function o(i,l,g){return i.highWaterMark!=null?i.highWaterMark:l?i[g]:null}function n(i){return i?16:16*1024}function a(i,l,g,y){let w=o(l,y,g);if(w!=null){if(!h(w)||w<0){let v=y?`options.${g}`:"options.highWaterMark";throw new p(v,w)}return t(w)}return n(i.objectMode)}s.exports={getHighWaterMark:a,getDefaultHighWaterMark:n}});function ea(e){var s=e.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=e.indexOf("=");return t===-1&&(t=s),[t,t===s?0:4-t%4]}function _u(e,s,t){for(var h,p,o=[],n=s;n<t;n+=3)h=(e[n]<<16&16711680)+(e[n+1]<<8&65280)+(255&e[n+2]),o.push(Bt[(p=h)>>18&63]+Bt[p>>12&63]+Bt[p>>6&63]+Bt[63&p]);return o.join("")}function Qt(e){if(e>2147483647)throw new RangeError('The value "'+e+'" is invalid for option "size"');var s=new Uint8Array(e);return Object.setPrototypeOf(s,Te.prototype),s}function Te(e,s,t){if(typeof e=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return To(e)}return ta(e,s,t)}function ta(e,s,t){if(typeof e=="string")return function(o,n){if(typeof n=="string"&&n!==""||(n="utf8"),!Te.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var a=0|na(o,n),i=Qt(a),l=i.write(o,n);return l!==a&&(i=i.slice(0,l)),i}(e,s);if(ArrayBuffer.isView(e))return Io(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Yt(e,ArrayBuffer)||e&&Yt(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Yt(e,SharedArrayBuffer)||e&&Yt(e.buffer,SharedArrayBuffer)))return vu(e,s,t);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var h=e.valueOf&&e.valueOf();if(h!=null&&h!==e)return Te.from(h,s,t);var p=function(o){if(Te.isBuffer(o)){var n=0|ko(o.length),a=Qt(n);return a.length===0||o.copy(a,0,0,n),a}if(o.length!==void 0)return typeof o.length!="number"||Oo(o.length)?Qt(0):Io(o);if(o.type==="Buffer"&&Array.isArray(o.data))return Io(o.data)}(e);if(p)return p;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return Te.from(e[Symbol.toPrimitive]("string"),s,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function ra(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function To(e){return ra(e),Qt(e<0?0:0|ko(e))}function Io(e){for(var s=e.length<0?0:0|ko(e.length),t=Qt(s),h=0;h<s;h+=1)t[h]=255&e[h];return t}function vu(e,s,t){if(s<0||e.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<s+(t||0))throw new RangeError('"length" is outside of buffer bounds');var h;return h=s===void 0&&t===void 0?new Uint8Array(e):t===void 0?new Uint8Array(e,s):new Uint8Array(e,s,t),Object.setPrototypeOf(h,Te.prototype),h}function ko(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function na(e,s){if(Te.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Yt(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var t=e.length,h=arguments.length>2&&arguments[2]===!0;if(!h&&t===0)return 0;for(var p=!1;;)switch(s){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return Ro(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*t;case"hex":return t>>>1;case"base64":return ha(e).length;default:if(p)return h?-1:Ro(e).length;s=(""+s).toLowerCase(),p=!0}}function Eu(e,s,t){var h=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0)<=(s>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return Pu(this,s,t);case"utf8":case"utf-8":return aa(this,s,t);case"ascii":return Ru(this,s,t);case"latin1":case"binary":return Ou(this,s,t);case"base64":return ku(this,s,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xu(this,s,t);default:if(h)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),h=!0}}function _r(e,s,t){var h=e[s];e[s]=e[t],e[t]=h}function ia(e,s,t,h,p){if(e.length===0)return-1;if(typeof t=="string"?(h=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),Oo(t=+t)&&(t=p?0:e.length-1),t<0&&(t=e.length+t),t>=e.length){if(p)return-1;t=e.length-1}else if(t<0){if(!p)return-1;t=0}if(typeof s=="string"&&(s=Te.from(s,h)),Te.isBuffer(s))return s.length===0?-1:oa(e,s,t,h,p);if(typeof s=="number")return s&=255,typeof Uint8Array.prototype.indexOf=="function"?p?Uint8Array.prototype.indexOf.call(e,s,t):Uint8Array.prototype.lastIndexOf.call(e,s,t):oa(e,[s],t,h,p);throw new TypeError("val must be string, number or Buffer")}function oa(e,s,t,h,p){var o,n=1,a=e.length,i=s.length;if(h!==void 0&&((h=String(h).toLowerCase())==="ucs2"||h==="ucs-2"||h==="utf16le"||h==="utf-16le")){if(e.length<2||s.length<2)return-1;n=2,a/=2,i/=2,t/=2}function l(v,S){return n===1?v[S]:v.readUInt16BE(S*n)}if(p){var g=-1;for(o=t;o<a;o++)if(l(e,o)===l(s,g===-1?0:o-g)){if(g===-1&&(g=o),o-g+1===i)return g*n}else g!==-1&&(o-=o-g),g=-1}else for(t+i>a&&(t=a-i),o=t;o>=0;o--){for(var y=!0,w=0;w<i;w++)if(l(e,o+w)!==l(s,w)){y=!1;break}if(y)return o}return-1}function Su(e,s,t,h){t=Number(t)||0;var p=e.length-t;h?(h=Number(h))>p&&(h=p):h=p;var o=s.length;h>o/2&&(h=o/2);for(var n=0;n<h;++n){var a=parseInt(s.substr(2*n,2),16);if(Oo(a))return n;e[t+n]=a}return n}function Au(e,s,t,h){return bn(Ro(s,e.length-t),e,t,h)}function sa(e,s,t,h){return bn(function(p){for(var o=[],n=0;n<p.length;++n)o.push(255&p.charCodeAt(n));return o}(s),e,t,h)}function Cu(e,s,t,h){return sa(e,s,t,h)}function Tu(e,s,t,h){return bn(ha(s),e,t,h)}function Iu(e,s,t,h){return bn(function(p,o){for(var n,a,i,l=[],g=0;g<p.length&&!((o-=2)<0);++g)n=p.charCodeAt(g),a=n>>8,i=n%256,l.push(i),l.push(a);return l}(s,e.length-t),e,t,h)}function ku(e,s,t){return s===0&&t===e.length?wn.fromByteArray(e):wn.fromByteArray(e.slice(s,t))}function aa(e,s,t){t=Math.min(e.length,t);for(var h=[],p=s;p<t;){var o,n,a,i,l=e[p],g=null,y=l>239?4:l>223?3:l>191?2:1;if(p+y<=t)switch(y){case 1:l<128&&(g=l);break;case 2:(192&(o=e[p+1]))==128&&(i=(31&l)<<6|63&o)>127&&(g=i);break;case 3:o=e[p+1],n=e[p+2],(192&o)==128&&(192&n)==128&&(i=(15&l)<<12|(63&o)<<6|63&n)>2047&&(i<55296||i>57343)&&(g=i);break;case 4:o=e[p+1],n=e[p+2],a=e[p+3],(192&o)==128&&(192&n)==128&&(192&a)==128&&(i=(15&l)<<18|(63&o)<<12|(63&n)<<6|63&a)>65535&&i<1114112&&(g=i)}g===null?(g=65533,y=1):g>65535&&(g-=65536,h.push(g>>>10&1023|55296),g=56320|1023&g),h.push(g),p+=y}return function(w){var v=w.length;if(v<=4096)return String.fromCharCode.apply(String,w);for(var S="",C=0;C<v;)S+=String.fromCharCode.apply(String,w.slice(C,C+=4096));return S}(h)}function Ru(e,s,t){var h="";t=Math.min(e.length,t);for(var p=s;p<t;++p)h+=String.fromCharCode(127&e[p]);return h}function Ou(e,s,t){var h="";t=Math.min(e.length,t);for(var p=s;p<t;++p)h+=String.fromCharCode(e[p]);return h}function Pu(e,s,t){var h=e.length;(!s||s<0)&&(s=0),(!t||t<0||t>h)&&(t=h);for(var p="",o=s;o<t;++o)p+=ya[e[o]];return p}function xu(e,s,t){for(var h=e.slice(s,t),p="",o=0;o<h.length;o+=2)p+=String.fromCharCode(h[o]+256*h[o+1]);return p}function ft(e,s,t){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+s>t)throw new RangeError("Trying to access beyond buffer length")}function Ct(e,s,t,h,p,o){if(!Te.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>p||s<o)throw new RangeError('"value" argument is out of bounds');if(t+h>e.length)throw new RangeError("Index out of range")}function la(e,s,t,h,p,o){if(t+h>e.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function ca(e,s,t,h,p){return s=+s,t>>>=0,p||la(e,0,t,4),Sr.write(e,s,t,h,23,4),t+4}function ua(e,s,t,h,p){return s=+s,t>>>=0,p||la(e,0,t,8),Sr.write(e,s,t,h,52,8),t+8}function Ro(e,s){var t;s=s||1/0;for(var h=e.length,p=null,o=[],n=0;n<h;++n){if((t=e.charCodeAt(n))>55295&&t<57344){if(!p){if(t>56319){(s-=3)>-1&&o.push(239,191,189);continue}if(n+1===h){(s-=3)>-1&&o.push(239,191,189);continue}p=t;continue}if(t<56320){(s-=3)>-1&&o.push(239,191,189),p=t;continue}t=65536+(p-55296<<10|t-56320)}else p&&(s-=3)>-1&&o.push(239,191,189);if(p=null,t<128){if((s-=1)<0)break;o.push(t)}else if(t<2048){if((s-=2)<0)break;o.push(t>>6|192,63&t|128)}else if(t<65536){if((s-=3)<0)break;o.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((s-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return o}function ha(e){return wn.toByteArray(function(s){if((s=(s=s.split("=")[0]).trim().replace(ba,"")).length<2)return"";for(;s.length%4!=0;)s+="=";return s}(e))}function bn(e,s,t,h){for(var p=0;p<h&&!(p+t>=s.length||p>=e.length);++p)s[p+t]=e[p];return p}function Yt(e,s){return e instanceof s||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===s.name}function Oo(e){return e!=e}function fa(e,s){for(var t in e)s[t]=e[t]}function vr(e,s,t){return Nt(e,s,t)}function Jr(e){var s;switch(this.encoding=function(t){var h=function(p){if(!p)return"utf8";for(var o;;)switch(p){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return p;default:if(o)return;p=(""+p).toLowerCase(),o=!0}}(t);if(typeof h!="string"&&(_n.isEncoding===Bo||!Bo(t)))throw new Error("Unknown encoding: "+t);return h||t}(e),this.encoding){case"utf16le":this.text=Nu,this.end=Mu,s=4;break;case"utf8":this.fillLast=Bu,s=4;break;case"base64":this.text=ju,this.end=Uu,s=3;break;default:return this.write=Lu,this.end=Du,void 0}this.lastNeed=0,this.lastTotal=0,this.lastChar=_n.allocUnsafe(s)}function Po(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function Bu(e){var s=this.lastTotal-this.lastNeed,t=function(h,p,o){if((192&p[0])!=128)return h.lastNeed=0,"�";if(h.lastNeed>1&&p.length>1){if((192&p[1])!=128)return h.lastNeed=1,"�";if(h.lastNeed>2&&p.length>2&&(192&p[2])!=128)return h.lastNeed=2,"�"}}(this,e);return t!==void 0?t:this.lastNeed<=e.length?(e.copy(this.lastChar,s,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,s,0,e.length),this.lastNeed-=e.length,void 0)}function Nu(e,s){if((e.length-s)%2==0){var t=e.toString("utf16le",s);if(t){var h=t.charCodeAt(t.length-1);if(h>=55296&&h<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",s,e.length-1)}function Mu(e){var s=e&&e.length?this.write(e):"";if(this.lastNeed){var t=this.lastTotal-this.lastNeed;return s+this.lastChar.toString("utf16le",0,t)}return s}function ju(e,s){var t=(e.length-s)%3;return t===0?e.toString("base64",s):(this.lastNeed=3-t,this.lastTotal=3,t===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",s,e.length-t))}function Uu(e){var s=e&&e.length?this.write(e):"";return this.lastNeed?s+this.lastChar.toString("base64",0,3-this.lastNeed):s}function Lu(e){return e.toString(this.encoding)}function Du(e){return e&&e.length?this.write(e):""}var da,Bt,kt,pa,yn,Er,ga,ma,Ft,wn,Sr,xo,ba,ya,Qr,Yr,Nt,wa,Lr,_n,Bo,_a=_(()=>{for(_e(),we(),F(),da={byteLength:function(e){var s=ea(e),t=s[0],h=s[1];return 3*(t+h)/4-h},toByteArray:function(e){var s,t,h=ea(e),p=h[0],o=h[1],n=new pa(function(l,g,y){return 3*(g+y)/4-y}(0,p,o)),a=0,i=o>0?p-4:p;for(t=0;t<i;t+=4)s=kt[e.charCodeAt(t)]<<18|kt[e.charCodeAt(t+1)]<<12|kt[e.charCodeAt(t+2)]<<6|kt[e.charCodeAt(t+3)],n[a++]=s>>16&255,n[a++]=s>>8&255,n[a++]=255&s;return o===2&&(s=kt[e.charCodeAt(t)]<<2|kt[e.charCodeAt(t+1)]>>4,n[a++]=255&s),o===1&&(s=kt[e.charCodeAt(t)]<<10|kt[e.charCodeAt(t+1)]<<4|kt[e.charCodeAt(t+2)]>>2,n[a++]=s>>8&255,n[a++]=255&s),n},fromByteArray:function(e){for(var s,t=e.length,h=t%3,p=[],o=0,n=t-h;o<n;o+=16383)p.push(_u(e,o,o+16383>n?n:o+16383));return h===1?(s=e[t-1],p.push(Bt[s>>2]+Bt[s<<4&63]+"==")):h===2&&(s=(e[t-2]<<8)+e[t-1],p.push(Bt[s>>10]+Bt[s>>4&63]+Bt[s<<2&63]+"=")),p.join("")}},Bt=[],kt=[],pa=typeof Uint8Array<"u"?Uint8Array:Array,yn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Er=0,ga=yn.length;Er<ga;++Er)Bt[Er]=yn[Er],kt[yn.charCodeAt(Er)]=Er;kt[45]=62,kt[95]=63,ma={read:function(e,s,t,h,p){var o,n,a=8*p-h-1,i=(1<<a)-1,l=i>>1,g=-7,y=t?p-1:0,w=t?-1:1,v=e[s+y];for(y+=w,o=v&(1<<-g)-1,v>>=-g,g+=a;g>0;o=256*o+e[s+y],y+=w,g-=8);for(n=o&(1<<-g)-1,o>>=-g,g+=h;g>0;n=256*n+e[s+y],y+=w,g-=8);if(o===0)o=1-l;else{if(o===i)return n?NaN:1/0*(v?-1:1);n+=Math.pow(2,h),o-=l}return(v?-1:1)*n*Math.pow(2,o-h)},write:function(e,s,t,h,p,o){var n,a,i,l=8*o-p-1,g=(1<<l)-1,y=g>>1,w=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=h?0:o-1,S=h?1:-1,C=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(a=isNaN(s)?1:0,n=g):(n=Math.floor(Math.log(s)/Math.LN2),s*(i=Math.pow(2,-n))<1&&(n--,i*=2),(s+=n+y>=1?w/i:w*Math.pow(2,1-y))*i>=2&&(n++,i/=2),n+y>=g?(a=0,n=g):n+y>=1?(a=(s*i-1)*Math.pow(2,p),n+=y):(a=s*Math.pow(2,y-1)*Math.pow(2,p),n=0));p>=8;e[t+v]=255&a,v+=S,a/=256,p-=8);for(n=n<<p|a,l+=p;l>0;e[t+v]=255&n,v+=S,n/=256,l-=8);e[t+v-S]|=128*C}},Ft={},wn=da,Sr=ma,xo=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,Ft.Buffer=Te,Ft.SlowBuffer=function(e){return+e!=e&&(e=0),Te.alloc(+e)},Ft.INSPECT_MAX_BYTES=50,Ft.kMaxLength=2147483647,Te.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(e,s),e.foo()===42}catch{return!1}}(),Te.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Te.prototype,"parent",{enumerable:!0,get:function(){if(Te.isBuffer(this))return this.buffer}}),Object.defineProperty(Te.prototype,"offset",{enumerable:!0,get:function(){if(Te.isBuffer(this))return this.byteOffset}}),Te.poolSize=8192,Te.from=function(e,s,t){return ta(e,s,t)},Object.setPrototypeOf(Te.prototype,Uint8Array.prototype),Object.setPrototypeOf(Te,Uint8Array),Te.alloc=function(e,s,t){return function(h,p,o){return ra(h),h<=0?Qt(h):p!==void 0?typeof o=="string"?Qt(h).fill(p,o):Qt(h).fill(p):Qt(h)}(e,s,t)},Te.allocUnsafe=function(e){return To(e)},Te.allocUnsafeSlow=function(e){return To(e)},Te.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==Te.prototype},Te.compare=function(e,s){if(Yt(e,Uint8Array)&&(e=Te.from(e,e.offset,e.byteLength)),Yt(s,Uint8Array)&&(s=Te.from(s,s.offset,s.byteLength)),!Te.isBuffer(e)||!Te.isBuffer(s))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===s)return 0;for(var t=e.length,h=s.length,p=0,o=Math.min(t,h);p<o;++p)if(e[p]!==s[p]){t=e[p],h=s[p];break}return t<h?-1:h<t?1:0},Te.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Te.concat=function(e,s){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return Te.alloc(0);var t;if(s===void 0)for(s=0,t=0;t<e.length;++t)s+=e[t].length;var h=Te.allocUnsafe(s),p=0;for(t=0;t<e.length;++t){var o=e[t];if(Yt(o,Uint8Array)&&(o=Te.from(o)),!Te.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(h,p),p+=o.length}return h},Te.byteLength=na,Te.prototype._isBuffer=!0,Te.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var s=0;s<e;s+=2)_r(this,s,s+1);return this},Te.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var s=0;s<e;s+=4)_r(this,s,s+3),_r(this,s+1,s+2);return this},Te.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var s=0;s<e;s+=8)_r(this,s,s+7),_r(this,s+1,s+6),_r(this,s+2,s+5),_r(this,s+3,s+4);return this},Te.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?aa(this,0,e):Eu.apply(this,arguments)},Te.prototype.toLocaleString=Te.prototype.toString,Te.prototype.equals=function(e){if(!Te.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||Te.compare(this,e)===0},Te.prototype.inspect=function(){var e="",s=Ft.INSPECT_MAX_BYTES;return e=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(e+=" ... "),"<Buffer "+e+">"},xo&&(Te.prototype[xo]=Te.prototype.inspect),Te.prototype.compare=function(e,s,t,h,p){if(Yt(e,Uint8Array)&&(e=Te.from(e,e.offset,e.byteLength)),!Te.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(s===void 0&&(s=0),t===void 0&&(t=e?e.length:0),h===void 0&&(h=0),p===void 0&&(p=this.length),s<0||t>e.length||h<0||p>this.length)throw new RangeError("out of range index");if(h>=p&&s>=t)return 0;if(h>=p)return-1;if(s>=t)return 1;if(this===e)return 0;for(var o=(p>>>=0)-(h>>>=0),n=(t>>>=0)-(s>>>=0),a=Math.min(o,n),i=this.slice(h,p),l=e.slice(s,t),g=0;g<a;++g)if(i[g]!==l[g]){o=i[g],n=l[g];break}return o<n?-1:n<o?1:0},Te.prototype.includes=function(e,s,t){return this.indexOf(e,s,t)!==-1},Te.prototype.indexOf=function(e,s,t){return ia(this,e,s,t,!0)},Te.prototype.lastIndexOf=function(e,s,t){return ia(this,e,s,t,!1)},Te.prototype.write=function(e,s,t,h){if(s===void 0)h="utf8",t=this.length,s=0;else if(t===void 0&&typeof s=="string")h=s,t=this.length,s=0;else{if(!isFinite(s))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");s>>>=0,isFinite(t)?(t>>>=0,h===void 0&&(h="utf8")):(h=t,t=void 0)}var p=this.length-s;if((t===void 0||t>p)&&(t=p),e.length>0&&(t<0||s<0)||s>this.length)throw new RangeError("Attempt to write outside buffer bounds");h||(h="utf8");for(var o=!1;;)switch(h){case"hex":return Su(this,e,s,t);case"utf8":case"utf-8":return Au(this,e,s,t);case"ascii":return sa(this,e,s,t);case"latin1":case"binary":return Cu(this,e,s,t);case"base64":return Tu(this,e,s,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Iu(this,e,s,t);default:if(o)throw new TypeError("Unknown encoding: "+h);h=(""+h).toLowerCase(),o=!0}},Te.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},Te.prototype.slice=function(e,s){var t=this.length;(e=~~e)<0?(e+=t)<0&&(e=0):e>t&&(e=t),(s=s===void 0?t:~~s)<0?(s+=t)<0&&(s=0):s>t&&(s=t),s<e&&(s=e);var h=this.subarray(e,s);return Object.setPrototypeOf(h,Te.prototype),h},Te.prototype.readUIntLE=function(e,s,t){e>>>=0,s>>>=0,t||ft(e,s,this.length);for(var h=this[e],p=1,o=0;++o<s&&(p*=256);)h+=this[e+o]*p;return h},Te.prototype.readUIntBE=function(e,s,t){e>>>=0,s>>>=0,t||ft(e,s,this.length);for(var h=this[e+--s],p=1;s>0&&(p*=256);)h+=this[e+--s]*p;return h},Te.prototype.readUInt8=function(e,s){return e>>>=0,s||ft(e,1,this.length),this[e]},Te.prototype.readUInt16LE=function(e,s){return e>>>=0,s||ft(e,2,this.length),this[e]|this[e+1]<<8},Te.prototype.readUInt16BE=function(e,s){return e>>>=0,s||ft(e,2,this.length),this[e]<<8|this[e+1]},Te.prototype.readUInt32LE=function(e,s){return e>>>=0,s||ft(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Te.prototype.readUInt32BE=function(e,s){return e>>>=0,s||ft(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Te.prototype.readIntLE=function(e,s,t){e>>>=0,s>>>=0,t||ft(e,s,this.length);for(var h=this[e],p=1,o=0;++o<s&&(p*=256);)h+=this[e+o]*p;return h>=(p*=128)&&(h-=Math.pow(2,8*s)),h},Te.prototype.readIntBE=function(e,s,t){e>>>=0,s>>>=0,t||ft(e,s,this.length);for(var h=s,p=1,o=this[e+--h];h>0&&(p*=256);)o+=this[e+--h]*p;return o>=(p*=128)&&(o-=Math.pow(2,8*s)),o},Te.prototype.readInt8=function(e,s){return e>>>=0,s||ft(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Te.prototype.readInt16LE=function(e,s){e>>>=0,s||ft(e,2,this.length);var t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},Te.prototype.readInt16BE=function(e,s){e>>>=0,s||ft(e,2,this.length);var t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},Te.prototype.readInt32LE=function(e,s){return e>>>=0,s||ft(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Te.prototype.readInt32BE=function(e,s){return e>>>=0,s||ft(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Te.prototype.readFloatLE=function(e,s){return e>>>=0,s||ft(e,4,this.length),Sr.read(this,e,!0,23,4)},Te.prototype.readFloatBE=function(e,s){return e>>>=0,s||ft(e,4,this.length),Sr.read(this,e,!1,23,4)},Te.prototype.readDoubleLE=function(e,s){return e>>>=0,s||ft(e,8,this.length),Sr.read(this,e,!0,52,8)},Te.prototype.readDoubleBE=function(e,s){return e>>>=0,s||ft(e,8,this.length),Sr.read(this,e,!1,52,8)},Te.prototype.writeUIntLE=function(e,s,t,h){e=+e,s>>>=0,t>>>=0,h||Ct(this,e,s,t,Math.pow(2,8*t)-1,0);var p=1,o=0;for(this[s]=255&e;++o<t&&(p*=256);)this[s+o]=e/p&255;return s+t},Te.prototype.writeUIntBE=function(e,s,t,h){e=+e,s>>>=0,t>>>=0,h||Ct(this,e,s,t,Math.pow(2,8*t)-1,0);var p=t-1,o=1;for(this[s+p]=255&e;--p>=0&&(o*=256);)this[s+p]=e/o&255;return s+t},Te.prototype.writeUInt8=function(e,s,t){return e=+e,s>>>=0,t||Ct(this,e,s,1,255,0),this[s]=255&e,s+1},Te.prototype.writeUInt16LE=function(e,s,t){return e=+e,s>>>=0,t||Ct(this,e,s,2,65535,0),this[s]=255&e,this[s+1]=e>>>8,s+2},Te.prototype.writeUInt16BE=function(e,s,t){return e=+e,s>>>=0,t||Ct(this,e,s,2,65535,0),this[s]=e>>>8,this[s+1]=255&e,s+2},Te.prototype.writeUInt32LE=function(e,s,t){return e=+e,s>>>=0,t||Ct(this,e,s,4,4294967295,0),this[s+3]=e>>>24,this[s+2]=e>>>16,this[s+1]=e>>>8,this[s]=255&e,s+4},Te.prototype.writeUInt32BE=function(e,s,t){return e=+e,s>>>=0,t||Ct(this,e,s,4,4294967295,0),this[s]=e>>>24,this[s+1]=e>>>16,this[s+2]=e>>>8,this[s+3]=255&e,s+4},Te.prototype.writeIntLE=function(e,s,t,h){if(e=+e,s>>>=0,!h){var p=Math.pow(2,8*t-1);Ct(this,e,s,t,p-1,-p)}var o=0,n=1,a=0;for(this[s]=255&e;++o<t&&(n*=256);)e<0&&a===0&&this[s+o-1]!==0&&(a=1),this[s+o]=(e/n>>0)-a&255;return s+t},Te.prototype.writeIntBE=function(e,s,t,h){if(e=+e,s>>>=0,!h){var p=Math.pow(2,8*t-1);Ct(this,e,s,t,p-1,-p)}var o=t-1,n=1,a=0;for(this[s+o]=255&e;--o>=0&&(n*=256);)e<0&&a===0&&this[s+o+1]!==0&&(a=1),this[s+o]=(e/n>>0)-a&255;return s+t},Te.prototype.writeInt8=function(e,s,t){return e=+e,s>>>=0,t||Ct(this,e,s,1,127,-128),e<0&&(e=255+e+1),this[s]=255&e,s+1},Te.prototype.writeInt16LE=function(e,s,t){return e=+e,s>>>=0,t||Ct(this,e,s,2,32767,-32768),this[s]=255&e,this[s+1]=e>>>8,s+2},Te.prototype.writeInt16BE=function(e,s,t){return e=+e,s>>>=0,t||Ct(this,e,s,2,32767,-32768),this[s]=e>>>8,this[s+1]=255&e,s+2},Te.prototype.writeInt32LE=function(e,s,t){return e=+e,s>>>=0,t||Ct(this,e,s,4,2147483647,-2147483648),this[s]=255&e,this[s+1]=e>>>8,this[s+2]=e>>>16,this[s+3]=e>>>24,s+4},Te.prototype.writeInt32BE=function(e,s,t){return e=+e,s>>>=0,t||Ct(this,e,s,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[s]=e>>>24,this[s+1]=e>>>16,this[s+2]=e>>>8,this[s+3]=255&e,s+4},Te.prototype.writeFloatLE=function(e,s,t){return ca(this,e,s,!0,t)},Te.prototype.writeFloatBE=function(e,s,t){return ca(this,e,s,!1,t)},Te.prototype.writeDoubleLE=function(e,s,t){return ua(this,e,s,!0,t)},Te.prototype.writeDoubleBE=function(e,s,t){return ua(this,e,s,!1,t)},Te.prototype.copy=function(e,s,t,h){if(!Te.isBuffer(e))throw new TypeError("argument should be a Buffer");if(t||(t=0),h||h===0||(h=this.length),s>=e.length&&(s=e.length),s||(s=0),h>0&&h<t&&(h=t),h===t||e.length===0||this.length===0)return 0;if(s<0)throw new RangeError("targetStart out of bounds");if(t<0||t>=this.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("sourceEnd out of bounds");h>this.length&&(h=this.length),e.length-s<h-t&&(h=e.length-s+t);var p=h-t;if(this===e&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(s,t,h);else if(this===e&&t<s&&s<h)for(var o=p-1;o>=0;--o)e[o+s]=this[o+t];else Uint8Array.prototype.set.call(e,this.subarray(t,h),s);return p},Te.prototype.fill=function(e,s,t,h){if(typeof e=="string"){if(typeof s=="string"?(h=s,s=0,t=this.length):typeof t=="string"&&(h=t,t=this.length),h!==void 0&&typeof h!="string")throw new TypeError("encoding must be a string");if(typeof h=="string"&&!Te.isEncoding(h))throw new TypeError("Unknown encoding: "+h);if(e.length===1){var p=e.charCodeAt(0);(h==="utf8"&&p<128||h==="latin1")&&(e=p)}}else typeof e=="number"?e&=255:typeof e=="boolean"&&(e=Number(e));if(s<0||this.length<s||this.length<t)throw new RangeError("Out of range index");if(t<=s)return this;var o;if(s>>>=0,t=t===void 0?this.length:t>>>0,e||(e=0),typeof e=="number")for(o=s;o<t;++o)this[o]=e;else{var n=Te.isBuffer(e)?e:Te.from(e,h),a=n.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<t-s;++o)this[o+s]=n[o%a]}return this},ba=/[^+/0-9A-Za-z-_]/g,ya=function(){for(var e=new Array(256),s=0;s<16;++s)for(var t=16*s,h=0;h<16;++h)e[t+h]="0123456789abcdef"[s]+"0123456789abcdef"[h];return e}(),Ft.Buffer,Ft.INSPECT_MAX_BYTES,Ft.kMaxLength,Qr={},Yr=Ft,Nt=Yr.Buffer,Nt.from&&Nt.alloc&&Nt.allocUnsafe&&Nt.allocUnsafeSlow?Qr=Yr:(fa(Yr,Qr),Qr.Buffer=vr),vr.prototype=Object.create(Nt.prototype),fa(Nt,vr),vr.from=function(e,s,t){if(typeof e=="number")throw new TypeError("Argument must not be a number");return Nt(e,s,t)},vr.alloc=function(e,s,t){if(typeof e!="number")throw new TypeError("Argument must be a number");var h=Nt(e);return s!==void 0?typeof t=="string"?h.fill(s,t):h.fill(s):h.fill(0),h},vr.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Nt(e)},vr.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Yr.SlowBuffer(e)},wa=Qr,Lr={},_n=wa.Buffer,Bo=_n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},Lr.StringDecoder=Jr,Jr.prototype.write=function(e){if(e.length===0)return"";var s,t;if(this.lastNeed){if((s=this.fillLast(e))===void 0)return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<e.length?s?s+this.text(e,t):this.text(e,t):s||""},Jr.prototype.end=function(e){var s=e&&e.length?this.write(e):"";return this.lastNeed?s+"�":s},Jr.prototype.text=function(e,s){var t=function(p,o,n){var a=o.length-1;if(a<n)return 0;var i=Po(o[a]);return i>=0?(i>0&&(p.lastNeed=i-1),i):--a<n||i===-2?0:(i=Po(o[a]))>=0?(i>0&&(p.lastNeed=i-2),i):--a<n||i===-2?0:(i=Po(o[a]))>=0?(i>0&&(i===2?i=0:p.lastNeed=i-3),i):0}(this,e,s);if(!this.lastNeed)return e.toString("utf8",s);this.lastTotal=t;var h=e.length-(t-this.lastNeed);return e.copy(this.lastChar,0,h),e.toString("utf8",s,h)},Jr.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length},Lr.StringDecoder,Lr.StringDecoder}),va={};A(va,{StringDecoder:()=>Ea,default:()=>Lr});var Ea,Fu=_(()=>{_e(),we(),F(),_a(),_a(),Ea=Lr.StringDecoder}),Sa=E((e,s)=>{_e(),we(),F();var t=br(),{PromisePrototypeThen:h,SymbolAsyncIterator:p,SymbolIterator:o}=ut(),{Buffer:n}=(bt(),K(mt)),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_NULL_VALUES:i}=At().codes;function l(g,y,w){let v;if(typeof y=="string"||y instanceof n)return new g({objectMode:!0,...w,read(){this.push(y),this.push(null)}});let S;if(y&&y[p])S=!0,v=y[p]();else if(y&&y[o])S=!1,v=y[o]();else throw new a("iterable",["Iterable"],y);let C=new g({objectMode:!0,highWaterMark:1,...w}),x=!1;C._read=function(){x||(x=!0,k())},C._destroy=function(P,z){h(W(P),()=>t.nextTick(z,P),Q=>t.nextTick(z,Q||P))};async function W(P){let z=P!=null,Q=typeof v.throw=="function";if(z&&Q){let{value:M,done:N}=await v.throw(P);if(await M,N)return}if(typeof v.return=="function"){let{value:M}=await v.return();await M}}async function k(){for(;;){try{let{value:P,done:z}=S?await v.next():v.next();if(z)C.push(null);else{let Q=P&&typeof P.then=="function"?await P:P;if(Q===null)throw x=!1,new i;if(C.push(Q))continue;x=!1}}catch(P){C.destroy(P)}break}}return C}s.exports=l}),vn=E((e,s)=>{_e(),we(),F();var t=br(),{ArrayPrototypeIndexOf:h,NumberIsInteger:p,NumberIsNaN:o,NumberParseInt:n,ObjectDefineProperties:a,ObjectKeys:i,ObjectSetPrototypeOf:l,Promise:g,SafeSet:y,SymbolAsyncIterator:w,Symbol:v}=ut();s.exports=I,I.ReadableState=Ne;var{EventEmitter:S}=(Ur(),K(wr)),{Stream:C,prependListener:x}=Ao(),{Buffer:W}=(bt(),K(mt)),{addAbortSignal:k}=mn(),P=lr(),z=Kt().debuglog("stream",f=>{z=f}),Q=wu(),M=jr(),{getHighWaterMark:N,getDefaultHighWaterMark:$}=Co(),{aggregateTwoErrors:X,codes:{ERR_INVALID_ARG_TYPE:ae,ERR_METHOD_NOT_IMPLEMENTED:pe,ERR_OUT_OF_RANGE:O,ERR_STREAM_PUSH_AFTER_EOF:te,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:de}}=At(),{validateObject:ie}=pn(),ke=v("kPaused"),{StringDecoder:ye}=(Fu(),K(va)),ee=Sa();l(I.prototype,C.prototype),l(I,C);var Oe=()=>{},{errorOrDestroy:me}=M;function Ne(f,m,T){typeof T!="boolean"&&(T=m instanceof Gt()),this.objectMode=!!(f&&f.objectMode),T&&(this.objectMode=this.objectMode||!!(f&&f.readableObjectMode)),this.highWaterMark=f?N(this,f,"readableHighWaterMark",T):$(!1),this.buffer=new Q,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[ke]=null,this.errorEmitted=!1,this.emitClose=!f||f.emitClose!==!1,this.autoDestroy=!f||f.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=f&&f.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,f&&f.encoding&&(this.decoder=new ye(f.encoding),this.encoding=f.encoding)}function I(f){if(!(this instanceof I))return new I(f);let m=this instanceof Gt();this._readableState=new Ne(f,this,m),f&&(typeof f.read=="function"&&(this._read=f.read),typeof f.destroy=="function"&&(this._destroy=f.destroy),typeof f.construct=="function"&&(this._construct=f.construct),f.signal&&!m&&k(f.signal,this)),C.call(this,f),M.construct(this,()=>{this._readableState.needReadable&&fe(this,this._readableState)})}I.prototype.destroy=M.destroy,I.prototype._undestroy=M.undestroy,I.prototype._destroy=function(f,m){m(f)},I.prototype[S.captureRejectionSymbol]=function(f){this.destroy(f)},I.prototype.push=function(f,m){return oe(this,f,m,!1)},I.prototype.unshift=function(f,m){return oe(this,f,m,!0)};function oe(f,m,T,B){z("readableAddChunk",m);let G=f._readableState,he;if(G.objectMode||(typeof m=="string"?(T=T||G.defaultEncoding,G.encoding!==T&&(B&&G.encoding?m=W.from(m,T).toString(G.encoding):(m=W.from(m,T),T=""))):m instanceof W?T="":C._isUint8Array(m)?(m=C._uint8ArrayToBuffer(m),T=""):m!=null&&(he=new ae("chunk",["string","Buffer","Uint8Array"],m))),he)me(f,he);else if(m===null)G.reading=!1,R(f,G);else if(G.objectMode||m&&m.length>0)if(B)if(G.endEmitted)me(f,new de);else{if(G.destroyed||G.errored)return!1;Ae(f,G,m,!0)}else if(G.ended)me(f,new te);else{if(G.destroyed||G.errored)return!1;G.reading=!1,G.decoder&&!T?(m=G.decoder.write(m),G.objectMode||m.length!==0?Ae(f,G,m,!1):fe(f,G)):Ae(f,G,m,!1)}else B||(G.reading=!1,fe(f,G));return!G.ended&&(G.length<G.highWaterMark||G.length===0)}function Ae(f,m,T,B){m.flowing&&m.length===0&&!m.sync&&f.listenerCount("data")>0?(m.multiAwaitDrain?m.awaitDrainWriters.clear():m.awaitDrainWriters=null,m.dataEmitted=!0,f.emit("data",T)):(m.length+=m.objectMode?1:T.length,B?m.buffer.unshift(T):m.buffer.push(T),m.needReadable&&ne(f)),fe(f,m)}I.prototype.isPaused=function(){let f=this._readableState;return f[ke]===!0||f.flowing===!1},I.prototype.setEncoding=function(f){let m=new ye(f);this._readableState.decoder=m,this._readableState.encoding=this._readableState.decoder.encoding;let T=this._readableState.buffer,B="";for(let G of T)B+=m.write(G);return T.clear(),B!==""&&T.push(B),this._readableState.length=B.length,this};var Me=1073741824;function Ee(f){if(f>Me)throw new O("size","<= 1GiB",f);return f--,f|=f>>>1,f|=f>>>2,f|=f>>>4,f|=f>>>8,f|=f>>>16,f++,f}function D(f,m){return f<=0||m.length===0&&m.ended?0:m.objectMode?1:o(f)?m.flowing&&m.length?m.buffer.first().length:m.length:f<=m.length?f:m.ended?m.length:0}I.prototype.read=function(f){z("read",f),f===void 0?f=NaN:p(f)||(f=n(f,10));let m=this._readableState,T=f;if(f>m.highWaterMark&&(m.highWaterMark=Ee(f)),f!==0&&(m.emittedReadable=!1),f===0&&m.needReadable&&((m.highWaterMark!==0?m.length>=m.highWaterMark:m.length>0)||m.ended))return z("read: emitReadable",m.length,m.ended),m.length===0&&m.ended?j(this):ne(this),null;if(f=D(f,m),f===0&&m.ended)return m.length===0&&j(this),null;let B=m.needReadable;if(z("need readable",B),(m.length===0||m.length-f<m.highWaterMark)&&(B=!0,z("length less than watermark",B)),m.ended||m.reading||m.destroyed||m.errored||!m.constructed)B=!1,z("reading, ended or constructing",B);else if(B){z("do read"),m.reading=!0,m.sync=!0,m.length===0&&(m.needReadable=!0);try{this._read(m.highWaterMark)}catch(he){me(this,he)}m.sync=!1,m.reading||(f=D(T,m))}let G;return f>0?G=re(f,m):G=null,G===null?(m.needReadable=m.length<=m.highWaterMark,f=0):(m.length-=f,m.multiAwaitDrain?m.awaitDrainWriters.clear():m.awaitDrainWriters=null),m.length===0&&(m.ended||(m.needReadable=!0),T!==f&&m.ended&&j(this)),G!==null&&!m.errorEmitted&&!m.closeEmitted&&(m.dataEmitted=!0,this.emit("data",G)),G};function R(f,m){if(z("onEofChunk"),!m.ended){if(m.decoder){let T=m.decoder.end();T&&T.length&&(m.buffer.push(T),m.length+=m.objectMode?1:T.length)}m.ended=!0,m.sync?ne(f):(m.needReadable=!1,m.emittedReadable=!0,Se(f))}}function ne(f){let m=f._readableState;z("emitReadable",m.needReadable,m.emittedReadable),m.needReadable=!1,m.emittedReadable||(z("emitReadable",m.flowing),m.emittedReadable=!0,t.nextTick(Se,f))}function Se(f){let m=f._readableState;z("emitReadable_",m.destroyed,m.length,m.ended),!m.destroyed&&!m.errored&&(m.length||m.ended)&&(f.emit("readable"),m.emittedReadable=!1),m.needReadable=!m.flowing&&!m.ended&&m.length<=m.highWaterMark,ge(f)}function fe(f,m){!m.readingMore&&m.constructed&&(m.readingMore=!0,t.nextTick(ue,f,m))}function ue(f,m){for(;!m.reading&&!m.ended&&(m.length<m.highWaterMark||m.flowing&&m.length===0);){let T=m.length;if(z("maybeReadMore read 0"),f.read(0),T===m.length)break}m.readingMore=!1}I.prototype._read=function(f){throw new pe("_read()")},I.prototype.pipe=function(f,m){let T=this,B=this._readableState;B.pipes.length===1&&(B.multiAwaitDrain||(B.multiAwaitDrain=!0,B.awaitDrainWriters=new y(B.awaitDrainWriters?[B.awaitDrainWriters]:[]))),B.pipes.push(f),z("pipe count=%d opts=%j",B.pipes.length,m);let G=(!m||m.end!==!1)&&f!==t.stdout&&f!==t.stderr?De:yt;B.endEmitted?t.nextTick(G):T.once("end",G),f.on("unpipe",he);function he(Et,pt){z("onunpipe"),Et===T&&pt&&pt.hasUnpiped===!1&&(pt.hasUnpiped=!0,Le())}function De(){z("onend"),f.end()}let Ve,ze=!1;function Le(){z("cleanup"),f.removeListener("close",dt),f.removeListener("finish",lt),Ve&&f.removeListener("drain",Ve),f.removeListener("error",et),f.removeListener("unpipe",he),T.removeListener("end",De),T.removeListener("end",yt),T.removeListener("data",$e),ze=!0,Ve&&B.awaitDrainWriters&&(!f._writableState||f._writableState.needDrain)&&Ve()}function He(){ze||(B.pipes.length===1&&B.pipes[0]===f?(z("false write response, pause",0),B.awaitDrainWriters=f,B.multiAwaitDrain=!1):B.pipes.length>1&&B.pipes.includes(f)&&(z("false write response, pause",B.awaitDrainWriters.size),B.awaitDrainWriters.add(f)),T.pause()),Ve||(Ve=Pe(T,f),f.on("drain",Ve))}T.on("data",$e);function $e(Et){z("ondata");let pt=f.write(Et);z("dest.write",pt),pt===!1&&He()}function et(Et){if(z("onerror",Et),yt(),f.removeListener("error",et),f.listenerCount("error")===0){let pt=f._writableState||f._readableState;pt&&!pt.errorEmitted?me(f,Et):f.emit("error",Et)}}x(f,"error",et);function dt(){f.removeListener("finish",lt),yt()}f.once("close",dt);function lt(){z("onfinish"),f.removeListener("close",dt),yt()}f.once("finish",lt);function yt(){z("unpipe"),T.unpipe(f)}return f.emit("pipe",T),f.writableNeedDrain===!0?B.flowing&&He():B.flowing||(z("pipe resume"),T.resume()),f};function Pe(f,m){return function(){let T=f._readableState;T.awaitDrainWriters===m?(z("pipeOnDrain",1),T.awaitDrainWriters=null):T.multiAwaitDrain&&(z("pipeOnDrain",T.awaitDrainWriters.size),T.awaitDrainWriters.delete(m)),(!T.awaitDrainWriters||T.awaitDrainWriters.size===0)&&f.listenerCount("data")&&f.resume()}}I.prototype.unpipe=function(f){let m=this._readableState,T={hasUnpiped:!1};if(m.pipes.length===0)return this;if(!f){let G=m.pipes;m.pipes=[],this.pause();for(let he=0;he<G.length;he++)G[he].emit("unpipe",this,{hasUnpiped:!1});return this}let B=h(m.pipes,f);return B===-1?this:(m.pipes.splice(B,1),m.pipes.length===0&&this.pause(),f.emit("unpipe",this,T),this)},I.prototype.on=function(f,m){let T=C.prototype.on.call(this,f,m),B=this._readableState;return f==="data"?(B.readableListening=this.listenerCount("readable")>0,B.flowing!==!1&&this.resume()):f==="readable"&&!B.endEmitted&&!B.readableListening&&(B.readableListening=B.needReadable=!0,B.flowing=!1,B.emittedReadable=!1,z("on readable",B.length,B.reading),B.length?ne(this):B.reading||t.nextTick(U,this)),T},I.prototype.addListener=I.prototype.on,I.prototype.removeListener=function(f,m){let T=C.prototype.removeListener.call(this,f,m);return f==="readable"&&t.nextTick(Ie,this),T},I.prototype.off=I.prototype.removeListener,I.prototype.removeAllListeners=function(f){let m=C.prototype.removeAllListeners.apply(this,arguments);return(f==="readable"||f===void 0)&&t.nextTick(Ie,this),m};function Ie(f){let m=f._readableState;m.readableListening=f.listenerCount("readable")>0,m.resumeScheduled&&m[ke]===!1?m.flowing=!0:f.listenerCount("data")>0?f.resume():m.readableListening||(m.flowing=null)}function U(f){z("readable nexttick read 0"),f.read(0)}I.prototype.resume=function(){let f=this._readableState;return f.flowing||(z("resume"),f.flowing=!f.readableListening,J(this,f)),f[ke]=!1,this};function J(f,m){m.resumeScheduled||(m.resumeScheduled=!0,t.nextTick(Y,f,m))}function Y(f,m){z("resume",m.reading),m.reading||f.read(0),m.resumeScheduled=!1,f.emit("resume"),ge(f),m.flowing&&!m.reading&&f.read(0)}I.prototype.pause=function(){return z("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(z("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ke]=!0,this};function ge(f){let m=f._readableState;for(z("flow",m.flowing);m.flowing&&f.read()!==null;);}I.prototype.wrap=function(f){let m=!1;f.on("data",B=>{!this.push(B)&&f.pause&&(m=!0,f.pause())}),f.on("end",()=>{this.push(null)}),f.on("error",B=>{me(this,B)}),f.on("close",()=>{this.destroy()}),f.on("destroy",()=>{this.destroy()}),this._read=()=>{m&&f.resume&&(m=!1,f.resume())};let T=i(f);for(let B=1;B<T.length;B++){let G=T[B];this[G]===void 0&&typeof f[G]=="function"&&(this[G]=f[G].bind(f))}return this},I.prototype[w]=function(){return ce(this)},I.prototype.iterator=function(f){return f!==void 0&&ie(f,"options"),ce(this,f)};function ce(f,m){typeof f.read!="function"&&(f=I.wrap(f,{objectMode:!0}));let T=H(f,m);return T.stream=f,T}async function*H(f,m){let T=Oe;function B(De){this===f?(T(),T=Oe):T=De}f.on("readable",B);let G,he=P(f,{writable:!1},De=>{G=De?X(G,De):null,T(),T=Oe});try{for(;;){let De=f.destroyed?null:f.read();if(De!==null)yield De;else{if(G)throw G;if(G===null)return;await new g(B)}}}catch(De){throw G=X(G,De),G}finally{(G||(m==null?void 0:m.destroyOnReturn)!==!1)&&(G===void 0||f._readableState.autoDestroy)?M.destroyer(f,null):(f.off("readable",B),he())}}a(I.prototype,{readable:{__proto__:null,get(){let f=this._readableState;return!!f&&f.readable!==!1&&!f.destroyed&&!f.errorEmitted&&!f.endEmitted},set(f){this._readableState&&(this._readableState.readable=!!f)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(f){this._readableState&&(this._readableState.flowing=f)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(f){this._readableState&&(this._readableState.destroyed=f)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),a(Ne.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ke]!==!1},set(f){this[ke]=!!f}}}),I._fromList=re;function re(f,m){if(m.length===0)return null;let T;return m.objectMode?T=m.buffer.shift():!f||f>=m.length?(m.decoder?T=m.buffer.join(""):m.buffer.length===1?T=m.buffer.first():T=m.buffer.concat(m.length),m.buffer.clear()):T=m.buffer.consume(f,m.decoder),T}function j(f){let m=f._readableState;z("endReadable",m.endEmitted),m.endEmitted||(m.ended=!0,t.nextTick(V,m,f))}function V(f,m){if(z("endReadableNT",f.endEmitted,f.length),!f.errored&&!f.closeEmitted&&!f.endEmitted&&f.length===0){if(f.endEmitted=!0,m.emit("end"),m.writable&&m.allowHalfOpen===!1)t.nextTick(Z,m);else if(f.autoDestroy){let T=m._writableState;(!T||T.autoDestroy&&(T.finished||T.writable===!1))&&m.destroy()}}}function Z(f){f.writable&&!f.writableEnded&&!f.destroyed&&f.end()}I.from=function(f,m){return ee(I,f,m)};var ve;function d(){return ve===void 0&&(ve={}),ve}I.fromWeb=function(f,m){return d().newStreamReadableFromReadableStream(f,m)},I.toWeb=function(f,m){return d().newReadableStreamFromStreamReadable(f,m)},I.wrap=function(f,m){var T,B;return new I({objectMode:(T=(B=f.readableObjectMode)!==null&&B!==void 0?B:f.objectMode)!==null&&T!==void 0?T:!0,...m,destroy(G,he){M.destroyer(f,G),he(G)}}).wrap(f)}}),Aa=E((e,s)=>{_e(),we(),F();var t=br(),{ArrayPrototypeSlice:h,Error:p,FunctionPrototypeSymbolHasInstance:o,ObjectDefineProperty:n,ObjectDefineProperties:a,ObjectSetPrototypeOf:i,StringPrototypeToLowerCase:l,Symbol:g,SymbolHasInstance:y}=ut();s.exports=ye,ye.WritableState=ie;var{EventEmitter:w}=(Ur(),K(wr)),v=Ao().Stream,{Buffer:S}=(bt(),K(mt)),C=jr(),{addAbortSignal:x}=mn(),{getHighWaterMark:W,getDefaultHighWaterMark:k}=Co(),{ERR_INVALID_ARG_TYPE:P,ERR_METHOD_NOT_IMPLEMENTED:z,ERR_MULTIPLE_CALLBACK:Q,ERR_STREAM_CANNOT_PIPE:M,ERR_STREAM_DESTROYED:N,ERR_STREAM_ALREADY_FINISHED:$,ERR_STREAM_NULL_VALUES:X,ERR_STREAM_WRITE_AFTER_END:ae,ERR_UNKNOWN_ENCODING:pe}=At().codes,{errorOrDestroy:O}=C;i(ye.prototype,v.prototype),i(ye,v);function te(){}var de=g("kOnFinished");function ie(U,J,Y){typeof Y!="boolean"&&(Y=J instanceof Gt()),this.objectMode=!!(U&&U.objectMode),Y&&(this.objectMode=this.objectMode||!!(U&&U.writableObjectMode)),this.highWaterMark=U?W(this,U,"writableHighWaterMark",Y):k(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let ge=!!(U&&U.decodeStrings===!1);this.decodeStrings=!ge,this.defaultEncoding=U&&U.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=I.bind(void 0,J),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,ke(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!U||U.emitClose!==!1,this.autoDestroy=!U||U.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[de]=[]}function ke(U){U.buffered=[],U.bufferedIndex=0,U.allBuffers=!0,U.allNoop=!0}ie.prototype.getBuffer=function(){return h(this.buffered,this.bufferedIndex)},n(ie.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ye(U){let J=this instanceof Gt();if(!J&&!o(ye,this))return new ye(U);this._writableState=new ie(U,this,J),U&&(typeof U.write=="function"&&(this._write=U.write),typeof U.writev=="function"&&(this._writev=U.writev),typeof U.destroy=="function"&&(this._destroy=U.destroy),typeof U.final=="function"&&(this._final=U.final),typeof U.construct=="function"&&(this._construct=U.construct),U.signal&&x(U.signal,this)),v.call(this,U),C.construct(this,()=>{let Y=this._writableState;Y.writing||Ee(this,Y),Se(this,Y)})}n(ye,y,{__proto__:null,value:function(U){return o(this,U)?!0:this!==ye?!1:U&&U._writableState instanceof ie}}),ye.prototype.pipe=function(){O(this,new M)};function ee(U,J,Y,ge){let ce=U._writableState;if(typeof Y=="function")ge=Y,Y=ce.defaultEncoding;else{if(!Y)Y=ce.defaultEncoding;else if(Y!=="buffer"&&!S.isEncoding(Y))throw new pe(Y);typeof ge!="function"&&(ge=te)}if(J===null)throw new X;if(!ce.objectMode)if(typeof J=="string")ce.decodeStrings!==!1&&(J=S.from(J,Y),Y="buffer");else if(J instanceof S)Y="buffer";else if(v._isUint8Array(J))J=v._uint8ArrayToBuffer(J),Y="buffer";else throw new P("chunk",["string","Buffer","Uint8Array"],J);let H;return ce.ending?H=new ae:ce.destroyed&&(H=new N("write")),H?(t.nextTick(ge,H),O(U,H,!0),H):(ce.pendingcb++,Oe(U,ce,J,Y,ge))}ye.prototype.write=function(U,J,Y){return ee(this,U,J,Y)===!0},ye.prototype.cork=function(){this._writableState.corked++},ye.prototype.uncork=function(){let U=this._writableState;U.corked&&(U.corked--,U.writing||Ee(this,U))},ye.prototype.setDefaultEncoding=function(U){if(typeof U=="string"&&(U=l(U)),!S.isEncoding(U))throw new pe(U);return this._writableState.defaultEncoding=U,this};function Oe(U,J,Y,ge,ce){let H=J.objectMode?1:Y.length;J.length+=H;let re=J.length<J.highWaterMark;return re||(J.needDrain=!0),J.writing||J.corked||J.errored||!J.constructed?(J.buffered.push({chunk:Y,encoding:ge,callback:ce}),J.allBuffers&&ge!=="buffer"&&(J.allBuffers=!1),J.allNoop&&ce!==te&&(J.allNoop=!1)):(J.writelen=H,J.writecb=ce,J.writing=!0,J.sync=!0,U._write(Y,ge,J.onwrite),J.sync=!1),re&&!J.errored&&!J.destroyed}function me(U,J,Y,ge,ce,H,re){J.writelen=ge,J.writecb=re,J.writing=!0,J.sync=!0,J.destroyed?J.onwrite(new N("write")):Y?U._writev(ce,J.onwrite):U._write(ce,H,J.onwrite),J.sync=!1}function Ne(U,J,Y,ge){--J.pendingcb,ge(Y),Me(J),O(U,Y)}function I(U,J){let Y=U._writableState,ge=Y.sync,ce=Y.writecb;if(typeof ce!="function"){O(U,new Q);return}Y.writing=!1,Y.writecb=null,Y.length-=Y.writelen,Y.writelen=0,J?(J.stack,Y.errored||(Y.errored=J),U._readableState&&!U._readableState.errored&&(U._readableState.errored=J),ge?t.nextTick(Ne,U,Y,J,ce):Ne(U,Y,J,ce)):(Y.buffered.length>Y.bufferedIndex&&Ee(U,Y),ge?Y.afterWriteTickInfo!==null&&Y.afterWriteTickInfo.cb===ce?Y.afterWriteTickInfo.count++:(Y.afterWriteTickInfo={count:1,cb:ce,stream:U,state:Y},t.nextTick(oe,Y.afterWriteTickInfo)):Ae(U,Y,1,ce))}function oe({stream:U,state:J,count:Y,cb:ge}){return J.afterWriteTickInfo=null,Ae(U,J,Y,ge)}function Ae(U,J,Y,ge){for(!J.ending&&!U.destroyed&&J.length===0&&J.needDrain&&(J.needDrain=!1,U.emit("drain"));Y-- >0;)J.pendingcb--,ge();J.destroyed&&Me(J),Se(U,J)}function Me(U){if(U.writing)return;for(let ce=U.bufferedIndex;ce<U.buffered.length;++ce){var J;let{chunk:H,callback:re}=U.buffered[ce],j=U.objectMode?1:H.length;U.length-=j,re((J=U.errored)!==null&&J!==void 0?J:new N("write"))}let Y=U[de].splice(0);for(let ce=0;ce<Y.length;ce++){var ge;Y[ce]((ge=U.errored)!==null&&ge!==void 0?ge:new N("end"))}ke(U)}function Ee(U,J){if(J.corked||J.bufferProcessing||J.destroyed||!J.constructed)return;let{buffered:Y,bufferedIndex:ge,objectMode:ce}=J,H=Y.length-ge;if(!H)return;let re=ge;if(J.bufferProcessing=!0,H>1&&U._writev){J.pendingcb-=H-1;let j=J.allNoop?te:Z=>{for(let ve=re;ve<Y.length;++ve)Y[ve].callback(Z)},V=J.allNoop&&re===0?Y:h(Y,re);V.allBuffers=J.allBuffers,me(U,J,!0,J.length,V,"",j),ke(J)}else{do{let{chunk:j,encoding:V,callback:Z}=Y[re];Y[re++]=null;let ve=ce?1:j.length;me(U,J,!1,ve,j,V,Z)}while(re<Y.length&&!J.writing);re===Y.length?ke(J):re>256?(Y.splice(0,re),J.bufferedIndex=0):J.bufferedIndex=re}J.bufferProcessing=!1}ye.prototype._write=function(U,J,Y){if(this._writev)this._writev([{chunk:U,encoding:J}],Y);else throw new z("_write()")},ye.prototype._writev=null,ye.prototype.end=function(U,J,Y){let ge=this._writableState;typeof U=="function"?(Y=U,U=null,J=null):typeof J=="function"&&(Y=J,J=null);let ce;if(U!=null){let H=ee(this,U,J);H instanceof p&&(ce=H)}return ge.corked&&(ge.corked=1,this.uncork()),ce||(!ge.errored&&!ge.ending?(ge.ending=!0,Se(this,ge,!0),ge.ended=!0):ge.finished?ce=new $("end"):ge.destroyed&&(ce=new N("end"))),typeof Y=="function"&&(ce||ge.finished?t.nextTick(Y,ce):ge[de].push(Y)),this};function D(U){return U.ending&&!U.destroyed&&U.constructed&&U.length===0&&!U.errored&&U.buffered.length===0&&!U.finished&&!U.writing&&!U.errorEmitted&&!U.closeEmitted}function R(U,J){let Y=!1;function ge(ce){if(Y){O(U,ce??Q());return}if(Y=!0,J.pendingcb--,ce){let H=J[de].splice(0);for(let re=0;re<H.length;re++)H[re](ce);O(U,ce,J.sync)}else D(J)&&(J.prefinished=!0,U.emit("prefinish"),J.pendingcb++,t.nextTick(fe,U,J))}J.sync=!0,J.pendingcb++;try{U._final(ge)}catch(ce){ge(ce)}J.sync=!1}function ne(U,J){!J.prefinished&&!J.finalCalled&&(typeof U._final=="function"&&!J.destroyed?(J.finalCalled=!0,R(U,J)):(J.prefinished=!0,U.emit("prefinish")))}function Se(U,J,Y){D(J)&&(ne(U,J),J.pendingcb===0&&(Y?(J.pendingcb++,t.nextTick((ge,ce)=>{D(ce)?fe(ge,ce):ce.pendingcb--},U,J)):D(J)&&(J.pendingcb++,fe(U,J))))}function fe(U,J){J.pendingcb--,J.finished=!0;let Y=J[de].splice(0);for(let ge=0;ge<Y.length;ge++)Y[ge]();if(U.emit("finish"),J.autoDestroy){let ge=U._readableState;(!ge||ge.autoDestroy&&(ge.endEmitted||ge.readable===!1))&&U.destroy()}}a(ye.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(U){this._writableState&&(this._writableState.destroyed=U)}},writable:{__proto__:null,get(){let U=this._writableState;return!!U&&U.writable!==!1&&!U.destroyed&&!U.errored&&!U.ending&&!U.ended},set(U){this._writableState&&(this._writableState.writable=!!U)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let U=this._writableState;return U?!U.destroyed&&!U.ending&&U.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var ue=C.destroy;ye.prototype.destroy=function(U,J){let Y=this._writableState;return!Y.destroyed&&(Y.bufferedIndex<Y.buffered.length||Y[de].length)&&t.nextTick(Me,Y),ue.call(this,U,J),this},ye.prototype._undestroy=C.undestroy,ye.prototype._destroy=function(U,J){J(U)},ye.prototype[w.captureRejectionSymbol]=function(U){this.destroy(U)};var Pe;function Ie(){return Pe===void 0&&(Pe={}),Pe}ye.fromWeb=function(U,J){return Ie().newStreamWritableFromWritableStream(U,J)},ye.toWeb=function(U){return Ie().newWritableStreamFromStreamWritable(U)}}),$u=E((e,s)=>{_e(),we(),F();var t=br(),h=(bt(),K(mt)),{isReadable:p,isWritable:o,isIterable:n,isNodeStream:a,isReadableNodeStream:i,isWritableNodeStream:l,isDuplexNodeStream:g}=Jt(),y=lr(),{AbortError:w,codes:{ERR_INVALID_ARG_TYPE:v,ERR_INVALID_RETURN_VALUE:S}}=At(),{destroyer:C}=jr(),x=Gt(),W=vn(),{createDeferredPromise:k}=Kt(),P=Sa(),z=globalThis.Blob||h.Blob,Q=typeof z<"u"?function(pe){return pe instanceof z}:function(pe){return!1},M=globalThis.AbortController||_o().AbortController,{FunctionPrototypeCall:N}=ut(),$=class extends x{constructor(pe){super(pe),(pe==null?void 0:pe.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(pe==null?void 0:pe.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};s.exports=function pe(O,te){if(g(O))return O;if(i(O))return ae({readable:O});if(l(O))return ae({writable:O});if(a(O))return ae({writable:!1,readable:!1});if(typeof O=="function"){let{value:ie,write:ke,final:ye,destroy:ee}=X(O);if(n(ie))return P($,ie,{objectMode:!0,write:ke,final:ye,destroy:ee});let Oe=ie==null?void 0:ie.then;if(typeof Oe=="function"){let me,Ne=N(Oe,ie,I=>{if(I!=null)throw new S("nully","body",I)},I=>{C(me,I)});return me=new $({objectMode:!0,readable:!1,write:ke,final(I){ye(async()=>{try{await Ne,t.nextTick(I,null)}catch(oe){t.nextTick(I,oe)}})},destroy:ee})}throw new S("Iterable, AsyncIterable or AsyncFunction",te,ie)}if(Q(O))return pe(O.arrayBuffer());if(n(O))return P($,O,{objectMode:!0,writable:!1});if(typeof(O==null?void 0:O.writable)=="object"||typeof(O==null?void 0:O.readable)=="object"){let ie=O!=null&&O.readable?i(O==null?void 0:O.readable)?O==null?void 0:O.readable:pe(O.readable):void 0,ke=O!=null&&O.writable?l(O==null?void 0:O.writable)?O==null?void 0:O.writable:pe(O.writable):void 0;return ae({readable:ie,writable:ke})}let de=O==null?void 0:O.then;if(typeof de=="function"){let ie;return N(de,O,ke=>{ke!=null&&ie.push(ke),ie.push(null)},ke=>{C(ie,ke)}),ie=new $({objectMode:!0,writable:!1,read(){}})}throw new v(te,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],O)};function X(pe){let{promise:O,resolve:te}=k(),de=new M,ie=de.signal;return{value:pe(async function*(){for(;;){let ke=O;O=null;let{chunk:ye,done:ee,cb:Oe}=await ke;if(t.nextTick(Oe),ee)return;if(ie.aborted)throw new w(void 0,{cause:ie.reason});({promise:O,resolve:te}=k()),yield ye}}(),{signal:ie}),write(ke,ye,ee){let Oe=te;te=null,Oe({chunk:ke,done:!1,cb:ee})},final(ke){let ye=te;te=null,ye({done:!0,cb:ke})},destroy(ke,ye){de.abort(),ye(ke)}}}function ae(pe){let O=pe.readable&&typeof pe.readable.read!="function"?W.wrap(pe.readable):pe.readable,te=pe.writable,de=!!p(O),ie=!!o(te),ke,ye,ee,Oe,me;function Ne(I){let oe=Oe;Oe=null,oe?oe(I):I&&me.destroy(I)}return me=new $({readableObjectMode:!!(O!=null&&O.readableObjectMode),writableObjectMode:!!(te!=null&&te.writableObjectMode),readable:de,writable:ie}),ie&&(y(te,I=>{ie=!1,I&&C(O,I),Ne(I)}),me._write=function(I,oe,Ae){te.write(I,oe)?Ae():ke=Ae},me._final=function(I){te.end(),ye=I},te.on("drain",function(){if(ke){let I=ke;ke=null,I()}}),te.on("finish",function(){if(ye){let I=ye;ye=null,I()}})),de&&(y(O,I=>{de=!1,I&&C(O,I),Ne(I)}),O.on("readable",function(){if(ee){let I=ee;ee=null,I()}}),O.on("end",function(){me.push(null)}),me._read=function(){for(;;){let I=O.read();if(I===null){ee=me._read;return}if(!me.push(I))return}}),me._destroy=function(I,oe){!I&&Oe!==null&&(I=new w),ee=null,ke=null,ye=null,Oe===null?oe(I):(Oe=oe,C(te,I),C(O,I))},me}}),Gt=E((e,s)=>{_e(),we(),F();var{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:h,ObjectKeys:p,ObjectSetPrototypeOf:o}=ut();s.exports=i;var n=vn(),a=Aa();o(i.prototype,n.prototype),o(i,n);{let w=p(a.prototype);for(let v=0;v<w.length;v++){let S=w[v];i.prototype[S]||(i.prototype[S]=a.prototype[S])}}function i(w){if(!(this instanceof i))return new i(w);n.call(this,w),a.call(this,w),w?(this.allowHalfOpen=w.allowHalfOpen!==!1,w.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),w.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(i.prototype,{writable:{__proto__:null,...h(a.prototype,"writable")},writableHighWaterMark:{__proto__:null,...h(a.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...h(a.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...h(a.prototype,"writableBuffer")},writableLength:{__proto__:null,...h(a.prototype,"writableLength")},writableFinished:{__proto__:null,...h(a.prototype,"writableFinished")},writableCorked:{__proto__:null,...h(a.prototype,"writableCorked")},writableEnded:{__proto__:null,...h(a.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...h(a.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(w){this._readableState&&this._writableState&&(this._readableState.destroyed=w,this._writableState.destroyed=w)}}});var l;function g(){return l===void 0&&(l={}),l}i.fromWeb=function(w,v){return g().newStreamDuplexFromReadableWritablePair(w,v)},i.toWeb=function(w){return g().newReadableWritablePairFromDuplex(w)};var y;i.from=function(w){return y||(y=$u()),y(w,"body")}}),Ca=E((e,s)=>{_e(),we(),F();var{ObjectSetPrototypeOf:t,Symbol:h}=ut();s.exports=i;var{ERR_METHOD_NOT_IMPLEMENTED:p}=At().codes,o=Gt(),{getHighWaterMark:n}=Co();t(i.prototype,o.prototype),t(i,o);var a=h("kCallback");function i(y){if(!(this instanceof i))return new i(y);let w=y?n(this,y,"readableHighWaterMark",!0):null;w===0&&(y={...y,highWaterMark:null,readableHighWaterMark:w,writableHighWaterMark:y.writableHighWaterMark||0}),o.call(this,y),this._readableState.sync=!1,this[a]=null,y&&(typeof y.transform=="function"&&(this._transform=y.transform),typeof y.flush=="function"&&(this._flush=y.flush)),this.on("prefinish",g)}function l(y){typeof this._flush=="function"&&!this.destroyed?this._flush((w,v)=>{if(w){y?y(w):this.destroy(w);return}v!=null&&this.push(v),this.push(null),y&&y()}):(this.push(null),y&&y())}function g(){this._final!==l&&l.call(this)}i.prototype._final=l,i.prototype._transform=function(y,w,v){throw new p("_transform()")},i.prototype._write=function(y,w,v){let S=this._readableState,C=this._writableState,x=S.length;this._transform(y,w,(W,k)=>{if(W){v(W);return}k!=null&&this.push(k),C.ended||x===S.length||S.length<S.highWaterMark?v():this[a]=v})},i.prototype._read=function(){if(this[a]){let y=this[a];this[a]=null,y()}}}),Ta=E((e,s)=>{_e(),we(),F();var{ObjectSetPrototypeOf:t}=ut();s.exports=p;var h=Ca();t(p.prototype,h.prototype),t(p,h);function p(o){if(!(this instanceof p))return new p(o);h.call(this,o)}p.prototype._transform=function(o,n,a){a(null,o)}}),No=E((e,s)=>{_e(),we(),F();var t=br(),{ArrayIsArray:h,Promise:p,SymbolAsyncIterator:o}=ut(),n=lr(),{once:a}=Kt(),i=jr(),l=Gt(),{aggregateTwoErrors:g,codes:{ERR_INVALID_ARG_TYPE:y,ERR_INVALID_RETURN_VALUE:w,ERR_MISSING_ARGS:v,ERR_STREAM_DESTROYED:S,ERR_STREAM_PREMATURE_CLOSE:C},AbortError:x}=At(),{validateFunction:W,validateAbortSignal:k}=pn(),{isIterable:P,isReadable:z,isReadableNodeStream:Q,isNodeStream:M,isTransformStream:N,isWebStream:$,isReadableStream:X,isReadableEnded:ae}=Jt(),pe=globalThis.AbortController||_o().AbortController,O,te;function de(oe,Ae,Me){let Ee=!1;oe.on("close",()=>{Ee=!0});let D=n(oe,{readable:Ae,writable:Me},R=>{Ee=!R});return{destroy:R=>{Ee||(Ee=!0,i.destroyer(oe,R||new S("pipe")))},cleanup:D}}function ie(oe){return W(oe[oe.length-1],"streams[stream.length - 1]"),oe.pop()}function ke(oe){if(P(oe))return oe;if(Q(oe))return ye(oe);throw new y("val",["Readable","Iterable","AsyncIterable"],oe)}async function*ye(oe){te||(te=vn()),yield*te.prototype[o].call(oe)}async function ee(oe,Ae,Me,{end:Ee}){let D,R=null,ne=ue=>{if(ue&&(D=ue),R){let Pe=R;R=null,Pe()}},Se=()=>new p((ue,Pe)=>{D?Pe(D):R=()=>{D?Pe(D):ue()}});Ae.on("drain",ne);let fe=n(Ae,{readable:!1},ne);try{Ae.writableNeedDrain&&await Se();for await(let ue of oe)Ae.write(ue)||await Se();Ee&&Ae.end(),await Se(),Me()}catch(ue){Me(D!==ue?g(D,ue):ue)}finally{fe(),Ae.off("drain",ne)}}async function Oe(oe,Ae,Me,{end:Ee}){N(Ae)&&(Ae=Ae.writable);let D=Ae.getWriter();try{for await(let R of oe)await D.ready,D.write(R).catch(()=>{});await D.ready,Ee&&await D.close(),Me()}catch(R){try{await D.abort(R),Me(R)}catch(ne){Me(ne)}}}function me(...oe){return Ne(oe,a(ie(oe)))}function Ne(oe,Ae,Me){if(oe.length===1&&h(oe[0])&&(oe=oe[0]),oe.length<2)throw new v("streams");let Ee=new pe,D=Ee.signal,R=Me==null?void 0:Me.signal,ne=[];k(R,"options.signal");function Se(){J(new x)}R==null||R.addEventListener("abort",Se);let fe,ue,Pe=[],Ie=0;function U(H){J(H,--Ie===0)}function J(H,re){if(H&&(!fe||fe.code==="ERR_STREAM_PREMATURE_CLOSE")&&(fe=H),!(!fe&&!re)){for(;Pe.length;)Pe.shift()(fe);R==null||R.removeEventListener("abort",Se),Ee.abort(),re&&(fe||ne.forEach(j=>j()),t.nextTick(Ae,fe,ue))}}let Y;for(let H=0;H<oe.length;H++){let re=oe[H],j=H<oe.length-1,V=H>0,Z=j||(Me==null?void 0:Me.end)!==!1,ve=H===oe.length-1;if(M(re)){let d=function(f){f&&f.name!=="AbortError"&&f.code!=="ERR_STREAM_PREMATURE_CLOSE"&&U(f)};if(Z){let{destroy:f,cleanup:m}=de(re,j,V);Pe.push(f),z(re)&&ve&&ne.push(m)}re.on("error",d),z(re)&&ve&&ne.push(()=>{re.removeListener("error",d)})}if(H===0)if(typeof re=="function"){if(Y=re({signal:D}),!P(Y))throw new w("Iterable, AsyncIterable or Stream","source",Y)}else P(re)||Q(re)||N(re)?Y=re:Y=l.from(re);else if(typeof re=="function"){if(N(Y)){var ge;Y=ke((ge=Y)===null||ge===void 0?void 0:ge.readable)}else Y=ke(Y);if(Y=re(Y,{signal:D}),j){if(!P(Y,!0))throw new w("AsyncIterable",`transform[${H-1}]`,Y)}else{var ce;O||(O=Ta());let d=new O({objectMode:!0}),f=(ce=Y)===null||ce===void 0?void 0:ce.then;if(typeof f=="function")Ie++,f.call(Y,B=>{ue=B,B!=null&&d.write(B),Z&&d.end(),t.nextTick(U)},B=>{d.destroy(B),t.nextTick(U,B)});else if(P(Y,!0))Ie++,ee(Y,d,U,{end:Z});else if(X(Y)||N(Y)){let B=Y.readable||Y;Ie++,ee(B,d,U,{end:Z})}else throw new w("AsyncIterable or Promise","destination",Y);Y=d;let{destroy:m,cleanup:T}=de(Y,!1,!0);Pe.push(m),ve&&ne.push(T)}}else if(M(re)){if(Q(Y)){Ie+=2;let d=I(Y,re,U,{end:Z});z(re)&&ve&&ne.push(d)}else if(N(Y)||X(Y)){let d=Y.readable||Y;Ie++,ee(d,re,U,{end:Z})}else if(P(Y))Ie++,ee(Y,re,U,{end:Z});else throw new y("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Y);Y=re}else if($(re)){if(Q(Y))Ie++,Oe(ke(Y),re,U,{end:Z});else if(X(Y)||P(Y))Ie++,Oe(Y,re,U,{end:Z});else if(N(Y))Ie++,Oe(Y.readable,re,U,{end:Z});else throw new y("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Y);Y=re}else Y=l.from(re)}return(D!=null&&D.aborted||R!=null&&R.aborted)&&t.nextTick(Se),Y}function I(oe,Ae,Me,{end:Ee}){let D=!1;if(Ae.on("close",()=>{D||Me(new C)}),oe.pipe(Ae,{end:!1}),Ee){let R=function(){D=!0,Ae.end()};ae(oe)?t.nextTick(R):oe.once("end",R)}else Me();return n(oe,{readable:!0,writable:!1},R=>{let ne=oe._readableState;R&&R.code==="ERR_STREAM_PREMATURE_CLOSE"&&ne&&ne.ended&&!ne.errored&&!ne.errorEmitted?oe.once("end",Me).once("error",Me):Me(R)}),n(Ae,{readable:!1,writable:!0},Me)}s.exports={pipelineImpl:Ne,pipeline:me}}),Ia=E((e,s)=>{_e(),we(),F();var{pipeline:t}=No(),h=Gt(),{destroyer:p}=jr(),{isNodeStream:o,isReadable:n,isWritable:a,isWebStream:i,isTransformStream:l,isWritableStream:g,isReadableStream:y}=Jt(),{AbortError:w,codes:{ERR_INVALID_ARG_VALUE:v,ERR_MISSING_ARGS:S}}=At(),C=lr();s.exports=function(...x){if(x.length===0)throw new S("streams");if(x.length===1)return h.from(x[0]);let W=[...x];if(typeof x[0]=="function"&&(x[0]=h.from(x[0])),typeof x[x.length-1]=="function"){let O=x.length-1;x[O]=h.from(x[O])}for(let O=0;O<x.length;++O)if(!(!o(x[O])&&!i(x[O]))){if(O<x.length-1&&!(n(x[O])||y(x[O])||l(x[O])))throw new v(`streams[${O}]`,W[O],"must be readable");if(O>0&&!(a(x[O])||g(x[O])||l(x[O])))throw new v(`streams[${O}]`,W[O],"must be writable")}let k,P,z,Q,M;function N(O){let te=Q;Q=null,te?te(O):O?M.destroy(O):!pe&&!ae&&M.destroy()}let $=x[0],X=t(x,N),ae=!!(a($)||g($)||l($)),pe=!!(n(X)||y(X)||l(X));if(M=new h({writableObjectMode:!!($!=null&&$.writableObjectMode),readableObjectMode:!!(X!=null&&X.writableObjectMode),writable:ae,readable:pe}),ae){if(o($))M._write=function(te,de,ie){$.write(te,de)?ie():k=ie},M._final=function(te){$.end(),P=te},$.on("drain",function(){if(k){let te=k;k=null,te()}});else if(i($)){let te=(l($)?$.writable:$).getWriter();M._write=async function(de,ie,ke){try{await te.ready,te.write(de).catch(()=>{}),ke()}catch(ye){ke(ye)}},M._final=async function(de){try{await te.ready,te.close().catch(()=>{}),P=de}catch(ie){de(ie)}}}let O=l(X)?X.readable:X;C(O,()=>{if(P){let te=P;P=null,te()}})}if(pe){if(o(X))X.on("readable",function(){if(z){let O=z;z=null,O()}}),X.on("end",function(){M.push(null)}),M._read=function(){for(;;){let O=X.read();if(O===null){z=M._read;return}if(!M.push(O))return}};else if(i(X)){let O=(l(X)?X.readable:X).getReader();M._read=async function(){for(;;)try{let{value:te,done:de}=await O.read();if(!M.push(te))return;if(de){M.push(null);return}}catch{return}}}}return M._destroy=function(O,te){!O&&Q!==null&&(O=new w),z=null,k=null,P=null,Q===null?te(O):(Q=te,o(X)&&p(X,O))},M}}),Wu=E((e,s)=>{_e(),we(),F();var t=globalThis.AbortController||_o().AbortController,{codes:{ERR_INVALID_ARG_VALUE:h,ERR_INVALID_ARG_TYPE:p,ERR_MISSING_ARGS:o,ERR_OUT_OF_RANGE:n},AbortError:a}=At(),{validateAbortSignal:i,validateInteger:l,validateObject:g}=pn(),y=ut().Symbol("kWeak"),{finished:w}=lr(),v=Ia(),{addAbortSignalNoValidate:S}=mn(),{isWritable:C,isNodeStream:x}=Jt(),{ArrayPrototypePush:W,MathFloor:k,Number:P,NumberIsNaN:z,Promise:Q,PromiseReject:M,PromisePrototypeThen:N,Symbol:$}=ut(),X=$("kEmpty"),ae=$("kEof");function pe(Ee,D){if(D!=null&&g(D,"options"),(D==null?void 0:D.signal)!=null&&i(D.signal,"options.signal"),x(Ee)&&!C(Ee))throw new h("stream",Ee,"must be writable");let R=v(this,Ee);return D!=null&&D.signal&&S(D.signal,R),R}function O(Ee,D){if(typeof Ee!="function")throw new p("fn",["Function","AsyncFunction"],Ee);D!=null&&g(D,"options"),(D==null?void 0:D.signal)!=null&&i(D.signal,"options.signal");let R=1;return(D==null?void 0:D.concurrency)!=null&&(R=k(D.concurrency)),l(R,"concurrency",1),(async function*(){var ne,Se;let fe=new t,ue=this,Pe=[],Ie=fe.signal,U={signal:Ie},J=()=>fe.abort();D!=null&&(ne=D.signal)!==null&&ne!==void 0&&ne.aborted&&J(),D==null||(Se=D.signal)===null||Se===void 0||Se.addEventListener("abort",J);let Y,ge,ce=!1;function H(){ce=!0}async function re(){try{for await(let Z of ue){var j;if(ce)return;if(Ie.aborted)throw new a;try{Z=Ee(Z,U)}catch(ve){Z=M(ve)}Z!==X&&(typeof((j=Z)===null||j===void 0?void 0:j.catch)=="function"&&Z.catch(H),Pe.push(Z),Y&&(Y(),Y=null),!ce&&Pe.length&&Pe.length>=R&&await new Q(ve=>{ge=ve}))}Pe.push(ae)}catch(Z){let ve=M(Z);N(ve,void 0,H),Pe.push(ve)}finally{var V;ce=!0,Y&&(Y(),Y=null),D==null||(V=D.signal)===null||V===void 0||V.removeEventListener("abort",J)}}re();try{for(;;){for(;Pe.length>0;){let j=await Pe[0];if(j===ae)return;if(Ie.aborted)throw new a;j!==X&&(yield j),Pe.shift(),ge&&(ge(),ge=null)}await new Q(j=>{Y=j})}}finally{fe.abort(),ce=!0,ge&&(ge(),ge=null)}}).call(this)}function te(Ee=void 0){return Ee!=null&&g(Ee,"options"),(Ee==null?void 0:Ee.signal)!=null&&i(Ee.signal,"options.signal"),(async function*(){let D=0;for await(let ne of this){var R;if(Ee!=null&&(R=Ee.signal)!==null&&R!==void 0&&R.aborted)throw new a({cause:Ee.signal.reason});yield[D++,ne]}}).call(this)}async function de(Ee,D=void 0){for await(let R of ee.call(this,Ee,D))return!0;return!1}async function ie(Ee,D=void 0){if(typeof Ee!="function")throw new p("fn",["Function","AsyncFunction"],Ee);return!await de.call(this,async(...R)=>!await Ee(...R),D)}async function ke(Ee,D){for await(let R of ee.call(this,Ee,D))return R}async function ye(Ee,D){if(typeof Ee!="function")throw new p("fn",["Function","AsyncFunction"],Ee);async function R(ne,Se){return await Ee(ne,Se),X}for await(let ne of O.call(this,R,D));}function ee(Ee,D){if(typeof Ee!="function")throw new p("fn",["Function","AsyncFunction"],Ee);async function R(ne,Se){return await Ee(ne,Se)?ne:X}return O.call(this,R,D)}var Oe=class extends o{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function me(Ee,D,R){var ne;if(typeof Ee!="function")throw new p("reducer",["Function","AsyncFunction"],Ee);R!=null&&g(R,"options"),(R==null?void 0:R.signal)!=null&&i(R.signal,"options.signal");let Se=arguments.length>1;if(R!=null&&(ne=R.signal)!==null&&ne!==void 0&&ne.aborted){let U=new a(void 0,{cause:R.signal.reason});throw this.once("error",()=>{}),await w(this.destroy(U)),U}let fe=new t,ue=fe.signal;if(R!=null&&R.signal){let U={once:!0,[y]:this};R.signal.addEventListener("abort",()=>fe.abort(),U)}let Pe=!1;try{for await(let U of this){var Ie;if(Pe=!0,R!=null&&(Ie=R.signal)!==null&&Ie!==void 0&&Ie.aborted)throw new a;Se?D=await Ee(D,U,{signal:ue}):(D=U,Se=!0)}if(!Pe&&!Se)throw new Oe}finally{fe.abort()}return D}async function Ne(Ee){Ee!=null&&g(Ee,"options"),(Ee==null?void 0:Ee.signal)!=null&&i(Ee.signal,"options.signal");let D=[];for await(let ne of this){var R;if(Ee!=null&&(R=Ee.signal)!==null&&R!==void 0&&R.aborted)throw new a(void 0,{cause:Ee.signal.reason});W(D,ne)}return D}function I(Ee,D){let R=O.call(this,Ee,D);return(async function*(){for await(let ne of R)yield*ne}).call(this)}function oe(Ee){if(Ee=P(Ee),z(Ee))return 0;if(Ee<0)throw new n("number",">= 0",Ee);return Ee}function Ae(Ee,D=void 0){return D!=null&&g(D,"options"),(D==null?void 0:D.signal)!=null&&i(D.signal,"options.signal"),Ee=oe(Ee),(async function*(){var R;if(D!=null&&(R=D.signal)!==null&&R!==void 0&&R.aborted)throw new a;for await(let Se of this){var ne;if(D!=null&&(ne=D.signal)!==null&&ne!==void 0&&ne.aborted)throw new a;Ee--<=0&&(yield Se)}}).call(this)}function Me(Ee,D=void 0){return D!=null&&g(D,"options"),(D==null?void 0:D.signal)!=null&&i(D.signal,"options.signal"),Ee=oe(Ee),(async function*(){var R;if(D!=null&&(R=D.signal)!==null&&R!==void 0&&R.aborted)throw new a;for await(let Se of this){var ne;if(D!=null&&(ne=D.signal)!==null&&ne!==void 0&&ne.aborted)throw new a;if(Ee-- >0)yield Se;else return}}).call(this)}s.exports.streamReturningOperators={asIndexedPairs:te,drop:Ae,filter:ee,flatMap:I,map:O,take:Me,compose:pe},s.exports.promiseReturningOperators={every:ie,forEach:ye,reduce:me,toArray:Ne,some:de,find:ke}}),ka=E((e,s)=>{_e(),we(),F();var{ArrayPrototypePop:t,Promise:h}=ut(),{isIterable:p,isNodeStream:o,isWebStream:n}=Jt(),{pipelineImpl:a}=No(),{finished:i}=lr();Ra();function l(...g){return new h((y,w)=>{let v,S,C=g[g.length-1];if(C&&typeof C=="object"&&!o(C)&&!p(C)&&!n(C)){let x=t(g);v=x.signal,S=x.end}a(g,(x,W)=>{x?w(x):y(W)},{signal:v,end:S})})}s.exports={finished:i,pipeline:l}}),Ra=E((e,s)=>{_e(),we(),F();var{Buffer:t}=(bt(),K(mt)),{ObjectDefineProperty:h,ObjectKeys:p,ReflectApply:o}=ut(),{promisify:{custom:n}}=Kt(),{streamReturningOperators:a,promiseReturningOperators:i}=Wu(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:l}}=At(),g=Ia(),{pipeline:y}=No(),{destroyer:w}=jr(),v=lr(),S=ka(),C=Jt(),x=s.exports=Ao().Stream;x.isDisturbed=C.isDisturbed,x.isErrored=C.isErrored,x.isReadable=C.isReadable,x.Readable=vn();for(let k of p(a)){let P=function(...Q){if(new.target)throw l();return x.Readable.from(o(z,this,Q))},z=a[k];h(P,"name",{__proto__:null,value:z.name}),h(P,"length",{__proto__:null,value:z.length}),h(x.Readable.prototype,k,{__proto__:null,value:P,enumerable:!1,configurable:!0,writable:!0})}for(let k of p(i)){let P=function(...Q){if(new.target)throw l();return o(z,this,Q)},z=i[k];h(P,"name",{__proto__:null,value:z.name}),h(P,"length",{__proto__:null,value:z.length}),h(x.Readable.prototype,k,{__proto__:null,value:P,enumerable:!1,configurable:!0,writable:!0})}x.Writable=Aa(),x.Duplex=Gt(),x.Transform=Ca(),x.PassThrough=Ta(),x.pipeline=y;var{addAbortSignal:W}=mn();x.addAbortSignal=W,x.finished=v,x.destroy=w,x.compose=g,h(x,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return S}}),h(y,n,{__proto__:null,enumerable:!0,get(){return S.pipeline}}),h(v,n,{__proto__:null,enumerable:!0,get(){return S.finished}}),x.Stream=x,x._isUint8Array=function(k){return k instanceof Uint8Array},x._uint8ArrayToBuffer=function(k){return t.from(k.buffer,k.byteOffset,k.byteLength)}}),Ar=E((e,s)=>{_e(),we(),F();var t=Ra(),h=ka(),p=t.Readable.destroy;s.exports=t.Readable,s.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,s.exports._isUint8Array=t._isUint8Array,s.exports.isDisturbed=t.isDisturbed,s.exports.isErrored=t.isErrored,s.exports.isReadable=t.isReadable,s.exports.Readable=t.Readable,s.exports.Writable=t.Writable,s.exports.Duplex=t.Duplex,s.exports.Transform=t.Transform,s.exports.PassThrough=t.PassThrough,s.exports.addAbortSignal=t.addAbortSignal,s.exports.finished=t.finished,s.exports.destroy=t.destroy,s.exports.destroy=p,s.exports.pipeline=t.pipeline,s.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return h}}),s.exports.Stream=t.Stream,s.exports.default=s.exports}),Hu=E((e,s)=>{_e(),we(),F(),typeof Object.create=="function"?s.exports=function(t,h){h&&(t.super_=h,t.prototype=Object.create(h.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:s.exports=function(t,h){if(h){t.super_=h;var p=function(){};p.prototype=h.prototype,t.prototype=new p,t.prototype.constructor=t}}}),qu=E((e,s)=>{_e(),we(),F();var{Buffer:t}=(bt(),K(mt)),h=Symbol.for("BufferList");function p(o){if(!(this instanceof p))return new p(o);p._init.call(this,o)}p._init=function(o){Object.defineProperty(this,h,{value:!0}),this._bufs=[],this.length=0,o&&this.append(o)},p.prototype._new=function(o){return new p(o)},p.prototype._offset=function(o){if(o===0)return[0,0];let n=0;for(let a=0;a<this._bufs.length;a++){let i=n+this._bufs[a].length;if(o<i||a===this._bufs.length-1)return[a,o-n];n=i}},p.prototype._reverseOffset=function(o){let n=o[0],a=o[1];for(let i=0;i<n;i++)a+=this._bufs[i].length;return a},p.prototype.get=function(o){if(o>this.length||o<0)return;let n=this._offset(o);return this._bufs[n[0]][n[1]]},p.prototype.slice=function(o,n){return typeof o=="number"&&o<0&&(o+=this.length),typeof n=="number"&&n<0&&(n+=this.length),this.copy(null,0,o,n)},p.prototype.copy=function(o,n,a,i){if((typeof a!="number"||a<0)&&(a=0),(typeof i!="number"||i>this.length)&&(i=this.length),a>=this.length||i<=0)return o||t.alloc(0);let l=!!o,g=this._offset(a),y=i-a,w=y,v=l&&n||0,S=g[1];if(a===0&&i===this.length){if(!l)return this._bufs.length===1?this._bufs[0]:t.concat(this._bufs,this.length);for(let C=0;C<this._bufs.length;C++)this._bufs[C].copy(o,v),v+=this._bufs[C].length;return o}if(w<=this._bufs[g[0]].length-S)return l?this._bufs[g[0]].copy(o,n,S,S+w):this._bufs[g[0]].slice(S,S+w);l||(o=t.allocUnsafe(y));for(let C=g[0];C<this._bufs.length;C++){let x=this._bufs[C].length-S;if(w>x)this._bufs[C].copy(o,v,S),v+=x;else{this._bufs[C].copy(o,v,S,S+w),v+=x;break}w-=x,S&&(S=0)}return o.length>v?o.slice(0,v):o},p.prototype.shallowSlice=function(o,n){if(o=o||0,n=typeof n!="number"?this.length:n,o<0&&(o+=this.length),n<0&&(n+=this.length),o===n)return this._new();let a=this._offset(o),i=this._offset(n),l=this._bufs.slice(a[0],i[0]+1);return i[1]===0?l.pop():l[l.length-1]=l[l.length-1].slice(0,i[1]),a[1]!==0&&(l[0]=l[0].slice(a[1])),this._new(l)},p.prototype.toString=function(o,n,a){return this.slice(n,a).toString(o)},p.prototype.consume=function(o){if(o=Math.trunc(o),Number.isNaN(o)||o<=0)return this;for(;this._bufs.length;)if(o>=this._bufs[0].length)o-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(o),this.length-=o;break}return this},p.prototype.duplicate=function(){let o=this._new();for(let n=0;n<this._bufs.length;n++)o.append(this._bufs[n]);return o},p.prototype.append=function(o){if(o==null)return this;if(o.buffer)this._appendBuffer(t.from(o.buffer,o.byteOffset,o.byteLength));else if(Array.isArray(o))for(let n=0;n<o.length;n++)this.append(o[n]);else if(this._isBufferList(o))for(let n=0;n<o._bufs.length;n++)this.append(o._bufs[n]);else typeof o=="number"&&(o=o.toString()),this._appendBuffer(t.from(o));return this},p.prototype._appendBuffer=function(o){this._bufs.push(o),this.length+=o.length},p.prototype.indexOf=function(o,n,a){if(a===void 0&&typeof n=="string"&&(a=n,n=void 0),typeof o=="function"||Array.isArray(o))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof o=="number"?o=t.from([o]):typeof o=="string"?o=t.from(o,a):this._isBufferList(o)?o=o.slice():Array.isArray(o.buffer)?o=t.from(o.buffer,o.byteOffset,o.byteLength):t.isBuffer(o)||(o=t.from(o)),n=Number(n||0),isNaN(n)&&(n=0),n<0&&(n=this.length+n),n<0&&(n=0),o.length===0)return n>this.length?this.length:n;let i=this._offset(n),l=i[0],g=i[1];for(;l<this._bufs.length;l++){let y=this._bufs[l];for(;g<y.length;)if(y.length-g>=o.length){let w=y.indexOf(o,g);if(w!==-1)return this._reverseOffset([l,w]);g=y.length-o.length+1}else{let w=this._reverseOffset([l,g]);if(this._match(w,o))return w;g++}g=0}return-1},p.prototype._match=function(o,n){if(this.length-o<n.length)return!1;for(let a=0;a<n.length;a++)if(this.get(o+a)!==n[a])return!1;return!0},function(){let o={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let n in o)(function(a){o[a]===null?p.prototype[a]=function(i,l){return this.slice(i,i+l)[a](0,l)}:p.prototype[a]=function(i=0){return this.slice(i,i+o[a])[a](0)}})(n)}(),p.prototype._isBufferList=function(o){return o instanceof p||p.isBufferList(o)},p.isBufferList=function(o){return o!=null&&o[h]},s.exports=p}),Vu=E((e,s)=>{_e(),we(),F();var t=Ar().Duplex,h=Hu(),p=qu();function o(n){if(!(this instanceof o))return new o(n);if(typeof n=="function"){this._callback=n;let a=(function(i){this._callback&&(this._callback(i),this._callback=null)}).bind(this);this.on("pipe",function(i){i.on("error",a)}),this.on("unpipe",function(i){i.removeListener("error",a)}),n=null}p._init.call(this,n),t.call(this)}h(o,t),Object.assign(o.prototype,p.prototype),o.prototype._new=function(n){return new o(n)},o.prototype._write=function(n,a,i){this._appendBuffer(n),typeof i=="function"&&i()},o.prototype._read=function(n){if(!this.length)return this.push(null);n=Math.min(n,this.length),this.push(this.slice(0,n)),this.consume(n)},o.prototype.end=function(n){t.prototype.end.call(this,n),this._callback&&(this._callback(null,this.slice()),this._callback=null)},o.prototype._destroy=function(n,a){this._bufs.length=0,this.length=0,a(n)},o.prototype._isBufferList=function(n){return n instanceof o||n instanceof p||o.isBufferList(n)},o.isBufferList=p.isBufferList,s.exports=o,s.exports.BufferListStream=o,s.exports.BufferList=p}),zu=E((e,s)=>{_e(),we(),F();var t=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};s.exports=t}),Oa=E((e,s)=>{_e(),we(),F();var t=s.exports,{Buffer:h}=(bt(),K(mt));t.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},t.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},t.requiredHeaderFlagsErrors={};for(let o in t.requiredHeaderFlags){let n=t.requiredHeaderFlags[o];t.requiredHeaderFlagsErrors[o]="Invalid header flag bits, must be 0x"+n.toString(16)+" for "+t.types[o]+" packet"}t.codes={};for(let o in t.types){let n=t.types[o];t.codes[n]=o}t.CMD_SHIFT=4,t.CMD_MASK=240,t.DUP_MASK=8,t.QOS_MASK=3,t.QOS_SHIFT=1,t.RETAIN_MASK=1,t.VARBYTEINT_MASK=127,t.VARBYTEINT_FIN_MASK=128,t.VARBYTEINT_MAX=268435455,t.SESSIONPRESENT_MASK=1,t.SESSIONPRESENT_HEADER=h.from([t.SESSIONPRESENT_MASK]),t.CONNACK_HEADER=h.from([t.codes.connack<<t.CMD_SHIFT]),t.USERNAME_MASK=128,t.PASSWORD_MASK=64,t.WILL_RETAIN_MASK=32,t.WILL_QOS_MASK=24,t.WILL_QOS_SHIFT=3,t.WILL_FLAG_MASK=4,t.CLEAN_SESSION_MASK=2,t.CONNECT_HEADER=h.from([t.codes.connect<<t.CMD_SHIFT]),t.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},t.propertiesCodes={};for(let o in t.properties){let n=t.properties[o];t.propertiesCodes[n]=o}t.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function p(o){return[0,1,2].map(n=>[0,1].map(a=>[0,1].map(i=>{let l=h.alloc(1);return l.writeUInt8(t.codes[o]<<t.CMD_SHIFT|(a?t.DUP_MASK:0)|n<<t.QOS_SHIFT|i,0,!0),l})))}t.PUBLISH_HEADER=p("publish"),t.SUBSCRIBE_HEADER=p("subscribe"),t.SUBSCRIBE_OPTIONS_QOS_MASK=3,t.SUBSCRIBE_OPTIONS_NL_MASK=1,t.SUBSCRIBE_OPTIONS_NL_SHIFT=2,t.SUBSCRIBE_OPTIONS_RAP_MASK=1,t.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,t.SUBSCRIBE_OPTIONS_RH_MASK=3,t.SUBSCRIBE_OPTIONS_RH_SHIFT=4,t.SUBSCRIBE_OPTIONS_RH=[0,16,32],t.SUBSCRIBE_OPTIONS_NL=4,t.SUBSCRIBE_OPTIONS_RAP=8,t.SUBSCRIBE_OPTIONS_QOS=[0,1,2],t.UNSUBSCRIBE_HEADER=p("unsubscribe"),t.ACKS={unsuback:p("unsuback"),puback:p("puback"),pubcomp:p("pubcomp"),pubrel:p("pubrel"),pubrec:p("pubrec")},t.SUBACK_HEADER=h.from([t.codes.suback<<t.CMD_SHIFT]),t.VERSION3=h.from([3]),t.VERSION4=h.from([4]),t.VERSION5=h.from([5]),t.VERSION131=h.from([131]),t.VERSION132=h.from([132]),t.QOS=[0,1,2].map(o=>h.from([o])),t.EMPTY={pingreq:h.from([t.codes.pingreq<<4,0]),pingresp:h.from([t.codes.pingresp<<4,0]),disconnect:h.from([t.codes.disconnect<<4,0])},t.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},t.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},t.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},t.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),Ku=E((e,s)=>{_e(),we(),F();var t=1e3,h=t*60,p=h*60,o=p*24,n=o*7,a=o*365.25;s.exports=function(w,v){v=v||{};var S=typeof w;if(S==="string"&&w.length>0)return i(w);if(S==="number"&&isFinite(w))return v.long?g(w):l(w);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(w))};function i(w){if(w=String(w),!(w.length>100)){var v=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(w);if(v){var S=parseFloat(v[1]),C=(v[2]||"ms").toLowerCase();switch(C){case"years":case"year":case"yrs":case"yr":case"y":return S*a;case"weeks":case"week":case"w":return S*n;case"days":case"day":case"d":return S*o;case"hours":case"hour":case"hrs":case"hr":case"h":return S*p;case"minutes":case"minute":case"mins":case"min":case"m":return S*h;case"seconds":case"second":case"secs":case"sec":case"s":return S*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return S;default:return}}}}function l(w){var v=Math.abs(w);return v>=o?Math.round(w/o)+"d":v>=p?Math.round(w/p)+"h":v>=h?Math.round(w/h)+"m":v>=t?Math.round(w/t)+"s":w+"ms"}function g(w){var v=Math.abs(w);return v>=o?y(w,v,o,"day"):v>=p?y(w,v,p,"hour"):v>=h?y(w,v,h,"minute"):v>=t?y(w,v,t,"second"):w+" ms"}function y(w,v,S,C){var x=v>=S*1.5;return Math.round(w/S)+" "+C+(x?"s":"")}}),Ju=E((e,s)=>{_e(),we(),F();function t(h){o.debug=o,o.default=o,o.coerce=y,o.disable=i,o.enable=a,o.enabled=l,o.humanize=Ku(),o.destroy=w,Object.keys(h).forEach(v=>{o[v]=h[v]}),o.names=[],o.skips=[],o.formatters={};function p(v){let S=0;for(let C=0;C<v.length;C++)S=(S<<5)-S+v.charCodeAt(C),S|=0;return o.colors[Math.abs(S)%o.colors.length]}o.selectColor=p;function o(v){let S,C=null,x,W;function k(...P){if(!k.enabled)return;let z=k,Q=Number(new Date),M=Q-(S||Q);z.diff=M,z.prev=S,z.curr=Q,S=Q,P[0]=o.coerce(P[0]),typeof P[0]!="string"&&P.unshift("%O");let N=0;P[0]=P[0].replace(/%([a-zA-Z%])/g,($,X)=>{if($==="%%")return"%";N++;let ae=o.formatters[X];if(typeof ae=="function"){let pe=P[N];$=ae.call(z,pe),P.splice(N,1),N--}return $}),o.formatArgs.call(z,P),(z.log||o.log).apply(z,P)}return k.namespace=v,k.useColors=o.useColors(),k.color=o.selectColor(v),k.extend=n,k.destroy=o.destroy,Object.defineProperty(k,"enabled",{enumerable:!0,configurable:!1,get:()=>C!==null?C:(x!==o.namespaces&&(x=o.namespaces,W=o.enabled(v)),W),set:P=>{C=P}}),typeof o.init=="function"&&o.init(k),k}function n(v,S){let C=o(this.namespace+(typeof S>"u"?":":S)+v);return C.log=this.log,C}function a(v){o.save(v),o.namespaces=v,o.names=[],o.skips=[];let S,C=(typeof v=="string"?v:"").split(/[\s,]+/),x=C.length;for(S=0;S<x;S++)C[S]&&(v=C[S].replace(/\*/g,".*?"),v[0]==="-"?o.skips.push(new RegExp("^"+v.slice(1)+"$")):o.names.push(new RegExp("^"+v+"$")))}function i(){let v=[...o.names.map(g),...o.skips.map(g).map(S=>"-"+S)].join(",");return o.enable(""),v}function l(v){if(v[v.length-1]==="*")return!0;let S,C;for(S=0,C=o.skips.length;S<C;S++)if(o.skips[S].test(v))return!1;for(S=0,C=o.names.length;S<C;S++)if(o.names[S].test(v))return!0;return!1}function g(v){return v.toString().substring(2,v.toString().length-2).replace(/\.\*\?$/,"*")}function y(v){return v instanceof Error?v.stack||v.message:v}function w(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return o.enable(o.load()),o}s.exports=t}),Xt=E((e,s)=>{_e(),we(),F(),e.formatArgs=h,e.save=p,e.load=o,e.useColors=t,e.storage=n(),e.destroy=(()=>{let i=!1;return()=>{i||(i=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof se<"u"&&se.userAgent&&se.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof se<"u"&&se.userAgent&&se.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof se<"u"&&se.userAgent&&se.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function h(i){if(i[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+i[0]+(this.useColors?"%c ":" ")+"+"+s.exports.humanize(this.diff),!this.useColors)return;let l="color: "+this.color;i.splice(1,0,l,"color: inherit");let g=0,y=0;i[0].replace(/%[a-zA-Z%]/g,w=>{w!=="%%"&&(g++,w==="%c"&&(y=g))}),i.splice(y,0,l)}e.log=console.debug||console.log||(()=>{});function p(i){try{i?e.storage.setItem("debug",i):e.storage.removeItem("debug")}catch{}}function o(){let i;try{i=e.storage.getItem("debug")}catch{}return!i&&typeof Re<"u"&&"env"in Re&&(i=Re.env.DEBUG),i}function n(){try{return localStorage}catch{}}s.exports=Ju()(e);var{formatters:a}=s.exports;a.j=function(i){try{return JSON.stringify(i)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}}),Qu=E((e,s)=>{_e(),we(),F();var t=Vu(),{EventEmitter:h}=(Ur(),K(wr)),p=zu(),o=Oa(),n=Xt()("mqtt-packet:parser"),a=class gs extends h{constructor(){super(),this.parser=this.constructor.parser}static parser(l){return this instanceof gs?(this.settings=l||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new gs().parser(l)}_resetState(){n("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new p,this.error=null,this._list=t(),this._stateCounter=0}parse(l){for(this.error&&this._resetState(),this._list.append(l),n("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,n("parse: state complete. _stateCounter is now: %d",this._stateCounter),n("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return n("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let l=this._list.readUInt8(0),g=l>>o.CMD_SHIFT;this.packet.cmd=o.types[g];let y=l&15,w=o.requiredHeaderFlags[g];return w!=null&&y!==w?this._emitError(new Error(o.requiredHeaderFlagsErrors[g])):(this.packet.retain=(l&o.RETAIN_MASK)!==0,this.packet.qos=l>>o.QOS_SHIFT&o.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(l&o.DUP_MASK)!==0,n("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let l=this._parseVarByteNum(!0);return l&&(this.packet.length=l.value,this._list.consume(l.bytes)),n("_parseLength %d",l.value),!!l}_parsePayload(){n("_parsePayload: payload %O",this._list);let l=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}l=!0}return n("_parsePayload complete result: %s",l),l}_parseConnect(){n("_parseConnect");let l,g,y,w,v={},S=this.packet,C=this._parseString();if(C===null)return this._emitError(new Error("Cannot parse protocolId"));if(C!=="MQTT"&&C!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(S.protocolId=C,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(S.protocolVersion=this._list.readUInt8(this._pos),S.protocolVersion>=128&&(S.bridgeMode=!0,S.protocolVersion=S.protocolVersion-128),S.protocolVersion!==3&&S.protocolVersion!==4&&S.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));v.username=this._list.readUInt8(this._pos)&o.USERNAME_MASK,v.password=this._list.readUInt8(this._pos)&o.PASSWORD_MASK,v.will=this._list.readUInt8(this._pos)&o.WILL_FLAG_MASK;let x=!!(this._list.readUInt8(this._pos)&o.WILL_RETAIN_MASK),W=(this._list.readUInt8(this._pos)&o.WILL_QOS_MASK)>>o.WILL_QOS_SHIFT;if(v.will)S.will={},S.will.retain=x,S.will.qos=W;else{if(x)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(W)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(S.clean=(this._list.readUInt8(this._pos)&o.CLEAN_SESSION_MASK)!==0,this._pos++,S.keepalive=this._parseNum(),S.keepalive===-1)return this._emitError(new Error("Packet too short"));if(S.protocolVersion===5){let P=this._parseProperties();Object.getOwnPropertyNames(P).length&&(S.properties=P)}let k=this._parseString();if(k===null)return this._emitError(new Error("Packet too short"));if(S.clientId=k,n("_parseConnect: packet.clientId: %s",S.clientId),v.will){if(S.protocolVersion===5){let P=this._parseProperties();Object.getOwnPropertyNames(P).length&&(S.will.properties=P)}if(l=this._parseString(),l===null)return this._emitError(new Error("Cannot parse will topic"));if(S.will.topic=l,n("_parseConnect: packet.will.topic: %s",S.will.topic),g=this._parseBuffer(),g===null)return this._emitError(new Error("Cannot parse will payload"));S.will.payload=g,n("_parseConnect: packet.will.paylaod: %s",S.will.payload)}if(v.username){if(w=this._parseString(),w===null)return this._emitError(new Error("Cannot parse username"));S.username=w,n("_parseConnect: packet.username: %s",S.username)}if(v.password){if(y=this._parseBuffer(),y===null)return this._emitError(new Error("Cannot parse password"));S.password=y}return this.settings=S,n("_parseConnect: complete"),S}_parseConnack(){n("_parseConnack");let l=this.packet;if(this._list.length<1)return null;let g=this._list.readUInt8(this._pos++);if(g>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(l.sessionPresent=!!(g&o.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?l.reasonCode=this._list.readUInt8(this._pos++):l.reasonCode=0;else{if(this._list.length<2)return null;l.returnCode=this._list.readUInt8(this._pos++)}if(l.returnCode===-1||l.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let y=this._parseProperties();Object.getOwnPropertyNames(y).length&&(l.properties=y)}n("_parseConnack: complete")}_parsePublish(){n("_parsePublish");let l=this.packet;if(l.topic=this._parseString(),l.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(l.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let g=this._parseProperties();Object.getOwnPropertyNames(g).length&&(l.properties=g)}l.payload=this._list.slice(this._pos,l.length),n("_parsePublish: payload from buffer list: %o",l.payload)}}_parseSubscribe(){n("_parseSubscribe");let l=this.packet,g,y,w,v,S,C,x;if(l.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let W=this._parseProperties();Object.getOwnPropertyNames(W).length&&(l.properties=W)}if(l.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<l.length;){if(g=this._parseString(),g===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=l.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(y=this._parseByte(),this.settings.protocolVersion===5){if(y&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(y&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(w=y&o.SUBSCRIBE_OPTIONS_QOS_MASK,w>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(C=(y>>o.SUBSCRIBE_OPTIONS_NL_SHIFT&o.SUBSCRIBE_OPTIONS_NL_MASK)!==0,S=(y>>o.SUBSCRIBE_OPTIONS_RAP_SHIFT&o.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,v=y>>o.SUBSCRIBE_OPTIONS_RH_SHIFT&o.SUBSCRIBE_OPTIONS_RH_MASK,v>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));x={topic:g,qos:w},this.settings.protocolVersion===5?(x.nl=C,x.rap=S,x.rh=v):this.settings.bridgeMode&&(x.rh=0,x.rap=!0,x.nl=!0),n("_parseSubscribe: push subscription `%s` to subscription",x),l.subscriptions.push(x)}}}_parseSuback(){n("_parseSuback");let l=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let g=this._parseProperties();Object.getOwnPropertyNames(g).length&&(l.properties=g)}if(l.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let g=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!o.MQTT5_SUBACK_CODES[g])return this._emitError(new Error("Invalid suback code"))}else if(g>2&&g!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(g)}}}_parseUnsubscribe(){n("_parseUnsubscribe");let l=this.packet;if(l.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let g=this._parseProperties();Object.getOwnPropertyNames(g).length&&(l.properties=g)}if(l.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<l.length;){let g=this._parseString();if(g===null)return this._emitError(new Error("Cannot parse topic"));n("_parseUnsubscribe: push topic `%s` to unsubscriptions",g),l.unsubscriptions.push(g)}}}_parseUnsuback(){n("_parseUnsuback");let l=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&l.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(l.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let g=this._parseProperties();for(Object.getOwnPropertyNames(g).length&&(l.properties=g),l.granted=[];this._pos<this.packet.length;){let y=this._list.readUInt8(this._pos++);if(!o.MQTT5_UNSUBACK_CODES[y])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(y)}}}_parseConfirmation(){n("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let l=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(l.length>2){switch(l.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!o.MQTT5_PUBACK_PUBREC_CODES[l.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!o.MQTT5_PUBREL_PUBCOMP_CODES[l.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}n("_parseConfirmation: packet.reasonCode `%d`",l.reasonCode)}else l.reasonCode=0;if(l.length>3){let g=this._parseProperties();Object.getOwnPropertyNames(g).length&&(l.properties=g)}}return!0}_parseDisconnect(){let l=this.packet;if(n("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(l.reasonCode=this._parseByte(),o.MQTT5_DISCONNECT_CODES[l.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):l.reasonCode=0;let g=this._parseProperties();Object.getOwnPropertyNames(g).length&&(l.properties=g)}return n("_parseDisconnect result: true"),!0}_parseAuth(){n("_parseAuth");let l=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(l.reasonCode=this._parseByte(),!o.MQTT5_AUTH_CODES[l.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let g=this._parseProperties();return Object.getOwnPropertyNames(g).length&&(l.properties=g),n("_parseAuth: result: true"),!0}_parseMessageId(){let l=this.packet;return l.messageId=this._parseNum(),l.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(n("_parseMessageId: packet.messageId %d",l.messageId),!0)}_parseString(l){let g=this._parseNum(),y=g+this._pos;if(g===-1||y>this._list.length||y>this.packet.length)return null;let w=this._list.toString("utf8",this._pos,y);return this._pos+=g,n("_parseString: result: %s",w),w}_parseStringPair(){return n("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let l=this._parseNum(),g=l+this._pos;if(l===-1||g>this._list.length||g>this.packet.length)return null;let y=this._list.slice(this._pos,g);return this._pos+=l,n("_parseBuffer: result: %o",y),y}_parseNum(){if(this._list.length-this._pos<2)return-1;let l=this._list.readUInt16BE(this._pos);return this._pos+=2,n("_parseNum: result: %s",l),l}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let l=this._list.readUInt32BE(this._pos);return this._pos+=4,n("_parse4ByteNum: result: %s",l),l}_parseVarByteNum(l){n("_parseVarByteNum");let g=4,y=0,w=1,v=0,S=!1,C,x=this._pos?this._pos:0;for(;y<g&&x+y<this._list.length;){if(C=this._list.readUInt8(x+y++),v+=w*(C&o.VARBYTEINT_MASK),w*=128,!(C&o.VARBYTEINT_FIN_MASK)){S=!0;break}if(this._list.length<=y)break}return!S&&y===g&&this._list.length>=y&&this._emitError(new Error("Invalid variable byte integer")),x&&(this._pos+=y),S?l?S={bytes:y,value:v}:S=v:S=!1,n("_parseVarByteNum: result: %o",S),S}_parseByte(){let l;return this._pos<this._list.length&&(l=this._list.readUInt8(this._pos),this._pos++),n("_parseByte: result: %o",l),l}_parseByType(l){switch(n("_parseByType: type: %s",l),l){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){n("_parseProperties");let l=this._parseVarByteNum(),g=this._pos+l,y={};for(;this._pos<g;){let w=this._parseByte();if(!w)return this._emitError(new Error("Cannot parse property code type")),!1;let v=o.propertiesCodes[w];if(!v)return this._emitError(new Error("Unknown property")),!1;if(v==="userProperties"){y[v]||(y[v]=Object.create(null));let S=this._parseByType(o.propertiesTypes[v]);if(y[v][S.name])if(Array.isArray(y[v][S.name]))y[v][S.name].push(S.value);else{let C=y[v][S.name];y[v][S.name]=[C],y[v][S.name].push(S.value)}else y[v][S.name]=S.value;continue}y[v]?Array.isArray(y[v])?y[v].push(this._parseByType(o.propertiesTypes[v])):(y[v]=[y[v]],y[v].push(this._parseByType(o.propertiesTypes[v]))):y[v]=this._parseByType(o.propertiesTypes[v])}return y}_newPacket(){return n("_newPacket"),this.packet&&(this._list.consume(this.packet.length),n("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),n("_newPacket: new packet"),this.packet=new p,this._pos=0,!0}_emitError(l){n("_emitError",l),this.error=l,this.emit("error",l)}};s.exports=a}),Yu=E((e,s)=>{_e(),we(),F();var{Buffer:t}=(bt(),K(mt)),h=65536,p={},o=t.isBuffer(t.from([1,2]).subarray(0,1));function n(g){let y=t.allocUnsafe(2);return y.writeUInt8(g>>8,0),y.writeUInt8(g&255,1),y}function a(){for(let g=0;g<h;g++)p[g]=n(g)}function i(g){let y=0,w=0,v=t.allocUnsafe(4);do y=g%128|0,g=g/128|0,g>0&&(y=y|128),v.writeUInt8(y,w++);while(g>0&&w<4);return g>0&&(w=0),o?v.subarray(0,w):v.slice(0,w)}function l(g){let y=t.allocUnsafe(4);return y.writeUInt32BE(g,0),y}s.exports={cache:p,generateCache:a,generateNumber:n,genBufVariableByteInt:i,generate4ByteBuffer:l}}),Gu=E((e,s)=>{_e(),we(),F(),typeof Re>"u"||!Re.version||Re.version.indexOf("v0.")===0||Re.version.indexOf("v1.")===0&&Re.version.indexOf("v1.8.")!==0?s.exports={nextTick:t}:s.exports=Re;function t(h,p,o,n){if(typeof h!="function")throw new TypeError('"callback" argument must be a function');var a=arguments.length,i,l;switch(a){case 0:case 1:return Re.nextTick(h);case 2:return Re.nextTick(function(){h.call(null,p)});case 3:return Re.nextTick(function(){h.call(null,p,o)});case 4:return Re.nextTick(function(){h.call(null,p,o,n)});default:for(i=new Array(a-1),l=0;l<i.length;)i[l++]=arguments[l];return Re.nextTick(function(){h.apply(null,i)})}}}),Pa=E((e,s)=>{_e(),we(),F();var t=Oa(),{Buffer:h}=(bt(),K(mt)),p=h.allocUnsafe(0),o=h.from([0]),n=Yu(),a=Gu().nextTick,i=Xt()("mqtt-packet:writeToStream"),l=n.cache,g=n.generateNumber,y=n.generateCache,w=n.genBufVariableByteInt,v=n.generate4ByteBuffer,S=ye,C=!0;function x(D,R,ne){switch(i("generate called"),R.cork&&(R.cork(),a(W,R)),C&&(C=!1,y()),i("generate: packet.cmd: %s",D.cmd),D.cmd){case"connect":return k(D,R);case"connack":return P(D,R,ne);case"publish":return z(D,R,ne);case"puback":case"pubrec":case"pubrel":case"pubcomp":return Q(D,R,ne);case"subscribe":return M(D,R,ne);case"suback":return N(D,R,ne);case"unsubscribe":return $(D,R,ne);case"unsuback":return X(D,R,ne);case"pingreq":case"pingresp":return ae(D,R);case"disconnect":return pe(D,R,ne);case"auth":return O(D,R,ne);default:return R.destroy(new Error("Unknown command")),!1}}Object.defineProperty(x,"cacheNumbers",{get(){return S===ye},set(D){D?((!l||Object.keys(l).length===0)&&(C=!0),S=ye):(C=!1,S=ee)}});function W(D){D.uncork()}function k(D,R,ne){let Se=D||{},fe=Se.protocolId||"MQTT",ue=Se.protocolVersion||4,Pe=Se.will,Ie=Se.clean,U=Se.keepalive||0,J=Se.clientId||"",Y=Se.username,ge=Se.password,ce=Se.properties;Ie===void 0&&(Ie=!0);let H=0;if(!fe||typeof fe!="string"&&!h.isBuffer(fe))return R.destroy(new Error("Invalid protocolId")),!1;if(H+=fe.length+2,ue!==3&&ue!==4&&ue!==5)return R.destroy(new Error("Invalid protocol version")),!1;if(H+=1,(typeof J=="string"||h.isBuffer(J))&&(J||ue>=4)&&(J||Ie))H+=h.byteLength(J)+2;else{if(ue<4)return R.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(Ie*1===0)return R.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof U!="number"||U<0||U>65535||U%1!==0)return R.destroy(new Error("Invalid keepalive")),!1;H+=2,H+=1;let re,j;if(ue===5){if(re=Ne(R,ce),!re)return!1;H+=re.length}if(Pe){if(typeof Pe!="object")return R.destroy(new Error("Invalid will")),!1;if(!Pe.topic||typeof Pe.topic!="string")return R.destroy(new Error("Invalid will topic")),!1;if(H+=h.byteLength(Pe.topic)+2,H+=2,Pe.payload)if(Pe.payload.length>=0)typeof Pe.payload=="string"?H+=h.byteLength(Pe.payload):H+=Pe.payload.length;else return R.destroy(new Error("Invalid will payload")),!1;if(j={},ue===5){if(j=Ne(R,Pe.properties),!j)return!1;H+=j.length}}let V=!1;if(Y!=null)if(Ee(Y))V=!0,H+=h.byteLength(Y)+2;else return R.destroy(new Error("Invalid username")),!1;if(ge!=null){if(!V)return R.destroy(new Error("Username is required to use password")),!1;if(Ee(ge))H+=Me(ge)+2;else return R.destroy(new Error("Invalid password")),!1}R.write(t.CONNECT_HEADER),de(R,H),me(R,fe),Se.bridgeMode&&(ue+=128),R.write(ue===131?t.VERSION131:ue===132?t.VERSION132:ue===4?t.VERSION4:ue===5?t.VERSION5:t.VERSION3);let Z=0;return Z|=Y!=null?t.USERNAME_MASK:0,Z|=ge!=null?t.PASSWORD_MASK:0,Z|=Pe&&Pe.retain?t.WILL_RETAIN_MASK:0,Z|=Pe&&Pe.qos?Pe.qos<<t.WILL_QOS_SHIFT:0,Z|=Pe?t.WILL_FLAG_MASK:0,Z|=Ie?t.CLEAN_SESSION_MASK:0,R.write(h.from([Z])),S(R,U),ue===5&&re.write(),me(R,J),Pe&&(ue===5&&j.write(),ie(R,Pe.topic),me(R,Pe.payload)),Y!=null&&me(R,Y),ge!=null&&me(R,ge),!0}function P(D,R,ne){let Se=ne?ne.protocolVersion:4,fe=D||{},ue=Se===5?fe.reasonCode:fe.returnCode,Pe=fe.properties,Ie=2;if(typeof ue!="number")return R.destroy(new Error("Invalid return code")),!1;let U=null;if(Se===5){if(U=Ne(R,Pe),!U)return!1;Ie+=U.length}return R.write(t.CONNACK_HEADER),de(R,Ie),R.write(fe.sessionPresent?t.SESSIONPRESENT_HEADER:o),R.write(h.from([ue])),U==null||U.write(),!0}function z(D,R,ne){i("publish: packet: %o",D);let Se=ne?ne.protocolVersion:4,fe=D||{},ue=fe.qos||0,Pe=fe.retain?t.RETAIN_MASK:0,Ie=fe.topic,U=fe.payload||p,J=fe.messageId,Y=fe.properties,ge=0;if(typeof Ie=="string")ge+=h.byteLength(Ie)+2;else if(h.isBuffer(Ie))ge+=Ie.length+2;else return R.destroy(new Error("Invalid topic")),!1;if(h.isBuffer(U)?ge+=U.length:ge+=h.byteLength(U),ue&&typeof J!="number")return R.destroy(new Error("Invalid messageId")),!1;ue&&(ge+=2);let ce=null;if(Se===5){if(ce=Ne(R,Y),!ce)return!1;ge+=ce.length}return R.write(t.PUBLISH_HEADER[ue][fe.dup?1:0][Pe?1:0]),de(R,ge),S(R,Me(Ie)),R.write(Ie),ue>0&&S(R,J),ce==null||ce.write(),i("publish: payload: %o",U),R.write(U)}function Q(D,R,ne){let Se=ne?ne.protocolVersion:4,fe=D||{},ue=fe.cmd||"puback",Pe=fe.messageId,Ie=fe.dup&&ue==="pubrel"?t.DUP_MASK:0,U=0,J=fe.reasonCode,Y=fe.properties,ge=Se===5?3:2;if(ue==="pubrel"&&(U=1),typeof Pe!="number")return R.destroy(new Error("Invalid messageId")),!1;let ce=null;if(Se===5&&typeof Y=="object"){if(ce=I(R,Y,ne,ge),!ce)return!1;ge+=ce.length}return R.write(t.ACKS[ue][U][Ie][0]),ge===3&&(ge+=J!==0?1:-1),de(R,ge),S(R,Pe),Se===5&&ge!==2&&R.write(h.from([J])),ce!==null?ce.write():ge===4&&R.write(h.from([0])),!0}function M(D,R,ne){i("subscribe: packet: ");let Se=ne?ne.protocolVersion:4,fe=D||{},ue=fe.dup?t.DUP_MASK:0,Pe=fe.messageId,Ie=fe.subscriptions,U=fe.properties,J=0;if(typeof Pe!="number")return R.destroy(new Error("Invalid messageId")),!1;J+=2;let Y=null;if(Se===5){if(Y=Ne(R,U),!Y)return!1;J+=Y.length}if(typeof Ie=="object"&&Ie.length)for(let ce=0;ce<Ie.length;ce+=1){let H=Ie[ce].topic,re=Ie[ce].qos;if(typeof H!="string")return R.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof re!="number")return R.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(Se===5){if(typeof(Ie[ce].nl||!1)!="boolean")return R.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(Ie[ce].rap||!1)!="boolean")return R.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let j=Ie[ce].rh||0;if(typeof j!="number"||j>2)return R.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}J+=h.byteLength(H)+2+1}else return R.destroy(new Error("Invalid subscriptions")),!1;i("subscribe: writing to stream: %o",t.SUBSCRIBE_HEADER),R.write(t.SUBSCRIBE_HEADER[1][ue?1:0][0]),de(R,J),S(R,Pe),Y!==null&&Y.write();let ge=!0;for(let ce of Ie){let H=ce.topic,re=ce.qos,j=+ce.nl,V=+ce.rap,Z=ce.rh,ve;ie(R,H),ve=t.SUBSCRIBE_OPTIONS_QOS[re],Se===5&&(ve|=j?t.SUBSCRIBE_OPTIONS_NL:0,ve|=V?t.SUBSCRIBE_OPTIONS_RAP:0,ve|=Z?t.SUBSCRIBE_OPTIONS_RH[Z]:0),ge=R.write(h.from([ve]))}return ge}function N(D,R,ne){let Se=ne?ne.protocolVersion:4,fe=D||{},ue=fe.messageId,Pe=fe.granted,Ie=fe.properties,U=0;if(typeof ue!="number")return R.destroy(new Error("Invalid messageId")),!1;if(U+=2,typeof Pe=="object"&&Pe.length)for(let Y=0;Y<Pe.length;Y+=1){if(typeof Pe[Y]!="number")return R.destroy(new Error("Invalid qos vector")),!1;U+=1}else return R.destroy(new Error("Invalid qos vector")),!1;let J=null;if(Se===5){if(J=I(R,Ie,ne,U),!J)return!1;U+=J.length}return R.write(t.SUBACK_HEADER),de(R,U),S(R,ue),J!==null&&J.write(),R.write(h.from(Pe))}function $(D,R,ne){let Se=ne?ne.protocolVersion:4,fe=D||{},ue=fe.messageId,Pe=fe.dup?t.DUP_MASK:0,Ie=fe.unsubscriptions,U=fe.properties,J=0;if(typeof ue!="number")return R.destroy(new Error("Invalid messageId")),!1;if(J+=2,typeof Ie=="object"&&Ie.length)for(let ce=0;ce<Ie.length;ce+=1){if(typeof Ie[ce]!="string")return R.destroy(new Error("Invalid unsubscriptions")),!1;J+=h.byteLength(Ie[ce])+2}else return R.destroy(new Error("Invalid unsubscriptions")),!1;let Y=null;if(Se===5){if(Y=Ne(R,U),!Y)return!1;J+=Y.length}R.write(t.UNSUBSCRIBE_HEADER[1][Pe?1:0][0]),de(R,J),S(R,ue),Y!==null&&Y.write();let ge=!0;for(let ce=0;ce<Ie.length;ce++)ge=ie(R,Ie[ce]);return ge}function X(D,R,ne){let Se=ne?ne.protocolVersion:4,fe=D||{},ue=fe.messageId,Pe=fe.dup?t.DUP_MASK:0,Ie=fe.granted,U=fe.properties,J=fe.cmd,Y=0,ge=2;if(typeof ue!="number")return R.destroy(new Error("Invalid messageId")),!1;if(Se===5)if(typeof Ie=="object"&&Ie.length)for(let H=0;H<Ie.length;H+=1){if(typeof Ie[H]!="number")return R.destroy(new Error("Invalid qos vector")),!1;ge+=1}else return R.destroy(new Error("Invalid qos vector")),!1;let ce=null;if(Se===5){if(ce=I(R,U,ne,ge),!ce)return!1;ge+=ce.length}return R.write(t.ACKS[J][Y][Pe][0]),de(R,ge),S(R,ue),ce!==null&&ce.write(),Se===5&&R.write(h.from(Ie)),!0}function ae(D,R,ne){return R.write(t.EMPTY[D.cmd])}function pe(D,R,ne){let Se=ne?ne.protocolVersion:4,fe=D||{},ue=fe.reasonCode,Pe=fe.properties,Ie=Se===5?1:0,U=null;if(Se===5){if(U=I(R,Pe,ne,Ie),!U)return!1;Ie+=U.length}return R.write(h.from([t.codes.disconnect<<4])),de(R,Ie),Se===5&&R.write(h.from([ue])),U!==null&&U.write(),!0}function O(D,R,ne){let Se=ne?ne.protocolVersion:4,fe=D||{},ue=fe.reasonCode,Pe=fe.properties,Ie=Se===5?1:0;Se!==5&&R.destroy(new Error("Invalid mqtt version for auth packet"));let U=I(R,Pe,ne,Ie);return U?(Ie+=U.length,R.write(h.from([t.codes.auth<<4])),de(R,Ie),R.write(h.from([ue])),U!==null&&U.write(),!0):!1}var te={};function de(D,R){if(R>t.VARBYTEINT_MAX)return D.destroy(new Error(`Invalid variable byte integer: ${R}`)),!1;let ne=te[R];return ne||(ne=w(R),R<16384&&(te[R]=ne)),i("writeVarByteInt: writing to stream: %o",ne),D.write(ne)}function ie(D,R){let ne=h.byteLength(R);return S(D,ne),i("writeString: %s",R),D.write(R,"utf8")}function ke(D,R,ne){ie(D,R),ie(D,ne)}function ye(D,R){return i("writeNumberCached: number: %d",R),i("writeNumberCached: %o",l[R]),D.write(l[R])}function ee(D,R){let ne=g(R);return i("writeNumberGenerated: %o",ne),D.write(ne)}function Oe(D,R){let ne=v(R);return i("write4ByteNumber: %o",ne),D.write(ne)}function me(D,R){typeof R=="string"?ie(D,R):R?(S(D,R.length),D.write(R)):S(D,0)}function Ne(D,R){if(typeof R!="object"||R.length!=null)return{length:1,write(){Ae(D,{},0)}};let ne=0;function Se(fe,ue){let Pe=t.propertiesTypes[fe],Ie=0;switch(Pe){case"byte":{if(typeof ue!="boolean")return D.destroy(new Error(`Invalid ${fe}: ${ue}`)),!1;Ie+=2;break}case"int8":{if(typeof ue!="number"||ue<0||ue>255)return D.destroy(new Error(`Invalid ${fe}: ${ue}`)),!1;Ie+=2;break}case"binary":{if(ue&&ue===null)return D.destroy(new Error(`Invalid ${fe}: ${ue}`)),!1;Ie+=1+h.byteLength(ue)+2;break}case"int16":{if(typeof ue!="number"||ue<0||ue>65535)return D.destroy(new Error(`Invalid ${fe}: ${ue}`)),!1;Ie+=3;break}case"int32":{if(typeof ue!="number"||ue<0||ue>4294967295)return D.destroy(new Error(`Invalid ${fe}: ${ue}`)),!1;Ie+=5;break}case"var":{if(typeof ue!="number"||ue<0||ue>268435455)return D.destroy(new Error(`Invalid ${fe}: ${ue}`)),!1;Ie+=1+h.byteLength(w(ue));break}case"string":{if(typeof ue!="string")return D.destroy(new Error(`Invalid ${fe}: ${ue}`)),!1;Ie+=3+h.byteLength(ue.toString());break}case"pair":{if(typeof ue!="object")return D.destroy(new Error(`Invalid ${fe}: ${ue}`)),!1;Ie+=Object.getOwnPropertyNames(ue).reduce((U,J)=>{let Y=ue[J];return Array.isArray(Y)?U+=Y.reduce((ge,ce)=>(ge+=3+h.byteLength(J.toString())+2+h.byteLength(ce.toString()),ge),0):U+=3+h.byteLength(J.toString())+2+h.byteLength(ue[J].toString()),U},0);break}default:return D.destroy(new Error(`Invalid property ${fe}: ${ue}`)),!1}return Ie}if(R)for(let fe in R){let ue=0,Pe=0,Ie=R[fe];if(Array.isArray(Ie))for(let U=0;U<Ie.length;U++){if(Pe=Se(fe,Ie[U]),!Pe)return!1;ue+=Pe}else{if(Pe=Se(fe,Ie),!Pe)return!1;ue=Pe}if(!ue)return!1;ne+=ue}return{length:h.byteLength(w(ne))+ne,write(){Ae(D,R,ne)}}}function I(D,R,ne,Se){let fe=["reasonString","userProperties"],ue=ne&&ne.properties&&ne.properties.maximumPacketSize?ne.properties.maximumPacketSize:0,Pe=Ne(D,R);if(ue)for(;Se+Pe.length>ue;){let Ie=fe.shift();if(Ie&&R[Ie])delete R[Ie],Pe=Ne(D,R);else return!1}return Pe}function oe(D,R,ne){switch(t.propertiesTypes[R]){case"byte":{D.write(h.from([t.properties[R]])),D.write(h.from([+ne]));break}case"int8":{D.write(h.from([t.properties[R]])),D.write(h.from([ne]));break}case"binary":{D.write(h.from([t.properties[R]])),me(D,ne);break}case"int16":{D.write(h.from([t.properties[R]])),S(D,ne);break}case"int32":{D.write(h.from([t.properties[R]])),Oe(D,ne);break}case"var":{D.write(h.from([t.properties[R]])),de(D,ne);break}case"string":{D.write(h.from([t.properties[R]])),ie(D,ne);break}case"pair":{Object.getOwnPropertyNames(ne).forEach(Se=>{let fe=ne[Se];Array.isArray(fe)?fe.forEach(ue=>{D.write(h.from([t.properties[R]])),ke(D,Se.toString(),ue.toString())}):(D.write(h.from([t.properties[R]])),ke(D,Se.toString(),fe.toString()))});break}default:return D.destroy(new Error(`Invalid property ${R} value: ${ne}`)),!1}}function Ae(D,R,ne){de(D,ne);for(let Se in R)if(Object.prototype.hasOwnProperty.call(R,Se)&&R[Se]!==null){let fe=R[Se];if(Array.isArray(fe))for(let ue=0;ue<fe.length;ue++)oe(D,Se,fe[ue]);else oe(D,Se,fe)}}function Me(D){return D?D instanceof h?D.length:h.byteLength(D):0}function Ee(D){return typeof D=="string"||D instanceof h}s.exports=x}),Xu=E((e,s)=>{_e(),we(),F();var t=Pa(),{EventEmitter:h}=(Ur(),K(wr)),{Buffer:p}=(bt(),K(mt));function o(a,i){let l=new n;return t(a,l,i),l.concat()}var n=class extends h{constructor(){super(),this._array=new Array(20),this._i=0}write(a){return this._array[this._i++]=a,!0}concat(){let a=0,i=new Array(this._array.length),l=this._array,g=0,y;for(y=0;y<l.length&&l[y]!==void 0;y++)typeof l[y]!="string"?i[y]=l[y].length:i[y]=p.byteLength(l[y]),a+=i[y];let w=p.allocUnsafe(a);for(y=0;y<l.length&&l[y]!==void 0;y++)typeof l[y]!="string"?(l[y].copy(w,g),g+=i[y]):(w.write(l[y],g),g+=i[y]);return w}destroy(a){a&&this.emit("error",a)}};s.exports=o}),Zu=E(e=>{_e(),we(),F(),e.parser=Qu().parser,e.generate=Xu(),e.writeToStream=Pa()}),xa=E(e=>{_e(),we(),F(),Object.defineProperty(e,"__esModule",{value:!0});var s=class{constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let t=this.nextId++;return this.nextId===65536&&(this.nextId=1),t}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(t){return!0}deallocate(t){}clear(){}};e.default=s}),eh=E((e,s)=>{_e(),we(),F(),s.exports=h;function t(o){return o instanceof dn?dn.from(o):new o.constructor(o.buffer.slice(),o.byteOffset,o.length)}function h(o){if(o=o||{},o.circles)return p(o);return o.proto?i:a;function n(l,g){for(var y=Object.keys(l),w=new Array(y.length),v=0;v<y.length;v++){var S=y[v],C=l[S];typeof C!="object"||C===null?w[S]=C:C instanceof Date?w[S]=new Date(C):ArrayBuffer.isView(C)?w[S]=t(C):w[S]=g(C)}return w}function a(l){if(typeof l!="object"||l===null)return l;if(l instanceof Date)return new Date(l);if(Array.isArray(l))return n(l,a);if(l instanceof Map)return new Map(n(Array.from(l),a));if(l instanceof Set)return new Set(n(Array.from(l),a));var g={};for(var y in l)if(Object.hasOwnProperty.call(l,y)!==!1){var w=l[y];typeof w!="object"||w===null?g[y]=w:w instanceof Date?g[y]=new Date(w):w instanceof Map?g[y]=new Map(n(Array.from(w),a)):w instanceof Set?g[y]=new Set(n(Array.from(w),a)):ArrayBuffer.isView(w)?g[y]=t(w):g[y]=a(w)}return g}function i(l){if(typeof l!="object"||l===null)return l;if(l instanceof Date)return new Date(l);if(Array.isArray(l))return n(l,i);if(l instanceof Map)return new Map(n(Array.from(l),i));if(l instanceof Set)return new Set(n(Array.from(l),i));var g={};for(var y in l){var w=l[y];typeof w!="object"||w===null?g[y]=w:w instanceof Date?g[y]=new Date(w):w instanceof Map?g[y]=new Map(n(Array.from(w),i)):w instanceof Set?g[y]=new Set(n(Array.from(w),i)):ArrayBuffer.isView(w)?g[y]=t(w):g[y]=i(w)}return g}}function p(o){var n=[],a=[];return o.proto?g:l;function i(y,w){for(var v=Object.keys(y),S=new Array(v.length),C=0;C<v.length;C++){var x=v[C],W=y[x];if(typeof W!="object"||W===null)S[x]=W;else if(W instanceof Date)S[x]=new Date(W);else if(ArrayBuffer.isView(W))S[x]=t(W);else{var k=n.indexOf(W);k!==-1?S[x]=a[k]:S[x]=w(W)}}return S}function l(y){if(typeof y!="object"||y===null)return y;if(y instanceof Date)return new Date(y);if(Array.isArray(y))return i(y,l);if(y instanceof Map)return new Map(i(Array.from(y),l));if(y instanceof Set)return new Set(i(Array.from(y),l));var w={};n.push(y),a.push(w);for(var v in y)if(Object.hasOwnProperty.call(y,v)!==!1){var S=y[v];if(typeof S!="object"||S===null)w[v]=S;else if(S instanceof Date)w[v]=new Date(S);else if(S instanceof Map)w[v]=new Map(i(Array.from(S),l));else if(S instanceof Set)w[v]=new Set(i(Array.from(S),l));else if(ArrayBuffer.isView(S))w[v]=t(S);else{var C=n.indexOf(S);C!==-1?w[v]=a[C]:w[v]=l(S)}}return n.pop(),a.pop(),w}function g(y){if(typeof y!="object"||y===null)return y;if(y instanceof Date)return new Date(y);if(Array.isArray(y))return i(y,g);if(y instanceof Map)return new Map(i(Array.from(y),g));if(y instanceof Set)return new Set(i(Array.from(y),g));var w={};n.push(y),a.push(w);for(var v in y){var S=y[v];if(typeof S!="object"||S===null)w[v]=S;else if(S instanceof Date)w[v]=new Date(S);else if(S instanceof Map)w[v]=new Map(i(Array.from(S),g));else if(S instanceof Set)w[v]=new Set(i(Array.from(S),g));else if(ArrayBuffer.isView(S))w[v]=t(S);else{var C=n.indexOf(S);C!==-1?w[v]=a[C]:w[v]=g(S)}}return n.pop(),a.pop(),w}}}),th=E((e,s)=>{_e(),we(),F(),s.exports=eh()()}),rh=E(e=>{_e(),we(),F(),Object.defineProperty(e,"__esModule",{value:!0}),e.validateTopics=e.validateTopic=void 0;function s(h){let p=h.split("/");for(let o=0;o<p.length;o++)if(p[o]!=="+"){if(p[o]==="#")return o===p.length-1;if(p[o].indexOf("+")!==-1||p[o].indexOf("#")!==-1)return!1}return!0}e.validateTopic=s;function t(h){if(h.length===0)return"empty_topic_list";for(let p=0;p<h.length;p++)if(!s(h[p]))return h[p];return null}e.validateTopics=t}),Ba=E(e=>{_e(),we(),F(),Object.defineProperty(e,"__esModule",{value:!0});var s=Ar(),t={objectMode:!0},h={clean:!0},p=class{constructor(o){this.options=o||{},this.options=Object.assign(Object.assign({},h),o),this._inflights=new Map}put(o,n){return this._inflights.set(o.messageId,o),n&&n(),this}createStream(){let o=new s.Readable(t),n=[],a=!1,i=0;return this._inflights.forEach((l,g)=>{n.push(l)}),o._read=()=>{!a&&i<n.length?o.push(n[i++]):o.push(null)},o.destroy=l=>{if(!a)return a=!0,setTimeout(()=>{o.emit("close")},0),o},o}del(o,n){let a=this._inflights.get(o.messageId);return a?(this._inflights.delete(o.messageId),n(null,a)):n&&n(new Error("missing packet")),this}get(o,n){let a=this._inflights.get(o.messageId);return a?n(null,a):n&&n(new Error("missing packet")),this}close(o){this.options.clean&&(this._inflights=null),o&&o()}};e.default=p}),nh=E(e=>{_e(),we(),F(),Object.defineProperty(e,"__esModule",{value:!0});var s=[0,16,128,131,135,144,145,151,153],t=(h,p,o)=>{h.log("handlePublish: packet %o",p),o=typeof o<"u"?o:h.noop;let n=p.topic.toString(),a=p.payload,{qos:i}=p,{messageId:l}=p,{options:g}=h;if(h.options.protocolVersion===5){let y;if(p.properties&&(y=p.properties.topicAlias),typeof y<"u")if(n.length===0)if(y>0&&y<=65535){let w=h.topicAliasRecv.getTopicByAlias(y);if(w)n=w,h.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",n,y);else{h.log("handlePublish :: unregistered topic alias. alias: %d",y),h.emit("error",new Error("Received unregistered Topic Alias"));return}}else{h.log("handlePublish :: topic alias out of range. alias: %d",y),h.emit("error",new Error("Received Topic Alias is out of range"));return}else if(h.topicAliasRecv.put(n,y))h.log("handlePublish :: registered topic: %s - alias: %d",n,y);else{h.log("handlePublish :: topic alias out of range. alias: %d",y),h.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(h.log("handlePublish: qos %d",i),i){case 2:{g.customHandleAcks(n,a,p,(y,w)=>{if(typeof y=="number"&&(w=y,y=null),y)return h.emit("error",y);if(s.indexOf(w)===-1)return h.emit("error",new Error("Wrong reason code for pubrec"));w?h._sendPacket({cmd:"pubrec",messageId:l,reasonCode:w},o):h.incomingStore.put(p,()=>{h._sendPacket({cmd:"pubrec",messageId:l},o)})});break}case 1:{g.customHandleAcks(n,a,p,(y,w)=>{if(typeof y=="number"&&(w=y,y=null),y)return h.emit("error",y);if(s.indexOf(w)===-1)return h.emit("error",new Error("Wrong reason code for puback"));w||h.emit("message",n,a,p),h.handleMessage(p,v=>{if(v)return o&&o(v);h._sendPacket({cmd:"puback",messageId:l,reasonCode:w},o)})});break}case 0:h.emit("message",n,a,p),h.handleMessage(p,o);break;default:h.log("handlePublish: unknown QoS. Doing nothing.");break}};e.default=t}),ih=E((e,s)=>{s.exports={version:"5.7.0"}}),Gr=E(e=>{_e(),we(),F(),Object.defineProperty(e,"__esModule",{value:!0}),e.MQTTJS_VERSION=e.nextTick=e.applyMixin=e.ErrorWithReasonCode=void 0;var s=class Gc extends Error{constructor(p,o){super(p),this.code=o,Object.setPrototypeOf(this,Gc.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};e.ErrorWithReasonCode=s;function t(h,p,o=!1){var n;let a=[p];for(;;){let i=a[0],l=Object.getPrototypeOf(i);if(l!=null&&l.prototype)a.unshift(l);else break}for(let i of a)for(let l of Object.getOwnPropertyNames(i.prototype))(o||l!=="constructor")&&Object.defineProperty(h.prototype,l,(n=Object.getOwnPropertyDescriptor(i.prototype,l))!==null&&n!==void 0?n:Object.create(null))}e.applyMixin=t,e.nextTick=typeof(Re==null?void 0:Re.nextTick)=="function"?Re.nextTick:h=>{setTimeout(h,0)},e.MQTTJS_VERSION=ih().version}),En=E(e=>{_e(),we(),F(),Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=void 0,e.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var s=(t,h)=>{let{messageId:p}=h,o=h.cmd,n=null,a=t.outgoing[p]?t.outgoing[p].cb:null,i;if(!a){t.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(t.log("_handleAck :: packet type",o),o){case"pubcomp":case"puback":{let l=h.reasonCode;l&&l>0&&l!==16?(i=new Error(`Publish error: ${e.ReasonCodes[l]}`),i.code=l,t._removeOutgoingAndStoreMessage(p,()=>{a(i,h)})):t._removeOutgoingAndStoreMessage(p,a);break}case"pubrec":{n={cmd:"pubrel",qos:2,messageId:p};let l=h.reasonCode;l&&l>0&&l!==16?(i=new Error(`Publish error: ${e.ReasonCodes[l]}`),i.code=l,t._removeOutgoingAndStoreMessage(p,()=>{a(i,h)})):t._sendPacket(n);break}case"suback":{delete t.outgoing[p],t.messageIdProvider.deallocate(p);let l=h.granted;for(let g=0;g<l.length;g++)if(l[g]&128){let y=t.messageIdToTopic[p];y&&y.forEach(w=>{delete t._resubscribeTopics[w]})}delete t.messageIdToTopic[p],t._invokeStoreProcessingQueue(),a(null,h);break}case"unsuback":{delete t.outgoing[p],t.messageIdProvider.deallocate(p),t._invokeStoreProcessingQueue(),a(null);break}default:t.emit("error",new Error("unrecognized packet type"))}t.disconnecting&&Object.keys(t.outgoing).length===0&&t.emit("outgoingEmpty")};e.default=s}),oh=E(e=>{_e(),we(),F(),Object.defineProperty(e,"__esModule",{value:!0});var s=Gr(),t=En(),h=(p,o)=>{let{options:n}=p,a=n.protocolVersion,i=a===5?o.reasonCode:o.returnCode;if(a!==5){let l=new s.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${a}`,i);p.emit("error",l);return}p.handleAuth(o,(l,g)=>{if(l){p.emit("error",l);return}if(i===24)p.reconnecting=!1,p._sendPacket(g);else{let y=new s.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[i]}`,i);p.emit("error",y)}})};e.default=h}),sh=E(e=>{var v,S,C,x,W,k,P,z,Q,M,N,$,X,ae,pe,O,te,de,ie,ke,ye,ee,Oe,me,Ne,I,ms,Ae,Me,Ee,D,Xc,ne,Se,fe,hr,fr,bs,Ln,Dn,it,ys,tn,H;_e(),we(),F(),Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=void 0;var s=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,t=new Set,h=typeof Re=="object"&&Re?Re:{},p=(re,j,V,Z)=>{typeof h.emitWarning=="function"?h.emitWarning(re,j,V,Z):console.error(`[${V}] ${j}: ${re}`)},o=globalThis.AbortController,n=globalThis.AbortSignal;if(typeof o>"u"){n=class{constructor(){Be(this,"onabort");Be(this,"_onabort",[]);Be(this,"reason");Be(this,"aborted",!1)}addEventListener(V,Z){this._onabort.push(Z)}},o=class{constructor(){Be(this,"signal",new n);j()}abort(V){var Z,ve;if(!this.signal.aborted){this.signal.reason=V,this.signal.aborted=!0;for(let d of this.signal._onabort)d(V);(ve=(Z=this.signal).onabort)==null||ve.call(Z,V)}}};let re=((v=h.env)==null?void 0:v.LRU_CACHE_IGNORE_AC_WARNING)!=="1",j=()=>{re&&(re=!1,p("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",j))}}var a=re=>!t.has(re),i=re=>re&&re===Math.floor(re)&&re>0&&isFinite(re),l=re=>i(re)?re<=Math.pow(2,8)?Uint8Array:re<=Math.pow(2,16)?Uint16Array:re<=Math.pow(2,32)?Uint32Array:re<=Number.MAX_SAFE_INTEGER?g:null:null,g=class extends Array{constructor(re){super(re),this.fill(0)}},y=(S=class{constructor(j,V){Be(this,"heap");Be(this,"length");if(!L(S,C))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new V(j),this.length=0}static create(j){let V=l(j);if(!V)return[];Ue(S,C,!0);let Z=new S(j,V);return Ue(S,C,!1),Z}push(j){this.heap[this.length++]=j}pop(){return this.heap[--this.length]}},C=new WeakMap,Qe(S,C,!1),S),w=(H=class{constructor(j){Qe(this,I);Qe(this,x);Qe(this,W);Qe(this,k);Qe(this,P);Qe(this,z);Be(this,"ttl");Be(this,"ttlResolution");Be(this,"ttlAutopurge");Be(this,"updateAgeOnGet");Be(this,"updateAgeOnHas");Be(this,"allowStale");Be(this,"noDisposeOnSet");Be(this,"noUpdateTTL");Be(this,"maxEntrySize");Be(this,"sizeCalculation");Be(this,"noDeleteOnFetchRejection");Be(this,"noDeleteOnStaleGet");Be(this,"allowStaleOnFetchAbort");Be(this,"allowStaleOnFetchRejection");Be(this,"ignoreFetchAbort");Qe(this,Q);Qe(this,M);Qe(this,N);Qe(this,$);Qe(this,X);Qe(this,ae);Qe(this,pe);Qe(this,O);Qe(this,te);Qe(this,de);Qe(this,ie);Qe(this,ke);Qe(this,ye);Qe(this,ee);Qe(this,Oe);Qe(this,me);Qe(this,Ne);Qe(this,Ae,()=>{});Qe(this,Me,()=>{});Qe(this,Ee,()=>{});Qe(this,D,()=>!1);Qe(this,ne,j=>{});Qe(this,Se,(j,V,Z)=>{});Qe(this,fe,(j,V,Z,ve)=>{if(Z||ve)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});let{max:V=0,ttl:Z,ttlResolution:ve=1,ttlAutopurge:d,updateAgeOnGet:f,updateAgeOnHas:m,allowStale:T,dispose:B,disposeAfter:G,noDisposeOnSet:he,noUpdateTTL:De,maxSize:Ve=0,maxEntrySize:ze=0,sizeCalculation:Le,fetchMethod:He,noDeleteOnFetchRejection:$e,noDeleteOnStaleGet:et,allowStaleOnFetchRejection:dt,allowStaleOnFetchAbort:lt,ignoreFetchAbort:yt}=j;if(V!==0&&!i(V))throw new TypeError("max option must be a nonnegative integer");let Et=V?l(V):Array;if(!Et)throw new Error("invalid max value: "+V);if(Ue(this,x,V),Ue(this,W,Ve),this.maxEntrySize=ze||L(this,W),this.sizeCalculation=Le,this.sizeCalculation){if(!L(this,W)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(He!==void 0&&typeof He!="function")throw new TypeError("fetchMethod must be a function if specified");if(Ue(this,z,He),Ue(this,me,!!He),Ue(this,N,new Map),Ue(this,$,new Array(V).fill(void 0)),Ue(this,X,new Array(V).fill(void 0)),Ue(this,ae,new Et(V)),Ue(this,pe,new Et(V)),Ue(this,O,0),Ue(this,te,0),Ue(this,de,y.create(V)),Ue(this,Q,0),Ue(this,M,0),typeof B=="function"&&Ue(this,k,B),typeof G=="function"?(Ue(this,P,G),Ue(this,ie,[])):(Ue(this,P,void 0),Ue(this,ie,void 0)),Ue(this,Oe,!!L(this,k)),Ue(this,Ne,!!L(this,P)),this.noDisposeOnSet=!!he,this.noUpdateTTL=!!De,this.noDeleteOnFetchRejection=!!$e,this.allowStaleOnFetchRejection=!!dt,this.allowStaleOnFetchAbort=!!lt,this.ignoreFetchAbort=!!yt,this.maxEntrySize!==0){if(L(this,W)!==0&&!i(L(this,W)))throw new TypeError("maxSize must be a positive integer if specified");if(!i(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");je(this,I,Xc).call(this)}if(this.allowStale=!!T,this.noDeleteOnStaleGet=!!et,this.updateAgeOnGet=!!f,this.updateAgeOnHas=!!m,this.ttlResolution=i(ve)||ve===0?ve:1,this.ttlAutopurge=!!d,this.ttl=Z||0,this.ttl){if(!i(this.ttl))throw new TypeError("ttl must be a positive integer if specified");je(this,I,ms).call(this)}if(L(this,x)===0&&this.ttl===0&&L(this,W)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!L(this,x)&&!L(this,W)){let pt="LRU_CACHE_UNBOUNDED";a(pt)&&(t.add(pt),p("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",pt,H))}}static unsafeExposeInternals(j){return{starts:L(j,ye),ttls:L(j,ee),sizes:L(j,ke),keyMap:L(j,N),keyList:L(j,$),valList:L(j,X),next:L(j,ae),prev:L(j,pe),get head(){return L(j,O)},get tail(){return L(j,te)},free:L(j,de),isBackgroundFetch:V=>{var Z;return je(Z=j,I,it).call(Z,V)},backgroundFetch:(V,Z,ve,d)=>{var f;return je(f=j,I,Dn).call(f,V,Z,ve,d)},moveToTail:V=>{var Z;return je(Z=j,I,tn).call(Z,V)},indexes:V=>{var Z;return je(Z=j,I,hr).call(Z,V)},rindexes:V=>{var Z;return je(Z=j,I,fr).call(Z,V)},isStale:V=>{var Z;return L(Z=j,D).call(Z,V)}}}get max(){return L(this,x)}get maxSize(){return L(this,W)}get calculatedSize(){return L(this,M)}get size(){return L(this,Q)}get fetchMethod(){return L(this,z)}get dispose(){return L(this,k)}get disposeAfter(){return L(this,P)}getRemainingTTL(j){return L(this,N).has(j)?1/0:0}*entries(){for(let j of je(this,I,hr).call(this))L(this,X)[j]!==void 0&&L(this,$)[j]!==void 0&&!je(this,I,it).call(this,L(this,X)[j])&&(yield[L(this,$)[j],L(this,X)[j]])}*rentries(){for(let j of je(this,I,fr).call(this))L(this,X)[j]!==void 0&&L(this,$)[j]!==void 0&&!je(this,I,it).call(this,L(this,X)[j])&&(yield[L(this,$)[j],L(this,X)[j]])}*keys(){for(let j of je(this,I,hr).call(this)){let V=L(this,$)[j];V!==void 0&&!je(this,I,it).call(this,L(this,X)[j])&&(yield V)}}*rkeys(){for(let j of je(this,I,fr).call(this)){let V=L(this,$)[j];V!==void 0&&!je(this,I,it).call(this,L(this,X)[j])&&(yield V)}}*values(){for(let j of je(this,I,hr).call(this))L(this,X)[j]!==void 0&&!je(this,I,it).call(this,L(this,X)[j])&&(yield L(this,X)[j])}*rvalues(){for(let j of je(this,I,fr).call(this))L(this,X)[j]!==void 0&&!je(this,I,it).call(this,L(this,X)[j])&&(yield L(this,X)[j])}[Symbol.iterator](){return this.entries()}find(j,V={}){for(let Z of je(this,I,hr).call(this)){let ve=L(this,X)[Z],d=je(this,I,it).call(this,ve)?ve.__staleWhileFetching:ve;if(d!==void 0&&j(d,L(this,$)[Z],this))return this.get(L(this,$)[Z],V)}}forEach(j,V=this){for(let Z of je(this,I,hr).call(this)){let ve=L(this,X)[Z],d=je(this,I,it).call(this,ve)?ve.__staleWhileFetching:ve;d!==void 0&&j.call(V,d,L(this,$)[Z],this)}}rforEach(j,V=this){for(let Z of je(this,I,fr).call(this)){let ve=L(this,X)[Z],d=je(this,I,it).call(this,ve)?ve.__staleWhileFetching:ve;d!==void 0&&j.call(V,d,L(this,$)[Z],this)}}purgeStale(){let j=!1;for(let V of je(this,I,fr).call(this,{allowStale:!0}))L(this,D).call(this,V)&&(this.delete(L(this,$)[V]),j=!0);return j}dump(){let j=[];for(let V of je(this,I,hr).call(this,{allowStale:!0})){let Z=L(this,$)[V],ve=L(this,X)[V],d=je(this,I,it).call(this,ve)?ve.__staleWhileFetching:ve;if(d===void 0||Z===void 0)continue;let f={value:d};if(L(this,ee)&&L(this,ye)){f.ttl=L(this,ee)[V];let m=s.now()-L(this,ye)[V];f.start=Math.floor(Date.now()-m)}L(this,ke)&&(f.size=L(this,ke)[V]),j.unshift([Z,f])}return j}load(j){this.clear();for(let[V,Z]of j){if(Z.start){let ve=Date.now()-Z.start;Z.start=s.now()-ve}this.set(V,Z.value,Z)}}set(j,V,Z={}){var De,Ve,ze,Le,He;if(V===void 0)return this.delete(j),this;let{ttl:ve=this.ttl,start:d,noDisposeOnSet:f=this.noDisposeOnSet,sizeCalculation:m=this.sizeCalculation,status:T}=Z,{noUpdateTTL:B=this.noUpdateTTL}=Z,G=L(this,fe).call(this,j,V,Z.size||0,m);if(this.maxEntrySize&&G>this.maxEntrySize)return T&&(T.set="miss",T.maxEntrySizeExceeded=!0),this.delete(j),this;let he=L(this,Q)===0?void 0:L(this,N).get(j);if(he===void 0)he=L(this,Q)===0?L(this,te):L(this,de).length!==0?L(this,de).pop():L(this,Q)===L(this,x)?je(this,I,Ln).call(this,!1):L(this,Q),L(this,$)[he]=j,L(this,X)[he]=V,L(this,N).set(j,he),L(this,ae)[L(this,te)]=he,L(this,pe)[he]=L(this,te),Ue(this,te,he),Bn(this,Q)._++,L(this,Se).call(this,he,G,T),T&&(T.set="add"),B=!1;else{je(this,I,tn).call(this,he);let $e=L(this,X)[he];if(V!==$e){if(L(this,me)&&je(this,I,it).call(this,$e)){$e.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:et}=$e;et!==void 0&&!f&&(L(this,Oe)&&((De=L(this,k))==null||De.call(this,et,j,"set")),L(this,Ne)&&((Ve=L(this,ie))==null||Ve.push([et,j,"set"])))}else f||(L(this,Oe)&&((ze=L(this,k))==null||ze.call(this,$e,j,"set")),L(this,Ne)&&((Le=L(this,ie))==null||Le.push([$e,j,"set"])));if(L(this,ne).call(this,he),L(this,Se).call(this,he,G,T),L(this,X)[he]=V,T){T.set="replace";let et=$e&&je(this,I,it).call(this,$e)?$e.__staleWhileFetching:$e;et!==void 0&&(T.oldValue=et)}}else T&&(T.set="update")}if(ve!==0&&!L(this,ee)&&je(this,I,ms).call(this),L(this,ee)&&(B||L(this,Ee).call(this,he,ve,d),T&&L(this,Me).call(this,T,he)),!f&&L(this,Ne)&&L(this,ie)){let $e=L(this,ie),et;for(;et=$e==null?void 0:$e.shift();)(He=L(this,P))==null||He.call(this,...et)}return this}pop(){var j;try{for(;L(this,Q);){let V=L(this,X)[L(this,O)];if(je(this,I,Ln).call(this,!0),je(this,I,it).call(this,V)){if(V.__staleWhileFetching)return V.__staleWhileFetching}else if(V!==void 0)return V}}finally{if(L(this,Ne)&&L(this,ie)){let V=L(this,ie),Z;for(;Z=V==null?void 0:V.shift();)(j=L(this,P))==null||j.call(this,...Z)}}}has(j,V={}){let{updateAgeOnHas:Z=this.updateAgeOnHas,status:ve}=V,d=L(this,N).get(j);if(d!==void 0){let f=L(this,X)[d];if(je(this,I,it).call(this,f)&&f.__staleWhileFetching===void 0)return!1;if(L(this,D).call(this,d))ve&&(ve.has="stale",L(this,Me).call(this,ve,d));else return Z&&L(this,Ae).call(this,d),ve&&(ve.has="hit",L(this,Me).call(this,ve,d)),!0}else ve&&(ve.has="miss");return!1}peek(j,V={}){let{allowStale:Z=this.allowStale}=V,ve=L(this,N).get(j);if(ve!==void 0&&(Z||!L(this,D).call(this,ve))){let d=L(this,X)[ve];return je(this,I,it).call(this,d)?d.__staleWhileFetching:d}}async fetch(j,V={}){let{allowStale:Z=this.allowStale,updateAgeOnGet:ve=this.updateAgeOnGet,noDeleteOnStaleGet:d=this.noDeleteOnStaleGet,ttl:f=this.ttl,noDisposeOnSet:m=this.noDisposeOnSet,size:T=0,sizeCalculation:B=this.sizeCalculation,noUpdateTTL:G=this.noUpdateTTL,noDeleteOnFetchRejection:he=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:De=this.allowStaleOnFetchRejection,ignoreFetchAbort:Ve=this.ignoreFetchAbort,allowStaleOnFetchAbort:ze=this.allowStaleOnFetchAbort,context:Le,forceRefresh:He=!1,status:$e,signal:et}=V;if(!L(this,me))return $e&&($e.fetch="get"),this.get(j,{allowStale:Z,updateAgeOnGet:ve,noDeleteOnStaleGet:d,status:$e});let dt={allowStale:Z,updateAgeOnGet:ve,noDeleteOnStaleGet:d,ttl:f,noDisposeOnSet:m,size:T,sizeCalculation:B,noUpdateTTL:G,noDeleteOnFetchRejection:he,allowStaleOnFetchRejection:De,allowStaleOnFetchAbort:ze,ignoreFetchAbort:Ve,status:$e,signal:et},lt=L(this,N).get(j);if(lt===void 0){$e&&($e.fetch="miss");let yt=je(this,I,Dn).call(this,j,lt,dt,Le);return yt.__returned=yt}else{let yt=L(this,X)[lt];if(je(this,I,it).call(this,yt)){let Ql=Z&&yt.__staleWhileFetching!==void 0;return $e&&($e.fetch="inflight",Ql&&($e.returnedStale=!0)),Ql?yt.__staleWhileFetching:yt.__returned=yt}let Et=L(this,D).call(this,lt);if(!He&&!Et)return $e&&($e.fetch="hit"),je(this,I,tn).call(this,lt),ve&&L(this,Ae).call(this,lt),$e&&L(this,Me).call(this,$e,lt),yt;let pt=je(this,I,Dn).call(this,j,lt,dt,Le),Jl=pt.__staleWhileFetching!==void 0&&Z;return $e&&($e.fetch=Et?"stale":"refresh",Jl&&Et&&($e.returnedStale=!0)),Jl?pt.__staleWhileFetching:pt.__returned=pt}}get(j,V={}){let{allowStale:Z=this.allowStale,updateAgeOnGet:ve=this.updateAgeOnGet,noDeleteOnStaleGet:d=this.noDeleteOnStaleGet,status:f}=V,m=L(this,N).get(j);if(m!==void 0){let T=L(this,X)[m],B=je(this,I,it).call(this,T);return f&&L(this,Me).call(this,f,m),L(this,D).call(this,m)?(f&&(f.get="stale"),B?(f&&Z&&T.__staleWhileFetching!==void 0&&(f.returnedStale=!0),Z?T.__staleWhileFetching:void 0):(d||this.delete(j),f&&Z&&(f.returnedStale=!0),Z?T:void 0)):(f&&(f.get="hit"),B?T.__staleWhileFetching:(je(this,I,tn).call(this,m),ve&&L(this,Ae).call(this,m),T))}else f&&(f.get="miss")}delete(j){var Z,ve,d,f;let V=!1;if(L(this,Q)!==0){let m=L(this,N).get(j);if(m!==void 0)if(V=!0,L(this,Q)===1)this.clear();else{L(this,ne).call(this,m);let T=L(this,X)[m];je(this,I,it).call(this,T)?T.__abortController.abort(new Error("deleted")):(L(this,Oe)||L(this,Ne))&&(L(this,Oe)&&((Z=L(this,k))==null||Z.call(this,T,j,"delete")),L(this,Ne)&&((ve=L(this,ie))==null||ve.push([T,j,"delete"]))),L(this,N).delete(j),L(this,$)[m]=void 0,L(this,X)[m]=void 0,m===L(this,te)?Ue(this,te,L(this,pe)[m]):m===L(this,O)?Ue(this,O,L(this,ae)[m]):(L(this,ae)[L(this,pe)[m]]=L(this,ae)[m],L(this,pe)[L(this,ae)[m]]=L(this,pe)[m]),Bn(this,Q)._--,L(this,de).push(m)}}if(L(this,Ne)&&((d=L(this,ie))!=null&&d.length)){let m=L(this,ie),T;for(;T=m==null?void 0:m.shift();)(f=L(this,P))==null||f.call(this,...T)}return V}clear(){var j,V,Z;for(let ve of je(this,I,fr).call(this,{allowStale:!0})){let d=L(this,X)[ve];if(je(this,I,it).call(this,d))d.__abortController.abort(new Error("deleted"));else{let f=L(this,$)[ve];L(this,Oe)&&((j=L(this,k))==null||j.call(this,d,f,"delete")),L(this,Ne)&&((V=L(this,ie))==null||V.push([d,f,"delete"]))}}if(L(this,N).clear(),L(this,X).fill(void 0),L(this,$).fill(void 0),L(this,ee)&&L(this,ye)&&(L(this,ee).fill(0),L(this,ye).fill(0)),L(this,ke)&&L(this,ke).fill(0),Ue(this,O,0),Ue(this,te,0),L(this,de).length=0,Ue(this,M,0),Ue(this,Q,0),L(this,Ne)&&L(this,ie)){let ve=L(this,ie),d;for(;d=ve==null?void 0:ve.shift();)(Z=L(this,P))==null||Z.call(this,...d)}}},x=new WeakMap,W=new WeakMap,k=new WeakMap,P=new WeakMap,z=new WeakMap,Q=new WeakMap,M=new WeakMap,N=new WeakMap,$=new WeakMap,X=new WeakMap,ae=new WeakMap,pe=new WeakMap,O=new WeakMap,te=new WeakMap,de=new WeakMap,ie=new WeakMap,ke=new WeakMap,ye=new WeakMap,ee=new WeakMap,Oe=new WeakMap,me=new WeakMap,Ne=new WeakMap,I=new WeakSet,ms=function(){let j=new g(L(this,x)),V=new g(L(this,x));Ue(this,ee,j),Ue(this,ye,V),Ue(this,Ee,(d,f,m=s.now())=>{if(V[d]=f!==0?m:0,j[d]=f,f!==0&&this.ttlAutopurge){let T=setTimeout(()=>{L(this,D).call(this,d)&&this.delete(L(this,$)[d])},f+1);T.unref&&T.unref()}}),Ue(this,Ae,d=>{V[d]=j[d]!==0?s.now():0}),Ue(this,Me,(d,f)=>{if(j[f]){let m=j[f],T=V[f];d.ttl=m,d.start=T,d.now=Z||ve();let B=d.now-T;d.remainingTTL=m-B}});let Z=0,ve=()=>{let d=s.now();if(this.ttlResolution>0){Z=d;let f=setTimeout(()=>Z=0,this.ttlResolution);f.unref&&f.unref()}return d};this.getRemainingTTL=d=>{let f=L(this,N).get(d);if(f===void 0)return 0;let m=j[f],T=V[f];if(m===0||T===0)return 1/0;let B=(Z||ve())-T;return m-B},Ue(this,D,d=>j[d]!==0&&V[d]!==0&&(Z||ve())-V[d]>j[d])},Ae=new WeakMap,Me=new WeakMap,Ee=new WeakMap,D=new WeakMap,Xc=function(){let j=new g(L(this,x));Ue(this,M,0),Ue(this,ke,j),Ue(this,ne,V=>{Ue(this,M,L(this,M)-j[V]),j[V]=0}),Ue(this,fe,(V,Z,ve,d)=>{if(je(this,I,it).call(this,Z))return 0;if(!i(ve))if(d){if(typeof d!="function")throw new TypeError("sizeCalculation must be a function");if(ve=d(Z,V),!i(ve))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return ve}),Ue(this,Se,(V,Z,ve)=>{if(j[V]=Z,L(this,W)){let d=L(this,W)-j[V];for(;L(this,M)>d;)je(this,I,Ln).call(this,!0)}Ue(this,M,L(this,M)+j[V]),ve&&(ve.entrySize=Z,ve.totalCalculatedSize=L(this,M))})},ne=new WeakMap,Se=new WeakMap,fe=new WeakMap,hr=function*({allowStale:j=this.allowStale}={}){if(L(this,Q))for(let V=L(this,te);!(!je(this,I,bs).call(this,V)||((j||!L(this,D).call(this,V))&&(yield V),V===L(this,O)));)V=L(this,pe)[V]},fr=function*({allowStale:j=this.allowStale}={}){if(L(this,Q))for(let V=L(this,O);!(!je(this,I,bs).call(this,V)||((j||!L(this,D).call(this,V))&&(yield V),V===L(this,te)));)V=L(this,ae)[V]},bs=function(j){return j!==void 0&&L(this,N).get(L(this,$)[j])===j},Ln=function(j){var d,f;let V=L(this,O),Z=L(this,$)[V],ve=L(this,X)[V];return L(this,me)&&je(this,I,it).call(this,ve)?ve.__abortController.abort(new Error("evicted")):(L(this,Oe)||L(this,Ne))&&(L(this,Oe)&&((d=L(this,k))==null||d.call(this,ve,Z,"evict")),L(this,Ne)&&((f=L(this,ie))==null||f.push([ve,Z,"evict"]))),L(this,ne).call(this,V),j&&(L(this,$)[V]=void 0,L(this,X)[V]=void 0,L(this,de).push(V)),L(this,Q)===1?(Ue(this,O,Ue(this,te,0)),L(this,de).length=0):Ue(this,O,L(this,ae)[V]),L(this,N).delete(Z),Bn(this,Q)._--,V},Dn=function(j,V,Z,ve){let d=V===void 0?void 0:L(this,X)[V];if(je(this,I,it).call(this,d))return d;let f=new o,{signal:m}=Z;m==null||m.addEventListener("abort",()=>f.abort(m.reason),{signal:f.signal});let T={signal:f.signal,options:Z,context:ve},B=(Le,He=!1)=>{let{aborted:$e}=f.signal,et=Z.ignoreFetchAbort&&Le!==void 0;if(Z.status&&($e&&!He?(Z.status.fetchAborted=!0,Z.status.fetchError=f.signal.reason,et&&(Z.status.fetchAbortIgnored=!0)):Z.status.fetchResolved=!0),$e&&!et&&!He)return he(f.signal.reason);let dt=Ve;return L(this,X)[V]===Ve&&(Le===void 0?dt.__staleWhileFetching?L(this,X)[V]=dt.__staleWhileFetching:this.delete(j):(Z.status&&(Z.status.fetchUpdated=!0),this.set(j,Le,T.options))),Le},G=Le=>(Z.status&&(Z.status.fetchRejected=!0,Z.status.fetchError=Le),he(Le)),he=Le=>{let{aborted:He}=f.signal,$e=He&&Z.allowStaleOnFetchAbort,et=$e||Z.allowStaleOnFetchRejection,dt=et||Z.noDeleteOnFetchRejection,lt=Ve;if(L(this,X)[V]===Ve&&(!dt||lt.__staleWhileFetching===void 0?this.delete(j):$e||(L(this,X)[V]=lt.__staleWhileFetching)),et)return Z.status&&lt.__staleWhileFetching!==void 0&&(Z.status.returnedStale=!0),lt.__staleWhileFetching;if(lt.__returned===lt)throw Le},De=(Le,He)=>{var et;let $e=(et=L(this,z))==null?void 0:et.call(this,j,d,T);$e&&$e instanceof Promise&&$e.then(dt=>Le(dt===void 0?void 0:dt),He),f.signal.addEventListener("abort",()=>{(!Z.ignoreFetchAbort||Z.allowStaleOnFetchAbort)&&(Le(void 0),Z.allowStaleOnFetchAbort&&(Le=dt=>B(dt,!0)))})};Z.status&&(Z.status.fetchDispatched=!0);let Ve=new Promise(De).then(B,G),ze=Object.assign(Ve,{__abortController:f,__staleWhileFetching:d,__returned:void 0});return V===void 0?(this.set(j,ze,{...T.options,status:void 0}),V=L(this,N).get(j)):L(this,X)[V]=ze,ze},it=function(j){if(!L(this,me))return!1;let V=j;return!!V&&V instanceof Promise&&V.hasOwnProperty("__staleWhileFetching")&&V.__abortController instanceof o},ys=function(j,V){L(this,pe)[V]=j,L(this,ae)[j]=V},tn=function(j){j!==L(this,te)&&(j===L(this,O)?Ue(this,O,L(this,ae)[j]):je(this,I,ys).call(this,L(this,pe)[j],L(this,ae)[j]),je(this,I,ys).call(this,L(this,te),j),Ue(this,te,j))},H);e.LRUCache=w}),Zt=E(e=>{_e(),we(),F(),Object.defineProperty(e,"t",{value:!0}),e.ContainerIterator=e.Container=e.Base=void 0;var s=class{constructor(p=0){this.iteratorType=p}equals(p){return this.o===p.o}};e.ContainerIterator=s;var t=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};e.Base=t;var h=class extends t{};e.Container=h}),ah=E(e=>{_e(),we(),F(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var s=Zt(),t=class extends s.Base{constructor(p=[]){super(),this.S=[];let o=this;p.forEach(function(n){o.push(n)})}clear(){this.i=0,this.S=[]}push(p){return this.S.push(p),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},h=t;e.default=h}),lh=E(e=>{_e(),we(),F(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var s=Zt(),t=class extends s.Base{constructor(p=[]){super(),this.j=0,this.q=[];let o=this;p.forEach(function(n){o.push(n)})}clear(){this.q=[],this.i=this.j=0}push(p){let o=this.q.length;if(this.j/o>.5&&this.j+this.i>=o&&o>4096){let n=this.i;for(let a=0;a<n;++a)this.q[a]=this.q[this.j+a];this.j=0,this.q[this.i]=p}else this.q[this.j+this.i]=p;return++this.i}pop(){if(this.i===0)return;let p=this.q[this.j++];return this.i-=1,p}front(){if(this.i!==0)return this.q[this.j]}},h=t;e.default=h}),ch=E(e=>{_e(),we(),F(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var s=Zt(),t=class extends s.Base{constructor(p=[],o=function(a,i){return a>i?-1:a<i?1:0},n=!0){if(super(),this.v=o,Array.isArray(p))this.C=n?[...p]:p;else{this.C=[];let i=this;p.forEach(function(l){i.C.push(l)})}this.i=this.C.length;let a=this.i>>1;for(let i=this.i-1>>1;i>=0;--i)this.k(i,a)}m(p){let o=this.C[p];for(;p>0;){let n=p-1>>1,a=this.C[n];if(this.v(a,o)<=0)break;this.C[p]=a,p=n}this.C[p]=o}k(p,o){let n=this.C[p];for(;p<o;){let a=p<<1|1,i=a+1,l=this.C[a];if(i<this.i&&this.v(l,this.C[i])>0&&(a=i,l=this.C[i]),this.v(l,n)>=0)break;this.C[p]=l,p=a}this.C[p]=n}clear(){this.i=0,this.C.length=0}push(p){this.C.push(p),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let p=this.C[0],o=this.C.pop();return this.i-=1,this.i&&(this.C[0]=o,this.k(0,this.i>>1)),p}top(){return this.C[0]}find(p){return this.C.indexOf(p)>=0}remove(p){let o=this.C.indexOf(p);return o<0?!1:(o===0?this.pop():o===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(o,1,this.C.pop()),this.i-=1,this.m(o),this.k(o,this.i>>1)),!0)}updateItem(p){let o=this.C.indexOf(p);return o<0?!1:(this.m(o),this.k(o,this.i>>1),!0)}toArray(){return[...this.C]}},h=t;e.default=h}),Mo=E(e=>{_e(),we(),F(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var s=Zt(),t=class extends s.Container{},h=t;e.default=h}),er=E(e=>{_e(),we(),F(),Object.defineProperty(e,"t",{value:!0}),e.throwIteratorAccessError=s;function s(){throw new RangeError("Iterator access denied!")}}),Na=E(e=>{_e(),we(),F(),Object.defineProperty(e,"t",{value:!0}),e.RandomIterator=void 0;var s=Zt(),t=er(),h=class extends s.ContainerIterator{constructor(p,o){super(o),this.o=p,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,t.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,t.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,t.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,t.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(p){this.container.setElementByPos(this.o,p)}};e.RandomIterator=h}),uh=E(e=>{_e(),we(),F(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var s=h(Mo()),t=Na();function h(a){return a&&a.t?a:{default:a}}var p=class Zc extends t.RandomIterator{constructor(i,l,g){super(i,g),this.container=l}copy(){return new Zc(this.o,this.container,this.iteratorType)}},o=class extends s.default{constructor(a=[],i=!0){if(super(),Array.isArray(a))this.J=i?[...a]:a,this.i=a.length;else{this.J=[];let l=this;a.forEach(function(g){l.pushBack(g)})}}clear(){this.i=0,this.J.length=0}begin(){return new p(0,this)}end(){return new p(this.i,this)}rBegin(){return new p(this.i-1,this,1)}rEnd(){return new p(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;return this.J[a]}eraseElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;return this.J.splice(a,1),this.i-=1,this.i}eraseElementByValue(a){let i=0;for(let l=0;l<this.i;++l)this.J[l]!==a&&(this.J[i++]=this.J[l]);return this.i=this.J.length=i,this.i}eraseElementByIterator(a){let i=a.o;return a=a.next(),this.eraseElementByPos(i),a}pushBack(a){return this.J.push(a),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(a,i){if(a<0||a>this.i-1)throw new RangeError;this.J[a]=i}insert(a,i,l=1){if(a<0||a>this.i)throw new RangeError;return this.J.splice(a,0,...new Array(l).fill(i)),this.i+=l,this.i}find(a){for(let i=0;i<this.i;++i)if(this.J[i]===a)return new p(i,this);return this.end()}reverse(){this.J.reverse()}unique(){let a=1;for(let i=1;i<this.i;++i)this.J[i]!==this.J[i-1]&&(this.J[a++]=this.J[i]);return this.i=this.J.length=a,this.i}sort(a){this.J.sort(a)}forEach(a){for(let i=0;i<this.i;++i)a(this.J[i],i,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}},n=o;e.default=n}),hh=E(e=>{_e(),we(),F(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var s=p(Mo()),t=Zt(),h=er();function p(i){return i&&i.t?i:{default:i}}var o=class eu extends t.ContainerIterator{constructor(l,g,y,w){super(w),this.o=l,this.h=g,this.container=y,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,h.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,h.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,h.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,h.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,h.throwIteratorAccessError)(),this.o.l}set pointer(l){this.o===this.h&&(0,h.throwIteratorAccessError)(),this.o.l=l}copy(){return new eu(this.o,this.h,this.container,this.iteratorType)}},n=class extends s.default{constructor(i=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let l=this;i.forEach(function(g){l.pushBack(g)})}V(i){let{L:l,B:g}=i;l.B=g,g.L=l,i===this.p&&(this.p=g),i===this._&&(this._=l),this.i-=1}G(i,l){let g=l.B,y={l:i,L:l,B:g};l.B=y,g.L=y,l===this.h&&(this.p=y),g===this.h&&(this._=y),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new o(this.p,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this._,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let l=this.p;for(;i--;)l=l.B;return l.l}eraseElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let l=this.p;for(;i--;)l=l.B;return this.V(l),this.i}eraseElementByValue(i){let l=this.p;for(;l!==this.h;)l.l===i&&this.V(l),l=l.B;return this.i}eraseElementByIterator(i){let l=i.o;return l===this.h&&(0,h.throwIteratorAccessError)(),i=i.next(),this.V(l),i}pushBack(i){return this.G(i,this._),this.i}popBack(){if(this.i===0)return;let i=this._.l;return this.V(this._),i}pushFront(i){return this.G(i,this.h),this.i}popFront(){if(this.i===0)return;let i=this.p.l;return this.V(this.p),i}setElementByPos(i,l){if(i<0||i>this.i-1)throw new RangeError;let g=this.p;for(;i--;)g=g.B;g.l=l}insert(i,l,g=1){if(i<0||i>this.i)throw new RangeError;if(g<=0)return this.i;if(i===0)for(;g--;)this.pushFront(l);else if(i===this.i)for(;g--;)this.pushBack(l);else{let y=this.p;for(let v=1;v<i;++v)y=y.B;let w=y.B;for(this.i+=g;g--;)y.B={l,L:y},y.B.L=y,y=y.B;y.B=w,w.L=y}return this.i}find(i){let l=this.p;for(;l!==this.h;){if(l.l===i)return new o(l,this.h,this);l=l.B}return this.end()}reverse(){if(this.i<=1)return;let i=this.p,l=this._,g=0;for(;g<<1<this.i;){let y=i.l;i.l=l.l,l.l=y,i=i.B,l=l.L,g+=1}}unique(){if(this.i<=1)return this.i;let i=this.p;for(;i!==this.h;){let l=i;for(;l.B!==this.h&&l.l===l.B.l;)l=l.B,this.i-=1;i.B=l.B,i.B.L=i,i=i.B}return this.i}sort(i){if(this.i<=1)return;let l=[];this.forEach(function(y){l.push(y)}),l.sort(i);let g=this.p;l.forEach(function(y){g.l=y,g=g.B})}merge(i){let l=this;if(this.i===0)i.forEach(function(g){l.pushBack(g)});else{let g=this.p;i.forEach(function(y){for(;g!==l.h&&g.l<=y;)g=g.B;l.G(y,g.L)})}return this.i}forEach(i){let l=this.p,g=0;for(;l!==this.h;)i(l.l,g++,this),l=l.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let i=this.p;for(;i!==this.h;)yield i.l,i=i.B}).bind(this)()}},a=n;e.default=a}),fh=E(e=>{_e(),we(),F(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var s=h(Mo()),t=Na();function h(a){return a&&a.t?a:{default:a}}var p=class tu extends t.RandomIterator{constructor(i,l,g){super(i,g),this.container=l}copy(){return new tu(this.o,this.container,this.iteratorType)}},o=class extends s.default{constructor(a=[],i=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let l=(()=>{if(typeof a.length=="number")return a.length;if(typeof a.size=="number")return a.size;if(typeof a.size=="function")return a.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=i,this.P=Math.max(Math.ceil(l/this.F),1);for(let w=0;w<this.P;++w)this.A.push(new Array(this.F));let g=Math.ceil(l/this.F);this.j=this.R=(this.P>>1)-(g>>1),this.D=this.N=this.F-l%this.F>>1;let y=this;a.forEach(function(w){y.pushBack(w)})}T(){let a=[],i=Math.max(this.P>>1,1);for(let l=0;l<i;++l)a[l]=new Array(this.F);for(let l=this.j;l<this.P;++l)a[a.length]=this.A[l];for(let l=0;l<this.R;++l)a[a.length]=this.A[l];a[a.length]=[...this.A[this.R]],this.j=i,this.R=a.length-1;for(let l=0;l<i;++l)a[a.length]=new Array(this.F);this.A=a,this.P=a.length}O(a){let i=this.D+a+1,l=i%this.F,g=l-1,y=this.j+(i-l)/this.F;return l===0&&(y-=1),y%=this.P,g<0&&(g+=this.F),{curNodeBucketIndex:y,curNodePointerIndex:g}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new p(0,this)}end(){return new p(this.i,this)}rBegin(){return new p(this.i-1,this,1)}rEnd(){return new p(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(a){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=a,this.i}popBack(){if(this.i===0)return;let a=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,a}pushFront(a){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=a,this.i}popFront(){if(this.i===0)return;let a=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,a}getElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;let{curNodeBucketIndex:i,curNodePointerIndex:l}=this.O(a);return this.A[i][l]}setElementByPos(a,i){if(a<0||a>this.i-1)throw new RangeError;let{curNodeBucketIndex:l,curNodePointerIndex:g}=this.O(a);this.A[l][g]=i}insert(a,i,l=1){if(a<0||a>this.i)throw new RangeError;if(a===0)for(;l--;)this.pushFront(i);else if(a===this.i)for(;l--;)this.pushBack(i);else{let g=[];for(let y=a;y<this.i;++y)g.push(this.getElementByPos(y));this.cut(a-1);for(let y=0;y<l;++y)this.pushBack(i);for(let y=0;y<g.length;++y)this.pushBack(g[y])}return this.i}cut(a){if(a<0)return this.clear(),0;let{curNodeBucketIndex:i,curNodePointerIndex:l}=this.O(a);return this.R=i,this.N=l,this.i=a+1,this.i}eraseElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;if(a===0)this.popFront();else if(a===this.i-1)this.popBack();else{let i=[];for(let g=a+1;g<this.i;++g)i.push(this.getElementByPos(g));this.cut(a),this.popBack();let l=this;i.forEach(function(g){l.pushBack(g)})}return this.i}eraseElementByValue(a){if(this.i===0)return 0;let i=[];for(let g=0;g<this.i;++g){let y=this.getElementByPos(g);y!==a&&i.push(y)}let l=i.length;for(let g=0;g<l;++g)this.setElementByPos(g,i[g]);return this.cut(l-1)}eraseElementByIterator(a){let i=a.o;return this.eraseElementByPos(i),a=a.next(),a}find(a){for(let i=0;i<this.i;++i)if(this.getElementByPos(i)===a)return new p(i,this);return this.end()}reverse(){let a=0,i=this.i-1;for(;a<i;){let l=this.getElementByPos(a);this.setElementByPos(a,this.getElementByPos(i)),this.setElementByPos(i,l),a+=1,i-=1}}unique(){if(this.i<=1)return this.i;let a=1,i=this.getElementByPos(0);for(let l=1;l<this.i;++l){let g=this.getElementByPos(l);g!==i&&(i=g,this.setElementByPos(a++,g))}for(;this.i>a;)this.popBack();return this.i}sort(a){let i=[];for(let l=0;l<this.i;++l)i.push(this.getElementByPos(l));i.sort(a);for(let l=0;l<this.i;++l)this.setElementByPos(l,i[l])}shrinkToFit(){if(this.i===0)return;let a=[];this.forEach(function(i){a.push(i)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let i=0;i<this.P;++i)this.A.push(new Array(this.F));for(let i=0;i<a.length;++i)this.pushBack(a[i])}forEach(a){for(let i=0;i<this.i;++i)a(this.getElementByPos(i),i,this)}[Symbol.iterator](){return(function*(){for(let a=0;a<this.i;++a)yield this.getElementByPos(a)}).bind(this)()}},n=o;e.default=n}),dh=E(e=>{_e(),we(),F(),Object.defineProperty(e,"t",{value:!0}),e.TreeNodeEnableIndex=e.TreeNode=void 0;var s=class{constructor(h,p){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=h,this.l=p}L(){let h=this;if(h.ee===1&&h.tt.tt===h)h=h.W;else if(h.U)for(h=h.U;h.W;)h=h.W;else{let p=h.tt;for(;p.U===h;)h=p,p=h.tt;h=p}return h}B(){let h=this;if(h.W){for(h=h.W;h.U;)h=h.U;return h}else{let p=h.tt;for(;p.W===h;)h=p,p=h.tt;return h.W!==p?p:h}}te(){let h=this.tt,p=this.W,o=p.U;return h.tt===this?h.tt=p:h.U===this?h.U=p:h.W=p,p.tt=h,p.U=this,this.tt=p,this.W=o,o&&(o.tt=this),p}se(){let h=this.tt,p=this.U,o=p.W;return h.tt===this?h.tt=p:h.U===this?h.U=p:h.W=p,p.tt=h,p.W=this,this.tt=p,this.U=o,o&&(o.tt=this),p}};e.TreeNode=s;var t=class extends s{constructor(){super(...arguments),this.rt=1}te(){let h=super.te();return this.ie(),h.ie(),h}se(){let h=super.se();return this.ie(),h.ie(),h}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};e.TreeNodeEnableIndex=t}),Ma=E(e=>{_e(),we(),F(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var s=dh(),t=Zt(),h=er(),p=class extends t.Container{constructor(n=function(i,l){return i<l?-1:i>l?1:0},a=!1){super(),this.Y=void 0,this.v=n,a?(this.re=s.TreeNodeEnableIndex,this.M=function(i,l,g){let y=this.ne(i,l,g);if(y){let w=y.tt;for(;w!==this.h;)w.rt+=1,w=w.tt;let v=this.he(y);if(v){let{parentNode:S,grandParent:C,curNode:x}=v;S.ie(),C.ie(),x.ie()}}return this.i},this.V=function(i){let l=this.fe(i);for(;l!==this.h;)l.rt-=1,l=l.tt}):(this.re=s.TreeNode,this.M=function(i,l,g){let y=this.ne(i,l,g);return y&&this.he(y),this.i},this.V=this.fe),this.h=new this.re}X(n,a){let i=this.h;for(;n;){let l=this.v(n.u,a);if(l<0)n=n.W;else if(l>0)i=n,n=n.U;else return n}return i}Z(n,a){let i=this.h;for(;n;)this.v(n.u,a)<=0?n=n.W:(i=n,n=n.U);return i}$(n,a){let i=this.h;for(;n;){let l=this.v(n.u,a);if(l<0)i=n,n=n.W;else if(l>0)n=n.U;else return n}return i}rr(n,a){let i=this.h;for(;n;)this.v(n.u,a)<0?(i=n,n=n.W):n=n.U;return i}ue(n){for(;;){let a=n.tt;if(a===this.h)return;if(n.ee===1){n.ee=0;return}if(n===a.U){let i=a.W;if(i.ee===1)i.ee=0,a.ee=1,a===this.Y?this.Y=a.te():a.te();else if(i.W&&i.W.ee===1){i.ee=a.ee,a.ee=0,i.W.ee=0,a===this.Y?this.Y=a.te():a.te();return}else i.U&&i.U.ee===1?(i.ee=1,i.U.ee=0,i.se()):(i.ee=1,n=a)}else{let i=a.U;if(i.ee===1)i.ee=0,a.ee=1,a===this.Y?this.Y=a.se():a.se();else if(i.U&&i.U.ee===1){i.ee=a.ee,a.ee=0,i.U.ee=0,a===this.Y?this.Y=a.se():a.se();return}else i.W&&i.W.ee===1?(i.ee=1,i.W.ee=0,i.te()):(i.ee=1,n=a)}}}fe(n){if(this.i===1)return this.clear(),this.h;let a=n;for(;a.U||a.W;){if(a.W)for(a=a.W;a.U;)a=a.U;else a=a.U;[n.u,a.u]=[a.u,n.u],[n.l,a.l]=[a.l,n.l],n=a}this.h.U===a?this.h.U=a.tt:this.h.W===a&&(this.h.W=a.tt),this.ue(a);let i=a.tt;return a===i.U?i.U=void 0:i.W=void 0,this.i-=1,this.Y.ee=0,i}oe(n,a){return n===void 0?!1:this.oe(n.U,a)||a(n)?!0:this.oe(n.W,a)}he(n){for(;;){let a=n.tt;if(a.ee===0)return;let i=a.tt;if(a===i.U){let l=i.W;if(l&&l.ee===1){if(l.ee=a.ee=0,i===this.Y)return;i.ee=1,n=i;continue}else if(n===a.W){if(n.ee=0,n.U&&(n.U.tt=a),n.W&&(n.W.tt=i),a.W=n.U,i.U=n.W,n.U=a,n.W=i,i===this.Y)this.Y=n,this.h.tt=n;else{let g=i.tt;g.U===i?g.U=n:g.W=n}return n.tt=i.tt,a.tt=n,i.tt=n,i.ee=1,{parentNode:a,grandParent:i,curNode:n}}else a.ee=0,i===this.Y?this.Y=i.se():i.se(),i.ee=1}else{let l=i.U;if(l&&l.ee===1){if(l.ee=a.ee=0,i===this.Y)return;i.ee=1,n=i;continue}else if(n===a.U){if(n.ee=0,n.U&&(n.U.tt=i),n.W&&(n.W.tt=a),i.W=n.U,a.U=n.W,n.U=i,n.W=a,i===this.Y)this.Y=n,this.h.tt=n;else{let g=i.tt;g.U===i?g.U=n:g.W=n}return n.tt=i.tt,a.tt=n,i.tt=n,i.ee=1,{parentNode:a,grandParent:i,curNode:n}}else a.ee=0,i===this.Y?this.Y=i.te():i.te(),i.ee=1}return}}ne(n,a,i){if(this.Y===void 0){this.i+=1,this.Y=new this.re(n,a),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let l,g=this.h.U,y=this.v(g.u,n);if(y===0){g.l=a;return}else if(y>0)g.U=new this.re(n,a),g.U.tt=g,l=g.U,this.h.U=l;else{let w=this.h.W,v=this.v(w.u,n);if(v===0){w.l=a;return}else if(v<0)w.W=new this.re(n,a),w.W.tt=w,l=w.W,this.h.W=l;else{if(i!==void 0){let S=i.o;if(S!==this.h){let C=this.v(S.u,n);if(C===0){S.l=a;return}else if(C>0){let x=S.L(),W=this.v(x.u,n);if(W===0){x.l=a;return}else W<0&&(l=new this.re(n,a),x.W===void 0?(x.W=l,l.tt=x):(S.U=l,l.tt=S))}}}if(l===void 0)for(l=this.Y;;){let S=this.v(l.u,n);if(S>0){if(l.U===void 0){l.U=new this.re(n,a),l.U.tt=l,l=l.U;break}l=l.U}else if(S<0){if(l.W===void 0){l.W=new this.re(n,a),l.W.tt=l,l=l.W;break}l=l.W}else{l.l=a;return}}}}return this.i+=1,l}I(n,a){for(;n;){let i=this.v(n.u,a);if(i<0)n=n.W;else if(i>0)n=n.U;else return n}return n||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(n,a){let i=n.o;if(i===this.h&&(0,h.throwIteratorAccessError)(),this.i===1)return i.u=a,!0;if(i===this.h.U)return this.v(i.B().u,a)>0?(i.u=a,!0):!1;if(i===this.h.W)return this.v(i.L().u,a)<0?(i.u=a,!0):!1;let l=i.L().u;if(this.v(l,a)>=0)return!1;let g=i.B().u;return this.v(g,a)<=0?!1:(i.u=a,!0)}eraseElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;let a=0,i=this;return this.oe(this.Y,function(l){return n===a?(i.V(l),!0):(a+=1,!1)}),this.i}eraseElementByKey(n){if(this.i===0)return!1;let a=this.I(this.Y,n);return a===this.h?!1:(this.V(a),!0)}eraseElementByIterator(n){let a=n.o;a===this.h&&(0,h.throwIteratorAccessError)();let i=a.W===void 0;return n.iteratorType===0?i&&n.next():(!i||a.U===void 0)&&n.next(),this.V(a),n}forEach(n){let a=0;for(let i of this)n(i,a++,this)}getElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;let a,i=0;for(let l of this){if(i===n){a=l;break}i+=1}return a}getHeight(){if(this.i===0)return 0;let n=function(a){return a?Math.max(n(a.U),n(a.W))+1:0};return n(this.Y)}},o=p;e.default=o}),ja=E(e=>{_e(),we(),F(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var s=Zt(),t=er(),h=class extends s.ContainerIterator{constructor(o,n,a){super(a),this.o=o,this.h=n,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let o=this.o,n=this.h.tt;if(o===this.h)return n?n.rt-1:0;let a=0;for(o.U&&(a+=o.U.rt);o!==n;){let i=o.tt;o===i.W&&(a+=1,i.U&&(a+=i.U.rt)),o=i}return a}},p=h;e.default=p}),ph=E(e=>{_e(),we(),F(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var s=p(Ma()),t=p(ja()),h=er();function p(i){return i&&i.t?i:{default:i}}var o=class ru extends t.default{constructor(l,g,y,w){super(l,g,w),this.container=y}get pointer(){return this.o===this.h&&(0,h.throwIteratorAccessError)(),this.o.u}copy(){return new ru(this.o,this.h,this.container,this.iteratorType)}},n=class extends s.default{constructor(i=[],l,g){super(l,g);let y=this;i.forEach(function(w){y.insert(w)})}*K(i){i!==void 0&&(yield*this.K(i.U),yield i.u,yield*this.K(i.W))}begin(){return new o(this.h.U||this.h,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this.h.W||this.h,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(i,l){return this.M(i,void 0,l)}find(i){let l=this.I(this.Y,i);return new o(l,this.h,this)}lowerBound(i){let l=this.X(this.Y,i);return new o(l,this.h,this)}upperBound(i){let l=this.Z(this.Y,i);return new o(l,this.h,this)}reverseLowerBound(i){let l=this.$(this.Y,i);return new o(l,this.h,this)}reverseUpperBound(i){let l=this.rr(this.Y,i);return new o(l,this.h,this)}union(i){let l=this;return i.forEach(function(g){l.insert(g)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},a=n;e.default=a}),gh=E(e=>{_e(),we(),F(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var s=p(Ma()),t=p(ja()),h=er();function p(i){return i&&i.t?i:{default:i}}var o=class nu extends t.default{constructor(l,g,y,w){super(l,g,w),this.container=y}get pointer(){this.o===this.h&&(0,h.throwIteratorAccessError)();let l=this;return new Proxy([],{get(g,y){if(y==="0")return l.o.u;if(y==="1")return l.o.l},set(g,y,w){if(y!=="1")throw new TypeError("props must be 1");return l.o.l=w,!0}})}copy(){return new nu(this.o,this.h,this.container,this.iteratorType)}},n=class extends s.default{constructor(i=[],l,g){super(l,g);let y=this;i.forEach(function(w){y.setElement(w[0],w[1])})}*K(i){i!==void 0&&(yield*this.K(i.U),yield[i.u,i.l],yield*this.K(i.W))}begin(){return new o(this.h.U||this.h,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this.h.W||this.h,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){if(this.i===0)return;let i=this.h.U;return[i.u,i.l]}back(){if(this.i===0)return;let i=this.h.W;return[i.u,i.l]}lowerBound(i){let l=this.X(this.Y,i);return new o(l,this.h,this)}upperBound(i){let l=this.Z(this.Y,i);return new o(l,this.h,this)}reverseLowerBound(i){let l=this.$(this.Y,i);return new o(l,this.h,this)}reverseUpperBound(i){let l=this.rr(this.Y,i);return new o(l,this.h,this)}setElement(i,l,g){return this.M(i,l,g)}find(i){let l=this.I(this.Y,i);return new o(l,this.h,this)}getElementByKey(i){return this.I(this.Y,i).l}union(i){let l=this;return i.forEach(function(g){l.setElement(g[0],g[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},a=n;e.default=a}),Ua=E(e=>{_e(),we(),F(),Object.defineProperty(e,"t",{value:!0}),e.default=s;function s(t){let h=typeof t;return h==="object"&&t!==null||h==="function"}}),La=E(e=>{_e(),we(),F(),Object.defineProperty(e,"t",{value:!0}),e.HashContainerIterator=e.HashContainer=void 0;var s=Zt(),t=p(Ua()),h=er();function p(a){return a&&a.t?a:{default:a}}var o=class extends s.ContainerIterator{constructor(a,i,l){super(l),this.o=a,this.h=i,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,h.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,h.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,h.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,h.throwIteratorAccessError)(),this.o=this.o.L,this})}};e.HashContainerIterator=o;var n=class extends s.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(a){let{L:i,B:l}=a;i.B=l,l.L=i,a===this.p&&(this.p=l),a===this._&&(this._=i),this.i-=1}M(a,i,l){l===void 0&&(l=(0,t.default)(a));let g;if(l){let y=a[this.HASH_TAG];if(y!==void 0)return this.H[y].l=i,this.i;Object.defineProperty(a,this.HASH_TAG,{value:this.H.length,configurable:!0}),g={u:a,l:i,L:this._,B:this.h},this.H.push(g)}else{let y=this.g[a];if(y)return y.l=i,this.i;g={u:a,l:i,L:this._,B:this.h},this.g[a]=g}return this.i===0?(this.p=g,this.h.B=g):this._.B=g,this._=g,this.h.L=g,++this.i}I(a,i){if(i===void 0&&(i=(0,t.default)(a)),i){let l=a[this.HASH_TAG];return l===void 0?this.h:this.H[l]}else return this.g[a]||this.h}clear(){let a=this.HASH_TAG;this.H.forEach(function(i){delete i.u[a]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(a,i){let l;if(i===void 0&&(i=(0,t.default)(a)),i){let g=a[this.HASH_TAG];if(g===void 0)return!1;delete a[this.HASH_TAG],l=this.H[g],delete this.H[g]}else{if(l=this.g[a],l===void 0)return!1;delete this.g[a]}return this.V(l),!0}eraseElementByIterator(a){let i=a.o;return i===this.h&&(0,h.throwIteratorAccessError)(),this.V(i),a.next()}eraseElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;let i=this.p;for(;a--;)i=i.B;return this.V(i),this.i}};e.HashContainer=n}),mh=E(e=>{_e(),we(),F(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var s=La(),t=er(),h=class iu extends s.HashContainerIterator{constructor(a,i,l,g){super(a,i,g),this.container=l}get pointer(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o.u}copy(){return new iu(this.o,this.h,this.container,this.iteratorType)}},p=class extends s.HashContainer{constructor(n=[]){super();let a=this;n.forEach(function(i){a.insert(i)})}begin(){return new h(this.p,this.h,this)}end(){return new h(this.h,this.h,this)}rBegin(){return new h(this._,this.h,this,1)}rEnd(){return new h(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(n,a){return this.M(n,void 0,a)}getElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;let a=this.p;for(;n--;)a=a.B;return a.u}find(n,a){let i=this.I(n,a);return new h(i,this.h,this)}forEach(n){let a=0,i=this.p;for(;i!==this.h;)n(i.u,a++,this),i=i.B}[Symbol.iterator](){return(function*(){let n=this.p;for(;n!==this.h;)yield n.u,n=n.B}).bind(this)()}},o=p;e.default=o}),bh=E(e=>{_e(),we(),F(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var s=La(),t=p(Ua()),h=er();function p(i){return i&&i.t?i:{default:i}}var o=class ou extends s.HashContainerIterator{constructor(l,g,y,w){super(l,g,w),this.container=y}get pointer(){this.o===this.h&&(0,h.throwIteratorAccessError)();let l=this;return new Proxy([],{get(g,y){if(y==="0")return l.o.u;if(y==="1")return l.o.l},set(g,y,w){if(y!=="1")throw new TypeError("props must be 1");return l.o.l=w,!0}})}copy(){return new ou(this.o,this.h,this.container,this.iteratorType)}},n=class extends s.HashContainer{constructor(i=[]){super();let l=this;i.forEach(function(g){l.setElement(g[0],g[1])})}begin(){return new o(this.p,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this._,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(i,l,g){return this.M(i,l,g)}getElementByKey(i,l){if(l===void 0&&(l=(0,t.default)(i)),l){let y=i[this.HASH_TAG];return y!==void 0?this.H[y].l:void 0}let g=this.g[i];return g?g.l:void 0}getElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let l=this.p;for(;i--;)l=l.B;return[l.u,l.l]}find(i,l){let g=this.I(i,l);return new o(g,this.h,this)}forEach(i){let l=0,g=this.p;for(;g!==this.h;)i([g.u,g.l],l++,this),g=g.B}[Symbol.iterator](){return(function*(){let i=this.p;for(;i!==this.h;)yield[i.u,i.l],i=i.B}).bind(this)()}},a=n;e.default=a}),yh=E(e=>{_e(),we(),F(),Object.defineProperty(e,"t",{value:!0}),Object.defineProperty(e,"Deque",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"HashMap",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(e,"HashSet",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"LinkList",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"OrderedMap",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"OrderedSet",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"PriorityQueue",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"Queue",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"Stack",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"Vector",{enumerable:!0,get:function(){return p.default}});var s=y(ah()),t=y(lh()),h=y(ch()),p=y(uh()),o=y(hh()),n=y(fh()),a=y(ph()),i=y(gh()),l=y(mh()),g=y(bh());function y(w){return w&&w.t?w:{default:w}}}),wh=E((e,s)=>{_e(),we(),F();var t=yh().OrderedSet,h=Xt()("number-allocator:trace"),p=Xt()("number-allocator:error");function o(a,i){this.low=a,this.high=i}o.prototype.equals=function(a){return this.low===a.low&&this.high===a.high},o.prototype.compare=function(a){return this.low<a.low&&this.high<a.low?-1:a.low<this.low&&a.high<this.low?1:0};function n(a,i){if(!(this instanceof n))return new n(a,i);this.min=a,this.max=i,this.ss=new t([],(l,g)=>l.compare(g)),h("Create"),this.clear()}n.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},n.prototype.alloc=function(){if(this.ss.size()===0)return h("alloc():empty"),null;let a=this.ss.begin(),i=a.pointer.low,l=a.pointer.high,g=i;return g+1<=l?this.ss.updateKeyByIterator(a,new o(i+1,l)):this.ss.eraseElementByPos(0),h("alloc():"+g),g},n.prototype.use=function(a){let i=new o(a,a),l=this.ss.lowerBound(i);if(!l.equals(this.ss.end())){let g=l.pointer.low,y=l.pointer.high;return l.pointer.equals(i)?(this.ss.eraseElementByIterator(l),h("use():"+a),!0):g>a?!1:g===a?(this.ss.updateKeyByIterator(l,new o(g+1,y)),h("use():"+a),!0):y===a?(this.ss.updateKeyByIterator(l,new o(g,y-1)),h("use():"+a),!0):(this.ss.updateKeyByIterator(l,new o(a+1,y)),this.ss.insert(new o(g,a-1)),h("use():"+a),!0)}return h("use():failed"),!1},n.prototype.free=function(a){if(a<this.min||a>this.max){p("free():"+a+" is out of range");return}let i=new o(a,a),l=this.ss.upperBound(i);if(l.equals(this.ss.end())){if(l.equals(this.ss.begin())){this.ss.insert(i);return}l.pre();let g=l.pointer.high;l.pointer.high+1===a?this.ss.updateKeyByIterator(l,new o(g,a)):this.ss.insert(i)}else if(l.equals(this.ss.begin()))if(a+1===l.pointer.low){let g=l.pointer.high;this.ss.updateKeyByIterator(l,new o(a,g))}else this.ss.insert(i);else{let g=l.pointer.low,y=l.pointer.high;l.pre();let w=l.pointer.low;l.pointer.high+1===a?a+1===g?(this.ss.eraseElementByIterator(l),this.ss.updateKeyByIterator(l,new o(w,y))):this.ss.updateKeyByIterator(l,new o(w,a)):a+1===g?(this.ss.eraseElementByIterator(l.next()),this.ss.insert(new o(a,y))):this.ss.insert(i)}h("free():"+a)},n.prototype.clear=function(){h("clear()"),this.ss.clear(),this.ss.insert(new o(this.min,this.max))},n.prototype.intervalCount=function(){return this.ss.size()},n.prototype.dump=function(){console.log("length:"+this.ss.size());for(let a of this.ss)console.log(a)},s.exports=n}),Da=E((e,s)=>{_e(),we(),F();var t=wh();s.exports.NumberAllocator=t}),_h=E(e=>{_e(),we(),F(),Object.defineProperty(e,"__esModule",{value:!0});var s=sh(),t=Da(),h=class{constructor(p){p>0&&(this.aliasToTopic=new s.LRUCache({max:p}),this.topicToAlias={},this.numberAllocator=new t.NumberAllocator(1,p),this.max=p,this.length=0)}put(p,o){if(o===0||o>this.max)return!1;let n=this.aliasToTopic.get(o);return n&&delete this.topicToAlias[n],this.aliasToTopic.set(o,p),this.topicToAlias[p]=o,this.numberAllocator.use(o),this.length=this.aliasToTopic.size,!0}getTopicByAlias(p){return this.aliasToTopic.get(p)}getAliasByTopic(p){let o=this.topicToAlias[p];return typeof o<"u"&&this.aliasToTopic.get(o),o}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};e.default=h}),vh=E(e=>{_e(),we(),F();var s=e&&e.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(e,"__esModule",{value:!0});var t=En(),h=s(_h()),p=Gr(),o=(n,a)=>{n.log("_handleConnack");let{options:i}=n,l=i.protocolVersion===5?a.reasonCode:a.returnCode;if(clearTimeout(n.connackTimer),delete n.topicAliasSend,a.properties){if(a.properties.topicAliasMaximum){if(a.properties.topicAliasMaximum>65535){n.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}a.properties.topicAliasMaximum>0&&(n.topicAliasSend=new h.default(a.properties.topicAliasMaximum))}a.properties.serverKeepAlive&&i.keepalive&&(i.keepalive=a.properties.serverKeepAlive),a.properties.maximumPacketSize&&(i.properties||(i.properties={}),i.properties.maximumPacketSize=a.properties.maximumPacketSize)}if(l===0)n.reconnecting=!1,n._onConnect(a);else if(l>0){let g=new p.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[l]}`,l);n.emit("error",g)}};e.default=o}),Eh=E(e=>{_e(),we(),F(),Object.defineProperty(e,"__esModule",{value:!0});var s=(t,h,p)=>{t.log("handling pubrel packet");let o=typeof p<"u"?p:t.noop,{messageId:n}=h,a={cmd:"pubcomp",messageId:n};t.incomingStore.get(h,(i,l)=>{i?t._sendPacket(a,o):(t.emit("message",l.topic,l.payload,l),t.handleMessage(l,g=>{if(g)return o(g);t.incomingStore.del(l,t.noop),t._sendPacket(a,o)}))})};e.default=s}),Sh=E(e=>{_e(),we(),F();var s=e&&e.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(e,"__esModule",{value:!0});var t=s(nh()),h=s(oh()),p=s(vh()),o=s(En()),n=s(Eh()),a=(i,l,g)=>{let{options:y}=i;if(y.protocolVersion===5&&y.properties&&y.properties.maximumPacketSize&&y.properties.maximumPacketSize<l.length)return i.emit("error",new Error(`exceeding packets size ${l.cmd}`)),i.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),i;switch(i.log("_handlePacket :: emitting packetreceive"),i.emit("packetreceive",l),l.cmd){case"publish":(0,t.default)(i,l,g);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":i.reschedulePing(),(0,o.default)(i,l),g();break;case"pubrel":i.reschedulePing(),(0,n.default)(i,l,g);break;case"connack":(0,p.default)(i,l),g();break;case"auth":i.reschedulePing(),(0,h.default)(i,l),g();break;case"pingresp":i.log("_handlePacket :: received pingresp"),i.reschedulePing(),g();break;case"disconnect":i.emit("disconnect",l),g();break;default:i.log("_handlePacket :: unknown command"),g();break}};e.default=a}),Ah=E(e=>{_e(),we(),F();var s=e&&e.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),e.TypedEventEmitter=void 0;var t=s((Ur(),K(wr))),h=Gr(),p=class{};e.TypedEventEmitter=p,(0,h.applyMixin)(p,t.default)}),Sn=E(e=>{_e(),we(),F(),Object.defineProperty(e,"__esModule",{value:!0}),e.isReactNativeBrowser=e.isWebWorker=void 0;var s=()=>{var o;return typeof window<"u"?typeof se<"u"&&((o=se.userAgent)===null||o===void 0?void 0:o.toLowerCase().indexOf(" electron/"))>-1&&Re!=null&&Re.versions?!Object.prototype.hasOwnProperty.call(Re.versions,"electron"):typeof window.document<"u":!1},t=()=>{var o,n;return!!(typeof self=="object"&&!((n=(o=self==null?void 0:self.constructor)===null||o===void 0?void 0:o.name)===null||n===void 0)&&n.includes("WorkerGlobalScope"))},h=()=>typeof se<"u"&&se.product==="ReactNative",p=s()||t()||h();e.isWebWorker=t(),e.isReactNativeBrowser=h(),e.default=p}),Ch=E((e,s)=>{_e(),we(),F(),function(t,h){typeof e=="object"&&typeof s<"u"?h(e):(t=typeof globalThis<"u"?globalThis:t||self,h(t.fastUniqueNumbers={}))}(e,function(t){var h=function(v){return function(S){var C=v(S);return S.add(C),C}},p=function(v){return function(S,C){return v.set(S,C),C}},o=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,n=536870912,a=n*2,i=function(v,S){return function(C){var x=S.get(C),W=x===void 0?C.size:x<a?x+1:0;if(!C.has(W))return v(C,W);if(C.size<n){for(;C.has(W);)W=Math.floor(Math.random()*a);return v(C,W)}if(C.size>o)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;C.has(W);)W=Math.floor(Math.random()*o);return v(C,W)}},l=new WeakMap,g=p(l),y=i(g,l),w=h(y);t.addUniqueNumber=w,t.generateUniqueNumber=y})}),Th=E((e,s)=>{_e(),we(),F(),function(t,h){typeof e=="object"&&typeof s<"u"?h(e,Ch()):(t=typeof globalThis<"u"?globalThis:t||self,h(t.workerTimersBroker={},t.fastUniqueNumbers))}(e,function(t,h){var p=function(a){return a.method!==void 0&&a.method==="call"},o=function(a){return a.error===null&&typeof a.id=="number"},n=function(a){var i=new Map([[0,function(){}]]),l=new Map([[0,function(){}]]),g=new Map,y=new Worker(a);y.addEventListener("message",function(x){var W=x.data;if(p(W)){var k=W.params,P=k.timerId,z=k.timerType;if(z==="interval"){var Q=i.get(P);if(typeof Q=="number"){var M=g.get(Q);if(M===void 0||M.timerId!==P||M.timerType!==z)throw new Error("The timer is in an undefined state.")}else if(typeof Q<"u")Q();else throw new Error("The timer is in an undefined state.")}else if(z==="timeout"){var N=l.get(P);if(typeof N=="number"){var $=g.get(N);if($===void 0||$.timerId!==P||$.timerType!==z)throw new Error("The timer is in an undefined state.")}else if(typeof N<"u")N(),l.delete(P);else throw new Error("The timer is in an undefined state.")}}else if(o(W)){var X=W.id,ae=g.get(X);if(ae===void 0)throw new Error("The timer is in an undefined state.");var pe=ae.timerId,O=ae.timerType;g.delete(X),O==="interval"?i.delete(pe):l.delete(pe)}else{var te=W.error.message;throw new Error(te)}});var w=function(x){var W=h.generateUniqueNumber(g);g.set(W,{timerId:x,timerType:"interval"}),i.set(x,W),y.postMessage({id:W,method:"clear",params:{timerId:x,timerType:"interval"}})},v=function(x){var W=h.generateUniqueNumber(g);g.set(W,{timerId:x,timerType:"timeout"}),l.set(x,W),y.postMessage({id:W,method:"clear",params:{timerId:x,timerType:"timeout"}})},S=function(x){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,k=h.generateUniqueNumber(i);return i.set(k,function(){x(),typeof i.get(k)=="function"&&y.postMessage({id:null,method:"set",params:{delay:W,now:performance.now(),timerId:k,timerType:"interval"}})}),y.postMessage({id:null,method:"set",params:{delay:W,now:performance.now(),timerId:k,timerType:"interval"}}),k},C=function(x){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,k=h.generateUniqueNumber(l);return l.set(k,x),y.postMessage({id:null,method:"set",params:{delay:W,now:performance.now(),timerId:k,timerType:"timeout"}}),k};return{clearInterval:w,clearTimeout:v,setInterval:S,setTimeout:C}};t.load=n})}),Ih=E((e,s)=>{_e(),we(),F(),function(t,h){typeof e=="object"&&typeof s<"u"?h(e,Th()):(t=typeof globalThis<"u"?globalThis:t||self,h(t.workerTimers={},t.workerTimersBroker))}(e,function(t,h){var p=function(y,w){var v=null;return function(){if(v!==null)return v;var S=new Blob([w],{type:"application/javascript; charset=utf-8"}),C=URL.createObjectURL(S);return v=y(C),setTimeout(function(){return URL.revokeObjectURL(C)}),v}},o=`(()=>{var e={472:(e,t,r)=>{var o,i;void 0===(i="function"==typeof(o=function(){"use strict";var e=new Map,t=new Map,r=function(t){var r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)},o=function(e){var r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)},i=function(e,t){var r,o=performance.now();return{expected:o+(r=e-Math.max(0,o-t)),remainingDelay:r}},n=function e(t,r,o,i){var n=performance.now();n>o?postMessage({id:null,method:"call",params:{timerId:r,timerType:i}}):t.set(r,setTimeout(e,o-n,t,r,o,i))},a=function(t,r,o){var a=i(t,o),s=a.expected,d=a.remainingDelay;e.set(r,setTimeout(n,d,e,r,s,"interval"))},s=function(e,r,o){var a=i(e,o),s=a.expected,d=a.remainingDelay;t.set(r,setTimeout(n,d,t,r,s,"timeout"))};addEventListener("message",(function(e){var t=e.data;try{if("clear"===t.method){var i=t.id,n=t.params,d=n.timerId,c=n.timerType;if("interval"===c)r(d),postMessage({error:null,id:i});else{if("timeout"!==c)throw new Error('The given type "'.concat(c,'" is not supported'));o(d),postMessage({error:null,id:i})}}else{if("set"!==t.method)throw new Error('The given method "'.concat(t.method,'" is not supported'));var u=t.params,l=u.delay,p=u.now,m=u.timerId,v=u.timerType;if("interval"===v)a(l,m,p);else{if("timeout"!==v)throw new Error('The given type "'.concat(v,'" is not supported'));s(l,m,p)}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))})?o.call(t,r,t,e):o)||(e.exports=i)}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,n=p(h.load,o),a=function(y){return n().clearInterval(y)},i=function(y){return n().clearTimeout(y)},l=function(){var y;return(y=n()).setInterval.apply(y,arguments)},g=function(){var y;return(y=n()).setTimeout.apply(y,arguments)};t.clearInterval=a,t.clearTimeout=i,t.setInterval=l,t.setTimeout=g})}),kh=E(e=>{_e(),we(),F();var s=e&&e.__createBinding||(Object.create?function(l,g,y,w){w===void 0&&(w=y);var v=Object.getOwnPropertyDescriptor(g,y);(!v||("get"in v?!g.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return g[y]}}),Object.defineProperty(l,w,v)}:function(l,g,y,w){w===void 0&&(w=y),l[w]=g[y]}),t=e&&e.__setModuleDefault||(Object.create?function(l,g){Object.defineProperty(l,"default",{enumerable:!0,value:g})}:function(l,g){l.default=g}),h=e&&e.__importStar||function(l){if(l&&l.__esModule)return l;var g={};if(l!=null)for(var y in l)y!=="default"&&Object.prototype.hasOwnProperty.call(l,y)&&s(g,l,y);return t(g,l),g};Object.defineProperty(e,"__esModule",{value:!0});var p=h(Sn()),o=Ih(),n={set:o.setInterval,clear:o.clearInterval},a={set:(l,g)=>setInterval(l,g),clear:l=>clearInterval(l)},i=l=>{switch(l){case"native":return a;case"worker":return n;case"auto":default:return p.default&&!p.isWebWorker&&!p.isReactNativeBrowser?n:a}};e.default=i}),Fa=E(e=>{_e(),we(),F();var s=e&&e.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(e,"__esModule",{value:!0});var t=s(kh()),h=class{get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(p,o){this.destroyed=!1,this.client=p,this.timer=(0,t.default)(o),this.setKeepalive(p.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(p){if(p*=1e3,isNaN(p)||p<=0||p>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${p}`);this._keepalive=p,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${p}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let p=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+p,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};e.default=h}),jo=E(e=>{_e(),we(),F();var s=e&&e.__createBinding||(Object.create?function(Q,M,N,$){$===void 0&&($=N);var X=Object.getOwnPropertyDescriptor(M,N);(!X||("get"in X?!M.__esModule:X.writable||X.configurable))&&(X={enumerable:!0,get:function(){return M[N]}}),Object.defineProperty(Q,$,X)}:function(Q,M,N,$){$===void 0&&($=N),Q[$]=M[N]}),t=e&&e.__setModuleDefault||(Object.create?function(Q,M){Object.defineProperty(Q,"default",{enumerable:!0,value:M})}:function(Q,M){Q.default=M}),h=e&&e.__importStar||function(Q){if(Q&&Q.__esModule)return Q;var M={};if(Q!=null)for(var N in Q)N!=="default"&&Object.prototype.hasOwnProperty.call(Q,N)&&s(M,Q,N);return t(M,Q),M},p=e&&e.__importDefault||function(Q){return Q&&Q.__esModule?Q:{default:Q}};Object.defineProperty(e,"__esModule",{value:!0});var o=p(bu()),n=p(Zu()),a=p(xa()),i=Ar(),l=p(th()),g=h(rh()),y=p(Xt()),w=p(Ba()),v=p(Sh()),S=Gr(),C=Ah(),x=p(Fa()),W=h(Sn()),k=globalThis.setImmediate||((...Q)=>{let M=Q.shift();(0,S.nextTick)(()=>{M(...Q)})}),P={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,writeCache:!0,timerVariant:"auto"},z=class ws extends C.TypedEventEmitter{static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(M,N){super(),this.options=N||{};for(let $ in P)typeof this.options[$]>"u"?this.options[$]=P[$]:this.options[$]=N[$];this.log=this.options.log||(0,y.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",ws.VERSION),W.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",W.default?"browser":"node"),this.log("MqttClient :: options.protocol",N.protocol),this.log("MqttClient :: options.protocolVersion",N.protocolVersion),this.log("MqttClient :: options.username",N.username),this.log("MqttClient :: options.keepalive",N.keepalive),this.log("MqttClient :: options.reconnectPeriod",N.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",N.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",N.properties?N.properties.topicAliasMaximum:void 0),this.options.clientId=typeof N.clientId=="string"?N.clientId:ws.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=N.protocolVersion===5&&N.customHandleAcks?N.customHandleAcks:(...$)=>{$[3](null,0)},this.options.writeCache||(n.default.writeToStream.cacheNumbers=!1),this.streamBuilder=M,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new a.default:this.options.messageIdProvider,this.outgoingStore=N.outgoingStore||new w.default,this.incomingStore=N.incomingStore||new w.default,this.queueQoSZero=N.queueQoSZero===void 0?!0:N.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,N.properties&&N.properties.topicAliasMaximum>0&&(N.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new o.default(N.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:$}=this,X=()=>{let ae=$.shift();this.log("deliver :: entry %o",ae);let pe=null;if(!ae){this._resubscribe();return}pe=ae.packet,this.log("deliver :: call _sendPacket for %o",pe);let O=!0;pe.messageId&&pe.messageId!==0&&(this.messageIdProvider.register(pe.messageId)||(O=!1)),O?this._sendPacket(pe,te=>{ae.cb&&ae.cb(te),X()}):(this.log("messageId: %d has already used. The message is skipped and removed.",pe.messageId),X())};this.log("connect :: sending queued packets"),X()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(M,N){N()}handleMessage(M,N){N()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var M;let N=new i.Writable,$=n.default.parser(this.options),X=null,ae=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),$.on("packet",ie=>{this.log("parser :: on packet push to packets array."),ae.push(ie)});let pe=()=>{this.log("work :: getting next packet in queue");let ie=ae.shift();if(ie)this.log("work :: packet pulled from queue"),(0,v.default)(this,ie,O);else{this.log("work :: no packets in queue");let ke=X;X=null,this.log("work :: done flag is %s",!!ke),ke&&ke()}},O=()=>{if(ae.length)(0,S.nextTick)(pe);else{let ie=X;X=null,ie()}};N._write=(ie,ke,ye)=>{X=ye,this.log("writable stream :: parsing buffer"),$.parse(ie),pe()};let te=ie=>{this.log("streamErrorHandler :: error",ie.message),ie.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",ie)):this.noop(ie)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(N),this.stream.on("error",te),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let de={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(de.will=Object.assign(Object.assign({},this.options.will),{payload:(M=this.options.will)===null||M===void 0?void 0:M.payload})),this.topicAliasRecv&&(de.properties||(de.properties={}),this.topicAliasRecv&&(de.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(de),$.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let ie=Object.assign({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket(ie)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(M,N,$,X){this.log("publish :: message `%s` to topic `%s`",N,M);let{options:ae}=this;typeof $=="function"&&(X=$,$=null),$=$||{},$=Object.assign(Object.assign({},{qos:0,retain:!1,dup:!1}),$);let{qos:pe,retain:O,dup:te,properties:de,cbStorePut:ie}=$;if(this._checkDisconnecting(X))return this;let ke=()=>{let ye=0;if((pe===1||pe===2)&&(ye=this._nextId(),ye===null))return this.log("No messageId left"),!1;let ee={cmd:"publish",topic:M,payload:N,qos:pe,retain:O,messageId:ye,dup:te};switch(ae.protocolVersion===5&&(ee.properties=de),this.log("publish :: qos",pe),pe){case 1:case 2:this.outgoing[ee.messageId]={volatile:!1,cb:X||this.noop},this.log("MqttClient:publish: packet cmd: %s",ee.cmd),this._sendPacket(ee,void 0,ie);break;default:this.log("MqttClient:publish: packet cmd: %s",ee.cmd),this._sendPacket(ee,X,ie);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!ke())&&this._storeProcessingQueue.push({invoke:ke,cbStorePut:$.cbStorePut,callback:X}),this}publishAsync(M,N,$){return new Promise((X,ae)=>{this.publish(M,N,$,(pe,O)=>{pe?ae(pe):X(O)})})}subscribe(M,N,$){let X=this.options.protocolVersion;typeof N=="function"&&($=N),$=$||this.noop;let ae=!1,pe=[];typeof M=="string"?(M=[M],pe=M):Array.isArray(M)?pe=M:typeof M=="object"&&(ae=M.resubscribe,delete M.resubscribe,pe=Object.keys(M));let O=g.validateTopics(pe);if(O!==null)return k($,new Error(`Invalid topic ${O}`)),this;if(this._checkDisconnecting($))return this.log("subscribe: discconecting true"),this;let te={qos:0};X===5&&(te.nl=!1,te.rap=!1,te.rh=0),N=Object.assign(Object.assign({},te),N);let de=N.properties,ie=[],ke=(ee,Oe)=>{if(Oe=Oe||N,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,ee)||this._resubscribeTopics[ee].qos<Oe.qos||ae){let me={topic:ee,qos:Oe.qos};X===5&&(me.nl=Oe.nl,me.rap=Oe.rap,me.rh=Oe.rh,me.properties=de),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",me.topic,me.qos),ie.push(me)}};if(Array.isArray(M)?M.forEach(ee=>{this.log("subscribe: array topic %s",ee),ke(ee)}):Object.keys(M).forEach(ee=>{this.log("subscribe: object topic %s, %o",ee,M[ee]),ke(ee,M[ee])}),!ie.length)return $(null,[]),this;let ye=()=>{let ee=this._nextId();if(ee===null)return this.log("No messageId left"),!1;let Oe={cmd:"subscribe",subscriptions:ie,messageId:ee};if(de&&(Oe.properties=de),this.options.resubscribe){this.log("subscribe :: resubscribe true");let me=[];ie.forEach(Ne=>{if(this.options.reconnectPeriod>0){let I={qos:Ne.qos};X===5&&(I.nl=Ne.nl||!1,I.rap=Ne.rap||!1,I.rh=Ne.rh||0,I.properties=Ne.properties),this._resubscribeTopics[Ne.topic]=I,me.push(Ne.topic)}}),this.messageIdToTopic[Oe.messageId]=me}return this.outgoing[Oe.messageId]={volatile:!0,cb(me,Ne){if(!me){let{granted:I}=Ne;for(let oe=0;oe<I.length;oe+=1)ie[oe].qos=I[oe]}$(me,ie)}},this.log("subscribe :: call _sendPacket"),this._sendPacket(Oe),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!ye())&&this._storeProcessingQueue.push({invoke:ye,callback:$}),this}subscribeAsync(M,N){return new Promise(($,X)=>{this.subscribe(M,N,(ae,pe)=>{ae?X(ae):$(pe)})})}unsubscribe(M,N,$){typeof M=="string"&&(M=[M]),typeof N=="function"&&($=N),$=$||this.noop;let X=g.validateTopics(M);if(X!==null)return k($,new Error(`Invalid topic ${X}`)),this;if(this._checkDisconnecting($))return this;let ae=()=>{let pe=this._nextId();if(pe===null)return this.log("No messageId left"),!1;let O={cmd:"unsubscribe",messageId:pe,unsubscriptions:[]};return typeof M=="string"?O.unsubscriptions=[M]:Array.isArray(M)&&(O.unsubscriptions=M),this.options.resubscribe&&O.unsubscriptions.forEach(te=>{delete this._resubscribeTopics[te]}),typeof N=="object"&&N.properties&&(O.properties=N.properties),this.outgoing[O.messageId]={volatile:!0,cb:$},this.log("unsubscribe: call _sendPacket"),this._sendPacket(O),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!ae())&&this._storeProcessingQueue.push({invoke:ae,callback:$}),this}unsubscribeAsync(M,N){return new Promise(($,X)=>{this.unsubscribe(M,N,(ae,pe)=>{ae?X(ae):$(pe)})})}end(M,N,$){this.log("end :: (%s)",this.options.clientId),(M==null||typeof M!="boolean")&&($=$||N,N=M,M=!1),typeof N!="object"&&($=$||N,N=null),this.log("end :: cb? %s",!!$),(!$||typeof $!="function")&&($=this.noop);let X=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(pe=>{this.outgoingStore.close(O=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),$){let te=pe||O;this.log("end :: closeStores: invoking callback with args"),$(te)}})}),this._deferredReconnect&&this._deferredReconnect()},ae=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,M),this._cleanUp(M,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,S.nextTick)(X)},N)};return this.disconnecting?($(),this):(this._clearReconnect(),this.disconnecting=!0,!M&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,ae,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),ae()),this)}endAsync(M,N){return new Promise(($,X)=>{this.end(M,N,ae=>{ae?X(ae):$()})})}removeOutgoingMessage(M){if(this.outgoing[M]){let{cb:N}=this.outgoing[M];this._removeOutgoingAndStoreMessage(M,()=>{N(new Error("Message removed"))})}return this}reconnect(M){this.log("client reconnect");let N=()=>{M?(this.options.incomingStore=M.incomingStore,this.options.outgoingStore=M.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new w.default,this.outgoingStore=this.options.outgoingStore||new w.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=N:N(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(M=>{this.outgoing[M].volatile&&typeof this.outgoing[M].cb=="function"&&(this.outgoing[M].cb(new Error("Connection closed")),delete this.outgoing[M])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(M=>{typeof this.outgoing[M].cb=="function"&&(this.outgoing[M].cb(new Error("Connection closed")),delete this.outgoing[M])}))}_removeTopicAliasAndRecoverTopicName(M){let N;M.properties&&(N=M.properties.topicAlias);let $=M.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",N,$),$.length===0){if(typeof N>"u")return new Error("Unregistered Topic Alias");if($=this.topicAliasSend.getTopicByAlias(N),typeof $>"u")return new Error("Unregistered Topic Alias");M.topic=$}N&&delete M.properties.topicAlias}_checkDisconnecting(M){return this.disconnecting&&(M&&M!==this.noop?M(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(M,N,$={}){if(N&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",N)),this.log("_cleanUp :: forced? %s",M),M)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let X=Object.assign({cmd:"disconnect"},$);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(X,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),k(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),N&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",N),N())}_storeAndSend(M,N,$){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",M.cmd);let X=M,ae;if(X.cmd==="publish"&&(X=(0,l.default)(M),ae=this._removeTopicAliasAndRecoverTopicName(X),ae))return N&&N(ae);this.outgoingStore.put(X,pe=>{if(pe)return N&&N(pe);$(),this._writePacket(M,N)})}_applyTopicAlias(M){if(this.options.protocolVersion===5&&M.cmd==="publish"){let N;M.properties&&(N=M.properties.topicAlias);let $=M.topic.toString();if(this.topicAliasSend)if(N){if($.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",$,N),!this.topicAliasSend.put($,N)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",$,N),new Error("Sending Topic Alias out of range")}else $.length!==0&&(this.options.autoAssignTopicAlias?(N=this.topicAliasSend.getAliasByTopic($),N?(M.topic="",M.properties=Object.assign(Object.assign({},M.properties),{topicAlias:N}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",$,N)):(N=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put($,N),M.properties=Object.assign(Object.assign({},M.properties),{topicAlias:N}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",$,N))):this.options.autoUseTopicAlias&&(N=this.topicAliasSend.getAliasByTopic($),N&&(M.topic="",M.properties=Object.assign(Object.assign({},M.properties),{topicAlias:N}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",$,N))));else if(N)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",$,N),new Error("Sending Topic Alias out of range")}}_noop(M){this.log("noop ::",M)}_writePacket(M,N){this.log("_writePacket :: packet: %O",M),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",M),this.log("_writePacket :: writing to stream");let $=n.default.writeToStream(M,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",$),!$&&N&&N!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",N)):N&&(this.log("_writePacket :: invoking cb"),N())}_sendPacket(M,N,$,X){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),$=$||this.noop,N=N||this.noop;let ae=this._applyTopicAlias(M);if(ae){N(ae);return}if(!this.connected){if(M.cmd==="auth"){this._writePacket(M,N);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(M,N,$);return}if(X){this._writePacket(M,N);return}switch(M.cmd){case"publish":break;case"pubrel":this._storeAndSend(M,N,$);return;default:this._writePacket(M,N);return}switch(M.qos){case 2:case 1:this._storeAndSend(M,N,$);break;case 0:default:this._writePacket(M,N);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(M,N,$){this.log("_storePacket :: packet: %o",M),this.log("_storePacket :: cb? %s",!!N),$=$||this.noop;let X=M;if(X.cmd==="publish"){X=(0,l.default)(M);let pe=this._removeTopicAliasAndRecoverTopicName(X);if(pe)return N&&N(pe)}let ae=X.qos||0;ae===0&&this.queueQoSZero||X.cmd!=="publish"?this.queue.push({packet:X,cb:N}):ae>0?(N=this.outgoing[X.messageId]?this.outgoing[X.messageId].cb:null,this.outgoingStore.put(X,pe=>{if(pe)return N&&N(pe);$()})):N&&N(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new x.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(){this.keepaliveManager&&this.options.keepalive&&this.options.reschedulePings&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let M=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&M.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let N=0;N<M.length;N++){let $={};$[M[N]]=this._resubscribeTopics[M[N]],$.resubscribe=!0,this.subscribe($,{properties:$[M[N]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(M){if(this.disconnected){this.emit("connect",M);return}this.connackPacket=M,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let N=()=>{let $=this.outgoingStore.createStream(),X=()=>{$.destroy(),$=null,this._flushStoreProcessingQueue(),ae()},ae=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",X),$.on("error",O=>{ae(),this._flushStoreProcessingQueue(),this.removeListener("close",X),this.emit("error",O)});let pe=()=>{if(!$)return;let O=$.read(1),te;if(!O){$.once("readable",pe);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[O.messageId]){pe();return}!this.disconnecting&&!this.reconnectTimer?(te=this.outgoing[O.messageId]?this.outgoing[O.messageId].cb:null,this.outgoing[O.messageId]={volatile:!1,cb(de,ie){te&&te(de,ie),pe()}},this._packetIdsDuringStoreProcessing[O.messageId]=!0,this.messageIdProvider.register(O.messageId)?this._sendPacket(O,void 0,void 0,!0):this.log("messageId: %d has already used.",O.messageId)):$.destroy&&$.destroy()};$.on("end",()=>{let O=!0;for(let te in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[te]){O=!1;break}this.removeListener("close",X),O?(ae(),this._invokeAllStoreProcessingQueue(),this.emit("connect",M)):N()}),pe()};N()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let M=this._storeProcessingQueue[0];if(M&&M.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let M of this._storeProcessingQueue)M.cbStorePut&&M.cbStorePut(new Error("Connection closed")),M.callback&&M.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(M,N){delete this.outgoing[M],this.outgoingStore.del({messageId:M},($,X)=>{N($,X),this.messageIdProvider.deallocate(M),this._invokeStoreProcessingQueue()})}};z.VERSION=S.MQTTJS_VERSION,e.default=z}),Rh=E(e=>{_e(),we(),F(),Object.defineProperty(e,"__esModule",{value:!0});var s=Da(),t=class{constructor(){this.numberAllocator=new s.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(h){return this.numberAllocator.use(h)}deallocate(h){this.numberAllocator.free(h)}clear(){this.numberAllocator.clear()}};e.default=t});function Cr(e){throw new RangeError(za[e])}function $a(e,s){let t=e.split("@"),h="";t.length>1&&(h=t[0]+"@",e=t[1]);let p=function(o,n){let a=[],i=o.length;for(;i--;)a[i]=n(o[i]);return a}((e=e.replace(Va,".")).split("."),s).join(".");return h+p}function Wa(e){let s=[],t=0,h=e.length;for(;t<h;){let p=e.charCodeAt(t++);if(p>=55296&&p<=56319&&t<h){let o=e.charCodeAt(t++);(64512&o)==56320?s.push(((1023&p)<<10)+(1023&o)+65536):(s.push(p),t--)}else s.push(p)}return s}var Ha,qa,Va,za,Mt,An,Uo,Lo,Do,Fo,cr,Oh=_(()=>{_e(),we(),F(),Ha=/^xn--/,qa=/[^\0-\x7E]/,Va=/[\x2E\u3002\uFF0E\uFF61]/g,za={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Mt=Math.floor,An=String.fromCharCode,Uo=function(e,s){return e+22+75*(e<26)-((s!=0)<<5)},Lo=function(e,s,t){let h=0;for(e=t?Mt(e/700):e>>1,e+=Mt(e/s);e>455;h+=36)e=Mt(e/35);return Mt(h+36*e/(e+38))},Do=function(e){let s=[],t=e.length,h=0,p=128,o=72,n=e.lastIndexOf("-");n<0&&(n=0);for(let i=0;i<n;++i)e.charCodeAt(i)>=128&&Cr("not-basic"),s.push(e.charCodeAt(i));for(let i=n>0?n+1:0;i<t;){let l=h;for(let y=1,w=36;;w+=36){i>=t&&Cr("invalid-input");let v=(a=e.charCodeAt(i++))-48<10?a-22:a-65<26?a-65:a-97<26?a-97:36;(v>=36||v>Mt((2147483647-h)/y))&&Cr("overflow"),h+=v*y;let S=w<=o?1:w>=o+26?26:w-o;if(v<S)break;let C=36-S;y>Mt(2147483647/C)&&Cr("overflow"),y*=C}let g=s.length+1;o=Lo(h-l,g,l==0),Mt(h/g)>2147483647-p&&Cr("overflow"),p+=Mt(h/g),h%=g,s.splice(h++,0,p)}var a;return String.fromCodePoint(...s)},Fo=function(e){let s=[],t=(e=Wa(e)).length,h=128,p=0,o=72;for(let i of e)i<128&&s.push(An(i));let n=s.length,a=n;for(n&&s.push("-");a<t;){let i=2147483647;for(let g of e)g>=h&&g<i&&(i=g);let l=a+1;i-h>Mt((2147483647-p)/l)&&Cr("overflow"),p+=(i-h)*l,h=i;for(let g of e)if(g<h&&++p>2147483647&&Cr("overflow"),g==h){let y=p;for(let w=36;;w+=36){let v=w<=o?1:w>=o+26?26:w-o;if(y<v)break;let S=y-v,C=36-v;s.push(An(Uo(v+S%C,0))),y=Mt(S/C)}s.push(An(Uo(y,0))),o=Lo(p,l,a==n),p=0,++a}++p,++h}return s.join("")},cr={version:"2.1.0",ucs2:{decode:Wa,encode:e=>String.fromCodePoint(...e)},decode:Do,encode:Fo,toASCII:function(e){return $a(e,function(s){return qa.test(s)?"xn--"+Fo(s):s})},toUnicode:function(e){return $a(e,function(s){return Ha.test(s)?Do(s.slice(4).toLowerCase()):s})}},cr.decode,cr.encode,cr.toASCII,cr.toUnicode,cr.ucs2,cr.version});function Ph(e,s){return Object.prototype.hasOwnProperty.call(e,s)}var Ka,Dr,Ja,$t,xh=_(()=>{_e(),we(),F(),Ka=function(e,s,t,h){s=s||"&",t=t||"=";var p={};if(typeof e!="string"||e.length===0)return p;var o=/\+/g;e=e.split(s);var n=1e3;h&&typeof h.maxKeys=="number"&&(n=h.maxKeys);var a=e.length;n>0&&a>n&&(a=n);for(var i=0;i<a;++i){var l,g,y,w,v=e[i].replace(o,"%20"),S=v.indexOf(t);S>=0?(l=v.substr(0,S),g=v.substr(S+1)):(l=v,g=""),y=decodeURIComponent(l),w=decodeURIComponent(g),Ph(p,y)?Array.isArray(p[y])?p[y].push(w):p[y]=[p[y],w]:p[y]=w}return p},Dr=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},Ja=function(e,s,t,h){return s=s||"&",t=t||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(p){var o=encodeURIComponent(Dr(p))+t;return Array.isArray(e[p])?e[p].map(function(n){return o+encodeURIComponent(Dr(n))}).join(s):o+encodeURIComponent(Dr(e[p]))}).join(s):h?encodeURIComponent(Dr(h))+t+encodeURIComponent(Dr(e)):""},$t={},$t.decode=$t.parse=Ka,$t.encode=$t.stringify=Ja,$t.decode,$t.encode,$t.parse,$t.stringify});function $o(){throw new Error("setTimeout has not been defined")}function Wo(){throw new Error("clearTimeout has not been defined")}function Qa(e){if(rr===setTimeout)return setTimeout(e,0);if((rr===$o||!rr)&&setTimeout)return rr=setTimeout,setTimeout(e,0);try{return rr(e,0)}catch{try{return rr.call(null,e,0)}catch{return rr.call(this||Tr,e,0)}}}function Bh(){kr&&Ir&&(kr=!1,Ir.length?Wt=Ir.concat(Wt):Xr=-1,Wt.length&&Ya())}function Ya(){if(!kr){var e=Qa(Bh);kr=!0;for(var s=Wt.length;s;){for(Ir=Wt,Wt=[];++Xr<s;)Ir&&Ir[Xr].run();Xr=-1,s=Wt.length}Ir=null,kr=!1,function(t){if(nr===clearTimeout)return clearTimeout(t);if((nr===Wo||!nr)&&clearTimeout)return nr=clearTimeout,clearTimeout(t);try{nr(t)}catch{try{return nr.call(null,t)}catch{return nr.call(this||Tr,t)}}}(e)}}function Ga(e,s){(this||Tr).fun=e,(this||Tr).array=s}function tr(){}var Xa,rr,nr,Tr,at,Ir,Wt,kr,Xr,ot,Nh=_(()=>{_e(),we(),F(),Tr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:gc,at=Xa={},function(){try{rr=typeof setTimeout=="function"?setTimeout:$o}catch{rr=$o}try{nr=typeof clearTimeout=="function"?clearTimeout:Wo}catch{nr=Wo}}(),Wt=[],kr=!1,Xr=-1,at.nextTick=function(e){var s=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)s[t-1]=arguments[t];Wt.push(new Ga(e,s)),Wt.length!==1||kr||Qa(Ya)},Ga.prototype.run=function(){(this||Tr).fun.apply(null,(this||Tr).array)},at.title="browser",at.browser=!0,at.env={},at.argv=[],at.version="",at.versions={},at.on=tr,at.addListener=tr,at.once=tr,at.off=tr,at.removeListener=tr,at.removeAllListeners=tr,at.emit=tr,at.prependListener=tr,at.prependOnceListener=tr,at.listeners=function(e){return[]},at.binding=function(e){throw new Error("process.binding is not supported")},at.cwd=function(){return"/"},at.chdir=function(e){throw new Error("process.chdir is not supported")},at.umask=function(){return 0},ot=Xa,ot.addListener,ot.argv,ot.binding,ot.browser,ot.chdir,ot.cwd,ot.emit,ot.env,ot.listeners,ot.nextTick,ot.off,ot.on,ot.once,ot.prependListener,ot.prependOnceListener,ot.removeAllListeners,ot.removeListener,ot.title,ot.umask,ot.version,ot.versions});function Mh(){if(Ho)return Cn;Ho=!0;var e=Cn={},s,t;function h(){throw new Error("setTimeout has not been defined")}function p(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?s=setTimeout:s=h}catch{s=h}try{typeof clearTimeout=="function"?t=clearTimeout:t=p}catch{t=p}})();function o(C){if(s===setTimeout)return setTimeout(C,0);if((s===h||!s)&&setTimeout)return s=setTimeout,setTimeout(C,0);try{return s(C,0)}catch{try{return s.call(null,C,0)}catch{return s.call(this||Rr,C,0)}}}function n(C){if(t===clearTimeout)return clearTimeout(C);if((t===p||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(C);try{return t(C)}catch{try{return t.call(null,C)}catch{return t.call(this||Rr,C)}}}var a=[],i=!1,l,g=-1;function y(){!i||!l||(i=!1,l.length?a=l.concat(a):g=-1,a.length&&w())}function w(){if(!i){var C=o(y);i=!0;for(var x=a.length;x;){for(l=a,a=[];++g<x;)l&&l[g].run();g=-1,x=a.length}l=null,i=!1,n(C)}}e.nextTick=function(C){var x=new Array(arguments.length-1);if(arguments.length>1)for(var W=1;W<arguments.length;W++)x[W-1]=arguments[W];a.push(new v(C,x)),a.length===1&&!i&&o(w)};function v(C,x){(this||Rr).fun=C,(this||Rr).array=x}v.prototype.run=function(){(this||Rr).fun.apply(null,(this||Rr).array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function S(){}return e.on=S,e.addListener=S,e.once=S,e.off=S,e.removeListener=S,e.removeAllListeners=S,e.emit=S,e.prependListener=S,e.prependOnceListener=S,e.listeners=function(C){return[]},e.binding=function(C){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(C){throw new Error("process.chdir is not supported")},e.umask=function(){return 0},Cn}var Cn,Ho,Rr,rt,Za=_(()=>{_e(),we(),F(),Cn={},Ho=!1,Rr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:gc,rt=Mh(),rt.platform="browser",rt.addListener,rt.argv,rt.binding,rt.browser,rt.chdir,rt.cwd,rt.emit,rt.env,rt.listeners,rt.nextTick,rt.off,rt.on,rt.once,rt.prependListener,rt.prependOnceListener,rt.removeAllListeners,rt.removeListener,rt.title,rt.umask,rt.version,rt.versions});function jh(){if(qo)return Tn;qo=!0;var e=rt;function s(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function t(o,n){for(var a="",i=0,l=-1,g=0,y,w=0;w<=o.length;++w){if(w<o.length)y=o.charCodeAt(w);else{if(y===47)break;y=47}if(y===47){if(!(l===w-1||g===1))if(l!==w-1&&g===2){if(a.length<2||i!==2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){var v=a.lastIndexOf("/");if(v!==a.length-1){v===-1?(a="",i=0):(a=a.slice(0,v),i=a.length-1-a.lastIndexOf("/")),l=w,g=0;continue}}else if(a.length===2||a.length===1){a="",i=0,l=w,g=0;continue}}n&&(a.length>0?a+="/..":a="..",i=2)}else a.length>0?a+="/"+o.slice(l+1,w):a=o.slice(l+1,w),i=w-l-1;l=w,g=0}else y===46&&g!==-1?++g:g=-1}return a}function h(o,n){var a=n.dir||n.root,i=n.base||(n.name||"")+(n.ext||"");return a?a===n.root?a+i:a+o+i:i}var p={resolve:function(){for(var o="",n=!1,a,i=arguments.length-1;i>=-1&&!n;i--){var l;i>=0?l=arguments[i]:(a===void 0&&(a=e.cwd()),l=a),s(l),l.length!==0&&(o=l+"/"+o,n=l.charCodeAt(0)===47)}return o=t(o,!n),n?o.length>0?"/"+o:"/":o.length>0?o:"."},normalize:function(o){if(s(o),o.length===0)return".";var n=o.charCodeAt(0)===47,a=o.charCodeAt(o.length-1)===47;return o=t(o,!n),o.length===0&&!n&&(o="."),o.length>0&&a&&(o+="/"),n?"/"+o:o},isAbsolute:function(o){return s(o),o.length>0&&o.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var o,n=0;n<arguments.length;++n){var a=arguments[n];s(a),a.length>0&&(o===void 0?o=a:o+="/"+a)}return o===void 0?".":p.normalize(o)},relative:function(o,n){if(s(o),s(n),o===n||(o=p.resolve(o),n=p.resolve(n),o===n))return"";for(var a=1;a<o.length&&o.charCodeAt(a)===47;++a);for(var i=o.length,l=i-a,g=1;g<n.length&&n.charCodeAt(g)===47;++g);for(var y=n.length,w=y-g,v=l<w?l:w,S=-1,C=0;C<=v;++C){if(C===v){if(w>v){if(n.charCodeAt(g+C)===47)return n.slice(g+C+1);if(C===0)return n.slice(g+C)}else l>v&&(o.charCodeAt(a+C)===47?S=C:C===0&&(S=0));break}var x=o.charCodeAt(a+C),W=n.charCodeAt(g+C);if(x!==W)break;x===47&&(S=C)}var k="";for(C=a+S+1;C<=i;++C)(C===i||o.charCodeAt(C)===47)&&(k.length===0?k+="..":k+="/..");return k.length>0?k+n.slice(g+S):(g+=S,n.charCodeAt(g)===47&&++g,n.slice(g))},_makeLong:function(o){return o},dirname:function(o){if(s(o),o.length===0)return".";for(var n=o.charCodeAt(0),a=n===47,i=-1,l=!0,g=o.length-1;g>=1;--g)if(n=o.charCodeAt(g),n===47){if(!l){i=g;break}}else l=!1;return i===-1?a?"/":".":a&&i===1?"//":o.slice(0,i)},basename:function(o,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');s(o);var a=0,i=-1,l=!0,g;if(n!==void 0&&n.length>0&&n.length<=o.length){if(n.length===o.length&&n===o)return"";var y=n.length-1,w=-1;for(g=o.length-1;g>=0;--g){var v=o.charCodeAt(g);if(v===47){if(!l){a=g+1;break}}else w===-1&&(l=!1,w=g+1),y>=0&&(v===n.charCodeAt(y)?--y===-1&&(i=g):(y=-1,i=w))}return a===i?i=w:i===-1&&(i=o.length),o.slice(a,i)}else{for(g=o.length-1;g>=0;--g)if(o.charCodeAt(g)===47){if(!l){a=g+1;break}}else i===-1&&(l=!1,i=g+1);return i===-1?"":o.slice(a,i)}},extname:function(o){s(o);for(var n=-1,a=0,i=-1,l=!0,g=0,y=o.length-1;y>=0;--y){var w=o.charCodeAt(y);if(w===47){if(!l){a=y+1;break}continue}i===-1&&(l=!1,i=y+1),w===46?n===-1?n=y:g!==1&&(g=1):n!==-1&&(g=-1)}return n===-1||i===-1||g===0||g===1&&n===i-1&&n===a+1?"":o.slice(n,i)},format:function(o){if(o===null||typeof o!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof o);return h("/",o)},parse:function(o){s(o);var n={root:"",dir:"",base:"",ext:"",name:""};if(o.length===0)return n;var a=o.charCodeAt(0),i=a===47,l;i?(n.root="/",l=1):l=0;for(var g=-1,y=0,w=-1,v=!0,S=o.length-1,C=0;S>=l;--S){if(a=o.charCodeAt(S),a===47){if(!v){y=S+1;break}continue}w===-1&&(v=!1,w=S+1),a===46?g===-1?g=S:C!==1&&(C=1):g!==-1&&(C=-1)}return g===-1||w===-1||C===0||C===1&&g===w-1&&g===y+1?w!==-1&&(y===0&&i?n.base=n.name=o.slice(1,w):n.base=n.name=o.slice(y,w)):(y===0&&i?(n.name=o.slice(1,g),n.base=o.slice(1,w)):(n.name=o.slice(y,g),n.base=o.slice(y,w)),n.ext=o.slice(g,w)),y>0?n.dir=o.slice(0,y-1):i&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};return p.posix=p,Tn=p,Tn}var Tn,qo,Vo,Uh=_(()=>{_e(),we(),F(),Za(),Tn={},qo=!1,Vo=jh()}),el={};A(el,{URL:()=>Il,Url:()=>El,default:()=>Ze,fileURLToPath:()=>tl,format:()=>Sl,parse:()=>Tl,pathToFileURL:()=>rl,resolve:()=>Al,resolveObject:()=>Cl});function Ot(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function Zr(e,s,t){if(e&&jt.isObject(e)&&e instanceof Ot)return e;var h=new Ot;return h.parse(e,s,t),h}function Lh(){if(Qo)return On;Qo=!0;var e=ot;function s(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function t(o,n){for(var a="",i=0,l=-1,g=0,y,w=0;w<=o.length;++w){if(w<o.length)y=o.charCodeAt(w);else{if(y===47)break;y=47}if(y===47){if(!(l===w-1||g===1))if(l!==w-1&&g===2){if(a.length<2||i!==2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){var v=a.lastIndexOf("/");if(v!==a.length-1){v===-1?(a="",i=0):(a=a.slice(0,v),i=a.length-1-a.lastIndexOf("/")),l=w,g=0;continue}}else if(a.length===2||a.length===1){a="",i=0,l=w,g=0;continue}}n&&(a.length>0?a+="/..":a="..",i=2)}else a.length>0?a+="/"+o.slice(l+1,w):a=o.slice(l+1,w),i=w-l-1;l=w,g=0}else y===46&&g!==-1?++g:g=-1}return a}function h(o,n){var a=n.dir||n.root,i=n.base||(n.name||"")+(n.ext||"");return a?a===n.root?a+i:a+o+i:i}var p={resolve:function(){for(var o="",n=!1,a,i=arguments.length-1;i>=-1&&!n;i--){var l;i>=0?l=arguments[i]:(a===void 0&&(a=e.cwd()),l=a),s(l),l.length!==0&&(o=l+"/"+o,n=l.charCodeAt(0)===47)}return o=t(o,!n),n?o.length>0?"/"+o:"/":o.length>0?o:"."},normalize:function(o){if(s(o),o.length===0)return".";var n=o.charCodeAt(0)===47,a=o.charCodeAt(o.length-1)===47;return o=t(o,!n),o.length===0&&!n&&(o="."),o.length>0&&a&&(o+="/"),n?"/"+o:o},isAbsolute:function(o){return s(o),o.length>0&&o.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var o,n=0;n<arguments.length;++n){var a=arguments[n];s(a),a.length>0&&(o===void 0?o=a:o+="/"+a)}return o===void 0?".":p.normalize(o)},relative:function(o,n){if(s(o),s(n),o===n||(o=p.resolve(o),n=p.resolve(n),o===n))return"";for(var a=1;a<o.length&&o.charCodeAt(a)===47;++a);for(var i=o.length,l=i-a,g=1;g<n.length&&n.charCodeAt(g)===47;++g);for(var y=n.length,w=y-g,v=l<w?l:w,S=-1,C=0;C<=v;++C){if(C===v){if(w>v){if(n.charCodeAt(g+C)===47)return n.slice(g+C+1);if(C===0)return n.slice(g+C)}else l>v&&(o.charCodeAt(a+C)===47?S=C:C===0&&(S=0));break}var x=o.charCodeAt(a+C),W=n.charCodeAt(g+C);if(x!==W)break;x===47&&(S=C)}var k="";for(C=a+S+1;C<=i;++C)(C===i||o.charCodeAt(C)===47)&&(k.length===0?k+="..":k+="/..");return k.length>0?k+n.slice(g+S):(g+=S,n.charCodeAt(g)===47&&++g,n.slice(g))},_makeLong:function(o){return o},dirname:function(o){if(s(o),o.length===0)return".";for(var n=o.charCodeAt(0),a=n===47,i=-1,l=!0,g=o.length-1;g>=1;--g)if(n=o.charCodeAt(g),n===47){if(!l){i=g;break}}else l=!1;return i===-1?a?"/":".":a&&i===1?"//":o.slice(0,i)},basename:function(o,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');s(o);var a=0,i=-1,l=!0,g;if(n!==void 0&&n.length>0&&n.length<=o.length){if(n.length===o.length&&n===o)return"";var y=n.length-1,w=-1;for(g=o.length-1;g>=0;--g){var v=o.charCodeAt(g);if(v===47){if(!l){a=g+1;break}}else w===-1&&(l=!1,w=g+1),y>=0&&(v===n.charCodeAt(y)?--y===-1&&(i=g):(y=-1,i=w))}return a===i?i=w:i===-1&&(i=o.length),o.slice(a,i)}else{for(g=o.length-1;g>=0;--g)if(o.charCodeAt(g)===47){if(!l){a=g+1;break}}else i===-1&&(l=!1,i=g+1);return i===-1?"":o.slice(a,i)}},extname:function(o){s(o);for(var n=-1,a=0,i=-1,l=!0,g=0,y=o.length-1;y>=0;--y){var w=o.charCodeAt(y);if(w===47){if(!l){a=y+1;break}continue}i===-1&&(l=!1,i=y+1),w===46?n===-1?n=y:g!==1&&(g=1):n!==-1&&(g=-1)}return n===-1||i===-1||g===0||g===1&&n===i-1&&n===a+1?"":o.slice(n,i)},format:function(o){if(o===null||typeof o!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof o);return h("/",o)},parse:function(o){s(o);var n={root:"",dir:"",base:"",ext:"",name:""};if(o.length===0)return n;var a=o.charCodeAt(0),i=a===47,l;i?(n.root="/",l=1):l=0;for(var g=-1,y=0,w=-1,v=!0,S=o.length-1,C=0;S>=l;--S){if(a=o.charCodeAt(S),a===47){if(!v){y=S+1;break}continue}w===-1&&(v=!1,w=S+1),a===46?g===-1?g=S:C!==1&&(C=1):g!==-1&&(C=-1)}return g===-1||w===-1||C===0||C===1&&g===w-1&&g===y+1?w!==-1&&(y===0&&i?n.base=n.name=o.slice(1,w):n.base=n.name=o.slice(y,w)):(y===0&&i?(n.name=o.slice(1,g),n.base=o.slice(1,w)):(n.name=o.slice(y,g),n.base=o.slice(y,w)),n.ext=o.slice(g,w)),y>0?n.dir=o.slice(0,y-1):i&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};return p.posix=p,On=p,On}function Dh(e){if(typeof e=="string")e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(e.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Pn?Fh(e):$h(e)}function Fh(e){let s=e.hostname,t=e.pathname;for(let h=0;h<t.length;h++)if(t[h]==="%"){let p=t.codePointAt(h+2)||32;if(t[h+1]==="2"&&p===102||t[h+1]==="5"&&p===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(gl,"\\"),t=decodeURIComponent(t),s!=="")return`\\\\${s}${t}`;{let h=t.codePointAt(1)|32,p=t[2];if(h<dl||h>pl||p!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function $h(e){if(e.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let s=e.pathname;for(let t=0;t<s.length;t++)if(s[t]==="%"){let h=s.codePointAt(t+2)||32;if(s[t+1]==="2"&&h===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(s)}function Wh(e){let s=Yo.resolve(e),t=e.charCodeAt(e.length-1);(t===fl||Pn&&t===hl)&&s[s.length-1]!==Yo.sep&&(s+="/");let h=new URL("file://");return s.includes("%")&&(s=s.replace(ml,"%25")),!Pn&&s.includes("\\")&&(s=s.replace(bl,"%5C")),s.includes(`
`)&&(s=s.replace(yl,"%0A")),s.includes("\r")&&(s=s.replace(wl,"%0D")),s.includes("	")&&(s=s.replace(_l,"%09")),h.pathname=s,h}function tl(e){if(typeof e=="string")e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(e.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return xn?Hh(e):qh(e)}function Hh(e){let s=e.hostname,t=e.pathname;for(let h=0;h<t.length;h++)if(t[h]==="%"){let p=t.codePointAt(h+2)||32;if(t[h+1]==="2"&&p===102||t[h+1]==="5"&&p===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(xl,"\\"),t=decodeURIComponent(t),s!=="")return`\\\\${s}${t}`;{let h=t.codePointAt(1)|32,p=t[2];if(h<Ol||h>Pl||p!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function qh(e){if(e.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let s=e.pathname;for(let t=0;t<s.length;t++)if(s[t]==="%"){let h=s.codePointAt(t+2)||32;if(s[t+1]==="2"&&h===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(s)}function rl(e){let s=Vo.resolve(e),t=e.charCodeAt(e.length-1);(t===Rl||xn&&t===kl)&&s[s.length-1]!==Vo.sep&&(s+="/");let h=new URL("file://");return s.includes("%")&&(s=s.replace(Bl,"%25")),!xn&&s.includes("\\")&&(s=s.replace(Nl,"%5C")),s.includes(`
`)&&(s=s.replace(Ml,"%0A")),s.includes("\r")&&(s=s.replace(jl,"%0D")),s.includes("	")&&(s=s.replace(Ul,"%09")),h.pathname=s,h}var Ze,nl,jt,il,ol,sl,al,In,zo,Ko,Jo,ll,cl,kn,Or,Rn,On,Qo,Yo,ul,hl,fl,dl,pl,Pn,gl,ml,bl,yl,wl,_l,vl,El,Sl,Al,Cl,Tl,Il,kl,Rl,Ol,Pl,xn,xl,Bl,Nl,Ml,jl,Ul,Vh=_(()=>{_e(),we(),F(),Oh(),xh(),Nh(),Uh(),Za(),Ze={},nl=cr,jt={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}},Ze.parse=Zr,Ze.resolve=function(e,s){return Zr(e,!1,!0).resolve(s)},Ze.resolveObject=function(e,s){return e?Zr(e,!1,!0).resolveObject(s):s},Ze.format=function(e){return jt.isString(e)&&(e=Zr(e)),e instanceof Ot?e.format():Ot.prototype.format.call(e)},Ze.Url=Ot,il=/^([a-z0-9.+-]+:)/i,ol=/:[0-9]*$/,sl=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,al=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),In=["'"].concat(al),zo=["%","/","?",";","#"].concat(In),Ko=["/","?","#"],Jo=/^[+a-z0-9A-Z_-]{0,63}$/,ll=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,cl={javascript:!0,"javascript:":!0},kn={javascript:!0,"javascript:":!0},Or={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Rn=$t,Ot.prototype.parse=function(e,s,t){if(!jt.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var h=e.indexOf("?"),p=h!==-1&&h<e.indexOf("#")?"?":"#",o=e.split(p);o[0]=o[0].replace(/\\/g,"/");var n=e=o.join(p);if(n=n.trim(),!t&&e.split("#").length===1){var a=sl.exec(n);if(a)return this.path=n,this.href=n,this.pathname=a[1],a[2]?(this.search=a[2],this.query=s?Rn.parse(this.search.substr(1)):this.search.substr(1)):s&&(this.search="",this.query={}),this}var i=il.exec(n);if(i){var l=(i=i[0]).toLowerCase();this.protocol=l,n=n.substr(i.length)}if(t||i||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var g=n.substr(0,2)==="//";!g||i&&kn[i]||(n=n.substr(2),this.slashes=!0)}if(!kn[i]&&(g||i&&!Or[i])){for(var y,w,v=-1,S=0;S<Ko.length;S++)(C=n.indexOf(Ko[S]))!==-1&&(v===-1||C<v)&&(v=C);for((w=v===-1?n.lastIndexOf("@"):n.lastIndexOf("@",v))!==-1&&(y=n.slice(0,w),n=n.slice(w+1),this.auth=decodeURIComponent(y)),v=-1,S=0;S<zo.length;S++){var C;(C=n.indexOf(zo[S]))!==-1&&(v===-1||C<v)&&(v=C)}v===-1&&(v=n.length),this.host=n.slice(0,v),n=n.slice(v),this.parseHost(),this.hostname=this.hostname||"";var x=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!x)for(var W=this.hostname.split(/\./),k=(S=0,W.length);S<k;S++){var P=W[S];if(P&&!P.match(Jo)){for(var z="",Q=0,M=P.length;Q<M;Q++)P.charCodeAt(Q)>127?z+="x":z+=P[Q];if(!z.match(Jo)){var N=W.slice(0,S),$=W.slice(S+1),X=P.match(ll);X&&(N.push(X[1]),$.unshift(X[2])),$.length&&(n="/"+$.join(".")+n),this.hostname=N.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),x||(this.hostname=nl.toASCII(this.hostname));var ae=this.port?":"+this.port:"",pe=this.hostname||"";this.host=pe+ae,this.href+=this.host,x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),n[0]!=="/"&&(n="/"+n))}if(!cl[l])for(S=0,k=In.length;S<k;S++){var O=In[S];if(n.indexOf(O)!==-1){var te=encodeURIComponent(O);te===O&&(te=escape(O)),n=n.split(O).join(te)}}var de=n.indexOf("#");de!==-1&&(this.hash=n.substr(de),n=n.slice(0,de));var ie=n.indexOf("?");if(ie!==-1?(this.search=n.substr(ie),this.query=n.substr(ie+1),s&&(this.query=Rn.parse(this.query)),n=n.slice(0,ie)):s&&(this.search="",this.query={}),n&&(this.pathname=n),Or[l]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){ae=this.pathname||"";var ke=this.search||"";this.path=ae+ke}return this.href=this.format(),this},Ot.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var s=this.protocol||"",t=this.pathname||"",h=this.hash||"",p=!1,o="";this.host?p=e+this.host:this.hostname&&(p=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(p+=":"+this.port)),this.query&&jt.isObject(this.query)&&Object.keys(this.query).length&&(o=Rn.stringify(this.query));var n=this.search||o&&"?"+o||"";return s&&s.substr(-1)!==":"&&(s+=":"),this.slashes||(!s||Or[s])&&p!==!1?(p="//"+(p||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):p||(p=""),h&&h.charAt(0)!=="#"&&(h="#"+h),n&&n.charAt(0)!=="?"&&(n="?"+n),s+p+(t=t.replace(/[?#]/g,function(a){return encodeURIComponent(a)}))+(n=n.replace("#","%23"))+h},Ot.prototype.resolve=function(e){return this.resolveObject(Zr(e,!1,!0)).format()},Ot.prototype.resolveObject=function(e){if(jt.isString(e)){var s=new Ot;s.parse(e,!1,!0),e=s}for(var t=new Ot,h=Object.keys(this),p=0;p<h.length;p++){var o=h[p];t[o]=this[o]}if(t.hash=e.hash,e.href==="")return t.href=t.format(),t;if(e.slashes&&!e.protocol){for(var n=Object.keys(e),a=0;a<n.length;a++){var i=n[a];i!=="protocol"&&(t[i]=e[i])}return Or[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(e.protocol&&e.protocol!==t.protocol){if(!Or[e.protocol]){for(var l=Object.keys(e),g=0;g<l.length;g++){var y=l[g];t[y]=e[y]}return t.href=t.format(),t}if(t.protocol=e.protocol,e.host||kn[e.protocol])t.pathname=e.pathname;else{for(var w=(e.pathname||"").split("/");w.length&&!(e.host=w.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),w[0]!==""&&w.unshift(""),w.length<2&&w.unshift(""),t.pathname=w.join("/")}if(t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,t.pathname||t.search){var v=t.pathname||"",S=t.search||"";t.path=v+S}return t.slashes=t.slashes||e.slashes,t.href=t.format(),t}var C=t.pathname&&t.pathname.charAt(0)==="/",x=e.host||e.pathname&&e.pathname.charAt(0)==="/",W=x||C||t.host&&e.pathname,k=W,P=t.pathname&&t.pathname.split("/")||[],z=(w=e.pathname&&e.pathname.split("/")||[],t.protocol&&!Or[t.protocol]);if(z&&(t.hostname="",t.port=null,t.host&&(P[0]===""?P[0]=t.host:P.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(w[0]===""?w[0]=e.host:w.unshift(e.host)),e.host=null),W=W&&(w[0]===""||P[0]==="")),x)t.host=e.host||e.host===""?e.host:t.host,t.hostname=e.hostname||e.hostname===""?e.hostname:t.hostname,t.search=e.search,t.query=e.query,P=w;else if(w.length)P||(P=[]),P.pop(),P=P.concat(w),t.search=e.search,t.query=e.query;else if(!jt.isNullOrUndefined(e.search))return z&&(t.hostname=t.host=P.shift(),(X=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@"))&&(t.auth=X.shift(),t.host=t.hostname=X.shift())),t.search=e.search,t.query=e.query,jt.isNull(t.pathname)&&jt.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t;if(!P.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var Q=P.slice(-1)[0],M=(t.host||e.host||P.length>1)&&(Q==="."||Q==="..")||Q==="",N=0,$=P.length;$>=0;$--)(Q=P[$])==="."?P.splice($,1):Q===".."?(P.splice($,1),N++):N&&(P.splice($,1),N--);if(!W&&!k)for(;N--;N)P.unshift("..");!W||P[0]===""||P[0]&&P[0].charAt(0)==="/"||P.unshift(""),M&&P.join("/").substr(-1)!=="/"&&P.push("");var X,ae=P[0]===""||P[0]&&P[0].charAt(0)==="/";return z&&(t.hostname=t.host=ae?"":P.length?P.shift():"",(X=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@"))&&(t.auth=X.shift(),t.host=t.hostname=X.shift())),(W=W||t.host&&P.length)&&!ae&&P.unshift(""),P.length?t.pathname=P.join("/"):(t.pathname=null,t.path=null),jt.isNull(t.pathname)&&jt.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes,t.href=t.format(),t},Ot.prototype.parseHost=function(){var e=this.host,s=ol.exec(e);s&&((s=s[0])!==":"&&(this.port=s.substr(1)),e=e.substr(0,e.length-s.length)),e&&(this.hostname=e)},Ze.Url,Ze.format,Ze.resolve,Ze.resolveObject,On={},Qo=!1,Yo=Lh(),ul=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Ze.URL=typeof URL<"u"?URL:null,Ze.pathToFileURL=Wh,Ze.fileURLToPath=Dh,Ze.Url,Ze.format,Ze.resolve,Ze.resolveObject,Ze.URL,hl=92,fl=47,dl=97,pl=122,Pn=ul==="win32",gl=/\//g,ml=/%/g,bl=/\\/g,yl=/\n/g,wl=/\r/g,_l=/\t/g,vl=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Ze.URL=typeof URL<"u"?URL:null,Ze.pathToFileURL=rl,Ze.fileURLToPath=tl,El=Ze.Url,Sl=Ze.format,Al=Ze.resolve,Cl=Ze.resolveObject,Tl=Ze.parse,Il=Ze.URL,kl=92,Rl=47,Ol=97,Pl=122,xn=vl==="win32",xl=/\//g,Bl=/%/g,Nl=/\\/g,Ml=/\n/g,jl=/\r/g,Ul=/\t/g}),Go={};A(Go,{Server:()=>nt,Socket:()=>nt,Stream:()=>nt,_createServerHandle:()=>nt,_normalizeArgs:()=>nt,_setSimultaneousAccepts:()=>nt,connect:()=>nt,createConnection:()=>nt,createServer:()=>nt,default:()=>Ll,isIP:()=>nt,isIPv4:()=>nt,isIPv6:()=>nt});function nt(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var Ll,Dl=_(()=>{_e(),we(),F(),Ll={_createServerHandle:nt,_normalizeArgs:nt,_setSimultaneousAccepts:nt,connect:nt,createConnection:nt,createServer:nt,isIP:nt,isIPv4:nt,isIPv6:nt,Server:nt,Socket:nt,Stream:nt}}),Fl=E(e=>{_e(),we(),F();var s=e&&e.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(e,"__esModule",{value:!0});var t=s((Dl(),K(Go))),h=s(Xt()),p=(0,h.default)("mqttjs:tcp"),o=(n,a)=>{a.port=a.port||1883,a.hostname=a.hostname||a.host||"localhost";let{port:i,path:l}=a,g=a.hostname;return p("port %d and host %s",i,g),t.default.createConnection({port:i,host:g,path:l})};e.default=o}),$l={};A($l,{default:()=>Wl});var Wl,zh=_(()=>{_e(),we(),F(),Wl={}}),Hl=E(e=>{_e(),we(),F();var s=e&&e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var t=s((zh(),K($l))),h=s((Dl(),K(Go))),p=s(Xt()),o=(0,p.default)("mqttjs:tls"),n=(a,i)=>{i.port=i.port||8883,i.host=i.hostname||i.host||"localhost",h.default.isIP(i.host)===0&&(i.servername=i.host),i.rejectUnauthorized=i.rejectUnauthorized!==!1,delete i.path,o("port %d host %s rejectUnauthorized %b",i.port,i.host,i.rejectUnauthorized);let l=t.default.connect(i);l.on("secureConnect",()=>{i.rejectUnauthorized&&!l.authorized?l.emit("error",new Error("TLS not authorized")):l.removeListener("error",g)});function g(y){i.rejectUnauthorized&&a.emit("error",y),l.end()}return l.on("error",g),l};e.default=n}),Xo=E(e=>{_e(),we(),F(),Object.defineProperty(e,"__esModule",{value:!0}),e.BufferedDuplex=e.writev=void 0;var s=Ar(),t=(bt(),K(mt));function h(o,n){let a=new Array(o.length);for(let i=0;i<o.length;i++)typeof o[i].chunk=="string"?a[i]=t.Buffer.from(o[i].chunk,"utf8"):a[i]=o[i].chunk;this._write(t.Buffer.concat(a),"binary",n)}e.writev=h;var p=class extends s.Duplex{constructor(o,n,a){super({objectMode:!0}),this.proxy=n,this.socket=a,this.writeQueue=[],o.objectMode||(this._writev=h.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",i=>{this.push(i)})}_read(o){this.proxy.read(o)}_write(o,n,a){this.isSocketOpen?this.writeToProxy(o,n,a):this.writeQueue.push({chunk:o,encoding:n,cb:a})}_final(o){this.writeQueue=[],this.proxy.end(o)}_destroy(o,n){this.writeQueue=[],this.proxy.destroy(),n(o)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(o,n,a){this.proxy.write(o,n)===!1?this.proxy.once("drain",a):a()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:o,encoding:n,cb:a}=this.writeQueue.shift();this.writeToProxy(o,n,a)}}};e.BufferedDuplex=p}),ql=E(e=>{_e(),we(),F(),Object.defineProperty(e,"__esModule",{value:!0});var s=(bt(),K(mt)),t=Ar(),h=Xo(),p,o,n;function a(){let w=new t.Transform;return w._write=(v,S,C)=>{p.send({data:v.buffer,success(){C()},fail(x){C(new Error(x))}})},w._flush=v=>{p.close({success(){v()}})},w}function i(w){w.hostname||(w.hostname="localhost"),w.path||(w.path="/"),w.wsOptions||(w.wsOptions={})}function l(w,v){let S=w.protocol==="wxs"?"wss":"ws",C=`${S}://${w.hostname}${w.path}`;return w.port&&w.port!==80&&w.port!==443&&(C=`${S}://${w.hostname}:${w.port}${w.path}`),typeof w.transformWsUrl=="function"&&(C=w.transformWsUrl(C,w,v)),C}function g(){p.onOpen(()=>{n.socketReady()}),p.onMessage(w=>{let{data:v}=w;v instanceof ArrayBuffer?v=s.Buffer.from(v):v=s.Buffer.from(v,"utf8"),o.push(v)}),p.onClose(()=>{n.emit("close"),n.end(),n.destroy()}),p.onError(w=>{let v=new Error(w.errMsg);n.destroy(v)})}var y=(w,v)=>{if(v.hostname=v.hostname||v.host,!v.hostname)throw new Error("Could not determine host. Specify host manually.");let S=v.protocolId==="MQIsdp"&&v.protocolVersion===3?"mqttv3.1":"mqtt";i(v);let C=l(v,w);p=wx.connectSocket({url:C,protocols:[S]}),o=a(),n=new h.BufferedDuplex(v,o,p),n._destroy=(W,k)=>{p.close({success(){k&&k(W)}})};let x=n.destroy;return n.destroy=(W,k)=>(n.destroy=x,setTimeout(()=>{p.close({fail(){n._destroy(W,k)}})},0),n),g(),n};e.default=y}),Vl=E(e=>{_e(),we(),F(),Object.defineProperty(e,"__esModule",{value:!0});var s=(bt(),K(mt)),t=Ar(),h=Xo(),p,o,n,a=!1;function i(){let v=new t.Transform;return v._write=(S,C,x)=>{p.sendSocketMessage({data:S.buffer,success(){x()},fail(){x(new Error)}})},v._flush=S=>{p.closeSocket({success(){S()}})},v}function l(v){v.hostname||(v.hostname="localhost"),v.path||(v.path="/"),v.wsOptions||(v.wsOptions={})}function g(v,S){let C=v.protocol==="alis"?"wss":"ws",x=`${C}://${v.hostname}${v.path}`;return v.port&&v.port!==80&&v.port!==443&&(x=`${C}://${v.hostname}:${v.port}${v.path}`),typeof v.transformWsUrl=="function"&&(x=v.transformWsUrl(x,v,S)),x}function y(){a||(a=!0,p.onSocketOpen(()=>{n.socketReady()}),p.onSocketMessage(v=>{if(typeof v.data=="string"){let S=s.Buffer.from(v.data,"base64");o.push(S)}else{let S=new FileReader;S.addEventListener("load",()=>{let C=S.result;C instanceof ArrayBuffer?C=s.Buffer.from(C):C=s.Buffer.from(C,"utf8"),o.push(C)}),S.readAsArrayBuffer(v.data)}}),p.onSocketClose(()=>{n.end(),n.destroy()}),p.onSocketError(v=>{n.destroy(v)}))}var w=(v,S)=>{if(S.hostname=S.hostname||S.host,!S.hostname)throw new Error("Could not determine host. Specify host manually.");let C=S.protocolId==="MQIsdp"&&S.protocolVersion===3?"mqttv3.1":"mqtt";l(S);let x=g(S,v);return p=S.my,p.connectSocket({url:x,protocols:C}),o=i(),n=new h.BufferedDuplex(S,o,p),y(),n};e.default=w}),Kh=E((e,s)=>{_e(),we(),F(),s.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),zl=E(e=>{_e(),we(),F();var s=e&&e.__importDefault||function(W){return W&&W.__esModule?W:{default:W}};Object.defineProperty(e,"__esModule",{value:!0});var t=(bt(),K(mt)),h=s(Kh()),p=s(Xt()),o=Ar(),n=s(Sn()),a=Xo(),i=(0,p.default)("mqttjs:ws"),l=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function g(W,k){let P=`${W.protocol}://${W.hostname}:${W.port}${W.path}`;return typeof W.transformWsUrl=="function"&&(P=W.transformWsUrl(P,W,k)),P}function y(W){let k=W;return W.port||(W.protocol==="wss"?k.port=443:k.port=80),W.path||(k.path="/"),W.wsOptions||(k.wsOptions={}),!n.default&&W.protocol==="wss"&&l.forEach(P=>{Object.prototype.hasOwnProperty.call(W,P)&&!Object.prototype.hasOwnProperty.call(W.wsOptions,P)&&(k.wsOptions[P]=W[P])}),k}function w(W){let k=y(W);if(k.hostname||(k.hostname=k.host),!k.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let P=new URL(document.URL);k.hostname=P.hostname,k.port||(k.port=Number(P.port))}return k.objectMode===void 0&&(k.objectMode=!(k.binary===!0||k.binary===void 0)),k}function v(W,k,P){i("createWebSocket"),i(`protocol: ${P.protocolId} ${P.protocolVersion}`);let z=P.protocolId==="MQIsdp"&&P.protocolVersion===3?"mqttv3.1":"mqtt";i(`creating new Websocket for url: ${k} and protocol: ${z}`);let Q;return P.createWebsocket?Q=P.createWebsocket(k,[z],P):Q=new h.default(k,[z],P.wsOptions),Q}function S(W,k){let P=k.protocolId==="MQIsdp"&&k.protocolVersion===3?"mqttv3.1":"mqtt",z=g(k,W),Q;return k.createWebsocket?Q=k.createWebsocket(z,[P],k):Q=new WebSocket(z,[P]),Q.binaryType="arraybuffer",Q}var C=(W,k)=>{i("streamBuilder");let P=y(k);P.hostname=P.hostname||P.host||"localhost";let z=g(P,W),Q=v(W,z,P),M=h.default.createWebSocketStream(Q,P.wsOptions);return M.url=z,Q.on("close",()=>{M.destroy()}),M},x=(W,k)=>{i("browserStreamBuilder");let P,z=w(k).browserBufferSize||1024*512,Q=k.browserBufferTimeout||1e3,M=!k.objectMode,N=S(W,k),$=ae(k,ie,ke);k.objectMode||($._writev=a.writev.bind($)),$.on("close",()=>{N.close()});let X=typeof N.addEventListener<"u";N.readyState===N.OPEN?(P=$,P.socket=N):(P=new a.BufferedDuplex(k,$,N),X?N.addEventListener("open",pe):N.onopen=pe),X?(N.addEventListener("close",O),N.addEventListener("error",te),N.addEventListener("message",de)):(N.onclose=O,N.onerror=te,N.onmessage=de);function ae(ye,ee,Oe){let me=new o.Transform({objectMode:ye.objectMode});return me._write=ee,me._flush=Oe,me}function pe(){i("WebSocket onOpen"),P instanceof a.BufferedDuplex&&P.socketReady()}function O(ye){i("WebSocket onClose",ye),P.end(),P.destroy()}function te(ye){i("WebSocket onError",ye);let ee=new Error("WebSocket error");ee.event=ye,P.destroy(ee)}function de(ye){let{data:ee}=ye;ee instanceof ArrayBuffer?ee=t.Buffer.from(ee):ee=t.Buffer.from(ee,"utf8"),$.push(ee)}function ie(ye,ee,Oe){if(N.bufferedAmount>z){setTimeout(ie,Q,ye,ee,Oe);return}M&&typeof ye=="string"&&(ye=t.Buffer.from(ye,"utf8"));try{N.send(ye)}catch(me){return Oe(me)}Oe()}function ke(ye){N.close(),ye()}return P};e.default=n.default?x:C}),Jh=E(e=>{_e(),we(),F();var s=e&&e.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0}),e.connectAsync=void 0;var t=s(Xt()),h=s((Vh(),K(el))),p=s(jo()),o=s(Sn());typeof(Re==null?void 0:Re.nextTick)!="function"&&(Re.nextTick=setImmediate);var n=(0,t.default)("mqttjs"),a={};o.default?(a.wx=ql().default,a.wxs=ql().default,a.ali=Vl().default,a.alis=Vl().default):(a.mqtt=Fl().default,a.tcp=Fl().default,a.ssl=Hl().default,a.tls=a.ssl,a.mqtts=Hl().default),a.ws=zl().default,a.wss=zl().default;function i(y){let w;y.auth&&(w=y.auth.match(/^(.+):(.+)$/),w?(y.username=w[1],y.password=w[2]):y.username=y.auth)}function l(y,w){var v,S,C;if(n("connecting to an MQTT broker..."),typeof y=="object"&&!w&&(w=y,y=""),w=w||{},y&&typeof y=="string"){let k=h.default.parse(y,!0),P={};if(k.port!=null&&(P.port=Number(k.port)),P.host=k.hostname,P.query=k.query,P.auth=k.auth,P.protocol=k.protocol,P.path=k.path,P.protocol=(v=P.protocol)===null||v===void 0?void 0:v.replace(/:$/,""),w=Object.assign(Object.assign({},P),w),!w.protocol)throw new Error("Missing protocol")}if(w.unixSocket=w.unixSocket||((S=w.protocol)===null||S===void 0?void 0:S.includes("+unix")),w.unixSocket?w.protocol=w.protocol.replace("+unix",""):!((C=w.protocol)===null||C===void 0)&&C.startsWith("ws")||delete w.path,i(w),w.query&&typeof w.query.clientId=="string"&&(w.clientId=w.query.clientId),w.cert&&w.key)if(w.protocol){if(["mqtts","wss","wxs","alis"].indexOf(w.protocol)===-1)switch(w.protocol){case"mqtt":w.protocol="mqtts";break;case"ws":w.protocol="wss";break;case"wx":w.protocol="wxs";break;case"ali":w.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${w.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(!a[w.protocol]){let k=["mqtts","wss"].indexOf(w.protocol)!==-1;w.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((P,z)=>k&&z%2===0?!1:typeof a[P]=="function")[0]}if(w.clean===!1&&!w.clientId)throw new Error("Missing clientId for unclean clients");w.protocol&&(w.defaultProtocol=w.protocol);function x(k){return w.servers&&((!k._reconnectCount||k._reconnectCount===w.servers.length)&&(k._reconnectCount=0),w.host=w.servers[k._reconnectCount].host,w.port=w.servers[k._reconnectCount].port,w.protocol=w.servers[k._reconnectCount].protocol?w.servers[k._reconnectCount].protocol:w.defaultProtocol,w.hostname=w.host,k._reconnectCount++),n("calling streambuilder for",w.protocol),a[w.protocol](k,w)}let W=new p.default(x,w);return W.on("error",()=>{}),W}function g(y,w,v=!0){return new Promise((S,C)=>{let x=l(y,w),W={connect:P=>{k(),S(x)},end:()=>{k(),S(x)},error:P=>{k(),x.end(),C(P)}};v===!1&&(W.close=()=>{W.error(new Error("Couldn't connect to server"))});function k(){Object.keys(W).forEach(P=>{x.off(P,W[P])})}Object.keys(W).forEach(P=>{x.on(P,W[P])})})}e.connectAsync=g,e.default=l}),Kl=E(e=>{_e(),we(),F();var s=e&&e.__createBinding||(Object.create?function(v,S,C,x){x===void 0&&(x=C);var W=Object.getOwnPropertyDescriptor(S,C);(!W||("get"in W?!S.__esModule:W.writable||W.configurable))&&(W={enumerable:!0,get:function(){return S[C]}}),Object.defineProperty(v,x,W)}:function(v,S,C,x){x===void 0&&(x=C),v[x]=S[C]}),t=e&&e.__setModuleDefault||(Object.create?function(v,S){Object.defineProperty(v,"default",{enumerable:!0,value:S})}:function(v,S){v.default=S}),h=e&&e.__importStar||function(v){if(v&&v.__esModule)return v;var S={};if(v!=null)for(var C in v)C!=="default"&&Object.prototype.hasOwnProperty.call(v,C)&&s(S,v,C);return t(S,v),S},p=e&&e.__exportStar||function(v,S){for(var C in v)C!=="default"&&!Object.prototype.hasOwnProperty.call(S,C)&&s(S,v,C)},o=e&&e.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=e.KeepaliveManager=e.UniqueMessageIdProvider=e.DefaultMessageIdProvider=e.Store=e.MqttClient=e.connectAsync=e.connect=e.Client=void 0;var n=o(jo());e.MqttClient=n.default;var a=o(xa());e.DefaultMessageIdProvider=a.default;var i=o(Rh());e.UniqueMessageIdProvider=i.default;var l=o(Ba());e.Store=l.default;var g=h(Jh());e.connect=g.default,Object.defineProperty(e,"connectAsync",{enumerable:!0,get:function(){return g.connectAsync}});var y=o(Fa());e.KeepaliveManager=y.default,e.Client=n.default,p(jo(),e),p(Gr(),e);var w=En();Object.defineProperty(e,"ReasonCodes",{enumerable:!0,get:function(){return w.ReasonCodes}})}),Qh=E(e=>{_e(),we(),F();var s=e&&e.__createBinding||(Object.create?function(n,a,i,l){l===void 0&&(l=i);var g=Object.getOwnPropertyDescriptor(a,i);(!g||("get"in g?!a.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return a[i]}}),Object.defineProperty(n,l,g)}:function(n,a,i,l){l===void 0&&(l=i),n[l]=a[i]}),t=e&&e.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),h=e&&e.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var i in n)i!=="default"&&Object.prototype.hasOwnProperty.call(n,i)&&s(a,n,i);return t(a,n),a},p=e&&e.__exportStar||function(n,a){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(a,i)&&s(a,n,i)};Object.defineProperty(e,"__esModule",{value:!0});var o=h(Kl());e.default=o,p(Kl(),e)});return Qh()})();class pp{constructor(r,c,b){Be(this,"serverUrl");Be(this,"crisEndpoint");Be(this,"mqttTopic");Be(this,"client");Be(this,"clientId");Be(this,"messageHandlers",[]);Be(this,"closeHandlers",[r=>console.log("mqtt disconnected: "+r)]);this.serverUrl=r,this.crisEndpoint=c,this.mqttTopic=b,this.clientId="od-watcher-"+crypto.randomUUID()}async startListeningAsync(r){const c={},b=r.map(async _=>{const E=new qn(this.clientId,_.domainName,_.transactionCount),A=await this.crisEndpoint.sendOrThrowAsync(E);A?c[_.domainName]=JSON.parse(A):(console.warn(`Domain ${_.domainName} doesn't exists.`),c[_.domainName]="")});return await Promise.all(b),c}async startAsync(){try{return console.log(`connecting to mqtt with client id ${this.clientId}...`),this.client=await dp.connectAsync(this.serverUrl,{clean:!0,clientId:this.clientId}),this.client.on("message",(r,c,b)=>this.handleMessages(r,c,b)),this.client.on("disconnect",r=>this.handleClose(void 0)),console.log("connected"),!0}catch(r){return console.log("not connected"),console.error(r),!1}}handleMessages(r,c,b){if(console.log("Received MQTT message."),!r.startsWith(this.mqttTopic))return;const _=c.readInt32LE(),E=c.toString("utf-8",4,_+4),A=c.readInt32LE(4+_),q=c.toString("utf-8",8+_,8+_+A);this.messageHandlers.forEach(K=>{K(E,JSON.parse(q))})}handleClose(r){this.closeHandlers.forEach(c=>{c(r)})}onMessage(r){this.messageHandlers.push(r)}onClose(r){this.closeHandlers.push(r)}stopAsync(){return this.client.endAsync(!0)}}function mc(u,r){const{prefix:c,activator:b}=Object.assign({prefix:"~$£€"},r),_=c+">",E=c+"°",A=c+"þ";let q=null,K=null;const se=new Array;function F(xe,Ce){let qe=null;if(Ce instanceof Array)if(Ce.length>0&&Ce[0]!=null&&(qe=Ce[0][A])!==void 0){switch(Ce.splice(0,1),qe[1]){case"A":break;case"M":Ce=Object.assign(new Map,{v:Ce});break;case"S":Ce=Object.assign(new Set,{v:Ce});break;default:throw new Error("Expecting typed array to be 'A', 'M' or 'S'.")}se[qe[0]]=Ce}else K===null&&(K=new Set),K.add(Ce);else if(Ce!==null){const Fe=Ce[E];Fe!==void 0?(delete Ce[E],(qe=Ce[A])!==void 0&&(delete Ce[A],b&&(Ce=b(Ce,qe),Ce&&(q===null&&(q=new Set),q.add(Ce)))),se[Fe]=Ce):(K===null&&(K=new Set),K.add(Ce))}return Ce}function Re(xe){if(xe){if(xe instanceof Array)for(let Ce=0;Ce<xe.length;++Ce){const qe=xe[Ce];Re(qe),xe[Ce]=F(Ce,qe)}else if(typeof xe=="object")for(const Ce in xe){const qe=xe[Ce];Re(qe),xe[Ce]=F(Ce,qe)}}return xe}const Ke=typeof u=="string"?JSON.parse(u,F):F(void 0,Re(u));function Je(xe,Ce){const qe=Ce.length;for(let Fe=0;Fe<qe;++Fe){const vt=Ce[Fe];if(vt){const Ge=vt[_];Ge!==void 0&&(Ce[Fe]=xe[Ge])}}}for(let xe of se)if(q===null||!q.has(xe))if(xe instanceof Array)Je(se,xe);else if(xe instanceof Map)xe.v.forEach(Ce=>Je(se,Ce)),xe.v.forEach(Ce=>xe.set(Ce[0],Ce[1])),delete xe.v;else if(xe instanceof Set)Je(se,xe.v),xe.v.forEach(Ce=>xe.add(Ce)),delete xe.v;else for(const Ce in xe){const qe=xe[Ce];if(qe!==null){const Fe=qe[_];Fe!==void 0&&(xe[Ce]=se[Fe])}}if(K!==null)for(let xe of K)if(xe instanceof Array)Je(se,xe);else for(const Ce in xe){const qe=xe[Ce];if(qe!==null){const Fe=qe[_];Fe!==void 0&&(xe[Ce]=se[Fe])}}return Ke}class pr{constructor(r){Be(this,"_props");Be(this,"_tranNum");Be(this,"_objCount");Be(this,"_graph");Be(this,"_roots");Be(this,"_isInitialExport");if(this._isInitialExport=!0,r===void 0)this._props=[],this._tranNum=0,this._objCount=0,this._graph=[],this._roots=[];else{const c=typeof r=="string"?mc(r,{prefix:""}):r;this._props=c.P,this._tranNum=c.N,this._objCount=c.C,this._graph=c.O,this._roots=c.R.map(b=>this._graph[b])}}get transactionNumber(){return this._tranNum}get allObjectsCount(){return this._objCount}get allObjects(){function*r(c){for(const b of c)b!==null&&(yield b)}return r(this._graph)}get roots(){return this._roots}static isTransactionSetEvent(r){return r===""?!1:"E"in r}static isDomainExportEvent(r){return r===""?!1:"P"in r}static isErrorEvent(r){return r===""?!1:"Error"in r}applyWatchEvent(r){if(r===""){this._props.length=0,this._objCount=0,this._graph.length=0,this._roots.length=0,console.warn("Empty OD watch event.");return}if(r=mc(r,{prefix:""}),pr.isTransactionSetEvent(r)){const c=r.N-r.E.length+1;if(r.L)if(r.L!==this._tranNum)if(this._tranNum>r.L&&this._tranNum<r.N&&this._isInitialExport)console.warn(`Event claims last event was TN ${r.L}, current TN is ${this._tranNum}. Accepting partial event.`),this._tranNum=c-1;else throw new Error(`Event claims last event was TN ${r.L}, current TN is ${this._tranNum}`);else this._tranNum=c-1;for(let b=0;b<r.E.length;b++)this.applyEvent(c+b,r.E[b])}else if(pr.isDomainExportEvent(r))this.applyDomainExport(r);else throw r===""?new Error("The watch event received is empty. The domain doesn't exist (or has been destroyed)."):pr.isErrorEvent(r)?new Error("Domain error: "+r.Error):new Error("Unknown WatchEvent: "+JSON.stringify(r,void 0,4))}applyDomainExport(r){this._props.splice(0,this._props.length);for(let c=0;c<r.P.length;c++)this._props.push(r.P[c]);this._tranNum=r.N,this._objCount=r.C,this._graph.splice(0,this._graph.length);for(let c=0;c<r.O.length;c++)this._graph.push(r.O[c]);this._roots.splice(0,this._roots.length);for(let c=0;c<r.R.length;c++)this._roots.push(this._graph[r.R[c]]);this._isInitialExport=!0}applyEvent(r,c){if(this._tranNum+1!==r)throw new Error(`Invalid transaction number. Expected: ${this._tranNum+1}, got ${r}.`);const b=new Set,_=c;for(let E=0;E<_.length;++E){const A=_[E];switch(A[0]){case"N":{let K;switch(A[2]){case"":K={};break;case"A":K=[];break;case"M":K=new Map;break;case"S":K=new Set;break;default:throw new Error(`Unexpected Object type; ${A[2]}. Must be A, M, S or empty string.`)}b.delete(A[1]),this._graph[A[1]]=K,this._objCount++;break}case"D":{b.add(A[1]),this._objCount--;break}case"P":{if(A[2]!=this._props.length)throw new Error(`Invalid property creation event for '${A[1]}': index must be ${this._props.length}, got ${A[2]}.`);this._props.push(A[1]);break}case"C":{this._graph[A[1]][this._props[A[2]]]=this.getValue(A[3]);break}case"I":{const K=this._graph[A[1]],se=A[2],F=this.getValue(A[3]);se===K.length?K[se]=F:K.splice(se,0,F);break}case"CL":{const K=this._graph[A[1]];K instanceof Array?K.length=0:K.clear();break}case"R":{this._graph[A[1]].splice(A[2],1);break}case"S":{this._graph[A[1]].splice(A[2],1,this.getValue(A[3]));break}case"K":{this._graph[A[1]].delete(this.getValue(A[2]));break}case"M":{this._graph[A[1]].set(this.getValue(A[2]),this.getValue(A[3]));break}case"A":{this._graph[A[1]].add(this.getValue(A[2]));break}default:throw new Error(`Unexpected Event code: '${A[0]}'.`)}}b.forEach(E=>this._graph[E]=null),this._tranNum=r,this._isInitialExport=!1}getValue(r){if(r!=null){var c=r["="];if(c!==void 0)return this._graph[c]}return r}}var _s=function(u,r){return _s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,b){c.__proto__=b}||function(c,b){for(var _ in b)Object.prototype.hasOwnProperty.call(b,_)&&(c[_]=b[_])},_s(u,r)};function cn(u,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");_s(u,r);function c(){this.constructor=u}u.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}function vs(u){var r=typeof Symbol=="function"&&Symbol.iterator,c=r&&u[r],b=0;if(c)return c.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&b>=u.length&&(u=void 0),{value:u&&u[b++],done:!u}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function Es(u,r){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var b=c.call(u),_,E=[],A;try{for(;(r===void 0||r-- >0)&&!(_=b.next()).done;)E.push(_.value)}catch(q){A={error:q}}finally{try{_&&!_.done&&(c=b.return)&&c.call(b)}finally{if(A)throw A.error}}return E}function Ss(u,r,c){if(c||arguments.length===2)for(var b=0,_=r.length,E;b<_;b++)(E||!(b in r))&&(E||(E=Array.prototype.slice.call(r,0,b)),E[b]=r[b]);return u.concat(E||Array.prototype.slice.call(r))}function or(u){return typeof u=="function"}function su(u){var r=function(b){Error.call(b),b.stack=new Error().stack},c=u(r);return c.prototype=Object.create(Error.prototype),c.prototype.constructor=c,c}var is=su(function(u){return function(c){u(this),this.message=c?c.length+` errors occurred during unsubscription:
`+c.map(function(b,_){return _+1+") "+b.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=c}});function As(u,r){if(u){var c=u.indexOf(r);0<=c&&u.splice(c,1)}}var ui=function(){function u(r){this.initialTeardown=r,this.closed=!1,this._parentage=null,this._finalizers=null}return u.prototype.unsubscribe=function(){var r,c,b,_,E;if(!this.closed){this.closed=!0;var A=this._parentage;if(A)if(this._parentage=null,Array.isArray(A))try{for(var q=vs(A),K=q.next();!K.done;K=q.next()){var se=K.value;se.remove(this)}}catch(Ce){r={error:Ce}}finally{try{K&&!K.done&&(c=q.return)&&c.call(q)}finally{if(r)throw r.error}}else A.remove(this);var F=this.initialTeardown;if(or(F))try{F()}catch(Ce){E=Ce instanceof is?Ce.errors:[Ce]}var Re=this._finalizers;if(Re){this._finalizers=null;try{for(var Ke=vs(Re),Je=Ke.next();!Je.done;Je=Ke.next()){var xe=Je.value;try{bc(xe)}catch(Ce){E=E??[],Ce instanceof is?E=Ss(Ss([],Es(E)),Es(Ce.errors)):E.push(Ce)}}}catch(Ce){b={error:Ce}}finally{try{Je&&!Je.done&&(_=Ke.return)&&_.call(Ke)}finally{if(b)throw b.error}}}if(E)throw new is(E)}},u.prototype.add=function(r){var c;if(r&&r!==this)if(this.closed)bc(r);else{if(r instanceof u){if(r.closed||r._hasParent(this))return;r._addParent(this)}(this._finalizers=(c=this._finalizers)!==null&&c!==void 0?c:[]).push(r)}},u.prototype._hasParent=function(r){var c=this._parentage;return c===r||Array.isArray(c)&&c.includes(r)},u.prototype._addParent=function(r){var c=this._parentage;this._parentage=Array.isArray(c)?(c.push(r),c):c?[c,r]:r},u.prototype._removeParent=function(r){var c=this._parentage;c===r?this._parentage=null:Array.isArray(c)&&As(c,r)},u.prototype.remove=function(r){var c=this._finalizers;c&&As(c,r),r instanceof u&&r._removeParent(this)},u.EMPTY=function(){var r=new u;return r.closed=!0,r}(),u}(),au=ui.EMPTY;function lu(u){return u instanceof ui||u&&"closed"in u&&or(u.remove)&&or(u.add)&&or(u.unsubscribe)}function bc(u){or(u)?u():u.unsubscribe()}var cu={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},uu={setTimeout:function(u,r){for(var c=[],b=2;b<arguments.length;b++)c[b-2]=arguments[b];return setTimeout.apply(void 0,Ss([u,r],Es(c)))},clearTimeout:function(u){var r=uu.delegate;return((r==null?void 0:r.clearTimeout)||clearTimeout)(u)},delegate:void 0};function gp(u){uu.setTimeout(function(){throw u})}function yc(){}function Fn(u){u()}var hu=function(u){cn(r,u);function r(c){var b=u.call(this)||this;return b.isStopped=!1,c?(b.destination=c,lu(c)&&c.add(b)):b.destination=wp,b}return r.create=function(c,b,_){return new Cs(c,b,_)},r.prototype.next=function(c){this.isStopped||this._next(c)},r.prototype.error=function(c){this.isStopped||(this.isStopped=!0,this._error(c))},r.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,u.prototype.unsubscribe.call(this),this.destination=null)},r.prototype._next=function(c){this.destination.next(c)},r.prototype._error=function(c){try{this.destination.error(c)}finally{this.unsubscribe()}},r.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},r}(ui),mp=Function.prototype.bind;function os(u,r){return mp.call(u,r)}var bp=function(){function u(r){this.partialObserver=r}return u.prototype.next=function(r){var c=this.partialObserver;if(c.next)try{c.next(r)}catch(b){Mn(b)}},u.prototype.error=function(r){var c=this.partialObserver;if(c.error)try{c.error(r)}catch(b){Mn(b)}else Mn(r)},u.prototype.complete=function(){var r=this.partialObserver;if(r.complete)try{r.complete()}catch(c){Mn(c)}},u}(),Cs=function(u){cn(r,u);function r(c,b,_){var E=u.call(this)||this,A;if(or(c)||!c)A={next:c??void 0,error:b??void 0,complete:_??void 0};else{var q;E&&cu.useDeprecatedNextContext?(q=Object.create(c),q.unsubscribe=function(){return E.unsubscribe()},A={next:c.next&&os(c.next,q),error:c.error&&os(c.error,q),complete:c.complete&&os(c.complete,q)}):A=c}return E.destination=new bp(A),E}return r}(hu);function Mn(u){gp(u)}function yp(u){throw u}var wp={closed:!0,next:yc,error:yp,complete:yc},_p=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function vp(u){return u}function Ep(u){return u.length===0?vp:u.length===1?u[0]:function(c){return u.reduce(function(b,_){return _(b)},c)}}var wc=function(){function u(r){r&&(this._subscribe=r)}return u.prototype.lift=function(r){var c=new u;return c.source=this,c.operator=r,c},u.prototype.subscribe=function(r,c,b){var _=this,E=Ap(r)?r:new Cs(r,c,b);return Fn(function(){var A=_,q=A.operator,K=A.source;E.add(q?q.call(E,K):K?_._subscribe(E):_._trySubscribe(E))}),E},u.prototype._trySubscribe=function(r){try{return this._subscribe(r)}catch(c){r.error(c)}},u.prototype.forEach=function(r,c){var b=this;return c=_c(c),new c(function(_,E){var A=new Cs({next:function(q){try{r(q)}catch(K){E(K),A.unsubscribe()}},error:E,complete:_});b.subscribe(A)})},u.prototype._subscribe=function(r){var c;return(c=this.source)===null||c===void 0?void 0:c.subscribe(r)},u.prototype[_p]=function(){return this},u.prototype.pipe=function(){for(var r=[],c=0;c<arguments.length;c++)r[c]=arguments[c];return Ep(r)(this)},u.prototype.toPromise=function(r){var c=this;return r=_c(r),new r(function(b,_){var E;c.subscribe(function(A){return E=A},function(A){return _(A)},function(){return b(E)})})},u.create=function(r){return new u(r)},u}();function _c(u){var r;return(r=u??cu.Promise)!==null&&r!==void 0?r:Promise}function Sp(u){return u&&or(u.next)&&or(u.error)&&or(u.complete)}function Ap(u){return u&&u instanceof hu||Sp(u)&&lu(u)}var Cp=su(function(u){return function(){u(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),fu=function(u){cn(r,u);function r(){var c=u.call(this)||this;return c.closed=!1,c.currentObservers=null,c.observers=[],c.isStopped=!1,c.hasError=!1,c.thrownError=null,c}return r.prototype.lift=function(c){var b=new vc(this,this);return b.operator=c,b},r.prototype._throwIfClosed=function(){if(this.closed)throw new Cp},r.prototype.next=function(c){var b=this;Fn(function(){var _,E;if(b._throwIfClosed(),!b.isStopped){b.currentObservers||(b.currentObservers=Array.from(b.observers));try{for(var A=vs(b.currentObservers),q=A.next();!q.done;q=A.next()){var K=q.value;K.next(c)}}catch(se){_={error:se}}finally{try{q&&!q.done&&(E=A.return)&&E.call(A)}finally{if(_)throw _.error}}}})},r.prototype.error=function(c){var b=this;Fn(function(){if(b._throwIfClosed(),!b.isStopped){b.hasError=b.isStopped=!0,b.thrownError=c;for(var _=b.observers;_.length;)_.shift().error(c)}})},r.prototype.complete=function(){var c=this;Fn(function(){if(c._throwIfClosed(),!c.isStopped){c.isStopped=!0;for(var b=c.observers;b.length;)b.shift().complete()}})},r.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(r.prototype,"observed",{get:function(){var c;return((c=this.observers)===null||c===void 0?void 0:c.length)>0},enumerable:!1,configurable:!0}),r.prototype._trySubscribe=function(c){return this._throwIfClosed(),u.prototype._trySubscribe.call(this,c)},r.prototype._subscribe=function(c){return this._throwIfClosed(),this._checkFinalizedStatuses(c),this._innerSubscribe(c)},r.prototype._innerSubscribe=function(c){var b=this,_=this,E=_.hasError,A=_.isStopped,q=_.observers;return E||A?au:(this.currentObservers=null,q.push(c),new ui(function(){b.currentObservers=null,As(q,c)}))},r.prototype._checkFinalizedStatuses=function(c){var b=this,_=b.hasError,E=b.thrownError,A=b.isStopped;_?c.error(E):A&&c.complete()},r.prototype.asObservable=function(){var c=new wc;return c.source=this,c},r.create=function(c,b){return new vc(c,b)},r}(wc),vc=function(u){cn(r,u);function r(c,b){var _=u.call(this)||this;return _.destination=c,_.source=b,_}return r.prototype.next=function(c){var b,_;(_=(b=this.destination)===null||b===void 0?void 0:b.next)===null||_===void 0||_.call(b,c)},r.prototype.error=function(c){var b,_;(_=(b=this.destination)===null||b===void 0?void 0:b.error)===null||_===void 0||_.call(b,c)},r.prototype.complete=function(){var c,b;(b=(c=this.destination)===null||c===void 0?void 0:c.complete)===null||b===void 0||b.call(c)},r.prototype._subscribe=function(c){var b,_;return(_=(b=this.source)===null||b===void 0?void 0:b.subscribe(c))!==null&&_!==void 0?_:au},r}(fu),Ec=function(u){cn(r,u);function r(c){var b=u.call(this)||this;return b._value=c,b}return Object.defineProperty(r.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),r.prototype._subscribe=function(c){var b=u.prototype._subscribe.call(this,c);return!b.closed&&c.next(this._value),b},r.prototype.getValue=function(){var c=this,b=c.hasError,_=c.thrownError,E=c._value;if(b)throw _;return this._throwIfClosed(),E},r.prototype.next=function(c){u.prototype.next.call(this,this._value=c)},r}(fu),Pr;(function(u){u[u.Disconnected=0]="Disconnected",u[u.Connected=1]="Connected",u[u.CatchingUp=2]="CatchingUp"})(Pr||(Pr={}));class Sc{constructor(r){Be(this,"driver");Be(this,"connectionState",new Ec(Pr.Disconnected));Be(this,"connectionState$",this.connectionState.asObservable());Be(this,"stopping",!1);Be(this,"buffering",!1);Be(this,"bufferedEvents",[]);Be(this,"onCloseHandler");Be(this,"domains",{});Be(this,"onClose",r=>{this.onCloseHandler!=null&&this.onCloseHandler(r)});Be(this,"onMessage",(r,c)=>{const b=this.domains[r];if(b===void 0){console.log(`Received event for unknown domain ${r}, ignoring this event.`);return}if(this.buffering){console.log("OD Client is starting, buffering an event for "+r),this.bufferedEvents.push({domainName:r,watchEvent:c});return}try{if(pr.isTransactionSetEvent(c)){if(c.N<=b.domain.transactionNumber){console.warn(`Ignoring received past event. Current TN: ${b.domain.transactionNumber}. New TN: ${c.N}`);return}console.log(`Received OD event for domain ${r}. Current TN: ${b.domain.transactionNumber}. New TN: ${c.N}`)}else pr.isDomainExportEvent(c)&&console.log(`Received domain export for domain ${r}. New TN: ${c.N}`);b.domain.applyWatchEvent(c),b.obs.next(b.domain.roots)}catch(_){console.error(_),b.domain=new pr,this.driver.stopAsync();return}});this.driver=r,this.driver.onMessage(this.onMessage),this.driver.onClose(this.onClose)}get domainsRoots(){const r={};return Object.keys(this.domains).forEach(c=>{r[c]=this.domains[c].domain.roots}),r}start(){this.loopReconnectAsync()}async listenToDomainAsync(r){if(this.domains[r]===void 0){const c=new pr,b=new Ec(c.roots);if(this.domains[r]={domain:c,obs:b},this.connectionState.value!=Pr.Disconnected){const _=(await this.driver.startListeningAsync([{domainName:r,transactionCount:0}]))[r];c.applyWatchEvent(_)}}return this.domains[r].obs}async loopReconnectAsync(){for(;!this.stopping;)try{if(this.buffering=!0,this.bufferedEvents=[],!await this.driver.startAsync())continue;this.connectionState.next(Pr.CatchingUp);const r=await this.driver.startListeningAsync(Object.keys(this.domains).map(c=>{var b;return{domainName:c,transactionCount:((b=this.domains[c])==null?void 0:b.domain.transactionNumber)??0}}));this.buffering=!1,Object.keys(r).forEach(c=>{this.onMessage(c,r[c]);const b=this.domains[c];console.log(`Domain ${c}: ${b.domain.allObjectsCount} objects. ${b.domain.roots.length} root(s). Current Transaction Number: ${b.domain.transactionNumber}`)});for(const c of this.bufferedEvents)this.onMessage(c.domainName,c.watchEvent);this.connectionState.next(Pr.Connected),await new Promise(c=>{this.onCloseHandler=b=>{b!=null?console.log("OD driver Disconnected due to : "+b):console.log("OD driver Disconnected for an unknown reason"),c()}})}catch(r){console.error("Error in OD reconnect loop:",r)}finally{this.connectionState.next(Pr.Disconnected),this.driver.stopAsync()}}async stopAsync(){this.stopping=!0,await this.driver.stopAsync(),this.connectionState.complete()}}const Tp=ct.create(),Ts=new xd(Tp,"http://localhost:5000/.cris");(async function(){const u=new pp("ws://localhost:8080/mqtt/",Ts,"CK-OD"),r=new ps("http://localhost:5000/hub/league",Ts),c=new Sc(u);c.start();const b=new Sc(r);b.start();const _=await c.listenToDomainAsync("Test-Domain"),E=await b.listenToDomainAsync("Test-Domain"),A=document.getElementById("slider-left"),q=document.getElementById("slider-right");_.forEach(K=>{K.length<1||(console.log("Mqtt value: "+K[0].Slider),A.value=K[0].Slider)}),E.forEach(K=>{K.length<1||(console.log("SignalR value: "+K[0].Slider),q.value=K[0].Slider)})})();async function Ip(u){await Ts.sendOrThrowAsync(new Vn(u))}window.sliderUpdate=Ip;
