var fu=Object.defineProperty;var ks=t=>{throw TypeError(t)};var du=(t,e,r)=>e in t?fu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ve=(t,e,r)=>du(t,typeof e!="symbol"?e+"":e,r),ei=(t,e,r)=>e.has(t)||ks("Cannot "+r);var P=(t,e,r)=>(ei(t,e,"read from private field"),r?r.call(t):e.get(t)),xe=(t,e,r)=>e.has(t)?ks("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Ce=(t,e,r,n)=>(ei(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Ae=(t,e,r)=>(ei(t,e,"access private method"),r);var Gr=(t,e,r,n)=>({set _(s){Ce(t,e,s,r)},get _(){return P(t,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();function Ha(t,e){return function(){return t.apply(e,arguments)}}const{toString:pu}=Object.prototype,{getPrototypeOf:as}=Object,$n=(t=>e=>{const r=pu.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),At=t=>(t=t.toLowerCase(),e=>$n(e)===t),Wn=t=>e=>typeof e===t,{isArray:Tr}=Array,Wr=Wn("undefined");function gu(t){return t!==null&&!Wr(t)&&t.constructor!==null&&!Wr(t.constructor)&&bt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const qa=At("ArrayBuffer");function mu(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&qa(t.buffer),e}const bu=Wn("string"),bt=Wn("function"),Va=Wn("number"),Hn=t=>t!==null&&typeof t=="object",yu=t=>t===!0||t===!1,an=t=>{if($n(t)!=="object")return!1;const e=as(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},_u=At("Date"),wu=At("File"),vu=At("Blob"),Eu=At("FileList"),Su=t=>Hn(t)&&bt(t.pipe),Au=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||bt(t.append)&&((e=$n(t))==="formdata"||e==="object"&&bt(t.toString)&&t.toString()==="[object FormData]"))},Cu=At("URLSearchParams"),[Iu,Tu,ku,Ru]=["ReadableStream","Request","Response","Headers"].map(At),Pu=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Jr(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,s;if(typeof t!="object"&&(t=[t]),Tr(t))for(n=0,s=t.length;n<s;n++)e.call(null,t[n],n,t);else{const o=r?Object.getOwnPropertyNames(t):Object.keys(t),i=o.length;let a;for(n=0;n<i;n++)a=o[n],e.call(null,t[a],a,t)}}function za(t,e){e=e.toLowerCase();const r=Object.keys(t);let n=r.length,s;for(;n-- >0;)if(s=r[n],e===s.toLowerCase())return s;return null}const lr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ka=t=>!Wr(t)&&t!==lr;function Ei(){const{caseless:t}=Ka(this)&&this||{},e={},r=(n,s)=>{const o=t&&za(e,s)||s;an(e[o])&&an(n)?e[o]=Ei(e[o],n):an(n)?e[o]=Ei({},n):Tr(n)?e[o]=n.slice():e[o]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&Jr(arguments[n],r);return e}const Ou=(t,e,r,{allOwnKeys:n}={})=>(Jr(e,(s,o)=>{r&&bt(s)?t[o]=Ha(s,r):t[o]=s},{allOwnKeys:n}),t),xu=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Bu=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},Nu=(t,e,r,n)=>{let s,o,i;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),o=s.length;o-- >0;)i=s[o],(!n||n(i,t,e))&&!a[i]&&(e[i]=t[i],a[i]=!0);t=r!==!1&&as(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},Mu=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},ju=t=>{if(!t)return null;if(Tr(t))return t;let e=t.length;if(!Va(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},Uu=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&as(Uint8Array)),Lu=(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=n.next())&&!s.done;){const o=s.value;e.call(t,o[0],o[1])}},Du=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},Fu=At("HTMLFormElement"),$u=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),Rs=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),Wu=At("RegExp"),Ja=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};Jr(r,(s,o)=>{let i;(i=e(s,o,t))!==!1&&(n[o]=i||s)}),Object.defineProperties(t,n)},Hu=t=>{Ja(t,(e,r)=>{if(bt(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(bt(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},qu=(t,e)=>{const r={},n=s=>{s.forEach(o=>{r[o]=!0})};return Tr(t)?n(t):n(String(t).split(e)),r},Vu=()=>{},zu=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,ti="abcdefghijklmnopqrstuvwxyz",Ps="0123456789",Ya={DIGIT:Ps,ALPHA:ti,ALPHA_DIGIT:ti+ti.toUpperCase()+Ps},Ku=(t=16,e=Ya.ALPHA_DIGIT)=>{let r="";const{length:n}=e;for(;t--;)r+=e[Math.random()*n|0];return r};function Ju(t){return!!(t&&bt(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const Yu=t=>{const e=new Array(10),r=(n,s)=>{if(Hn(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[s]=n;const o=Tr(n)?[]:{};return Jr(n,(i,a)=>{const l=r(i,s+1);!Wr(l)&&(o[a]=l)}),e[s]=void 0,o}}return n};return r(t,0)},Qu=At("AsyncFunction"),Gu=t=>t&&(Hn(t)||bt(t))&&bt(t.then)&&bt(t.catch),Qa=((t,e)=>t?setImmediate:e?((r,n)=>(lr.addEventListener("message",({source:s,data:o})=>{s===lr&&o===r&&n.length&&n.shift()()},!1),s=>{n.push(s),lr.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",bt(lr.postMessage)),Xu=typeof queueMicrotask<"u"?queueMicrotask.bind(lr):typeof process<"u"&&process.nextTick||Qa,Q={isArray:Tr,isArrayBuffer:qa,isBuffer:gu,isFormData:Au,isArrayBufferView:mu,isString:bu,isNumber:Va,isBoolean:yu,isObject:Hn,isPlainObject:an,isReadableStream:Iu,isRequest:Tu,isResponse:ku,isHeaders:Ru,isUndefined:Wr,isDate:_u,isFile:wu,isBlob:vu,isRegExp:Wu,isFunction:bt,isStream:Su,isURLSearchParams:Cu,isTypedArray:Uu,isFileList:Eu,forEach:Jr,merge:Ei,extend:Ou,trim:Pu,stripBOM:xu,inherits:Bu,toFlatObject:Nu,kindOf:$n,kindOfTest:At,endsWith:Mu,toArray:ju,forEachEntry:Lu,matchAll:Du,isHTMLForm:Fu,hasOwnProperty:Rs,hasOwnProp:Rs,reduceDescriptors:Ja,freezeMethods:Hu,toObjectSet:qu,toCamelCase:$u,noop:Vu,toFiniteNumber:zu,findKey:za,global:lr,isContextDefined:Ka,ALPHABET:Ya,generateString:Ku,isSpecCompliantForm:Ju,toJSONObject:Yu,isAsyncFn:Qu,isThenable:Gu,setImmediate:Qa,asap:Xu};function Pe(t,e,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}Q.inherits(Pe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Q.toJSONObject(this.config),code:this.code,status:this.status}}});const Ga=Pe.prototype,Xa={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Xa[t]={value:t}});Object.defineProperties(Pe,Xa);Object.defineProperty(Ga,"isAxiosError",{value:!0});Pe.from=(t,e,r,n,s,o)=>{const i=Object.create(Ga);return Q.toFlatObject(t,i,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Pe.call(i,t.message,e,r,n,s),i.cause=t,i.name=t.name,o&&Object.assign(i,o),i};const Zu=null;function Si(t){return Q.isPlainObject(t)||Q.isArray(t)}function Za(t){return Q.endsWith(t,"[]")?t.slice(0,-2):t}function Os(t,e,r){return t?t.concat(e).map(function(s,o){return s=Za(s),!r&&o?"["+s+"]":s}).join(r?".":""):e}function eh(t){return Q.isArray(t)&&!t.some(Si)}const th=Q.toFlatObject(Q,{},null,function(e){return/^is[A-Z]/.test(e)});function qn(t,e,r){if(!Q.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=Q.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,w){return!Q.isUndefined(w[y])});const n=r.metaTokens,s=r.visitor||u,o=r.dots,i=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&Q.isSpecCompliantForm(e);if(!Q.isFunction(s))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(Q.isDate(m))return m.toISOString();if(!l&&Q.isBlob(m))throw new Pe("Blob is not supported. Use a Buffer instead.");return Q.isArrayBuffer(m)||Q.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function u(m,y,w){let R=m;if(m&&!w&&typeof m=="object"){if(Q.endsWith(y,"{}"))y=n?y:y.slice(0,-2),m=JSON.stringify(m);else if(Q.isArray(m)&&eh(m)||(Q.isFileList(m)||Q.endsWith(y,"[]"))&&(R=Q.toArray(m)))return y=Za(y),R.forEach(function(E,j){!(Q.isUndefined(E)||E===null)&&e.append(i===!0?Os([y],j,o):i===null?y:y+"[]",c(E))}),!1}return Si(m)?!0:(e.append(Os(w,y,o),c(m)),!1)}const d=[],g=Object.assign(th,{defaultVisitor:u,convertValue:c,isVisitable:Si});function b(m,y){if(!Q.isUndefined(m)){if(d.indexOf(m)!==-1)throw Error("Circular reference detected in "+y.join("."));d.push(m),Q.forEach(m,function(R,S){(!(Q.isUndefined(R)||R===null)&&s.call(e,R,Q.isString(S)?S.trim():S,y,g))===!0&&b(R,y?y.concat(S):[S])}),d.pop()}}if(!Q.isObject(t))throw new TypeError("data must be an object");return b(t),e}function xs(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function ls(t,e){this._pairs=[],t&&qn(t,this,e)}const el=ls.prototype;el.append=function(e,r){this._pairs.push([e,r])};el.toString=function(e){const r=e?function(n){return e.call(this,n,xs)}:xs;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function rh(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function tl(t,e,r){if(!e)return t;const n=r&&r.encode||rh,s=r&&r.serialize;let o;if(s?o=s(e,r):o=Q.isURLSearchParams(e)?e.toString():new ls(e,r).toString(n),o){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class Bs{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Q.forEach(this.handlers,function(n){n!==null&&e(n)})}}const rl={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},nh=typeof URLSearchParams<"u"?URLSearchParams:ls,ih=typeof FormData<"u"?FormData:null,oh=typeof Blob<"u"?Blob:null,sh={isBrowser:!0,classes:{URLSearchParams:nh,FormData:ih,Blob:oh},protocols:["http","https","file","blob","url","data"]},cs=typeof window<"u"&&typeof document<"u",Ai=typeof navigator=="object"&&navigator||void 0,ah=cs&&(!Ai||["ReactNative","NativeScript","NS"].indexOf(Ai.product)<0),lh=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ch=cs&&window.location.href||"http://localhost",uh=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:cs,hasStandardBrowserEnv:ah,hasStandardBrowserWebWorkerEnv:lh,navigator:Ai,origin:ch},Symbol.toStringTag,{value:"Module"})),ht={...uh,...sh};function hh(t,e){return qn(t,new ht.classes.URLSearchParams,Object.assign({visitor:function(r,n,s,o){return ht.isNode&&Q.isBuffer(r)?(this.append(n,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function fh(t){return Q.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function dh(t){const e={},r=Object.keys(t);let n;const s=r.length;let o;for(n=0;n<s;n++)o=r[n],e[o]=t[o];return e}function nl(t){function e(r,n,s,o){let i=r[o++];if(i==="__proto__")return!0;const a=Number.isFinite(+i),l=o>=r.length;return i=!i&&Q.isArray(s)?s.length:i,l?(Q.hasOwnProp(s,i)?s[i]=[s[i],n]:s[i]=n,!a):((!s[i]||!Q.isObject(s[i]))&&(s[i]=[]),e(r,n,s[i],o)&&Q.isArray(s[i])&&(s[i]=dh(s[i])),!a)}if(Q.isFormData(t)&&Q.isFunction(t.entries)){const r={};return Q.forEachEntry(t,(n,s)=>{e(fh(n),s,r,0)}),r}return null}function ph(t,e,r){if(Q.isString(t))try{return(e||JSON.parse)(t),Q.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(0,JSON.stringify)(t)}const Yr={transitional:rl,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,o=Q.isObject(e);if(o&&Q.isHTMLForm(e)&&(e=new FormData(e)),Q.isFormData(e))return s?JSON.stringify(nl(e)):e;if(Q.isArrayBuffer(e)||Q.isBuffer(e)||Q.isStream(e)||Q.isFile(e)||Q.isBlob(e)||Q.isReadableStream(e))return e;if(Q.isArrayBufferView(e))return e.buffer;if(Q.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return hh(e,this.formSerializer).toString();if((a=Q.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return qn(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return o||s?(r.setContentType("application/json",!1),ph(e)):e}],transformResponse:[function(e){const r=this.transitional||Yr.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(Q.isResponse(e)||Q.isReadableStream(e))return e;if(e&&Q.isString(e)&&(n&&!this.responseType||s)){const i=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(i)throw a.name==="SyntaxError"?Pe.from(a,Pe.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ht.classes.FormData,Blob:ht.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Q.forEach(["delete","get","head","post","put","patch"],t=>{Yr.headers[t]={}});const gh=Q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),mh=t=>{const e={};let r,n,s;return t&&t.split(`
`).forEach(function(i){s=i.indexOf(":"),r=i.substring(0,s).trim().toLowerCase(),n=i.substring(s+1).trim(),!(!r||e[r]&&gh[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},Ns=Symbol("internals");function xr(t){return t&&String(t).trim().toLowerCase()}function ln(t){return t===!1||t==null?t:Q.isArray(t)?t.map(ln):String(t)}function bh(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const yh=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function ri(t,e,r,n,s){if(Q.isFunction(n))return n.call(this,e,r);if(s&&(e=r),!!Q.isString(e)){if(Q.isString(n))return e.indexOf(n)!==-1;if(Q.isRegExp(n))return n.test(e)}}function _h(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function wh(t,e){const r=Q.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(s,o,i){return this[n].call(this,e,s,o,i)},configurable:!0})})}let ft=class{constructor(e){e&&this.set(e)}set(e,r,n){const s=this;function o(a,l,c){const u=xr(l);if(!u)throw new Error("header name must be a non-empty string");const d=Q.findKey(s,u);(!d||s[d]===void 0||c===!0||c===void 0&&s[d]!==!1)&&(s[d||l]=ln(a))}const i=(a,l)=>Q.forEach(a,(c,u)=>o(c,u,l));if(Q.isPlainObject(e)||e instanceof this.constructor)i(e,r);else if(Q.isString(e)&&(e=e.trim())&&!yh(e))i(mh(e),r);else if(Q.isHeaders(e))for(const[a,l]of e.entries())o(l,a,n);else e!=null&&o(r,e,n);return this}get(e,r){if(e=xr(e),e){const n=Q.findKey(this,e);if(n){const s=this[n];if(!r)return s;if(r===!0)return bh(s);if(Q.isFunction(r))return r.call(this,s,n);if(Q.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=xr(e),e){const n=Q.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||ri(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let s=!1;function o(i){if(i=xr(i),i){const a=Q.findKey(n,i);a&&(!r||ri(n,n[a],a,r))&&(delete n[a],s=!0)}}return Q.isArray(e)?e.forEach(o):o(e),s}clear(e){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const o=r[n];(!e||ri(this,this[o],o,e,!0))&&(delete this[o],s=!0)}return s}normalize(e){const r=this,n={};return Q.forEach(this,(s,o)=>{const i=Q.findKey(n,o);if(i){r[i]=ln(s),delete r[o];return}const a=e?_h(o):String(o).trim();a!==o&&delete r[o],r[a]=ln(s),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return Q.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=e&&Q.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[Ns]=this[Ns]={accessors:{}}).accessors,s=this.prototype;function o(i){const a=xr(i);n[a]||(wh(s,i),n[a]=!0)}return Q.isArray(e)?e.forEach(o):o(e),this}};ft.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Q.reduceDescriptors(ft.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});Q.freezeMethods(ft);function ni(t,e){const r=this||Yr,n=e||r,s=ft.from(n.headers);let o=n.data;return Q.forEach(t,function(a){o=a.call(r,o,s.normalize(),e?e.status:void 0)}),s.normalize(),o}function il(t){return!!(t&&t.__CANCEL__)}function kr(t,e,r){Pe.call(this,t??"canceled",Pe.ERR_CANCELED,e,r),this.name="CanceledError"}Q.inherits(kr,Pe,{__CANCEL__:!0});function ol(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new Pe("Request failed with status code "+r.status,[Pe.ERR_BAD_REQUEST,Pe.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function vh(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Eh(t,e){t=t||10;const r=new Array(t),n=new Array(t);let s=0,o=0,i;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=n[o];i||(i=c),r[s]=l,n[s]=c;let d=o,g=0;for(;d!==s;)g+=r[d++],d=d%t;if(s=(s+1)%t,s===o&&(o=(o+1)%t),c-i<e)return;const b=u&&c-u;return b?Math.round(g*1e3/b):void 0}}function Sh(t,e){let r=0,n=1e3/e,s,o;const i=(c,u=Date.now())=>{r=u,s=null,o&&(clearTimeout(o),o=null),t.apply(null,c)};return[(...c)=>{const u=Date.now(),d=u-r;d>=n?i(c,u):(s=c,o||(o=setTimeout(()=>{o=null,i(s)},n-d)))},()=>s&&i(s)]}const yn=(t,e,r=3)=>{let n=0;const s=Eh(50,250);return Sh(o=>{const i=o.loaded,a=o.lengthComputable?o.total:void 0,l=i-n,c=s(l),u=i<=a;n=i;const d={loaded:i,total:a,progress:a?i/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-i)/c:void 0,event:o,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(d)},r)},Ms=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},js=t=>(...e)=>Q.asap(()=>t(...e)),Ah=ht.hasStandardBrowserEnv?function(){const e=ht.navigator&&/(msie|trident)/i.test(ht.navigator.userAgent),r=document.createElement("a");let n;function s(o){let i=o;return e&&(r.setAttribute("href",i),i=r.href),r.setAttribute("href",i),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=s(window.location.href),function(i){const a=Q.isString(i)?s(i):i;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}(),Ch=ht.hasStandardBrowserEnv?{write(t,e,r,n,s,o){const i=[t+"="+encodeURIComponent(e)];Q.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),Q.isString(n)&&i.push("path="+n),Q.isString(s)&&i.push("domain="+s),o===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Ih(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Th(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function sl(t,e){return t&&!Ih(e)?Th(t,e):e}const Us=t=>t instanceof ft?{...t}:t;function br(t,e){e=e||{};const r={};function n(c,u,d){return Q.isPlainObject(c)&&Q.isPlainObject(u)?Q.merge.call({caseless:d},c,u):Q.isPlainObject(u)?Q.merge({},u):Q.isArray(u)?u.slice():u}function s(c,u,d){if(Q.isUndefined(u)){if(!Q.isUndefined(c))return n(void 0,c,d)}else return n(c,u,d)}function o(c,u){if(!Q.isUndefined(u))return n(void 0,u)}function i(c,u){if(Q.isUndefined(u)){if(!Q.isUndefined(c))return n(void 0,c)}else return n(void 0,u)}function a(c,u,d){if(d in e)return n(c,u);if(d in t)return n(void 0,c)}const l={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(c,u)=>s(Us(c),Us(u),!0)};return Q.forEach(Object.keys(Object.assign({},t,e)),function(u){const d=l[u]||s,g=d(t[u],e[u],u);Q.isUndefined(g)&&d!==a||(r[u]=g)}),r}const al=t=>{const e=br({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:o,headers:i,auth:a}=e;e.headers=i=ft.from(i),e.url=tl(sl(e.baseURL,e.url),t.params,t.paramsSerializer),a&&i.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(Q.isFormData(r)){if(ht.hasStandardBrowserEnv||ht.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((l=i.getContentType())!==!1){const[c,...u]=l?l.split(";").map(d=>d.trim()).filter(Boolean):[];i.setContentType([c||"multipart/form-data",...u].join("; "))}}if(ht.hasStandardBrowserEnv&&(n&&Q.isFunction(n)&&(n=n(e)),n||n!==!1&&Ah(e.url))){const c=s&&o&&Ch.read(o);c&&i.set(s,c)}return e},kh=typeof XMLHttpRequest<"u",Rh=kh&&function(t){return new Promise(function(r,n){const s=al(t);let o=s.data;const i=ft.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=s,u,d,g,b,m;function y(){b&&b(),m&&m(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let w=new XMLHttpRequest;w.open(s.method.toUpperCase(),s.url,!0),w.timeout=s.timeout;function R(){if(!w)return;const E=ft.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),U={data:!a||a==="text"||a==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:E,config:t,request:w};ol(function(I){r(I),y()},function(I){n(I),y()},U),w=null}"onloadend"in w?w.onloadend=R:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(R)},w.onabort=function(){w&&(n(new Pe("Request aborted",Pe.ECONNABORTED,t,w)),w=null)},w.onerror=function(){n(new Pe("Network Error",Pe.ERR_NETWORK,t,w)),w=null},w.ontimeout=function(){let j=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const U=s.transitional||rl;s.timeoutErrorMessage&&(j=s.timeoutErrorMessage),n(new Pe(j,U.clarifyTimeoutError?Pe.ETIMEDOUT:Pe.ECONNABORTED,t,w)),w=null},o===void 0&&i.setContentType(null),"setRequestHeader"in w&&Q.forEach(i.toJSON(),function(j,U){w.setRequestHeader(U,j)}),Q.isUndefined(s.withCredentials)||(w.withCredentials=!!s.withCredentials),a&&a!=="json"&&(w.responseType=s.responseType),c&&([g,m]=yn(c,!0),w.addEventListener("progress",g)),l&&w.upload&&([d,b]=yn(l),w.upload.addEventListener("progress",d),w.upload.addEventListener("loadend",b)),(s.cancelToken||s.signal)&&(u=E=>{w&&(n(!E||E.type?new kr(null,t,w):E),w.abort(),w=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const S=vh(s.url);if(S&&ht.protocols.indexOf(S)===-1){n(new Pe("Unsupported protocol "+S+":",Pe.ERR_BAD_REQUEST,t));return}w.send(o||null)})},Ph=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,s;const o=function(c){if(!s){s=!0,a();const u=c instanceof Error?c:this.reason;n.abort(u instanceof Pe?u:new kr(u instanceof Error?u.message:u))}};let i=e&&setTimeout(()=>{i=null,o(new Pe(`timeout ${e} of ms exceeded`,Pe.ETIMEDOUT))},e);const a=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(o):c.removeEventListener("abort",o)}),t=null)};t.forEach(c=>c.addEventListener("abort",o));const{signal:l}=n;return l.unsubscribe=()=>Q.asap(a),l}},Oh=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,s;for(;n<r;)s=n+e,yield t.slice(n,s),n=s},xh=async function*(t,e){for await(const r of Bh(t))yield*Oh(r,e)},Bh=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},Ls=(t,e,r,n)=>{const s=xh(t,e);let o=0,i,a=l=>{i||(i=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await s.next();if(c){a(),l.close();return}let d=u.byteLength;if(r){let g=o+=d;r(g)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),s.return()}},{highWaterMark:2})},Vn=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",ll=Vn&&typeof ReadableStream=="function",Nh=Vn&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),cl=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Mh=ll&&cl(()=>{let t=!1;const e=new Request(ht.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),Ds=64*1024,Ci=ll&&cl(()=>Q.isReadableStream(new Response("").body)),_n={stream:Ci&&(t=>t.body)};Vn&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!_n[e]&&(_n[e]=Q.isFunction(t[e])?r=>r[e]():(r,n)=>{throw new Pe(`Response type '${e}' is not supported`,Pe.ERR_NOT_SUPPORT,n)})})})(new Response);const jh=async t=>{if(t==null)return 0;if(Q.isBlob(t))return t.size;if(Q.isSpecCompliantForm(t))return(await new Request(ht.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Q.isArrayBufferView(t)||Q.isArrayBuffer(t))return t.byteLength;if(Q.isURLSearchParams(t)&&(t=t+""),Q.isString(t))return(await Nh(t)).byteLength},Uh=async(t,e)=>{const r=Q.toFiniteNumber(t.getContentLength());return r??jh(e)},Lh=Vn&&(async t=>{let{url:e,method:r,data:n,signal:s,cancelToken:o,timeout:i,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:g}=al(t);c=c?(c+"").toLowerCase():"text";let b=Ph([s,o&&o.toAbortSignal()],i),m;const y=b&&b.unsubscribe&&(()=>{b.unsubscribe()});let w;try{if(l&&Mh&&r!=="get"&&r!=="head"&&(w=await Uh(u,n))!==0){let U=new Request(e,{method:"POST",body:n,duplex:"half"}),T;if(Q.isFormData(n)&&(T=U.headers.get("content-type"))&&u.setContentType(T),U.body){const[I,N]=Ms(w,yn(js(l)));n=Ls(U.body,Ds,I,N)}}Q.isString(d)||(d=d?"include":"omit");const R="credentials"in Request.prototype;m=new Request(e,{...g,signal:b,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:R?d:void 0});let S=await fetch(m);const E=Ci&&(c==="stream"||c==="response");if(Ci&&(a||E&&y)){const U={};["status","statusText","headers"].forEach(W=>{U[W]=S[W]});const T=Q.toFiniteNumber(S.headers.get("content-length")),[I,N]=a&&Ms(T,yn(js(a),!0))||[];S=new Response(Ls(S.body,Ds,I,()=>{N&&N(),y&&y()}),U)}c=c||"text";let j=await _n[Q.findKey(_n,c)||"text"](S,t);return!E&&y&&y(),await new Promise((U,T)=>{ol(U,T,{data:j,headers:ft.from(S.headers),status:S.status,statusText:S.statusText,config:t,request:m})})}catch(R){throw y&&y(),R&&R.name==="TypeError"&&/fetch/i.test(R.message)?Object.assign(new Pe("Network Error",Pe.ERR_NETWORK,t,m),{cause:R.cause||R}):Pe.from(R,R&&R.code,t,m)}}),Ii={http:Zu,xhr:Rh,fetch:Lh};Q.forEach(Ii,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Fs=t=>`- ${t}`,Dh=t=>Q.isFunction(t)||t===null||t===!1,ul={getAdapter:t=>{t=Q.isArray(t)?t:[t];const{length:e}=t;let r,n;const s={};for(let o=0;o<e;o++){r=t[o];let i;if(n=r,!Dh(r)&&(n=Ii[(i=String(r)).toLowerCase()],n===void 0))throw new Pe(`Unknown adapter '${i}'`);if(n)break;s[i||"#"+o]=n}if(!n){const o=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let i=e?o.length>1?`since :
`+o.map(Fs).join(`
`):" "+Fs(o[0]):"as no adapter specified";throw new Pe("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return n},adapters:Ii};function ii(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new kr(null,t)}function $s(t){return ii(t),t.headers=ft.from(t.headers),t.data=ni.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ul.getAdapter(t.adapter||Yr.adapter)(t).then(function(n){return ii(t),n.data=ni.call(t,t.transformResponse,n),n.headers=ft.from(n.headers),n},function(n){return il(n)||(ii(t),n&&n.response&&(n.response.data=ni.call(t,t.transformResponse,n.response),n.response.headers=ft.from(n.response.headers))),Promise.reject(n)})}const hl="1.7.7",us={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{us[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const Ws={};us.transitional=function(e,r,n){function s(o,i){return"[Axios v"+hl+"] Transitional option '"+o+"'"+i+(n?". "+n:"")}return(o,i,a)=>{if(e===!1)throw new Pe(s(i," has been removed"+(r?" in "+r:"")),Pe.ERR_DEPRECATED);return r&&!Ws[i]&&(Ws[i]=!0,console.warn(s(i," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(o,i,a):!0}};function Fh(t,e,r){if(typeof t!="object")throw new Pe("options must be an object",Pe.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let s=n.length;for(;s-- >0;){const o=n[s],i=e[o];if(i){const a=t[o],l=a===void 0||i(a,o,t);if(l!==!0)throw new Pe("option "+o+" must be "+l,Pe.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Pe("Unknown option "+o,Pe.ERR_BAD_OPTION)}}const Ti={assertOptions:Fh,validators:us},Vt=Ti.validators;let hr=class{constructor(e){this.defaults=e,this.interceptors={request:new Bs,response:new Bs}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let s;Error.captureStackTrace?Error.captureStackTrace(s={}):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=br(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:o}=r;n!==void 0&&Ti.assertOptions(n,{silentJSONParsing:Vt.transitional(Vt.boolean),forcedJSONParsing:Vt.transitional(Vt.boolean),clarifyTimeoutError:Vt.transitional(Vt.boolean)},!1),s!=null&&(Q.isFunction(s)?r.paramsSerializer={serialize:s}:Ti.assertOptions(s,{encode:Vt.function,serialize:Vt.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let i=o&&Q.merge(o.common,o[r.method]);o&&Q.forEach(["delete","get","head","post","put","patch","common"],m=>{delete o[m]}),r.headers=ft.concat(i,o);const a=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(r)===!1||(l=l&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});const c=[];this.interceptors.response.forEach(function(y){c.push(y.fulfilled,y.rejected)});let u,d=0,g;if(!l){const m=[$s.bind(this),void 0];for(m.unshift.apply(m,a),m.push.apply(m,c),g=m.length,u=Promise.resolve(r);d<g;)u=u.then(m[d++],m[d++]);return u}g=a.length;let b=r;for(d=0;d<g;){const m=a[d++],y=a[d++];try{b=m(b)}catch(w){y.call(this,w);break}}try{u=$s.call(this,b)}catch(m){return Promise.reject(m)}for(d=0,g=c.length;d<g;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=br(this.defaults,e);const r=sl(e.baseURL,e.url);return tl(r,e.params,e.paramsSerializer)}};Q.forEach(["delete","get","head","options"],function(e){hr.prototype[e]=function(r,n){return this.request(br(n||{},{method:e,url:r,data:(n||{}).data}))}});Q.forEach(["post","put","patch"],function(e){function r(n){return function(o,i,a){return this.request(br(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}hr.prototype[e]=r(),hr.prototype[e+"Form"]=r(!0)});let $h=class fl{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const n=this;this.promise.then(s=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](s);n._listeners=null}),this.promise.then=s=>{let o;const i=new Promise(a=>{n.subscribe(a),o=a}).then(s);return i.cancel=function(){n.unsubscribe(o)},i},e(function(o,i,a){n.reason||(n.reason=new kr(o,i,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new fl(function(s){e=s}),cancel:e}}};function Wh(t){return function(r){return t.apply(null,r)}}function Hh(t){return Q.isObject(t)&&t.isAxiosError===!0}const ki={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ki).forEach(([t,e])=>{ki[e]=t});function dl(t){const e=new hr(t),r=Ha(hr.prototype.request,e);return Q.extend(r,hr.prototype,e,{allOwnKeys:!0}),Q.extend(r,e,null,{allOwnKeys:!0}),r.create=function(s){return dl(br(t,s))},r}const Ye=dl(Yr);Ye.Axios=hr;Ye.CanceledError=kr;Ye.CancelToken=$h;Ye.isCancel=il;Ye.VERSION=hl;Ye.toFormData=qn;Ye.AxiosError=Pe;Ye.Cancel=Ye.CanceledError;Ye.all=function(e){return Promise.all(e)};Ye.spread=Wh;Ye.isAxiosError=Hh;Ye.mergeConfig=br;Ye.AxiosHeaders=ft;Ye.formToJSON=t=>nl(Q.isHTMLForm(t)?new FormData(t):t);Ye.getAdapter=ul.getAdapter;Ye.HttpStatusCode=ki;Ye.default=Ye;const{Axios:Wp,AxiosError:Hp,CanceledError:qp,isCancel:Vp,CancelToken:zp,VERSION:Kp,all:Jp,Cancel:Yp,isAxiosError:Qp,spread:Gp,toFormData:Xp,AxiosHeaders:qh,HttpStatusCode:Zp,formToJSON:eg,getAdapter:tg,mergeConfig:rg}=Ye;class wn extends Error{constructor(r,n,s,o,i,a){super(s[0]);ve(this,"errorType");ve(this,"errors");ve(this,"validationMessages");ve(this,"innerError");ve(this,"logKey");ve(this,"command");this.command=r,this.errorType=n?"ValidationError":o?"CommunicationError":"ExecutionError",this.innerError=o,this.errors=s,this.validationMessages=i,this.logKey=a}}var On;const xn=class xn{constructor(e){ve(this,"sliderValue");ve(this,"_brand");this.sliderValue=e??0,Me["CK.Observable.ServerSample.App.ISliderCommand"].set(this)}get commandModel(){return P(xn,On)}};On=new WeakMap,xe(xn,On,{applyAmbientValues(e,r,n){}});let vn=xn;var Bn;const Nn=class Nn{constructor(e,r,n){ve(this,"mqttClientId");ve(this,"domainName");ve(this,"transactionNumber");ve(this,"_brand");this.mqttClientId=e??"",this.domainName=r??"",this.transactionNumber=n??0,Me["CK.Observable.MQTTWatcher.IMQTTObservableWatcherStartOrRestartCommand"].set(this)}get commandModel(){return P(Nn,Bn)}};Bn=new WeakMap,xe(Nn,Bn,{applyAmbientValues(e,r,n){}});let En=Nn;var Mn;const jn=class jn{constructor(e,r,n){ve(this,"clientId");ve(this,"domainName");ve(this,"transactionNumber");ve(this,"_brand");this.clientId=e??"",this.domainName=r??"",this.transactionNumber=n??0,Me["CK.Observable.SignalRWatcher.ISignalRObservableWatcherStartOrRestartCommand"].set(this)}get commandModel(){return P(jn,Mn)}};Mn=new WeakMap,xe(jn,Mn,{applyAmbientValues(e,r,n){}});let Sn=jn;class Vh{constructor(e,r,n){ve(this,"result");ve(this,"validationMessages");ve(this,"correlationId");ve(this,"_brand");this.result=e,this.validationMessages=r,this.correlationId=n,Me.AspNetResult.set(this)}}class pl{constructor(e,r,n){ve(this,"isValidationError");ve(this,"errors");ve(this,"logKey");ve(this,"_brand");this.isValidationError=e??!1,this.errors=r??[],this.logKey=n,Me.AspNetCrisResultError.set(this)}}class zh{constructor(e,r,n,s){ve(this,"currentCultureName");ve(this,"actorId");ve(this,"actualActorId");ve(this,"deviceId");ve(this,"_brand");this.currentCultureName=e??"",this.actorId=r??0,this.actualActorId=n??0,this.deviceId=s??"",Me["CK.Cris.AmbientValues.IAmbientValues"].set(this)}}var Qt;(function(t){t[t.None=0]="None",t[t.Info=4]="Info",t[t.Warn=8]="Warn",t[t.Error=16]="Error"})(Qt||(Qt={}));var Un;const Nt=class Nt{constructor(e,r,n=0){ve(this,"level");ve(this,"message");ve(this,"depth");this.level=e,this.message=r,this.depth=n,Me.SimpleUserMessage.set(this)}static get invalid(){return P(Nt,Un)??Ce(Nt,Un,new Nt(Qt.None,"",0))}toString(){return"["+Qt[this.level]+"] "+this.message}toJSON(){return this.level!==Qt.None?[this.level,this.message,this.depth]:[0]}static parse(e){if(e instanceof Array){if(e.length===1){if(e[0]===0)return Nt.invalid}else if(e.length==3){const r=e[0];if(r===Qt.Info||r===Qt.Warn||r===Qt.Error){const n=e[1];if(typeof n=="string"){const s=e[2];if(typeof s=="number"&&s>=0&&s<=255)return new Nt(r,n,s)}}}}throw new Error("Unable to parse '{{o}}' as SimpleUserMessage.")}};Un=new WeakMap,xe(Nt,Un);let Ri=Nt;const ct=Symbol.for("CK.CTSType"),Me={get typeFilterName(){return"TypeScriptN"},toTypedJson(t){if(t==null)return null;const e=t[ct];if(!e)throw new Error("Untyped object. A type must be specified with CTSType.");return[e.name,e.json(t)]},fromTypedJson(t){if(t==null)return;if(!(t instanceof Array&&t.length===2))throw new Error("Expected 2-cells array.");const e=Me[t[0]];if(!e)throw new Error(`Invalid type name: ${t[0]}.`);if(!e.set)throw new Error(`Type name '${t[0]}' is not serializable.`);const r=e.nosj(t[1]);return r!==null&&typeof r=="object"?e.set(r):r},stringify(t,e=!0){const r=Me.toTypedJson(t);return JSON.stringify(e?r:r[1])},parse(t){return Me.fromTypedJson(JSON.parse(t))},"CK.Observable.ServerSample.App.ISliderCommand":{name:"CK.Observable.ServerSample.App.ISliderCommand",set(t){return t[ct]=this,t},json(t){return t},nosj(t){if(t!=null)return new vn(Me.float.nosj(t.sliderValue))}},"CK.Observable.MQTTWatcher.IMQTTObservableWatcherStartOrRestartCommand":{name:"CK.Observable.MQTTWatcher.IMQTTObservableWatcherStartOrRestartCommand",set(t){return t[ct]=this,t},json(t){return t},nosj(t){if(t!=null)return new En(Me.string.nosj(t.mqttClientId),Me.string.nosj(t.domainName),Me.int.nosj(t.transactionNumber))}},"CK.Observable.SignalRWatcher.ISignalRObservableWatcherStartOrRestartCommand":{name:"CK.Observable.SignalRWatcher.ISignalRObservableWatcherStartOrRestartCommand",set(t){return t[ct]=this,t},json(t){return t},nosj(t){if(t!=null)return new Sn(Me.string.nosj(t.clientId),Me.string.nosj(t.domainName),Me.int.nosj(t.transactionNumber))}},AspNetResult:{name:"AspNetResult",set(t){return t[ct]=this,t},json(t){if(!t)return null;let e={};return e.result=Me.toTypedJson(t.result),e.validationMessages=t.validationMessages,e.correlationId=t.correlationId,e},nosj(t){if(t!=null)return new Vh(Me.fromTypedJson(t.result),Me["L(SimpleUserMessage)"].nosj(t.validationMessages),Me.string.nosj(t.correlationId))}},AspNetCrisResultError:{name:"AspNetCrisResultError",set(t){return t[ct]=this,t},json(t){return t},nosj(t){if(t!=null)return new pl(Me.bool.nosj(t.isValidationError),Me["L(string)"].nosj(t.errors),Me.string.nosj(t.logKey))}},"CK.Cris.AmbientValues.IAmbientValues":{name:"CK.Cris.AmbientValues.IAmbientValues",set(t){return t[ct]=this,t},json(t){return t},nosj(t){if(t!=null)return new zh(Me.string.nosj(t.currentCultureName),Me.int.nosj(t.actorId),Me.int.nosj(t.actualActorId),Me.string.nosj(t.deviceId))}},"CK.Cris.AmbientValues.IAmbientValuesCollectCommand":{name:"CK.Cris.AmbientValues.IAmbientValuesCollectCommand",set(t){return t[ct]=this,t},json(t){return t},nosj(t){if(t!=null)return new An}},"CK.Cris.ICommand<CK.Cris.AmbientValues.IAmbientValues>":{name:"CK.Cris.ICommand<CK.Cris.AmbientValues.IAmbientValues>"},string:{name:"string",set(t){return t=Object(t),t[ct]=this,t},json(t){return t},nosj(t){return t??void 0}},"CK.Cris.ICommand<string>":{name:"CK.Cris.ICommand<string>"},"CK.Cris.ICommand":{name:"CK.Cris.ICommand"},"CK.Cris.IAbstractCommand":{name:"CK.Cris.IAbstractCommand"},"CK.Cris.ICrisPoco":{name:"CK.Cris.ICrisPoco"},"CK.Core.IPoco":{name:"CK.Core.IPoco"},int:{name:"int",set(t){return t=Object(t),t[ct]=this,t},json(t){return t},nosj(t){return t??void 0}},bool:{name:"bool",set(t){return t=Object(t),t[ct]=this,t},json(t){return t},nosj(t){return t??void 0}},object:{name:"object"},SimpleUserMessage:{name:"SimpleUserMessage",set(t){return t[ct]=this,t},json(t){return t},nosj(t){return t!=null?Ri.parse(t):void 0}},"L(SimpleUserMessage)":{name:"L(SimpleUserMessage)",set(t){return t[ct]=this,t},json(t){return t},nosj(t){if(t==null)return;if(!(t instanceof Array))throw new Error("Expected Array.");const e=Me.SimpleUserMessage;return t.map(e.nosj)}},"L(string?)":{name:"L(string?)",set(t){return t[ct]=this,t},json(t){return t},nosj(t){if(t==null)return;if(!(t instanceof Array))throw new Error("Expected Array.");const e=Me.string;return t.map(e.nosj)}},"L(string)":{name:"L(string)",json(t){return t},nosj(t){if(t==null)return;if(!(t instanceof Array))throw new Error("Expected Array.");const e=Me.string;return t.map(e.nosj)}},float:{name:"float",set(t){return t=Object(t),t[ct]=this,t},json(t){return t},nosj(t){return t??void 0}}};var Ln;const Dn=class Dn{constructor(){ve(this,"_brand");Me["CK.Cris.AmbientValues.IAmbientValuesCollectCommand"].set(this)}get commandModel(){return P(Dn,Ln)}};Ln=new WeakMap,xe(Dn,Ln,{applyAmbientValues(e,r,n){}});let An=Dn;class Kh{constructor(){ve(this,"currentCultureName");ve(this,"actorId");ve(this,"actualActorId");ve(this,"deviceId");this.currentCultureName=null,this.actorId=null,this.actualActorId=null,this.deviceId=null}}class Jh{constructor(){ve(this,"_ambientValuesRequest");ve(this,"_ambientValues");ve(this,"_subscribers");ve(this,"_isConnected");ve(this,"ambientValuesOverride");this.ambientValuesOverride=new Kh,this._isConnected=!1,this._subscribers=new Set}get isConnected(){return this._isConnected}addOnIsConnectedChanged(e){e&&this._subscribers.add(e)}removeOnIsConnectedChange(e){return this._subscribers.delete(e)}setIsConnected(e){this._isConnected!==e&&(this._isConnected=e,e||this.updateAmbientValuesAsync(),this._subscribers.forEach(r=>r(this)))}updateAmbientValuesAsync(){return this._ambientValuesRequest?this._ambientValuesRequest:(this._ambientValues=void 0,this._ambientValuesRequest=this.waitForAmbientValuesAsync())}async sendAsync(e){let r=this._ambientValues;return r===void 0&&(r=await this.updateAmbientValuesAsync()),e.commandModel.applyAmbientValues(e,r,this.ambientValuesOverride),await this.doSendAsync(e)}async sendOrThrowAsync(e){const r=await this.sendAsync(e);if(r.result instanceof wn)throw r.result;return r.result}async waitForAmbientValuesAsync(){for(;;){var e=await this.doSendAsync(new An);if(e.result instanceof wn)console.error("Error while getting AmbientValues. Retrying.",e.result),this.setIsConnected(!1);else return this._ambientValuesRequest=void 0,this._ambientValues=e.result,this.setIsConnected(!0),this._ambientValues}}}const Yh={responseType:"text",headers:{common:new qh({"Content-Type":"application/json"})}};var Vr,zr,Kr;class Qh extends Jh{constructor(r,n,s=Me.typeFilterName){super();xe(this,Vr);xe(this,zr);xe(this,Kr);ve(this,"axiosConfig");Ce(this,Vr,r),Ce(this,zr,s),Ce(this,Kr,n+(n.indexOf("?")<0?"?":"&")+"TypeFilterName="+s),this.axiosConfig=Yh}get typeFilterName(){return P(this,zr)}async doSendAsync(r){try{const s=JSON.stringify(Me.toTypedJson(r)),o=await P(this,Vr).post(P(this,Kr),s,this.axiosConfig),i=Me.AspNetResult.nosj(JSON.parse(o.data));let a=i.result;return a instanceof pl&&(a=new wn(r,a.isValidationError,a.errors,void 0,i.validationMessages,a.logKey)),{command:r,result:a,validationMessages:i.validationMessages,correlationId:i.correlationId}}catch(s){var n;return s instanceof Error?n=s:(console.error(s),n=new Error(`Unhandled error ${s}.`)),this.setIsConnected(!1),{command:r,result:new wn(r,!1,["Communication error"],n)}}}}Vr=new WeakMap,zr=new WeakMap,Kr=new WeakMap;class fr extends Error{constructor(e,r){const n=new.target.prototype;super(`${e}: Status code '${r}'`),this.statusCode=r,this.__proto__=n}}class hs extends Error{constructor(e="A timeout occurred."){const r=new.target.prototype;super(e),this.__proto__=r}}class St extends Error{constructor(e="An abort occurred."){const r=new.target.prototype;super(e),this.__proto__=r}}class Gh extends Error{constructor(e,r){const n=new.target.prototype;super(e),this.transport=r,this.errorType="UnsupportedTransportError",this.__proto__=n}}class Xh extends Error{constructor(e,r){const n=new.target.prototype;super(e),this.transport=r,this.errorType="DisabledTransportError",this.__proto__=n}}class Zh extends Error{constructor(e,r){const n=new.target.prototype;super(e),this.transport=r,this.errorType="FailedToStartTransportError",this.__proto__=n}}class Hs extends Error{constructor(e){const r=new.target.prototype;super(e),this.errorType="FailedToNegotiateWithServerError",this.__proto__=r}}class ef extends Error{constructor(e,r){const n=new.target.prototype;super(e),this.innerErrors=r,this.__proto__=n}}class gl{constructor(e,r,n){this.statusCode=e,this.statusText=r,this.content=n}}class zn{get(e,r){return this.send({...r,method:"GET",url:e})}post(e,r){return this.send({...r,method:"POST",url:e})}delete(e,r){return this.send({...r,method:"DELETE",url:e})}getCookieString(e){return""}}var ie;(function(t){t[t.Trace=0]="Trace",t[t.Debug=1]="Debug",t[t.Information=2]="Information",t[t.Warning=3]="Warning",t[t.Error=4]="Error",t[t.Critical=5]="Critical",t[t.None=6]="None"})(ie||(ie={}));class Hr{constructor(){}log(e,r){}}Hr.instance=new Hr;const tf="8.0.7";class Ge{static isRequired(e,r){if(e==null)throw new Error(`The '${r}' argument is required.`)}static isNotEmpty(e,r){if(!e||e.match(/^\s*$/))throw new Error(`The '${r}' argument should not be empty.`)}static isIn(e,r,n){if(!(e in r))throw new Error(`Unknown ${n} value: ${e}.`)}}class ze{static get isBrowser(){return!ze.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!ze.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!ze.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function qr(t,e){let r="";return yr(t)?(r=`Binary data of length ${t.byteLength}`,e&&(r+=`. Content: '${rf(t)}'`)):typeof t=="string"&&(r=`String data of length ${t.length}`,e&&(r+=`. Content: '${t}'`)),r}function rf(t){const e=new Uint8Array(t);let r="";return e.forEach(n=>{const s=n<16?"0":"";r+=`0x${s}${n.toString(16)} `}),r.substr(0,r.length-1)}function yr(t){return t&&typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||t.constructor&&t.constructor.name==="ArrayBuffer")}async function ml(t,e,r,n,s,o){const i={},[a,l]=Ir();i[a]=l,t.log(ie.Trace,`(${e} transport) sending data. ${qr(s,o.logMessageContent)}.`);const c=yr(s)?"arraybuffer":"text",u=await r.post(n,{content:s,headers:{...i,...o.headers},responseType:c,timeout:o.timeout,withCredentials:o.withCredentials});t.log(ie.Trace,`(${e} transport) request complete. Response status: ${u.statusCode}.`)}function nf(t){return t===void 0?new Cn(ie.Information):t===null?Hr.instance:t.log!==void 0?t:new Cn(t)}class of{constructor(e,r){this._subject=e,this._observer=r}dispose(){const e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(r=>{})}}class Cn{constructor(e){this._minLevel=e,this.out=console}log(e,r){if(e>=this._minLevel){const n=`[${new Date().toISOString()}] ${ie[e]}: ${r}`;switch(e){case ie.Critical:case ie.Error:this.out.error(n);break;case ie.Warning:this.out.warn(n);break;case ie.Information:this.out.info(n);break;default:this.out.log(n);break}}}}function Ir(){let t="X-SignalR-User-Agent";return ze.isNode&&(t="User-Agent"),[t,sf(tf,af(),cf(),lf())]}function sf(t,e,r,n){let s="Microsoft SignalR/";const o=t.split(".");return s+=`${o[0]}.${o[1]}`,s+=` (${t}; `,e&&e!==""?s+=`${e}; `:s+="Unknown OS; ",s+=`${r}`,n?s+=`; ${n}`:s+="; Unknown Runtime Version",s+=")",s}function af(){if(ze.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function lf(){if(ze.isNode)return process.versions.node}function cf(){return ze.isNode?"NodeJS":"Browser"}function oi(t){return t.stack?t.stack:t.message?t.message:`${t}`}function uf(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}class hf extends zn{constructor(e){if(super(),this._logger=e,typeof fetch>"u"||ze.isNode){const r=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(r("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=r("node-fetch"):this._fetchType=fetch,this._fetchType=r("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(uf());if(typeof AbortController>"u"){const r=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=r("abort-controller")}else this._abortControllerType=AbortController}async send(e){if(e.abortSignal&&e.abortSignal.aborted)throw new St;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");const r=new this._abortControllerType;let n;e.abortSignal&&(e.abortSignal.onabort=()=>{r.abort(),n=new St});let s=null;if(e.timeout){const l=e.timeout;s=setTimeout(()=>{r.abort(),this._logger.log(ie.Warning,"Timeout from HTTP request."),n=new hs},l)}e.content===""&&(e.content=void 0),e.content&&(e.headers=e.headers||{},yr(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8");let o;try{o=await this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:e.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...e.headers},method:e.method,mode:"cors",redirect:"follow",signal:r.signal})}catch(l){throw n||(this._logger.log(ie.Warning,`Error from HTTP request. ${l}.`),l)}finally{s&&clearTimeout(s),e.abortSignal&&(e.abortSignal.onabort=null)}if(!o.ok){const l=await qs(o,"text");throw new fr(l||o.statusText,o.status)}const a=await qs(o,e.responseType);return new gl(o.status,o.statusText,a)}getCookieString(e){let r="";return ze.isNode&&this._jar&&this._jar.getCookies(e,(n,s)=>r=s.join("; ")),r}}function qs(t,e){let r;switch(e){case"arraybuffer":r=t.arrayBuffer();break;case"text":r=t.text();break;case"blob":case"document":case"json":throw new Error(`${e} is not supported.`);default:r=t.text();break}return r}class ff extends zn{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new St):e.method?e.url?new Promise((r,n)=>{const s=new XMLHttpRequest;s.open(e.method,e.url,!0),s.withCredentials=e.withCredentials===void 0?!0:e.withCredentials,s.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.content===""&&(e.content=void 0),e.content&&(yr(e.content)?s.setRequestHeader("Content-Type","application/octet-stream"):s.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const o=e.headers;o&&Object.keys(o).forEach(i=>{s.setRequestHeader(i,o[i])}),e.responseType&&(s.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{s.abort(),n(new St)}),e.timeout&&(s.timeout=e.timeout),s.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),s.status>=200&&s.status<300?r(new gl(s.status,s.statusText,s.response||s.responseText)):n(new fr(s.response||s.responseText||s.statusText,s.status))},s.onerror=()=>{this._logger.log(ie.Warning,`Error from HTTP request. ${s.status}: ${s.statusText}.`),n(new fr(s.statusText,s.status))},s.ontimeout=()=>{this._logger.log(ie.Warning,"Timeout from HTTP request."),n(new hs)},s.send(e.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class df extends zn{constructor(e){if(super(),typeof fetch<"u"||ze.isNode)this._httpClient=new hf(e);else if(typeof XMLHttpRequest<"u")this._httpClient=new ff(e);else throw new Error("No usable HttpClient found.")}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new St):e.method?e.url?this._httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(e){return this._httpClient.getCookieString(e)}}class mt{static write(e){return`${e}${mt.RecordSeparator}`}static parse(e){if(e[e.length-1]!==mt.RecordSeparator)throw new Error("Message is incomplete.");const r=e.split(mt.RecordSeparator);return r.pop(),r}}mt.RecordSeparatorCode=30;mt.RecordSeparator=String.fromCharCode(mt.RecordSeparatorCode);class pf{writeHandshakeRequest(e){return mt.write(JSON.stringify(e))}parseHandshakeResponse(e){let r,n;if(yr(e)){const a=new Uint8Array(e),l=a.indexOf(mt.RecordSeparatorCode);if(l===-1)throw new Error("Message is incomplete.");const c=l+1;r=String.fromCharCode.apply(null,Array.prototype.slice.call(a.slice(0,c))),n=a.byteLength>c?a.slice(c).buffer:null}else{const a=e,l=a.indexOf(mt.RecordSeparator);if(l===-1)throw new Error("Message is incomplete.");const c=l+1;r=a.substring(0,c),n=a.length>c?a.substring(c):null}const s=mt.parse(r),o=JSON.parse(s[0]);if(o.type)throw new Error("Expected a handshake response from the server.");return[n,o]}}var Re;(function(t){t[t.Invocation=1]="Invocation",t[t.StreamItem=2]="StreamItem",t[t.Completion=3]="Completion",t[t.StreamInvocation=4]="StreamInvocation",t[t.CancelInvocation=5]="CancelInvocation",t[t.Ping=6]="Ping",t[t.Close=7]="Close",t[t.Ack=8]="Ack",t[t.Sequence=9]="Sequence"})(Re||(Re={}));let gf=class{constructor(){this.observers=[]}next(e){for(const r of this.observers)r.next(e)}error(e){for(const r of this.observers)r.error&&r.error(e)}complete(){for(const e of this.observers)e.complete&&e.complete()}subscribe(e){return this.observers.push(e),new of(this,e)}};class mf{constructor(e,r,n){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=e,this._connection=r,this._bufferSize=n}async _send(e){const r=this._protocol.writeMessage(e);let n=Promise.resolve();if(this._isInvocationMessage(e)){this._totalMessageCount++;let s=()=>{},o=()=>{};yr(r)?this._bufferedByteCount+=r.byteLength:this._bufferedByteCount+=r.length,this._bufferedByteCount>=this._bufferSize&&(n=new Promise((i,a)=>{s=i,o=a})),this._messages.push(new bf(r,this._totalMessageCount,s,o))}try{this._reconnectInProgress||await this._connection.send(r)}catch{this._disconnected()}await n}_ack(e){let r=-1;for(let n=0;n<this._messages.length;n++){const s=this._messages[n];if(s._id<=e.sequenceId)r=n,yr(s._message)?this._bufferedByteCount-=s._message.byteLength:this._bufferedByteCount-=s._message.length,s._resolver();else if(this._bufferedByteCount<this._bufferSize)s._resolver();else break}r!==-1&&(this._messages=this._messages.slice(r+1))}_shouldProcessMessage(e){if(this._waitForSequenceMessage)return e.type!==Re.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(e))return!0;const r=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,r<=this._latestReceivedSequenceId?(r===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=r,this._ackTimer(),!0)}_resetSequence(e){if(e.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=e.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const e=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:Re.Sequence,sequenceId:e}));const r=this._messages;for(const n of r)await this._connection.send(n._message);this._reconnectInProgress=!1}_dispose(e){e??(e=new Error("Unable to reconnect to server."));for(const r of this._messages)r._rejector(e)}_isInvocationMessage(e){switch(e.type){case Re.Invocation:case Re.StreamItem:case Re.Completion:case Re.StreamInvocation:case Re.CancelInvocation:return!0;case Re.Close:case Re.Sequence:case Re.Ping:case Re.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:Re.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class bf{constructor(e,r,n,s){this._message=e,this._id=r,this._resolver=n,this._rejector=s}}const yf=30*1e3,_f=15*1e3,wf=1e5;var He;(function(t){t.Disconnected="Disconnected",t.Connecting="Connecting",t.Connected="Connected",t.Disconnecting="Disconnecting",t.Reconnecting="Reconnecting"})(He||(He={}));class fs{static create(e,r,n,s,o,i,a){return new fs(e,r,n,s,o,i,a)}constructor(e,r,n,s,o,i,a){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(ie.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},Ge.isRequired(e,"connection"),Ge.isRequired(r,"logger"),Ge.isRequired(n,"protocol"),this.serverTimeoutInMilliseconds=o??yf,this.keepAliveIntervalInMilliseconds=i??_f,this._statefulReconnectBufferSize=a??wf,this._logger=r,this._protocol=n,this.connection=e,this._reconnectPolicy=s,this._handshakeProtocol=new pf,this.connection.onreceive=l=>this._processIncomingData(l),this.connection.onclose=l=>this._connectionClosed(l),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=He.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:Re.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(e){if(this._connectionState!==He.Disconnected&&this._connectionState!==He.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==He.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=He.Connecting,this._logger.log(ie.Debug,"Starting HubConnection.");try{await this._startInternal(),ze.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=He.Connected,this._connectionStarted=!0,this._logger.log(ie.Debug,"HubConnection connected successfully.")}catch(e){return this._connectionState=He.Disconnected,this._logger.log(ie.Debug,`HubConnection failed to start successfully because of error '${e}'.`),Promise.reject(e)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const e=new Promise((r,n)=>{this._handshakeResolver=r,this._handshakeRejecter=n});await this.connection.start(this._protocol.transferFormat);try{let r=this._protocol.version;this.connection.features.reconnect||(r=1);const n={protocol:this._protocol.name,version:r};if(this._logger.log(ie.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(n)),this._logger.log(ie.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await e,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new mf(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(r){throw this._logger.log(ie.Debug,`Hub handshake failed with error '${r}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(r),r}}async stop(){const e=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await e}catch{}}_stopInternal(e){if(this._connectionState===He.Disconnected)return this._logger.log(ie.Debug,`Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===He.Disconnecting)return this._logger.log(ie.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const r=this._connectionState;return this._connectionState=He.Disconnecting,this._logger.log(ie.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(ie.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(r===He.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new St("The connection was stopped before the hub handshake could complete."),this.connection.stop(e))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(e,...r){const[n,s]=this._replaceStreamingParams(r),o=this._createStreamInvocation(e,r,s);let i;const a=new gf;return a.cancelCallback=()=>{const l=this._createCancelInvocation(o.invocationId);return delete this._callbacks[o.invocationId],i.then(()=>this._sendWithProtocol(l))},this._callbacks[o.invocationId]=(l,c)=>{if(c){a.error(c);return}else l&&(l.type===Re.Completion?l.error?a.error(new Error(l.error)):a.complete():a.next(l.item))},i=this._sendWithProtocol(o).catch(l=>{a.error(l),delete this._callbacks[o.invocationId]}),this._launchStreams(n,i),a}_sendMessage(e){return this._resetKeepAliveInterval(),this.connection.send(e)}_sendWithProtocol(e){return this._messageBuffer?this._messageBuffer._send(e):this._sendMessage(this._protocol.writeMessage(e))}send(e,...r){const[n,s]=this._replaceStreamingParams(r),o=this._sendWithProtocol(this._createInvocation(e,r,!0,s));return this._launchStreams(n,o),o}invoke(e,...r){const[n,s]=this._replaceStreamingParams(r),o=this._createInvocation(e,r,!1,s);return new Promise((a,l)=>{this._callbacks[o.invocationId]=(u,d)=>{if(d){l(d);return}else u&&(u.type===Re.Completion?u.error?l(new Error(u.error)):a(u.result):l(new Error(`Unexpected message type: ${u.type}`)))};const c=this._sendWithProtocol(o).catch(u=>{l(u),delete this._callbacks[o.invocationId]});this._launchStreams(n,c)})}on(e,r){!e||!r||(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),this._methods[e].indexOf(r)===-1&&this._methods[e].push(r))}off(e,r){if(!e)return;e=e.toLowerCase();const n=this._methods[e];if(n)if(r){const s=n.indexOf(r);s!==-1&&(n.splice(s,1),n.length===0&&delete this._methods[e])}else delete this._methods[e]}onclose(e){e&&this._closedCallbacks.push(e)}onreconnecting(e){e&&this._reconnectingCallbacks.push(e)}onreconnected(e){e&&this._reconnectedCallbacks.push(e)}_processIncomingData(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){const r=this._protocol.parseMessages(e,this._logger);for(const n of r)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(n)))switch(n.type){case Re.Invocation:this._invokeClientMethod(n).catch(s=>{this._logger.log(ie.Error,`Invoke client method threw error: ${oi(s)}`)});break;case Re.StreamItem:case Re.Completion:{const s=this._callbacks[n.invocationId];if(s){n.type===Re.Completion&&delete this._callbacks[n.invocationId];try{s(n)}catch(o){this._logger.log(ie.Error,`Stream callback threw error: ${oi(o)}`)}}break}case Re.Ping:break;case Re.Close:{this._logger.log(ie.Information,"Close message received from server.");const s=n.error?new Error("Server returned an error on close: "+n.error):void 0;n.allowReconnect===!0?this.connection.stop(s):this._stopPromise=this._stopInternal(s);break}case Re.Ack:this._messageBuffer&&this._messageBuffer._ack(n);break;case Re.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(n);break;default:this._logger.log(ie.Warning,`Invalid message type: ${n.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(e){let r,n;try{[n,r]=this._handshakeProtocol.parseHandshakeResponse(e)}catch(s){const o="Error parsing handshake response: "+s;this._logger.log(ie.Error,o);const i=new Error(o);throw this._handshakeRejecter(i),i}if(r.error){const s="Server returned handshake error: "+r.error;this._logger.log(ie.Error,s);const o=new Error(s);throw this._handshakeRejecter(o),o}else this._logger.log(ie.Debug,"Server handshake complete.");return this._handshakeResolver(),n}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let e=this._nextKeepAlive-new Date().getTime();e<0&&(e=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===He.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}},e)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(e){const r=e.target.toLowerCase(),n=this._methods[r];if(!n){this._logger.log(ie.Warning,`No client method with the name '${r}' found.`),e.invocationId&&(this._logger.log(ie.Warning,`No result given for '${r}' method and invocation ID '${e.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)));return}const s=n.slice(),o=!!e.invocationId;let i,a,l;for(const c of s)try{const u=i;i=await c.apply(this,e.arguments),o&&i&&u&&(this._logger.log(ie.Error,`Multiple results provided for '${r}'. Sending error to server.`),l=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),a=void 0}catch(u){a=u,this._logger.log(ie.Error,`A callback for the method '${r}' threw error '${u}'.`)}l?await this._sendWithProtocol(l):o?(a?l=this._createCompletionMessage(e.invocationId,`${a}`,null):i!==void 0?l=this._createCompletionMessage(e.invocationId,null,i):(this._logger.log(ie.Warning,`No result given for '${r}' method and invocation ID '${e.invocationId}'.`),l=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(l)):i&&this._logger.log(ie.Error,`Result given for '${r}' method but server is not expecting a result.`)}_connectionClosed(e){this._logger.log(ie.Debug,`HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||e||new St("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===He.Disconnecting?this._completeClose(e):this._connectionState===He.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===He.Connected&&this._completeClose(e)}_completeClose(e){if(this._connectionStarted){this._connectionState=He.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(e??new Error("Connection closed.")),this._messageBuffer=void 0),ze.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(r=>r.apply(this,[e]))}catch(r){this._logger.log(ie.Error,`An onclose callback called with error '${e}' threw error '${r}'.`)}}}async _reconnect(e){const r=Date.now();let n=0,s=e!==void 0?e:new Error("Attempting to reconnect due to a unknown error."),o=this._getNextRetryDelay(n++,0,s);if(o===null){this._logger.log(ie.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(e);return}if(this._connectionState=He.Reconnecting,e?this._logger.log(ie.Information,`Connection reconnecting because of error '${e}'.`):this._logger.log(ie.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(i=>i.apply(this,[e]))}catch(i){this._logger.log(ie.Error,`An onreconnecting callback called with error '${e}' threw error '${i}'.`)}if(this._connectionState!==He.Reconnecting){this._logger.log(ie.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;o!==null;){if(this._logger.log(ie.Information,`Reconnect attempt number ${n} will start in ${o} ms.`),await new Promise(i=>{this._reconnectDelayHandle=setTimeout(i,o)}),this._reconnectDelayHandle=void 0,this._connectionState!==He.Reconnecting){this._logger.log(ie.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=He.Connected,this._logger.log(ie.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(i=>i.apply(this,[this.connection.connectionId]))}catch(i){this._logger.log(ie.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${i}'.`)}return}catch(i){if(this._logger.log(ie.Information,`Reconnect attempt failed because of error '${i}'.`),this._connectionState!==He.Reconnecting){this._logger.log(ie.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===He.Disconnecting&&this._completeClose();return}s=i instanceof Error?i:new Error(i.toString()),o=this._getNextRetryDelay(n++,Date.now()-r,s)}}this._logger.log(ie.Information,`Reconnect retries have been exhausted after ${Date.now()-r} ms and ${n} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(e,r,n){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:r,previousRetryCount:e,retryReason:n})}catch(s){return this._logger.log(ie.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${r}) threw error '${s}'.`),null}}_cancelCallbacksWithError(e){const r=this._callbacks;this._callbacks={},Object.keys(r).forEach(n=>{const s=r[n];try{s(null,e)}catch(o){this._logger.log(ie.Error,`Stream 'error' callback called with '${e}' threw error: ${oi(o)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(e,r,n,s){if(n)return s.length!==0?{arguments:r,streamIds:s,target:e,type:Re.Invocation}:{arguments:r,target:e,type:Re.Invocation};{const o=this._invocationId;return this._invocationId++,s.length!==0?{arguments:r,invocationId:o.toString(),streamIds:s,target:e,type:Re.Invocation}:{arguments:r,invocationId:o.toString(),target:e,type:Re.Invocation}}}_launchStreams(e,r){if(e.length!==0){r||(r=Promise.resolve());for(const n in e)e[n].subscribe({complete:()=>{r=r.then(()=>this._sendWithProtocol(this._createCompletionMessage(n)))},error:s=>{let o;s instanceof Error?o=s.message:s&&s.toString?o=s.toString():o="Unknown error",r=r.then(()=>this._sendWithProtocol(this._createCompletionMessage(n,o)))},next:s=>{r=r.then(()=>this._sendWithProtocol(this._createStreamItemMessage(n,s)))}})}}_replaceStreamingParams(e){const r=[],n=[];for(let s=0;s<e.length;s++){const o=e[s];if(this._isObservable(o)){const i=this._invocationId;this._invocationId++,r[i]=o,n.push(i.toString()),e.splice(s,1)}}return[r,n]}_isObservable(e){return e&&e.subscribe&&typeof e.subscribe=="function"}_createStreamInvocation(e,r,n){const s=this._invocationId;return this._invocationId++,n.length!==0?{arguments:r,invocationId:s.toString(),streamIds:n,target:e,type:Re.StreamInvocation}:{arguments:r,invocationId:s.toString(),target:e,type:Re.StreamInvocation}}_createCancelInvocation(e){return{invocationId:e,type:Re.CancelInvocation}}_createStreamItemMessage(e,r){return{invocationId:e,item:r,type:Re.StreamItem}}_createCompletionMessage(e,r,n){return r?{error:r,invocationId:e,type:Re.Completion}:{invocationId:e,result:n,type:Re.Completion}}_createCloseMessage(){return{type:Re.Close}}}const vf=[0,2e3,1e4,3e4,null];class Vs{constructor(e){this._retryDelays=e!==void 0?[...e,null]:vf}nextRetryDelayInMilliseconds(e){return this._retryDelays[e.previousRetryCount]}}class dr{}dr.Authorization="Authorization";dr.Cookie="Cookie";class Ef extends zn{constructor(e,r){super(),this._innerClient=e,this._accessTokenFactory=r}async send(e){let r=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(r=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(e);const n=await this._innerClient.send(e);return r&&n.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(e),await this._innerClient.send(e)):n}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[dr.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[dr.Authorization]&&delete e.headers[dr.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}}var Qe;(function(t){t[t.None=0]="None",t[t.WebSockets=1]="WebSockets",t[t.ServerSentEvents=2]="ServerSentEvents",t[t.LongPolling=4]="LongPolling"})(Qe||(Qe={}));var at;(function(t){t[t.Text=1]="Text",t[t.Binary=2]="Binary"})(at||(at={}));let Sf=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class zs{get pollAborted(){return this._pollAbort.aborted}constructor(e,r,n){this._httpClient=e,this._logger=r,this._pollAbort=new Sf,this._options=n,this._running=!1,this.onreceive=null,this.onclose=null}async connect(e,r){if(Ge.isRequired(e,"url"),Ge.isRequired(r,"transferFormat"),Ge.isIn(r,at,"transferFormat"),this._url=e,this._logger.log(ie.Trace,"(LongPolling transport) Connecting."),r===at.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[n,s]=Ir(),o={[n]:s,...this._options.headers},i={abortSignal:this._pollAbort.signal,headers:o,timeout:1e5,withCredentials:this._options.withCredentials};r===at.Binary&&(i.responseType="arraybuffer");const a=`${e}&_=${Date.now()}`;this._logger.log(ie.Trace,`(LongPolling transport) polling: ${a}.`);const l=await this._httpClient.get(a,i);l.statusCode!==200?(this._logger.log(ie.Error,`(LongPolling transport) Unexpected response code: ${l.statusCode}.`),this._closeError=new fr(l.statusText||"",l.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,i)}async _poll(e,r){try{for(;this._running;)try{const n=`${e}&_=${Date.now()}`;this._logger.log(ie.Trace,`(LongPolling transport) polling: ${n}.`);const s=await this._httpClient.get(n,r);s.statusCode===204?(this._logger.log(ie.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):s.statusCode!==200?(this._logger.log(ie.Error,`(LongPolling transport) Unexpected response code: ${s.statusCode}.`),this._closeError=new fr(s.statusText||"",s.statusCode),this._running=!1):s.content?(this._logger.log(ie.Trace,`(LongPolling transport) data received. ${qr(s.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(s.content)):this._logger.log(ie.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(n){this._running?n instanceof hs?this._logger.log(ie.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=n,this._running=!1):this._logger.log(ie.Trace,`(LongPolling transport) Poll errored after shutdown: ${n.message}`)}}finally{this._logger.log(ie.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(e){return this._running?ml(this._logger,"LongPolling",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(ie.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(ie.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const e={},[r,n]=Ir();e[r]=n;const s={headers:{...e,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let o;try{await this._httpClient.delete(this._url,s)}catch(i){o=i}o?o instanceof fr&&(o.statusCode===404?this._logger.log(ie.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(ie.Trace,`(LongPolling transport) Error sending a DELETE request: ${o}`)):this._logger.log(ie.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(ie.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(ie.Trace,e),this.onclose(this._closeError)}}}class Af{constructor(e,r,n,s){this._httpClient=e,this._accessToken=r,this._logger=n,this._options=s,this.onreceive=null,this.onclose=null}async connect(e,r){return Ge.isRequired(e,"url"),Ge.isRequired(r,"transferFormat"),Ge.isIn(r,at,"transferFormat"),this._logger.log(ie.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((n,s)=>{let o=!1;if(r!==at.Text){s(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let i;if(ze.isBrowser||ze.isWebWorker)i=new this._options.EventSource(e,{withCredentials:this._options.withCredentials});else{const a=this._httpClient.getCookieString(e),l={};l.Cookie=a;const[c,u]=Ir();l[c]=u,i=new this._options.EventSource(e,{withCredentials:this._options.withCredentials,headers:{...l,...this._options.headers}})}try{i.onmessage=a=>{if(this.onreceive)try{this._logger.log(ie.Trace,`(SSE transport) data received. ${qr(a.data,this._options.logMessageContent)}.`),this.onreceive(a.data)}catch(l){this._close(l);return}},i.onerror=a=>{o?this._close():s(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},i.onopen=()=>{this._logger.log(ie.Information,`SSE connected to ${this._url}`),this._eventSource=i,o=!0,n()}}catch(a){s(a);return}})}async send(e){return this._eventSource?ml(this._logger,"SSE",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}}class Cf{constructor(e,r,n,s,o,i){this._logger=n,this._accessTokenFactory=r,this._logMessageContent=s,this._webSocketConstructor=o,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=i}async connect(e,r){Ge.isRequired(e,"url"),Ge.isRequired(r,"transferFormat"),Ge.isIn(r,at,"transferFormat"),this._logger.log(ie.Trace,"(WebSockets transport) Connecting.");let n;return this._accessTokenFactory&&(n=await this._accessTokenFactory()),new Promise((s,o)=>{e=e.replace(/^http/,"ws");let i;const a=this._httpClient.getCookieString(e);let l=!1;if(ze.isNode||ze.isReactNative){const c={},[u,d]=Ir();c[u]=d,n&&(c[dr.Authorization]=`Bearer ${n}`),a&&(c[dr.Cookie]=a),i=new this._webSocketConstructor(e,void 0,{headers:{...c,...this._headers}})}else n&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(n)}`);i||(i=new this._webSocketConstructor(e)),r===at.Binary&&(i.binaryType="arraybuffer"),i.onopen=c=>{this._logger.log(ie.Information,`WebSocket connected to ${e}.`),this._webSocket=i,l=!0,s()},i.onerror=c=>{let u=null;typeof ErrorEvent<"u"&&c instanceof ErrorEvent?u=c.error:u="There was an error with the transport",this._logger.log(ie.Information,`(WebSockets transport) ${u}.`)},i.onmessage=c=>{if(this._logger.log(ie.Trace,`(WebSockets transport) data received. ${qr(c.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(c.data)}catch(u){this._close(u);return}},i.onclose=c=>{if(l)this._close(c);else{let u=null;typeof ErrorEvent<"u"&&c instanceof ErrorEvent?u=c.error:u="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",o(new Error(u))}}})}send(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(ie.Trace,`(WebSockets transport) sending data. ${qr(e,this._logMessageContent)}.`),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(e){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(ie.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(e)&&(e.wasClean===!1||e.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)):e instanceof Error?this.onclose(e):this.onclose())}_isCloseEvent(e){return e&&typeof e.wasClean=="boolean"&&typeof e.code=="number"}}const Ks=100;class If{constructor(e,r={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,Ge.isRequired(e,"url"),this._logger=nf(r.logger),this.baseUrl=this._resolveUrl(e),r=r||{},r.logMessageContent=r.logMessageContent===void 0?!1:r.logMessageContent,typeof r.withCredentials=="boolean"||r.withCredentials===void 0)r.withCredentials=r.withCredentials===void 0?!0:r.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");r.timeout=r.timeout===void 0?100*1e3:r.timeout;let n=null,s=null;if(ze.isNode&&typeof require<"u"){const o=typeof __webpack_require__=="function"?__non_webpack_require__:require;n=o("ws"),s=o("eventsource")}!ze.isNode&&typeof WebSocket<"u"&&!r.WebSocket?r.WebSocket=WebSocket:ze.isNode&&!r.WebSocket&&n&&(r.WebSocket=n),!ze.isNode&&typeof EventSource<"u"&&!r.EventSource?r.EventSource=EventSource:ze.isNode&&!r.EventSource&&typeof s<"u"&&(r.EventSource=s),this._httpClient=new Ef(r.httpClient||new df(this._logger),r.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=r,this.onreceive=null,this.onclose=null}async start(e){if(e=e||at.Binary,Ge.isIn(e,at,"transferFormat"),this._logger.log(ie.Debug,`Starting connection with transfer format '${at[e]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),await this._startInternalPromise,this._connectionState==="Disconnecting"){const r="Failed to start the HttpConnection before stop() was called.";return this._logger.log(ie.Error,r),await this._stopPromise,Promise.reject(new St(r))}else if(this._connectionState!=="Connected"){const r="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(ie.Error,r),Promise.reject(new St(r))}this._connectionStarted=!0}send(e){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new ds(this.transport)),this._sendQueue.send(e))}async stop(e){if(this._connectionState==="Disconnected")return this._logger.log(ie.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(ie.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(r=>{this._stopPromiseResolver=r}),await this._stopInternal(e),await this._stopPromise}async _stopInternal(e){this._stopError=e;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(r){this._logger.log(ie.Error,`HttpConnection.transport.stop() threw error '${r}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(ie.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(e){let r=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===Qe.WebSockets)this.transport=this._constructTransport(Qe.WebSockets),await this._startTransport(r,e);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let n=null,s=0;do{if(n=await this._getNegotiationResponse(r),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new St("The connection was stopped during negotiation.");if(n.error)throw new Error(n.error);if(n.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(n.url&&(r=n.url),n.accessToken){const o=n.accessToken;this._accessTokenFactory=()=>o,this._httpClient._accessToken=o,this._httpClient._accessTokenFactory=void 0}s++}while(n.url&&s<Ks);if(s===Ks&&n.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(r,this._options.transport,n,e)}this.transport instanceof zs&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(ie.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(n){return this._logger.log(ie.Error,"Failed to start the connection: "+n),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(n)}}async _getNegotiationResponse(e){const r={},[n,s]=Ir();r[n]=s;const o=this._resolveNegotiateUrl(e);this._logger.log(ie.Debug,`Sending negotiation request: ${o}.`);try{const i=await this._httpClient.post(o,{content:"",headers:{...r,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(i.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${i.statusCode}'`));const a=JSON.parse(i.content);return(!a.negotiateVersion||a.negotiateVersion<1)&&(a.connectionToken=a.connectionId),a.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new Hs("Client didn't negotiate Stateful Reconnect but the server did.")):a}catch(i){let a="Failed to complete negotiation with the server: "+i;return i instanceof fr&&i.statusCode===404&&(a=a+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(ie.Error,a),Promise.reject(new Hs(a))}}_createConnectUrl(e,r){return r?e+(e.indexOf("?")===-1?"?":"&")+`id=${r}`:e}async _createTransport(e,r,n,s){let o=this._createConnectUrl(e,n.connectionToken);if(this._isITransport(r)){this._logger.log(ie.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=r,await this._startTransport(o,s),this.connectionId=n.connectionId;return}const i=[],a=n.availableTransports||[];let l=n;for(const c of a){const u=this._resolveTransportOrError(c,r,s,(l==null?void 0:l.useStatefulReconnect)===!0);if(u instanceof Error)i.push(`${c.transport} failed:`),i.push(u);else if(this._isITransport(u)){if(this.transport=u,!l){try{l=await this._getNegotiationResponse(e)}catch(d){return Promise.reject(d)}o=this._createConnectUrl(e,l.connectionToken)}try{await this._startTransport(o,s),this.connectionId=l.connectionId;return}catch(d){if(this._logger.log(ie.Error,`Failed to start the transport '${c.transport}': ${d}`),l=void 0,i.push(new Zh(`${c.transport} failed: ${d}`,Qe[c.transport])),this._connectionState!=="Connecting"){const g="Failed to select transport before stop() was called.";return this._logger.log(ie.Debug,g),Promise.reject(new St(g))}}}}return i.length>0?Promise.reject(new ef(`Unable to connect to the server with any of the available transports. ${i.join(" ")}`,i)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(e){switch(e){case Qe.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new Cf(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case Qe.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new Af(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case Qe.LongPolling:return new zs(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${e}.`)}}_startTransport(e,r){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async n=>{let s=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(e,r),await this.features.resend()}catch{s=!0}else{this._stopConnection(n);return}s&&this._stopConnection(n)}:this.transport.onclose=n=>this._stopConnection(n),this.transport.connect(e,r)}_resolveTransportOrError(e,r,n,s){const o=Qe[e.transport];if(o==null)return this._logger.log(ie.Debug,`Skipping transport '${e.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);if(Tf(r,o))if(e.transferFormats.map(a=>at[a]).indexOf(n)>=0){if(o===Qe.WebSockets&&!this._options.WebSocket||o===Qe.ServerSentEvents&&!this._options.EventSource)return this._logger.log(ie.Debug,`Skipping transport '${Qe[o]}' because it is not supported in your environment.'`),new Gh(`'${Qe[o]}' is not supported in your environment.`,o);this._logger.log(ie.Debug,`Selecting transport '${Qe[o]}'.`);try{return this.features.reconnect=o===Qe.WebSockets?s:void 0,this._constructTransport(o)}catch(a){return a}}else return this._logger.log(ie.Debug,`Skipping transport '${Qe[o]}' because it does not support the requested transfer format '${at[n]}'.`),new Error(`'${Qe[o]}' does not support ${at[n]}.`);else return this._logger.log(ie.Debug,`Skipping transport '${Qe[o]}' because it was disabled by the client.`),new Xh(`'${Qe[o]}' is disabled by the client.`,o)}_isITransport(e){return e&&typeof e=="object"&&"connect"in e}_stopConnection(e){if(this._logger.log(ie.Debug,`HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(ie.Debug,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(ie.Warning,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),e?this._logger.log(ie.Error,`Connection disconnected with error '${e}'.`):this._logger.log(ie.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(r=>{this._logger.log(ie.Error,`TransportSendQueue.stop() threw error '${r}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(r){this._logger.log(ie.Error,`HttpConnection.onclose(${e}) threw error '${r}'.`)}}}_resolveUrl(e){if(e.lastIndexOf("https://",0)===0||e.lastIndexOf("http://",0)===0)return e;if(!ze.isBrowser)throw new Error(`Cannot resolve '${e}'.`);const r=window.document.createElement("a");return r.href=e,this._logger.log(ie.Information,`Normalizing '${e}' to '${r.href}'.`),r.href}_resolveNegotiateUrl(e){const r=new URL(e);r.pathname.endsWith("/")?r.pathname+="negotiate":r.pathname+="/negotiate";const n=new URLSearchParams(r.searchParams);return n.has("negotiateVersion")||n.append("negotiateVersion",this._negotiateVersion.toString()),n.has("useStatefulReconnect")?n.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&n.append("useStatefulReconnect","true"),r.search=n.toString(),r.toString()}}function Tf(t,e){return!t||(e&t)!==0}class ds{constructor(e){this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new Xr,this._transportResult=new Xr,this._sendLoopPromise=this._sendLoop()}send(e){return this._bufferData(e),this._transportResult||(this._transportResult=new Xr),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(e){if(this._buffer.length&&typeof this._buffer[0]!=typeof e)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);this._buffer.push(e),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new Xr;const e=this._transportResult;this._transportResult=void 0;const r=typeof this._buffer[0]=="string"?this._buffer.join(""):ds._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(r),e.resolve()}catch(n){e.reject(n)}}}static _concatBuffers(e){const r=e.map(o=>o.byteLength).reduce((o,i)=>o+i),n=new Uint8Array(r);let s=0;for(const o of e)n.set(new Uint8Array(o),s),s+=o.byteLength;return n.buffer}}class Xr{constructor(){this.promise=new Promise((e,r)=>[this._resolver,this._rejecter]=[e,r])}resolve(){this._resolver()}reject(e){this._rejecter(e)}}const kf="json";class Rf{constructor(){this.name=kf,this.version=2,this.transferFormat=at.Text}parseMessages(e,r){if(typeof e!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];r===null&&(r=Hr.instance);const n=mt.parse(e),s=[];for(const o of n){const i=JSON.parse(o);if(typeof i.type!="number")throw new Error("Invalid payload.");switch(i.type){case Re.Invocation:this._isInvocationMessage(i);break;case Re.StreamItem:this._isStreamItemMessage(i);break;case Re.Completion:this._isCompletionMessage(i);break;case Re.Ping:break;case Re.Close:break;case Re.Ack:this._isAckMessage(i);break;case Re.Sequence:this._isSequenceMessage(i);break;default:r.log(ie.Information,"Unknown message type '"+i.type+"' ignored.");continue}s.push(i)}return s}writeMessage(e){return mt.write(JSON.stringify(e))}_isInvocationMessage(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),e.invocationId!==void 0&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),e.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}_isAckMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(e,r){if(typeof e!="string"||e==="")throw new Error(r)}}const Pf={trace:ie.Trace,debug:ie.Debug,info:ie.Information,information:ie.Information,warn:ie.Warning,warning:ie.Warning,error:ie.Error,critical:ie.Critical,none:ie.None};function Of(t){const e=Pf[t.toLowerCase()];if(typeof e<"u")return e;throw new Error(`Unknown log level: ${t}`)}class xf{configureLogging(e){if(Ge.isRequired(e,"logging"),Bf(e))this.logger=e;else if(typeof e=="string"){const r=Of(e);this.logger=new Cn(r)}else this.logger=new Cn(e);return this}withUrl(e,r){return Ge.isRequired(e,"url"),Ge.isNotEmpty(e,"url"),this.url=e,typeof r=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...r}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:r},this}withHubProtocol(e){return Ge.isRequired(e,"protocol"),this.protocol=e,this}withAutomaticReconnect(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new Vs(e):this.reconnectPolicy=e:this.reconnectPolicy=new Vs,this}withServerTimeout(e){return Ge.isRequired(e,"milliseconds"),this._serverTimeoutInMilliseconds=e,this}withKeepAliveInterval(e){return Ge.isRequired(e,"milliseconds"),this._keepAliveIntervalInMilliseconds=e,this}withStatefulReconnect(e){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=e==null?void 0:e.bufferSize,this}build(){const e=this.httpConnectionOptions||{};if(e.logger===void 0&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const r=new If(this.url,e);return fs.create(r,this.logger||Hr.instance,this.protocol||new Rf,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function Bf(t){return t.log!==void 0}class Nf{nextRetryDelayInMilliseconds(e){return null}}const Fn=class Fn{constructor(e,r){ve(this,"crisEndpoint");ve(this,"connection");this.crisEndpoint=r,this.connection=new xf().withUrl(e,Qe.None).withAutomaticReconnect(Fn.noRetryPolicy).build()}async startAsync(){try{return await this.connection.start(),!0}catch(e){return console.log(e),!1}}async startListeningAsync(e){const r={},n=e.map(async s=>{const o=new Sn(this.connection.connectionId,s.domainName,s.transactionCount),i=await this.crisEndpoint.sendOrThrowAsync(o);i?r[s.domainName]=JSON.parse(i):(console.warn(`Domain ${s.domainName} doesn't exists.`),r[s.domainName]="")});return await Promise.all(n),r}onMessage(e){this.connection.on("OnStateEventsAsync",(r,n)=>{e(r,JSON.parse(n))})}onClose(e){this.connection.onclose(e)}async stopAsync(){await this.connection.stop()}};ve(Fn,"noRetryPolicy",new Nf);let Pi=Fn;var ps=Object.defineProperty,Mf=Object.getOwnPropertyDescriptor,jf=Object.getOwnPropertyNames,Uf=Object.prototype.hasOwnProperty,nt=(t,e)=>()=>(t&&(e=t(t=0)),e),ye=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),_r=(t,e)=>{for(var r in e)ps(t,r,{get:e[r],enumerable:!0})},Lf=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of jf(e))!Uf.call(t,s)&&s!==r&&ps(t,s,{get:()=>e[s],enumerable:!(n=Mf(e,s))||n.enumerable});return t},De=t=>Lf(ps({},"__esModule",{value:!0}),t),ce=nt(()=>{}),je={};_r(je,{_debugEnd:()=>co,_debugProcess:()=>lo,_events:()=>Co,_eventsCount:()=>Io,_exiting:()=>Ji,_fatalExceptions:()=>oo,_getActiveHandles:()=>Sl,_getActiveRequests:()=>El,_kill:()=>Gi,_linkedBinding:()=>wl,_maxListeners:()=>Ao,_preload_modules:()=>Eo,_rawDebug:()=>Vi,_startProfilerIdleNotifier:()=>uo,_stopProfilerIdleNotifier:()=>ho,_tickCallback:()=>ao,abort:()=>mo,addListener:()=>To,allowedNodeEnvironmentFlags:()=>no,arch:()=>xi,argv:()=>Mi,argv0:()=>vo,assert:()=>Al,binding:()=>Fi,chdir:()=>Hi,config:()=>Yi,cpuUsage:()=>Ur,cwd:()=>Wi,debugPort:()=>wo,default:()=>ms,dlopen:()=>vl,domain:()=>Ki,emit:()=>xo,emitWarning:()=>Di,env:()=>Ni,execArgv:()=>ji,execPath:()=>_o,exit:()=>to,features:()=>io,hasUncaughtExceptionCaptureCallback:()=>Cl,hrtime:()=>cn,kill:()=>eo,listeners:()=>Tl,memoryUsage:()=>Zi,moduleLoadList:()=>zi,nextTick:()=>yl,off:()=>Ro,on:()=>Pt,once:()=>ko,openStdin:()=>ro,pid:()=>bo,platform:()=>Bi,ppid:()=>yo,prependListener:()=>Bo,prependOnceListener:()=>No,reallyExit:()=>Qi,release:()=>qi,removeAllListeners:()=>Oo,removeListener:()=>Po,resourceUsage:()=>Xi,setSourceMapsEnabled:()=>So,setUncaughtExceptionCaptureCallback:()=>so,stderr:()=>po,stdin:()=>go,stdout:()=>fo,title:()=>Oi,umask:()=>$i,uptime:()=>Il,version:()=>Ui,versions:()=>Li});function gs(t){throw new Error("Node.js process "+t+" is not supported by JSPM core outside of Node.js")}function Df(){!pr||!cr||(pr=!1,cr.length?Tt=cr.concat(Tt):Fr=-1,Tt.length&&bl())}function bl(){if(!pr){var t=setTimeout(Df,0);pr=!0;for(var e=Tt.length;e;){for(cr=Tt,Tt=[];++Fr<e;)cr&&cr[Fr].run();Fr=-1,e=Tt.length}cr=null,pr=!1,clearTimeout(t)}}function yl(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Tt.push(new _l(t,e)),Tt.length===1&&!pr&&setTimeout(bl,0)}function _l(t,e){this.fun=t,this.array=e}function st(){}function wl(t){gs("_linkedBinding")}function vl(t){gs("dlopen")}function El(){return[]}function Sl(){return[]}function Al(t,e){if(!t)throw new Error(e||"assertion error")}function Cl(){return!1}function Il(){return Mt.now()/1e3}function cn(t){var e=Math.floor((Date.now()-Mt.now())*.001),r=Mt.now()*.001,n=Math.floor(r)+e,s=Math.floor(r%1*1e9);return t&&(n=n-t[0],s=s-t[1],s<0&&(n--,s+=un)),[n,s]}function Pt(){return ms}function Tl(t){return[]}var Tt,pr,cr,Fr,Oi,xi,Bi,Ni,Mi,ji,Ui,Li,Di,Fi,$i,Wi,Hi,qi,Vi,zi,Ki,Ji,Yi,Qi,Gi,Ur,Xi,Zi,eo,to,ro,no,io,oo,so,ao,lo,co,uo,ho,fo,po,go,mo,bo,yo,_o,wo,vo,Eo,So,Mt,si,un,Ao,Co,Io,To,ko,Ro,Po,Oo,xo,Bo,No,ms,Ff=nt(()=>{ce(),he(),ue(),Tt=[],pr=!1,Fr=-1,_l.prototype.run=function(){this.fun.apply(null,this.array)},Oi="browser",xi="x64",Bi="browser",Ni={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},Mi=["/usr/bin/node"],ji=[],Ui="v16.8.0",Li={},Di=function(t,e){console.warn((e?e+": ":"")+t)},Fi=function(t){gs("binding")},$i=function(t){return 0},Wi=function(){return"/"},Hi=function(t){},qi={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},Vi=st,zi=[],Ki={},Ji=!1,Yi={},Qi=st,Gi=st,Ur=function(){return{}},Xi=Ur,Zi=Ur,eo=st,to=st,ro=st,no={},io={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},oo=st,so=st,ao=st,lo=st,co=st,uo=st,ho=st,fo=void 0,po=void 0,go=void 0,mo=st,bo=2,yo=1,_o="/bin/usr/node",wo=9229,vo="node",Eo=[],So=st,Mt={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},Mt.now===void 0&&(si=Date.now(),Mt.timing&&Mt.timing.navigationStart&&(si=Mt.timing.navigationStart),Mt.now=()=>Date.now()-si),un=1e9,cn.bigint=function(t){var e=cn(t);return typeof BigInt>"u"?e[0]*un+e[1]:BigInt(e[0]*un)+BigInt(e[1])},Ao=10,Co={},Io=0,To=Pt,ko=Pt,Ro=Pt,Po=Pt,Oo=Pt,xo=st,Bo=Pt,No=Pt,ms={version:Ui,versions:Li,arch:xi,platform:Bi,release:qi,_rawDebug:Vi,moduleLoadList:zi,binding:Fi,_linkedBinding:wl,_events:Co,_eventsCount:Io,_maxListeners:Ao,on:Pt,addListener:To,once:ko,off:Ro,removeListener:Po,removeAllListeners:Oo,emit:xo,prependListener:Bo,prependOnceListener:No,listeners:Tl,domain:Ki,_exiting:Ji,config:Yi,dlopen:vl,uptime:Il,_getActiveRequests:El,_getActiveHandles:Sl,reallyExit:Qi,_kill:Gi,cpuUsage:Ur,resourceUsage:Xi,memoryUsage:Zi,kill:eo,exit:to,openStdin:ro,allowedNodeEnvironmentFlags:no,assert:Al,features:io,_fatalExceptions:oo,setUncaughtExceptionCaptureCallback:so,hasUncaughtExceptionCaptureCallback:Cl,emitWarning:Di,nextTick:yl,_tickCallback:ao,_debugProcess:lo,_debugEnd:co,_startProfilerIdleNotifier:uo,_stopProfilerIdleNotifier:ho,stdout:fo,stdin:go,stderr:po,abort:mo,umask:$i,chdir:Hi,cwd:Wi,env:Ni,title:Oi,argv:Mi,execArgv:ji,pid:bo,ppid:yo,execPath:_o,debugPort:wo,hrtime:cn,argv0:vo,_preload_modules:Eo,setSourceMapsEnabled:So}}),ue=nt(()=>{Ff()}),it={};_r(it,{Buffer:()=>In,INSPECT_MAX_BYTES:()=>kl,default:()=>Ot,kMaxLength:()=>Rl});function $f(){if(Mo)return Ar;Mo=!0,Ar.byteLength=a,Ar.toByteArray=c,Ar.fromByteArray=g;for(var t=[],e=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,o=n.length;s<o;++s)t[s]=n[s],e[n.charCodeAt(s)]=s;e[45]=62,e[95]=63;function i(b){var m=b.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=b.indexOf("=");y===-1&&(y=m);var w=y===m?0:4-y%4;return[y,w]}function a(b){var m=i(b),y=m[0],w=m[1];return(y+w)*3/4-w}function l(b,m,y){return(m+y)*3/4-y}function c(b){var m,y=i(b),w=y[0],R=y[1],S=new r(l(b,w,R)),E=0,j=R>0?w-4:w,U;for(U=0;U<j;U+=4)m=e[b.charCodeAt(U)]<<18|e[b.charCodeAt(U+1)]<<12|e[b.charCodeAt(U+2)]<<6|e[b.charCodeAt(U+3)],S[E++]=m>>16&255,S[E++]=m>>8&255,S[E++]=m&255;return R===2&&(m=e[b.charCodeAt(U)]<<2|e[b.charCodeAt(U+1)]>>4,S[E++]=m&255),R===1&&(m=e[b.charCodeAt(U)]<<10|e[b.charCodeAt(U+1)]<<4|e[b.charCodeAt(U+2)]>>2,S[E++]=m>>8&255,S[E++]=m&255),S}function u(b){return t[b>>18&63]+t[b>>12&63]+t[b>>6&63]+t[b&63]}function d(b,m,y){for(var w,R=[],S=m;S<y;S+=3)w=(b[S]<<16&16711680)+(b[S+1]<<8&65280)+(b[S+2]&255),R.push(u(w));return R.join("")}function g(b){for(var m,y=b.length,w=y%3,R=[],S=16383,E=0,j=y-w;E<j;E+=S)R.push(d(b,E,E+S>j?j:E+S));return w===1?(m=b[y-1],R.push(t[m>>2]+t[m<<4&63]+"==")):w===2&&(m=(b[y-2]<<8)+b[y-1],R.push(t[m>>10]+t[m>>4&63]+t[m<<2&63]+"=")),R.join("")}return Ar}function Wf(){return jo?Lr:(jo=!0,Lr.read=function(t,e,r,n,s){var o,i,a=s*8-n-1,l=(1<<a)-1,c=l>>1,u=-7,d=r?s-1:0,g=r?-1:1,b=t[e+d];for(d+=g,o=b&(1<<-u)-1,b>>=-u,u+=a;u>0;o=o*256+t[e+d],d+=g,u-=8);for(i=o&(1<<-u)-1,o>>=-u,u+=n;u>0;i=i*256+t[e+d],d+=g,u-=8);if(o===0)o=1-c;else{if(o===l)return i?NaN:(b?-1:1)*(1/0);i=i+Math.pow(2,n),o=o-c}return(b?-1:1)*i*Math.pow(2,o-n)},Lr.write=function(t,e,r,n,s,o){var i,a,l,c=o*8-s-1,u=(1<<c)-1,d=u>>1,g=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=n?0:o-1,m=n?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,i=u):(i=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-i))<1&&(i--,l*=2),i+d>=1?e+=g/l:e+=g*Math.pow(2,1-d),e*l>=2&&(i++,l/=2),i+d>=u?(a=0,i=u):i+d>=1?(a=(e*l-1)*Math.pow(2,s),i=i+d):(a=e*Math.pow(2,d-1)*Math.pow(2,s),i=0));s>=8;t[r+b]=a&255,b+=m,a/=256,s-=8);for(i=i<<s|a,c+=s;c>0;t[r+b]=i&255,b+=m,i/=256,c-=8);t[r+b-m]|=y*128},Lr)}function Hf(){if(Uo)return zt;Uo=!0;let t=$f(),e=Wf(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;zt.Buffer=i,zt.SlowBuffer=R,zt.INSPECT_MAX_BYTES=50;let n=2147483647;zt.kMaxLength=n,i.TYPED_ARRAY_SUPPORT=s(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{let f=new Uint8Array(1),h={foo:function(){return 42}};return Object.setPrototypeOf(h,Uint8Array.prototype),Object.setPrototypeOf(f,h),f.foo()===42}catch{return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}});function o(f){if(f>n)throw new RangeError('The value "'+f+'" is invalid for option "size"');let h=new Uint8Array(f);return Object.setPrototypeOf(h,i.prototype),h}function i(f,h,p){if(typeof f=="number"){if(typeof h=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(f)}return a(f,h,p)}i.poolSize=8192;function a(f,h,p){if(typeof f=="string")return d(f,h);if(ArrayBuffer.isView(f))return b(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(z(f,ArrayBuffer)||f&&z(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(z(f,SharedArrayBuffer)||f&&z(f.buffer,SharedArrayBuffer)))return m(f,h,p);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let _=f.valueOf&&f.valueOf();if(_!=null&&_!==f)return i.from(_,h,p);let k=y(f);if(k)return k;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return i.from(f[Symbol.toPrimitive]("string"),h,p);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}i.from=function(f,h,p){return a(f,h,p)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array);function l(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function c(f,h,p){return l(f),f<=0?o(f):h!==void 0?typeof p=="string"?o(f).fill(h,p):o(f).fill(h):o(f)}i.alloc=function(f,h,p){return c(f,h,p)};function u(f){return l(f),o(f<0?0:w(f)|0)}i.allocUnsafe=function(f){return u(f)},i.allocUnsafeSlow=function(f){return u(f)};function d(f,h){if((typeof h!="string"||h==="")&&(h="utf8"),!i.isEncoding(h))throw new TypeError("Unknown encoding: "+h);let p=S(f,h)|0,_=o(p),k=_.write(f,h);return k!==p&&(_=_.slice(0,k)),_}function g(f){let h=f.length<0?0:w(f.length)|0,p=o(h);for(let _=0;_<h;_+=1)p[_]=f[_]&255;return p}function b(f){if(z(f,Uint8Array)){let h=new Uint8Array(f);return m(h.buffer,h.byteOffset,h.byteLength)}return g(f)}function m(f,h,p){if(h<0||f.byteLength<h)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<h+(p||0))throw new RangeError('"length" is outside of buffer bounds');let _;return h===void 0&&p===void 0?_=new Uint8Array(f):p===void 0?_=new Uint8Array(f,h):_=new Uint8Array(f,h,p),Object.setPrototypeOf(_,i.prototype),_}function y(f){if(i.isBuffer(f)){let h=w(f.length)|0,p=o(h);return p.length===0||f.copy(p,0,0,h),p}if(f.length!==void 0)return typeof f.length!="number"||O(f.length)?o(0):g(f);if(f.type==="Buffer"&&Array.isArray(f.data))return g(f.data)}function w(f){if(f>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return f|0}function R(f){return+f!=f&&(f=0),i.alloc(+f)}i.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==i.prototype},i.compare=function(f,h){if(z(f,Uint8Array)&&(f=i.from(f,f.offset,f.byteLength)),z(h,Uint8Array)&&(h=i.from(h,h.offset,h.byteLength)),!i.isBuffer(f)||!i.isBuffer(h))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===h)return 0;let p=f.length,_=h.length;for(let k=0,$=Math.min(p,_);k<$;++k)if(f[k]!==h[k]){p=f[k],_=h[k];break}return p<_?-1:_<p?1:0},i.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(f,h){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return i.alloc(0);let p;if(h===void 0)for(h=0,p=0;p<f.length;++p)h+=f[p].length;let _=i.allocUnsafe(h),k=0;for(p=0;p<f.length;++p){let $=f[p];if(z($,Uint8Array))k+$.length>_.length?(i.isBuffer($)||($=i.from($)),$.copy(_,k)):Uint8Array.prototype.set.call(_,$,k);else if(i.isBuffer($))$.copy(_,k);else throw new TypeError('"list" argument must be an Array of Buffers');k+=$.length}return _};function S(f,h){if(i.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||z(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);let p=f.length,_=arguments.length>2&&arguments[2]===!0;if(!_&&p===0)return 0;let k=!1;for(;;)switch(h){case"ascii":case"latin1":case"binary":return p;case"utf8":case"utf-8":return D(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p*2;case"hex":return p>>>1;case"base64":return X(f).length;default:if(k)return _?-1:D(f).length;h=(""+h).toLowerCase(),k=!0}}i.byteLength=S;function E(f,h,p){let _=!1;if((h===void 0||h<0)&&(h=0),h>this.length||((p===void 0||p>this.length)&&(p=this.length),p<=0)||(p>>>=0,h>>>=0,p<=h))return"";for(f||(f="utf8");;)switch(f){case"hex":return q(this,h,p);case"utf8":case"utf-8":return V(this,h,p);case"ascii":return be(this,h,p);case"latin1":case"binary":return ae(this,h,p);case"base64":return C(this,h,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _e(this,h,p);default:if(_)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),_=!0}}i.prototype._isBuffer=!0;function j(f,h,p){let _=f[h];f[h]=f[p],f[p]=_}i.prototype.swap16=function(){let f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let h=0;h<f;h+=2)j(this,h,h+1);return this},i.prototype.swap32=function(){let f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let h=0;h<f;h+=4)j(this,h,h+3),j(this,h+1,h+2);return this},i.prototype.swap64=function(){let f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let h=0;h<f;h+=8)j(this,h,h+7),j(this,h+1,h+6),j(this,h+2,h+5),j(this,h+3,h+4);return this},i.prototype.toString=function(){let f=this.length;return f===0?"":arguments.length===0?V(this,0,f):E.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(f){if(!i.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:i.compare(this,f)===0},i.prototype.inspect=function(){let f="",h=zt.INSPECT_MAX_BYTES;return f=this.toString("hex",0,h).replace(/(.{2})/g,"$1 ").trim(),this.length>h&&(f+=" ... "),"<Buffer "+f+">"},r&&(i.prototype[r]=i.prototype.inspect),i.prototype.compare=function(f,h,p,_,k){if(z(f,Uint8Array)&&(f=i.from(f,f.offset,f.byteLength)),!i.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(h===void 0&&(h=0),p===void 0&&(p=f?f.length:0),_===void 0&&(_=0),k===void 0&&(k=this.length),h<0||p>f.length||_<0||k>this.length)throw new RangeError("out of range index");if(_>=k&&h>=p)return 0;if(_>=k)return-1;if(h>=p)return 1;if(h>>>=0,p>>>=0,_>>>=0,k>>>=0,this===f)return 0;let $=k-_,ee=p-h,Te=Math.min($,ee),Be=this.slice(_,k),Ne=f.slice(h,p);for(let Ie=0;Ie<Te;++Ie)if(Be[Ie]!==Ne[Ie]){$=Be[Ie],ee=Ne[Ie];break}return $<ee?-1:ee<$?1:0};function U(f,h,p,_,k){if(f.length===0)return-1;if(typeof p=="string"?(_=p,p=0):p>2147483647?p=2147483647:p<-2147483648&&(p=-2147483648),p=+p,O(p)&&(p=k?0:f.length-1),p<0&&(p=f.length+p),p>=f.length){if(k)return-1;p=f.length-1}else if(p<0)if(k)p=0;else return-1;if(typeof h=="string"&&(h=i.from(h,_)),i.isBuffer(h))return h.length===0?-1:T(f,h,p,_,k);if(typeof h=="number")return h=h&255,typeof Uint8Array.prototype.indexOf=="function"?k?Uint8Array.prototype.indexOf.call(f,h,p):Uint8Array.prototype.lastIndexOf.call(f,h,p):T(f,[h],p,_,k);throw new TypeError("val must be string, number or Buffer")}function T(f,h,p,_,k){let $=1,ee=f.length,Te=h.length;if(_!==void 0&&(_=String(_).toLowerCase(),_==="ucs2"||_==="ucs-2"||_==="utf16le"||_==="utf-16le")){if(f.length<2||h.length<2)return-1;$=2,ee/=2,Te/=2,p/=2}function Be(Ie,Oe){return $===1?Ie[Oe]:Ie.readUInt16BE(Oe*$)}let Ne;if(k){let Ie=-1;for(Ne=p;Ne<ee;Ne++)if(Be(f,Ne)===Be(h,Ie===-1?0:Ne-Ie)){if(Ie===-1&&(Ie=Ne),Ne-Ie+1===Te)return Ie*$}else Ie!==-1&&(Ne-=Ne-Ie),Ie=-1}else for(p+Te>ee&&(p=ee-Te),Ne=p;Ne>=0;Ne--){let Ie=!0;for(let Oe=0;Oe<Te;Oe++)if(Be(f,Ne+Oe)!==Be(h,Oe)){Ie=!1;break}if(Ie)return Ne}return-1}i.prototype.includes=function(f,h,p){return this.indexOf(f,h,p)!==-1},i.prototype.indexOf=function(f,h,p){return U(this,f,h,p,!0)},i.prototype.lastIndexOf=function(f,h,p){return U(this,f,h,p,!1)};function I(f,h,p,_){p=Number(p)||0;let k=f.length-p;_?(_=Number(_),_>k&&(_=k)):_=k;let $=h.length;_>$/2&&(_=$/2);let ee;for(ee=0;ee<_;++ee){let Te=parseInt(h.substr(ee*2,2),16);if(O(Te))return ee;f[p+ee]=Te}return ee}function N(f,h,p,_){return M(D(h,f.length-p),f,p,_)}function W(f,h,p,_){return M(F(h),f,p,_)}function G(f,h,p,_){return M(X(h),f,p,_)}function ne(f,h,p,_){return M(oe(h,f.length-p),f,p,_)}i.prototype.write=function(f,h,p,_){if(h===void 0)_="utf8",p=this.length,h=0;else if(p===void 0&&typeof h=="string")_=h,p=this.length,h=0;else if(isFinite(h))h=h>>>0,isFinite(p)?(p=p>>>0,_===void 0&&(_="utf8")):(_=p,p=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let k=this.length-h;if((p===void 0||p>k)&&(p=k),f.length>0&&(p<0||h<0)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");_||(_="utf8");let $=!1;for(;;)switch(_){case"hex":return I(this,f,h,p);case"utf8":case"utf-8":return N(this,f,h,p);case"ascii":case"latin1":case"binary":return W(this,f,h,p);case"base64":return G(this,f,h,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,f,h,p);default:if($)throw new TypeError("Unknown encoding: "+_);_=(""+_).toLowerCase(),$=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function C(f,h,p){return h===0&&p===f.length?t.fromByteArray(f):t.fromByteArray(f.slice(h,p))}function V(f,h,p){p=Math.min(f.length,p);let _=[],k=h;for(;k<p;){let $=f[k],ee=null,Te=$>239?4:$>223?3:$>191?2:1;if(k+Te<=p){let Be,Ne,Ie,Oe;switch(Te){case 1:$<128&&(ee=$);break;case 2:Be=f[k+1],(Be&192)===128&&(Oe=($&31)<<6|Be&63,Oe>127&&(ee=Oe));break;case 3:Be=f[k+1],Ne=f[k+2],(Be&192)===128&&(Ne&192)===128&&(Oe=($&15)<<12|(Be&63)<<6|Ne&63,Oe>2047&&(Oe<55296||Oe>57343)&&(ee=Oe));break;case 4:Be=f[k+1],Ne=f[k+2],Ie=f[k+3],(Be&192)===128&&(Ne&192)===128&&(Ie&192)===128&&(Oe=($&15)<<18|(Be&63)<<12|(Ne&63)<<6|Ie&63,Oe>65535&&Oe<1114112&&(ee=Oe))}}ee===null?(ee=65533,Te=1):ee>65535&&(ee-=65536,_.push(ee>>>10&1023|55296),ee=56320|ee&1023),_.push(ee),k+=Te}return J(_)}let re=4096;function J(f){let h=f.length;if(h<=re)return String.fromCharCode.apply(String,f);let p="",_=0;for(;_<h;)p+=String.fromCharCode.apply(String,f.slice(_,_+=re));return p}function be(f,h,p){let _="";p=Math.min(f.length,p);for(let k=h;k<p;++k)_+=String.fromCharCode(f[k]&127);return _}function ae(f,h,p){let _="";p=Math.min(f.length,p);for(let k=h;k<p;++k)_+=String.fromCharCode(f[k]);return _}function q(f,h,p){let _=f.length;(!h||h<0)&&(h=0),(!p||p<0||p>_)&&(p=_);let k="";for(let $=h;$<p;++$)k+=L[f[$]];return k}function _e(f,h,p){let _=f.slice(h,p),k="";for(let $=0;$<_.length-1;$+=2)k+=String.fromCharCode(_[$]+_[$+1]*256);return k}i.prototype.slice=function(f,h){let p=this.length;f=~~f,h=h===void 0?p:~~h,f<0?(f+=p,f<0&&(f=0)):f>p&&(f=p),h<0?(h+=p,h<0&&(h=0)):h>p&&(h=p),h<f&&(h=f);let _=this.subarray(f,h);return Object.setPrototypeOf(_,i.prototype),_};function se(f,h,p){if(f%1!==0||f<0)throw new RangeError("offset is not uint");if(f+h>p)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUintLE=i.prototype.readUIntLE=function(f,h,p){f=f>>>0,h=h>>>0,p||se(f,h,this.length);let _=this[f],k=1,$=0;for(;++$<h&&(k*=256);)_+=this[f+$]*k;return _},i.prototype.readUintBE=i.prototype.readUIntBE=function(f,h,p){f=f>>>0,h=h>>>0,p||se(f,h,this.length);let _=this[f+--h],k=1;for(;h>0&&(k*=256);)_+=this[f+--h]*k;return _},i.prototype.readUint8=i.prototype.readUInt8=function(f,h){return f=f>>>0,h||se(f,1,this.length),this[f]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(f,h){return f=f>>>0,h||se(f,2,this.length),this[f]|this[f+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(f,h){return f=f>>>0,h||se(f,2,this.length),this[f]<<8|this[f+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(f,h){return f=f>>>0,h||se(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(f,h){return f=f>>>0,h||se(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},i.prototype.readBigUInt64LE=H(function(f){f=f>>>0,Z(f,"offset");let h=this[f],p=this[f+7];(h===void 0||p===void 0)&&we(f,this.length-8);let _=h+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,k=this[++f]+this[++f]*2**8+this[++f]*2**16+p*2**24;return BigInt(_)+(BigInt(k)<<BigInt(32))}),i.prototype.readBigUInt64BE=H(function(f){f=f>>>0,Z(f,"offset");let h=this[f],p=this[f+7];(h===void 0||p===void 0)&&we(f,this.length-8);let _=h*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],k=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+p;return(BigInt(_)<<BigInt(32))+BigInt(k)}),i.prototype.readIntLE=function(f,h,p){f=f>>>0,h=h>>>0,p||se(f,h,this.length);let _=this[f],k=1,$=0;for(;++$<h&&(k*=256);)_+=this[f+$]*k;return k*=128,_>=k&&(_-=Math.pow(2,8*h)),_},i.prototype.readIntBE=function(f,h,p){f=f>>>0,h=h>>>0,p||se(f,h,this.length);let _=h,k=1,$=this[f+--_];for(;_>0&&(k*=256);)$+=this[f+--_]*k;return k*=128,$>=k&&($-=Math.pow(2,8*h)),$},i.prototype.readInt8=function(f,h){return f=f>>>0,h||se(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},i.prototype.readInt16LE=function(f,h){f=f>>>0,h||se(f,2,this.length);let p=this[f]|this[f+1]<<8;return p&32768?p|4294901760:p},i.prototype.readInt16BE=function(f,h){f=f>>>0,h||se(f,2,this.length);let p=this[f+1]|this[f]<<8;return p&32768?p|4294901760:p},i.prototype.readInt32LE=function(f,h){return f=f>>>0,h||se(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},i.prototype.readInt32BE=function(f,h){return f=f>>>0,h||se(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},i.prototype.readBigInt64LE=H(function(f){f=f>>>0,Z(f,"offset");let h=this[f],p=this[f+7];(h===void 0||p===void 0)&&we(f,this.length-8);let _=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(p<<24);return(BigInt(_)<<BigInt(32))+BigInt(h+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),i.prototype.readBigInt64BE=H(function(f){f=f>>>0,Z(f,"offset");let h=this[f],p=this[f+7];(h===void 0||p===void 0)&&we(f,this.length-8);let _=(h<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(_)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+p)}),i.prototype.readFloatLE=function(f,h){return f=f>>>0,h||se(f,4,this.length),e.read(this,f,!0,23,4)},i.prototype.readFloatBE=function(f,h){return f=f>>>0,h||se(f,4,this.length),e.read(this,f,!1,23,4)},i.prototype.readDoubleLE=function(f,h){return f=f>>>0,h||se(f,8,this.length),e.read(this,f,!0,52,8)},i.prototype.readDoubleBE=function(f,h){return f=f>>>0,h||se(f,8,this.length),e.read(this,f,!1,52,8)};function Ee(f,h,p,_,k,$){if(!i.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>k||h<$)throw new RangeError('"value" argument is out of bounds');if(p+_>f.length)throw new RangeError("Index out of range")}i.prototype.writeUintLE=i.prototype.writeUIntLE=function(f,h,p,_){if(f=+f,h=h>>>0,p=p>>>0,!_){let ee=Math.pow(2,8*p)-1;Ee(this,f,h,p,ee,0)}let k=1,$=0;for(this[h]=f&255;++$<p&&(k*=256);)this[h+$]=f/k&255;return h+p},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(f,h,p,_){if(f=+f,h=h>>>0,p=p>>>0,!_){let ee=Math.pow(2,8*p)-1;Ee(this,f,h,p,ee,0)}let k=p-1,$=1;for(this[h+k]=f&255;--k>=0&&($*=256);)this[h+k]=f/$&255;return h+p},i.prototype.writeUint8=i.prototype.writeUInt8=function(f,h,p){return f=+f,h=h>>>0,p||Ee(this,f,h,1,255,0),this[h]=f&255,h+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(f,h,p){return f=+f,h=h>>>0,p||Ee(this,f,h,2,65535,0),this[h]=f&255,this[h+1]=f>>>8,h+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(f,h,p){return f=+f,h=h>>>0,p||Ee(this,f,h,2,65535,0),this[h]=f>>>8,this[h+1]=f&255,h+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(f,h,p){return f=+f,h=h>>>0,p||Ee(this,f,h,4,4294967295,0),this[h+3]=f>>>24,this[h+2]=f>>>16,this[h+1]=f>>>8,this[h]=f&255,h+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(f,h,p){return f=+f,h=h>>>0,p||Ee(this,f,h,4,4294967295,0),this[h]=f>>>24,this[h+1]=f>>>16,this[h+2]=f>>>8,this[h+3]=f&255,h+4};function v(f,h,p,_,k){te(h,_,k,f,p,7);let $=Number(h&BigInt(4294967295));f[p++]=$,$=$>>8,f[p++]=$,$=$>>8,f[p++]=$,$=$>>8,f[p++]=$;let ee=Number(h>>BigInt(32)&BigInt(4294967295));return f[p++]=ee,ee=ee>>8,f[p++]=ee,ee=ee>>8,f[p++]=ee,ee=ee>>8,f[p++]=ee,p}function Y(f,h,p,_,k){te(h,_,k,f,p,7);let $=Number(h&BigInt(4294967295));f[p+7]=$,$=$>>8,f[p+6]=$,$=$>>8,f[p+5]=$,$=$>>8,f[p+4]=$;let ee=Number(h>>BigInt(32)&BigInt(4294967295));return f[p+3]=ee,ee=ee>>8,f[p+2]=ee,ee=ee>>8,f[p+1]=ee,ee=ee>>8,f[p]=ee,p+8}i.prototype.writeBigUInt64LE=H(function(f,h=0){return v(this,f,h,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=H(function(f,h=0){return Y(this,f,h,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function(f,h,p,_){if(f=+f,h=h>>>0,!_){let Te=Math.pow(2,8*p-1);Ee(this,f,h,p,Te-1,-Te)}let k=0,$=1,ee=0;for(this[h]=f&255;++k<p&&($*=256);)f<0&&ee===0&&this[h+k-1]!==0&&(ee=1),this[h+k]=(f/$>>0)-ee&255;return h+p},i.prototype.writeIntBE=function(f,h,p,_){if(f=+f,h=h>>>0,!_){let Te=Math.pow(2,8*p-1);Ee(this,f,h,p,Te-1,-Te)}let k=p-1,$=1,ee=0;for(this[h+k]=f&255;--k>=0&&($*=256);)f<0&&ee===0&&this[h+k+1]!==0&&(ee=1),this[h+k]=(f/$>>0)-ee&255;return h+p},i.prototype.writeInt8=function(f,h,p){return f=+f,h=h>>>0,p||Ee(this,f,h,1,127,-128),f<0&&(f=255+f+1),this[h]=f&255,h+1},i.prototype.writeInt16LE=function(f,h,p){return f=+f,h=h>>>0,p||Ee(this,f,h,2,32767,-32768),this[h]=f&255,this[h+1]=f>>>8,h+2},i.prototype.writeInt16BE=function(f,h,p){return f=+f,h=h>>>0,p||Ee(this,f,h,2,32767,-32768),this[h]=f>>>8,this[h+1]=f&255,h+2},i.prototype.writeInt32LE=function(f,h,p){return f=+f,h=h>>>0,p||Ee(this,f,h,4,2147483647,-2147483648),this[h]=f&255,this[h+1]=f>>>8,this[h+2]=f>>>16,this[h+3]=f>>>24,h+4},i.prototype.writeInt32BE=function(f,h,p){return f=+f,h=h>>>0,p||Ee(this,f,h,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[h]=f>>>24,this[h+1]=f>>>16,this[h+2]=f>>>8,this[h+3]=f&255,h+4},i.prototype.writeBigInt64LE=H(function(f,h=0){return v(this,f,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=H(function(f,h=0){return Y(this,f,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function pe(f,h,p,_,k,$){if(p+_>f.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("Index out of range")}function Se(f,h,p,_,k){return h=+h,p=p>>>0,k||pe(f,h,p,4),e.write(f,h,p,_,23,4),p+4}i.prototype.writeFloatLE=function(f,h,p){return Se(this,f,h,!0,p)},i.prototype.writeFloatBE=function(f,h,p){return Se(this,f,h,!1,p)};function fe(f,h,p,_,k){return h=+h,p=p>>>0,k||pe(f,h,p,8),e.write(f,h,p,_,52,8),p+8}i.prototype.writeDoubleLE=function(f,h,p){return fe(this,f,h,!0,p)},i.prototype.writeDoubleBE=function(f,h,p){return fe(this,f,h,!1,p)},i.prototype.copy=function(f,h,p,_){if(!i.isBuffer(f))throw new TypeError("argument should be a Buffer");if(p||(p=0),!_&&_!==0&&(_=this.length),h>=f.length&&(h=f.length),h||(h=0),_>0&&_<p&&(_=p),_===p||f.length===0||this.length===0)return 0;if(h<0)throw new RangeError("targetStart out of bounds");if(p<0||p>=this.length)throw new RangeError("Index out of range");if(_<0)throw new RangeError("sourceEnd out of bounds");_>this.length&&(_=this.length),f.length-h<_-p&&(_=f.length-h+p);let k=_-p;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(h,p,_):Uint8Array.prototype.set.call(f,this.subarray(p,_),h),k},i.prototype.fill=function(f,h,p,_){if(typeof f=="string"){if(typeof h=="string"?(_=h,h=0,p=this.length):typeof p=="string"&&(_=p,p=this.length),_!==void 0&&typeof _!="string")throw new TypeError("encoding must be a string");if(typeof _=="string"&&!i.isEncoding(_))throw new TypeError("Unknown encoding: "+_);if(f.length===1){let $=f.charCodeAt(0);(_==="utf8"&&$<128||_==="latin1")&&(f=$)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(h<0||this.length<h||this.length<p)throw new RangeError("Out of range index");if(p<=h)return this;h=h>>>0,p=p===void 0?this.length:p>>>0,f||(f=0);let k;if(typeof f=="number")for(k=h;k<p;++k)this[k]=f;else{let $=i.isBuffer(f)?f:i.from(f,_),ee=$.length;if(ee===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(k=0;k<p-h;++k)this[k+h]=$[k%ee]}return this};let B={};function A(f,h,p){B[f]=class extends p{constructor(){super(),Object.defineProperty(this,"message",{value:h.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${f}]`,this.stack,delete this.name}get code(){return f}set code(_){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:_,writable:!0})}toString(){return`${this.name} [${f}]: ${this.message}`}}}A("ERR_BUFFER_OUT_OF_BOUNDS",function(f){return f?`${f} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),A("ERR_INVALID_ARG_TYPE",function(f,h){return`The "${f}" argument must be of type number. Received type ${typeof h}`},TypeError),A("ERR_OUT_OF_RANGE",function(f,h,p){let _=`The value of "${f}" is out of range.`,k=p;return Number.isInteger(p)&&Math.abs(p)>2**32?k=K(String(p)):typeof p=="bigint"&&(k=String(p),(p>BigInt(2)**BigInt(32)||p<-(BigInt(2)**BigInt(32)))&&(k=K(k)),k+="n"),_+=` It must be ${h}. Received ${k}`,_},RangeError);function K(f){let h="",p=f.length,_=f[0]==="-"?1:0;for(;p>=_+4;p-=3)h=`_${f.slice(p-3,p)}${h}`;return`${f.slice(0,p)}${h}`}function de(f,h,p){Z(h,"offset"),(f[h]===void 0||f[h+p]===void 0)&&we(h,f.length-(p+1))}function te(f,h,p,_,k,$){if(f>p||f<h){let ee=typeof h=="bigint"?"n":"",Te;throw h===0||h===BigInt(0)?Te=`>= 0${ee} and < 2${ee} ** ${($+1)*8}${ee}`:Te=`>= -(2${ee} ** ${($+1)*8-1}${ee}) and < 2 ** ${($+1)*8-1}${ee}`,new B.ERR_OUT_OF_RANGE("value",Te,f)}de(_,k,$)}function Z(f,h){if(typeof f!="number")throw new B.ERR_INVALID_ARG_TYPE(h,"number",f)}function we(f,h,p){throw Math.floor(f)!==f?(Z(f,p),new B.ERR_OUT_OF_RANGE("offset","an integer",f)):h<0?new B.ERR_BUFFER_OUT_OF_BOUNDS:new B.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${h}`,f)}let ge=/[^+/0-9A-Za-z-_]/g;function x(f){if(f=f.split("=")[0],f=f.trim().replace(ge,""),f.length<2)return"";for(;f.length%4!==0;)f=f+"=";return f}function D(f,h){h=h||1/0;let p,_=f.length,k=null,$=[];for(let ee=0;ee<_;++ee){if(p=f.charCodeAt(ee),p>55295&&p<57344){if(!k){if(p>56319){(h-=3)>-1&&$.push(239,191,189);continue}else if(ee+1===_){(h-=3)>-1&&$.push(239,191,189);continue}k=p;continue}if(p<56320){(h-=3)>-1&&$.push(239,191,189),k=p;continue}p=(k-55296<<10|p-56320)+65536}else k&&(h-=3)>-1&&$.push(239,191,189);if(k=null,p<128){if((h-=1)<0)break;$.push(p)}else if(p<2048){if((h-=2)<0)break;$.push(p>>6|192,p&63|128)}else if(p<65536){if((h-=3)<0)break;$.push(p>>12|224,p>>6&63|128,p&63|128)}else if(p<1114112){if((h-=4)<0)break;$.push(p>>18|240,p>>12&63|128,p>>6&63|128,p&63|128)}else throw new Error("Invalid code point")}return $}function F(f){let h=[];for(let p=0;p<f.length;++p)h.push(f.charCodeAt(p)&255);return h}function oe(f,h){let p,_,k,$=[];for(let ee=0;ee<f.length&&!((h-=2)<0);++ee)p=f.charCodeAt(ee),_=p>>8,k=p%256,$.push(k),$.push(_);return $}function X(f){return t.toByteArray(x(f))}function M(f,h,p,_){let k;for(k=0;k<_&&!(k+p>=h.length||k>=f.length);++k)h[k+p]=f[k];return k}function z(f,h){return f instanceof h||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===h.name}function O(f){return f!==f}let L=function(){let f="0123456789abcdef",h=new Array(256);for(let p=0;p<16;++p){let _=p*16;for(let k=0;k<16;++k)h[_+k]=f[p]+f[k]}return h}();function H(f){return typeof BigInt>"u"?le:f}function le(){throw new Error("BigInt not supported")}return zt}var Ar,Mo,Lr,jo,zt,Uo,Ot,In,kl,Rl,ot=nt(()=>{ce(),he(),ue(),Ar={},Mo=!1,Lr={},jo=!1,zt={},Uo=!1,Ot=Hf(),Ot.Buffer,Ot.SlowBuffer,Ot.INSPECT_MAX_BYTES,Ot.kMaxLength,In=Ot.Buffer,kl=Ot.INSPECT_MAX_BYTES,Rl=Ot.kMaxLength}),he=nt(()=>{ot()}),qf=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"__esModule",{value:!0});var e=class{constructor(r){this.aliasToTopic={},this.max=r}put(r,n){return n===0||n>this.max?!1:(this.aliasToTopic[n]=r,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(r){return this.aliasToTopic[r]}clear(){this.aliasToTopic={}}};t.default=e}),Xe=ye((t,e)=>{ce(),he(),ue(),e.exports={ArrayIsArray(r){return Array.isArray(r)},ArrayPrototypeIncludes(r,n){return r.includes(n)},ArrayPrototypeIndexOf(r,n){return r.indexOf(n)},ArrayPrototypeJoin(r,n){return r.join(n)},ArrayPrototypeMap(r,n){return r.map(n)},ArrayPrototypePop(r,n){return r.pop(n)},ArrayPrototypePush(r,n){return r.push(n)},ArrayPrototypeSlice(r,n,s){return r.slice(n,s)},Error,FunctionPrototypeCall(r,n,...s){return r.call(n,...s)},FunctionPrototypeSymbolHasInstance(r,n){return Function.prototype[Symbol.hasInstance].call(r,n)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(r,n){return Object.defineProperties(r,n)},ObjectDefineProperty(r,n,s){return Object.defineProperty(r,n,s)},ObjectGetOwnPropertyDescriptor(r,n){return Object.getOwnPropertyDescriptor(r,n)},ObjectKeys(r){return Object.keys(r)},ObjectSetPrototypeOf(r,n){return Object.setPrototypeOf(r,n)},Promise,PromisePrototypeCatch(r,n){return r.catch(n)},PromisePrototypeThen(r,n,s){return r.then(n,s)},PromiseReject(r){return Promise.reject(r)},ReflectApply:Reflect.apply,RegExpPrototypeTest(r,n){return r.test(n)},SafeSet:Set,String,StringPrototypeSlice(r,n,s){return r.slice(n,s)},StringPrototypeToLowerCase(r){return r.toLowerCase()},StringPrototypeToUpperCase(r){return r.toUpperCase()},StringPrototypeTrim(r){return r.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(r,n,s){return r.set(n,s)},Uint8Array}}),Dt=ye((t,e)=>{ce(),he(),ue();var r=(ot(),De(it)),n=Object.getPrototypeOf(async function(){}).constructor,s=globalThis.Blob||r.Blob,o=typeof s<"u"?function(a){return a instanceof s}:function(a){return!1},i=class extends Error{constructor(a){if(!Array.isArray(a))throw new TypeError(`Expected input to be an Array, got ${typeof a}`);let l="";for(let c=0;c<a.length;c++)l+=`    ${a[c].stack}
`;super(l),this.name="AggregateError",this.errors=a}};e.exports={AggregateError:i,kEmptyObject:Object.freeze({}),once(a){let l=!1;return function(...c){l||(l=!0,a.apply(this,c))}},createDeferredPromise:function(){let a,l;return{promise:new Promise((c,u)=>{a=c,l=u}),resolve:a,reject:l}},promisify(a){return new Promise((l,c)=>{a((u,...d)=>u?c(u):l(...d))})},debuglog(){return function(){}},format(a,...l){return a.replace(/%([sdifj])/g,function(...[c,u]){let d=l.shift();return u==="f"?d.toFixed(6):u==="j"?JSON.stringify(d):u==="s"&&typeof d=="object"?`${d.constructor!==Object?d.constructor.name:""} {}`.trim():d.toString()})},inspect(a){switch(typeof a){case"string":if(a.includes("'"))if(a.includes('"')){if(!a.includes("`")&&!a.includes("${"))return`\`${a}\``}else return`"${a}"`;return`'${a}'`;case"number":return isNaN(a)?"NaN":Object.is(a,-0)?String(a):a;case"bigint":return`${String(a)}n`;case"boolean":case"undefined":return String(a);case"object":return"{}"}},types:{isAsyncFunction(a){return a instanceof n},isArrayBufferView(a){return ArrayBuffer.isView(a)}},isBlob:o},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),bs=ye((t,e)=>{ce(),he(),ue();var{AbortController:r,AbortSignal:n}=typeof self<"u"?self:typeof window<"u"?window:void 0;e.exports=r,e.exports.AbortSignal=n,e.exports.default=r}),dt=ye((t,e)=>{ce(),he(),ue();var{format:r,inspect:n,AggregateError:s}=Dt(),o=globalThis.AggregateError||s,i=Symbol("kIsNodeError"),a=["string","function","number","object","Function","Object","boolean","bigint","symbol"],l=/^([A-Z][a-z0-9]*)+$/,c="__node_internal_",u={};function d(S,E){if(!S)throw new u.ERR_INTERNAL_ASSERTION(E)}function g(S){let E="",j=S.length,U=S[0]==="-"?1:0;for(;j>=U+4;j-=3)E=`_${S.slice(j-3,j)}${E}`;return`${S.slice(0,j)}${E}`}function b(S,E,j){if(typeof E=="function")return d(E.length<=j.length,`Code: ${S}; The provided arguments length (${j.length}) does not match the required ones (${E.length}).`),E(...j);let U=(E.match(/%[dfijoOs]/g)||[]).length;return d(U===j.length,`Code: ${S}; The provided arguments length (${j.length}) does not match the required ones (${U}).`),j.length===0?E:r(E,...j)}function m(S,E,j){j||(j=Error);class U extends j{constructor(...I){super(b(S,E,I))}toString(){return`${this.name} [${S}]: ${this.message}`}}Object.defineProperties(U.prototype,{name:{value:j.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${S}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),U.prototype.code=S,U.prototype[i]=!0,u[S]=U}function y(S){let E=c+S.name;return Object.defineProperty(S,"name",{value:E}),S}function w(S,E){if(S&&E&&S!==E){if(Array.isArray(E.errors))return E.errors.push(S),E;let j=new o([E,S],E.message);return j.code=E.code,j}return S||E}var R=class extends Error{constructor(S="The operation was aborted",E=void 0){if(E!==void 0&&typeof E!="object")throw new u.ERR_INVALID_ARG_TYPE("options","Object",E);super(S,E),this.code="ABORT_ERR",this.name="AbortError"}};m("ERR_ASSERTION","%s",Error),m("ERR_INVALID_ARG_TYPE",(S,E,j)=>{d(typeof S=="string","'name' must be a string"),Array.isArray(E)||(E=[E]);let U="The ";S.endsWith(" argument")?U+=`${S} `:U+=`"${S}" ${S.includes(".")?"property":"argument"} `,U+="must be ";let T=[],I=[],N=[];for(let G of E)d(typeof G=="string","All expected entries have to be of type string"),a.includes(G)?T.push(G.toLowerCase()):l.test(G)?I.push(G):(d(G!=="object",'The value "object" should be written as "Object"'),N.push(G));if(I.length>0){let G=T.indexOf("object");G!==-1&&(T.splice(T,G,1),I.push("Object"))}if(T.length>0){switch(T.length){case 1:U+=`of type ${T[0]}`;break;case 2:U+=`one of type ${T[0]} or ${T[1]}`;break;default:{let G=T.pop();U+=`one of type ${T.join(", ")}, or ${G}`}}(I.length>0||N.length>0)&&(U+=" or ")}if(I.length>0){switch(I.length){case 1:U+=`an instance of ${I[0]}`;break;case 2:U+=`an instance of ${I[0]} or ${I[1]}`;break;default:{let G=I.pop();U+=`an instance of ${I.join(", ")}, or ${G}`}}N.length>0&&(U+=" or ")}switch(N.length){case 0:break;case 1:N[0].toLowerCase()!==N[0]&&(U+="an "),U+=`${N[0]}`;break;case 2:U+=`one of ${N[0]} or ${N[1]}`;break;default:{let G=N.pop();U+=`one of ${N.join(", ")}, or ${G}`}}if(j==null)U+=`. Received ${j}`;else if(typeof j=="function"&&j.name)U+=`. Received function ${j.name}`;else if(typeof j=="object"){var W;if((W=j.constructor)!==null&&W!==void 0&&W.name)U+=`. Received an instance of ${j.constructor.name}`;else{let G=n(j,{depth:-1});U+=`. Received ${G}`}}else{let G=n(j,{colors:!1});G.length>25&&(G=`${G.slice(0,25)}...`),U+=`. Received type ${typeof j} (${G})`}return U},TypeError),m("ERR_INVALID_ARG_VALUE",(S,E,j="is invalid")=>{let U=n(E);return U.length>128&&(U=U.slice(0,128)+"..."),`The ${S.includes(".")?"property":"argument"} '${S}' ${j}. Received ${U}`},TypeError),m("ERR_INVALID_RETURN_VALUE",(S,E,j)=>{var U;let T=j!=null&&(U=j.constructor)!==null&&U!==void 0&&U.name?`instance of ${j.constructor.name}`:`type ${typeof j}`;return`Expected ${S} to be returned from the "${E}" function but got ${T}.`},TypeError),m("ERR_MISSING_ARGS",(...S)=>{d(S.length>0,"At least one arg needs to be specified");let E,j=S.length;switch(S=(Array.isArray(S)?S:[S]).map(U=>`"${U}"`).join(" or "),j){case 1:E+=`The ${S[0]} argument`;break;case 2:E+=`The ${S[0]} and ${S[1]} arguments`;break;default:{let U=S.pop();E+=`The ${S.join(", ")}, and ${U} arguments`}break}return`${E} must be specified`},TypeError),m("ERR_OUT_OF_RANGE",(S,E,j)=>{d(E,'Missing "range" argument');let U;return Number.isInteger(j)&&Math.abs(j)>2**32?U=g(String(j)):typeof j=="bigint"?(U=String(j),(j>2n**32n||j<-(2n**32n))&&(U=g(U)),U+="n"):U=n(j),`The value of "${S}" is out of range. It must be ${E}. Received ${U}`},RangeError),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),m("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),m("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),m("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),m("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),m("ERR_STREAM_WRITE_AFTER_END","write after end",Error),m("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),e.exports={AbortError:R,aggregateTwoErrors:y(w),hideStackFrames:y,codes:u}}),Kn=ye((t,e)=>{ce(),he(),ue();var{ArrayIsArray:r,ArrayPrototypeIncludes:n,ArrayPrototypeJoin:s,ArrayPrototypeMap:o,NumberIsInteger:i,NumberIsNaN:a,NumberMAX_SAFE_INTEGER:l,NumberMIN_SAFE_INTEGER:c,NumberParseInt:u,ObjectPrototypeHasOwnProperty:d,RegExpPrototypeExec:g,String:b,StringPrototypeToUpperCase:m,StringPrototypeTrim:y}=Xe(),{hideStackFrames:w,codes:{ERR_SOCKET_BAD_PORT:R,ERR_INVALID_ARG_TYPE:S,ERR_INVALID_ARG_VALUE:E,ERR_OUT_OF_RANGE:j,ERR_UNKNOWN_SIGNAL:U}}=dt(),{normalizeEncoding:T}=Dt(),{isAsyncFunction:I,isArrayBufferView:N}=Dt().types,W={};function G(M){return M===(M|0)}function ne(M){return M===M>>>0}var C=/^[0-7]+$/,V="must be a 32-bit unsigned integer or an octal string";function re(M,z,O){if(typeof M>"u"&&(M=O),typeof M=="string"){if(g(C,M)===null)throw new E(z,M,V);M=u(M,8)}return ae(M,z),M}var J=w((M,z,O=c,L=l)=>{if(typeof M!="number")throw new S(z,"number",M);if(!i(M))throw new j(z,"an integer",M);if(M<O||M>L)throw new j(z,`>= ${O} && <= ${L}`,M)}),be=w((M,z,O=-2147483648,L=2147483647)=>{if(typeof M!="number")throw new S(z,"number",M);if(!i(M))throw new j(z,"an integer",M);if(M<O||M>L)throw new j(z,`>= ${O} && <= ${L}`,M)}),ae=w((M,z,O=!1)=>{if(typeof M!="number")throw new S(z,"number",M);if(!i(M))throw new j(z,"an integer",M);let L=O?1:0,H=4294967295;if(M<L||M>H)throw new j(z,`>= ${L} && <= ${H}`,M)});function q(M,z){if(typeof M!="string")throw new S(z,"string",M)}function _e(M,z,O=void 0,L){if(typeof M!="number")throw new S(z,"number",M);if(O!=null&&M<O||L!=null&&M>L||(O!=null||L!=null)&&a(M))throw new j(z,`${O!=null?`>= ${O}`:""}${O!=null&&L!=null?" && ":""}${L!=null?`<= ${L}`:""}`,M)}var se=w((M,z,O)=>{if(!n(O,M)){let L="must be one of: "+s(o(O,H=>typeof H=="string"?`'${H}'`:b(H)),", ");throw new E(z,M,L)}});function Ee(M,z){if(typeof M!="boolean")throw new S(z,"boolean",M)}function v(M,z,O){return M==null||!d(M,z)?O:M[z]}var Y=w((M,z,O=null)=>{let L=v(O,"allowArray",!1),H=v(O,"allowFunction",!1);if(!v(O,"nullable",!1)&&M===null||!L&&r(M)||typeof M!="object"&&(!H||typeof M!="function"))throw new S(z,"Object",M)}),pe=w((M,z)=>{if(M!=null&&typeof M!="object"&&typeof M!="function")throw new S(z,"a dictionary",M)}),Se=w((M,z,O=0)=>{if(!r(M))throw new S(z,"Array",M);if(M.length<O){let L=`must be longer than ${O}`;throw new E(z,M,L)}});function fe(M,z){Se(M,z);for(let O=0;O<M.length;O++)q(M[O],`${z}[${O}]`)}function B(M,z){Se(M,z);for(let O=0;O<M.length;O++)Ee(M[O],`${z}[${O}]`)}function A(M,z="signal"){if(q(M,z),W[M]===void 0)throw W[m(M)]!==void 0?new U(M+" (signals must use all capital letters)"):new U(M)}var K=w((M,z="buffer")=>{if(!N(M))throw new S(z,["Buffer","TypedArray","DataView"],M)});function de(M,z){let O=T(z),L=M.length;if(O==="hex"&&L%2!==0)throw new E("encoding",z,`is invalid for data of length ${L}`)}function te(M,z="Port",O=!0){if(typeof M!="number"&&typeof M!="string"||typeof M=="string"&&y(M).length===0||+M!==+M>>>0||M>65535||M===0&&!O)throw new R(z,M,O);return M|0}var Z=w((M,z)=>{if(M!==void 0&&(M===null||typeof M!="object"||!("aborted"in M)))throw new S(z,"AbortSignal",M)}),we=w((M,z)=>{if(typeof M!="function")throw new S(z,"Function",M)}),ge=w((M,z)=>{if(typeof M!="function"||I(M))throw new S(z,"Function",M)}),x=w((M,z)=>{if(M!==void 0)throw new S(z,"undefined",M)});function D(M,z,O){if(!n(O,M))throw new S(z,`('${s(O,"|")}')`,M)}var F=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function oe(M,z){if(typeof M>"u"||!g(F,M))throw new E(z,M,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function X(M){if(typeof M=="string")return oe(M,"hints"),M;if(r(M)){let z=M.length,O="";if(z===0)return O;for(let L=0;L<z;L++){let H=M[L];oe(H,"hints"),O+=H,L!==z-1&&(O+=", ")}return O}throw new E("hints",M,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}e.exports={isInt32:G,isUint32:ne,parseFileMode:re,validateArray:Se,validateStringArray:fe,validateBooleanArray:B,validateBoolean:Ee,validateBuffer:K,validateDictionary:pe,validateEncoding:de,validateFunction:we,validateInt32:be,validateInteger:J,validateNumber:_e,validateObject:Y,validateOneOf:se,validatePlainFunction:ge,validatePort:te,validateSignalName:A,validateString:q,validateUint32:ae,validateUndefined:x,validateUnion:D,validateAbortSignal:Z,validateLinkHeaderValue:X}}),wr=ye((t,e)=>{ce(),he(),ue();var r=e.exports={},n,s;function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=o}catch{n=o}try{typeof clearTimeout=="function"?s=clearTimeout:s=i}catch{s=i}})();function a(R){if(n===setTimeout)return setTimeout(R,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(R,0);try{return n(R,0)}catch{try{return n.call(null,R,0)}catch{return n.call(this,R,0)}}}function l(R){if(s===clearTimeout)return clearTimeout(R);if((s===i||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(R);try{return s(R)}catch{try{return s.call(null,R)}catch{return s.call(this,R)}}}var c=[],u=!1,d,g=-1;function b(){!u||!d||(u=!1,d.length?c=d.concat(c):g=-1,c.length&&m())}function m(){if(!u){var R=a(b);u=!0;for(var S=c.length;S;){for(d=c,c=[];++g<S;)d&&d[g].run();g=-1,S=c.length}d=null,u=!1,l(R)}}r.nextTick=function(R){var S=new Array(arguments.length-1);if(arguments.length>1)for(var E=1;E<arguments.length;E++)S[E-1]=arguments[E];c.push(new y(R,S)),c.length===1&&!u&&a(m)};function y(R,S){this.fun=R,this.array=S}y.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function w(){}r.on=w,r.addListener=w,r.once=w,r.off=w,r.removeListener=w,r.removeAllListeners=w,r.emit=w,r.prependListener=w,r.prependOnceListener=w,r.listeners=function(R){return[]},r.binding=function(R){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(R){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}),Wt=ye((t,e)=>{ce(),he(),ue();var{Symbol:r,SymbolAsyncIterator:n,SymbolIterator:s,SymbolFor:o}=Xe(),i=r("kDestroyed"),a=r("kIsErrored"),l=r("kIsReadable"),c=r("kIsDisturbed"),u=o("nodejs.webstream.isClosedPromise"),d=o("nodejs.webstream.controllerErrorFunction");function g(v,Y=!1){var pe;return!!(v&&typeof v.pipe=="function"&&typeof v.on=="function"&&(!Y||typeof v.pause=="function"&&typeof v.resume=="function")&&(!v._writableState||((pe=v._readableState)===null||pe===void 0?void 0:pe.readable)!==!1)&&(!v._writableState||v._readableState))}function b(v){var Y;return!!(v&&typeof v.write=="function"&&typeof v.on=="function"&&(!v._readableState||((Y=v._writableState)===null||Y===void 0?void 0:Y.writable)!==!1))}function m(v){return!!(v&&typeof v.pipe=="function"&&v._readableState&&typeof v.on=="function"&&typeof v.write=="function")}function y(v){return v&&(v._readableState||v._writableState||typeof v.write=="function"&&typeof v.on=="function"||typeof v.pipe=="function"&&typeof v.on=="function")}function w(v){return!!(v&&!y(v)&&typeof v.pipeThrough=="function"&&typeof v.getReader=="function"&&typeof v.cancel=="function")}function R(v){return!!(v&&!y(v)&&typeof v.getWriter=="function"&&typeof v.abort=="function")}function S(v){return!!(v&&!y(v)&&typeof v.readable=="object"&&typeof v.writable=="object")}function E(v){return w(v)||R(v)||S(v)}function j(v,Y){return v==null?!1:Y===!0?typeof v[n]=="function":Y===!1?typeof v[s]=="function":typeof v[n]=="function"||typeof v[s]=="function"}function U(v){if(!y(v))return null;let Y=v._writableState,pe=v._readableState,Se=Y||pe;return!!(v.destroyed||v[i]||Se!=null&&Se.destroyed)}function T(v){if(!b(v))return null;if(v.writableEnded===!0)return!0;let Y=v._writableState;return Y!=null&&Y.errored?!1:typeof(Y==null?void 0:Y.ended)!="boolean"?null:Y.ended}function I(v,Y){if(!b(v))return null;if(v.writableFinished===!0)return!0;let pe=v._writableState;return pe!=null&&pe.errored?!1:typeof(pe==null?void 0:pe.finished)!="boolean"?null:!!(pe.finished||Y===!1&&pe.ended===!0&&pe.length===0)}function N(v){if(!g(v))return null;if(v.readableEnded===!0)return!0;let Y=v._readableState;return!Y||Y.errored?!1:typeof(Y==null?void 0:Y.ended)!="boolean"?null:Y.ended}function W(v,Y){if(!g(v))return null;let pe=v._readableState;return pe!=null&&pe.errored?!1:typeof(pe==null?void 0:pe.endEmitted)!="boolean"?null:!!(pe.endEmitted||Y===!1&&pe.ended===!0&&pe.length===0)}function G(v){return v&&v[l]!=null?v[l]:typeof(v==null?void 0:v.readable)!="boolean"?null:U(v)?!1:g(v)&&v.readable&&!W(v)}function ne(v){return typeof(v==null?void 0:v.writable)!="boolean"?null:U(v)?!1:b(v)&&v.writable&&!T(v)}function C(v,Y){return y(v)?U(v)?!0:!((Y==null?void 0:Y.readable)!==!1&&G(v)||(Y==null?void 0:Y.writable)!==!1&&ne(v)):null}function V(v){var Y,pe;return y(v)?v.writableErrored?v.writableErrored:(Y=(pe=v._writableState)===null||pe===void 0?void 0:pe.errored)!==null&&Y!==void 0?Y:null:null}function re(v){var Y,pe;return y(v)?v.readableErrored?v.readableErrored:(Y=(pe=v._readableState)===null||pe===void 0?void 0:pe.errored)!==null&&Y!==void 0?Y:null:null}function J(v){if(!y(v))return null;if(typeof v.closed=="boolean")return v.closed;let Y=v._writableState,pe=v._readableState;return typeof(Y==null?void 0:Y.closed)=="boolean"||typeof(pe==null?void 0:pe.closed)=="boolean"?(Y==null?void 0:Y.closed)||(pe==null?void 0:pe.closed):typeof v._closed=="boolean"&&be(v)?v._closed:null}function be(v){return typeof v._closed=="boolean"&&typeof v._defaultKeepAlive=="boolean"&&typeof v._removedConnection=="boolean"&&typeof v._removedContLen=="boolean"}function ae(v){return typeof v._sent100=="boolean"&&be(v)}function q(v){var Y;return typeof v._consuming=="boolean"&&typeof v._dumped=="boolean"&&((Y=v.req)===null||Y===void 0?void 0:Y.upgradeOrConnect)===void 0}function _e(v){if(!y(v))return null;let Y=v._writableState,pe=v._readableState,Se=Y||pe;return!Se&&ae(v)||!!(Se&&Se.autoDestroy&&Se.emitClose&&Se.closed===!1)}function se(v){var Y;return!!(v&&((Y=v[c])!==null&&Y!==void 0?Y:v.readableDidRead||v.readableAborted))}function Ee(v){var Y,pe,Se,fe,B,A,K,de,te,Z;return!!(v&&((Y=(pe=(Se=(fe=(B=(A=v[a])!==null&&A!==void 0?A:v.readableErrored)!==null&&B!==void 0?B:v.writableErrored)!==null&&fe!==void 0?fe:(K=v._readableState)===null||K===void 0?void 0:K.errorEmitted)!==null&&Se!==void 0?Se:(de=v._writableState)===null||de===void 0?void 0:de.errorEmitted)!==null&&pe!==void 0?pe:(te=v._readableState)===null||te===void 0?void 0:te.errored)!==null&&Y!==void 0?Y:!((Z=v._writableState)===null||Z===void 0)&&Z.errored))}e.exports={kDestroyed:i,isDisturbed:se,kIsDisturbed:c,isErrored:Ee,kIsErrored:a,isReadable:G,kIsReadable:l,kIsClosedPromise:u,kControllerErrorFunction:d,isClosed:J,isDestroyed:U,isDuplexNodeStream:m,isFinished:C,isIterable:j,isReadableNodeStream:g,isReadableStream:w,isReadableEnded:N,isReadableFinished:W,isReadableErrored:re,isNodeStream:y,isWebStream:E,isWritable:ne,isWritableNodeStream:b,isWritableStream:R,isWritableEnded:T,isWritableFinished:I,isWritableErrored:V,isServerRequest:q,isServerResponse:ae,willEmitClose:_e,isTransformStream:S}}),Xt=ye((t,e)=>{ce(),he(),ue();var r=wr(),{AbortError:n,codes:s}=dt(),{ERR_INVALID_ARG_TYPE:o,ERR_STREAM_PREMATURE_CLOSE:i}=s,{kEmptyObject:a,once:l}=Dt(),{validateAbortSignal:c,validateFunction:u,validateObject:d,validateBoolean:g}=Kn(),{Promise:b,PromisePrototypeThen:m}=Xe(),{isClosed:y,isReadable:w,isReadableNodeStream:R,isReadableStream:S,isReadableFinished:E,isReadableErrored:j,isWritable:U,isWritableNodeStream:T,isWritableStream:I,isWritableFinished:N,isWritableErrored:W,isNodeStream:G,willEmitClose:ne,kIsClosedPromise:C}=Wt();function V(q){return q.setHeader&&typeof q.abort=="function"}var re=()=>{};function J(q,_e,se){var Ee,v;if(arguments.length===2?(se=_e,_e=a):_e==null?_e=a:d(_e,"options"),u(se,"callback"),c(_e.signal,"options.signal"),se=l(se),S(q)||I(q))return be(q,_e,se);if(!G(q))throw new o("stream",["ReadableStream","WritableStream","Stream"],q);let Y=(Ee=_e.readable)!==null&&Ee!==void 0?Ee:R(q),pe=(v=_e.writable)!==null&&v!==void 0?v:T(q),Se=q._writableState,fe=q._readableState,B=()=>{q.writable||de()},A=ne(q)&&R(q)===Y&&T(q)===pe,K=N(q,!1),de=()=>{K=!0,q.destroyed&&(A=!1),!(A&&(!q.readable||Y))&&(!Y||te)&&se.call(q)},te=E(q,!1),Z=()=>{te=!0,q.destroyed&&(A=!1),!(A&&(!q.writable||pe))&&(!pe||K)&&se.call(q)},we=X=>{se.call(q,X)},ge=y(q),x=()=>{ge=!0;let X=W(q)||j(q);if(X&&typeof X!="boolean")return se.call(q,X);if(Y&&!te&&R(q,!0)&&!E(q,!1))return se.call(q,new i);if(pe&&!K&&!N(q,!1))return se.call(q,new i);se.call(q)},D=()=>{ge=!0;let X=W(q)||j(q);if(X&&typeof X!="boolean")return se.call(q,X);se.call(q)},F=()=>{q.req.on("finish",de)};V(q)?(q.on("complete",de),A||q.on("abort",x),q.req?F():q.on("request",F)):pe&&!Se&&(q.on("end",B),q.on("close",B)),!A&&typeof q.aborted=="boolean"&&q.on("aborted",x),q.on("end",Z),q.on("finish",de),_e.error!==!1&&q.on("error",we),q.on("close",x),ge?r.nextTick(x):Se!=null&&Se.errorEmitted||fe!=null&&fe.errorEmitted?A||r.nextTick(D):(!Y&&(!A||w(q))&&(K||U(q)===!1)||!pe&&(!A||U(q))&&(te||w(q)===!1)||fe&&q.req&&q.aborted)&&r.nextTick(D);let oe=()=>{se=re,q.removeListener("aborted",x),q.removeListener("complete",de),q.removeListener("abort",x),q.removeListener("request",F),q.req&&q.req.removeListener("finish",de),q.removeListener("end",B),q.removeListener("close",B),q.removeListener("finish",de),q.removeListener("end",Z),q.removeListener("error",we),q.removeListener("close",x)};if(_e.signal&&!ge){let X=()=>{let M=se;oe(),M.call(q,new n(void 0,{cause:_e.signal.reason}))};if(_e.signal.aborted)r.nextTick(X);else{let M=se;se=l((...z)=>{_e.signal.removeEventListener("abort",X),M.apply(q,z)}),_e.signal.addEventListener("abort",X)}}return oe}function be(q,_e,se){let Ee=!1,v=re;if(_e.signal)if(v=()=>{Ee=!0,se.call(q,new n(void 0,{cause:_e.signal.reason}))},_e.signal.aborted)r.nextTick(v);else{let pe=se;se=l((...Se)=>{_e.signal.removeEventListener("abort",v),pe.apply(q,Se)}),_e.signal.addEventListener("abort",v)}let Y=(...pe)=>{Ee||r.nextTick(()=>se.apply(q,pe))};return m(q[C].promise,Y,Y),re}function ae(q,_e){var se;let Ee=!1;return _e===null&&(_e=a),(se=_e)!==null&&se!==void 0&&se.cleanup&&(g(_e.cleanup,"cleanup"),Ee=_e.cleanup),new b((v,Y)=>{let pe=J(q,_e,Se=>{Ee&&pe(),Se?Y(Se):v()})})}e.exports=J,e.exports.finished=ae}),Rr=ye((t,e)=>{ce(),he(),ue();var r=wr(),{aggregateTwoErrors:n,codes:{ERR_MULTIPLE_CALLBACK:s},AbortError:o}=dt(),{Symbol:i}=Xe(),{kDestroyed:a,isDestroyed:l,isFinished:c,isServerRequest:u}=Wt(),d=i("kDestroy"),g=i("kConstruct");function b(C,V,re){C&&(C.stack,V&&!V.errored&&(V.errored=C),re&&!re.errored&&(re.errored=C))}function m(C,V){let re=this._readableState,J=this._writableState,be=J||re;return J!=null&&J.destroyed||re!=null&&re.destroyed?(typeof V=="function"&&V(),this):(b(C,J,re),J&&(J.destroyed=!0),re&&(re.destroyed=!0),be.constructed?y(this,C,V):this.once(d,function(ae){y(this,n(ae,C),V)}),this)}function y(C,V,re){let J=!1;function be(ae){if(J)return;J=!0;let q=C._readableState,_e=C._writableState;b(ae,_e,q),_e&&(_e.closed=!0),q&&(q.closed=!0),typeof re=="function"&&re(ae),ae?r.nextTick(w,C,ae):r.nextTick(R,C)}try{C._destroy(V||null,be)}catch(ae){be(ae)}}function w(C,V){S(C,V),R(C)}function R(C){let V=C._readableState,re=C._writableState;re&&(re.closeEmitted=!0),V&&(V.closeEmitted=!0),(re!=null&&re.emitClose||V!=null&&V.emitClose)&&C.emit("close")}function S(C,V){let re=C._readableState,J=C._writableState;J!=null&&J.errorEmitted||re!=null&&re.errorEmitted||(J&&(J.errorEmitted=!0),re&&(re.errorEmitted=!0),C.emit("error",V))}function E(){let C=this._readableState,V=this._writableState;C&&(C.constructed=!0,C.closed=!1,C.closeEmitted=!1,C.destroyed=!1,C.errored=null,C.errorEmitted=!1,C.reading=!1,C.ended=C.readable===!1,C.endEmitted=C.readable===!1),V&&(V.constructed=!0,V.destroyed=!1,V.closed=!1,V.closeEmitted=!1,V.errored=null,V.errorEmitted=!1,V.finalCalled=!1,V.prefinished=!1,V.ended=V.writable===!1,V.ending=V.writable===!1,V.finished=V.writable===!1)}function j(C,V,re){let J=C._readableState,be=C._writableState;if(be!=null&&be.destroyed||J!=null&&J.destroyed)return this;J!=null&&J.autoDestroy||be!=null&&be.autoDestroy?C.destroy(V):V&&(V.stack,be&&!be.errored&&(be.errored=V),J&&!J.errored&&(J.errored=V),re?r.nextTick(S,C,V):S(C,V))}function U(C,V){if(typeof C._construct!="function")return;let re=C._readableState,J=C._writableState;re&&(re.constructed=!1),J&&(J.constructed=!1),C.once(g,V),!(C.listenerCount(g)>1)&&r.nextTick(T,C)}function T(C){let V=!1;function re(J){if(V){j(C,J??new s);return}V=!0;let be=C._readableState,ae=C._writableState,q=ae||be;be&&(be.constructed=!0),ae&&(ae.constructed=!0),q.destroyed?C.emit(d,J):J?j(C,J,!0):r.nextTick(I,C)}try{C._construct(J=>{r.nextTick(re,J)})}catch(J){r.nextTick(re,J)}}function I(C){C.emit(g)}function N(C){return(C==null?void 0:C.setHeader)&&typeof C.abort=="function"}function W(C){C.emit("close")}function G(C,V){C.emit("error",V),r.nextTick(W,C)}function ne(C,V){!C||l(C)||(!V&&!c(C)&&(V=new o),u(C)?(C.socket=null,C.destroy(V)):N(C)?C.abort():N(C.req)?C.req.abort():typeof C.destroy=="function"?C.destroy(V):typeof C.close=="function"?C.close():V?r.nextTick(G,C,V):r.nextTick(W,C),C.destroyed||(C[a]=!0))}e.exports={construct:U,destroyer:ne,destroy:m,undestroy:E,errorOrDestroy:j}});function Le(){Le.init.call(this)}function hn(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function Pl(t){return t._maxListeners===void 0?Le.defaultMaxListeners:t._maxListeners}function Js(t,e,r,n){var s,o,i,a;if(hn(r),(o=t._events)===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),i=o[e]),i===void 0)i=o[e]=r,++t._eventsCount;else if(typeof i=="function"?i=o[e]=n?[r,i]:[i,r]:n?i.unshift(r):i.push(r),(s=Pl(t))>0&&i.length>s&&!i.warned){i.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=i.length,a=l,console&&console.warn&&console.warn(a)}return t}function Vf(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Ys(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},s=Vf.bind(n);return s.listener=r,n.wrapFn=s,s}function Qs(t,e,r){var n=t._events;if(n===void 0)return[];var s=n[e];return s===void 0?[]:typeof s=="function"?r?[s.listener||s]:[s]:r?function(o){for(var i=new Array(o.length),a=0;a<i.length;++a)i[a]=o[a].listener||o[a];return i}(s):Ol(s,s.length)}function Gs(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}function Ol(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}var Xs,Zs,Zt,ai,li,ci,gt,ea=nt(()=>{ce(),he(),ue(),Zt=typeof Reflect=="object"?Reflect:null,ai=Zt&&typeof Zt.apply=="function"?Zt.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)},Zs=Zt&&typeof Zt.ownKeys=="function"?Zt.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)},li=Number.isNaN||function(t){return t!=t},Xs=Le,Le.EventEmitter=Le,Le.prototype._events=void 0,Le.prototype._eventsCount=0,Le.prototype._maxListeners=void 0,ci=10,Object.defineProperty(Le,"defaultMaxListeners",{enumerable:!0,get:function(){return ci},set:function(t){if(typeof t!="number"||t<0||li(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");ci=t}}),Le.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Le.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||li(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},Le.prototype.getMaxListeners=function(){return Pl(this)},Le.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n=t==="error",s=this._events;if(s!==void 0)n=n&&s.error===void 0;else if(!n)return!1;if(n){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var i=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw i.context=o,i}var a=s[t];if(a===void 0)return!1;if(typeof a=="function")ai(a,this,e);else{var l=a.length,c=Ol(a,l);for(r=0;r<l;++r)ai(c[r],this,e)}return!0},Le.prototype.addListener=function(t,e){return Js(this,t,e,!1)},Le.prototype.on=Le.prototype.addListener,Le.prototype.prependListener=function(t,e){return Js(this,t,e,!0)},Le.prototype.once=function(t,e){return hn(e),this.on(t,Ys(this,t,e)),this},Le.prototype.prependOnceListener=function(t,e){return hn(e),this.prependListener(t,Ys(this,t,e)),this},Le.prototype.removeListener=function(t,e){var r,n,s,o,i;if(hn(e),(n=this._events)===void 0)return this;if((r=n[t])===void 0)return this;if(r===e||r.listener===e)--this._eventsCount==0?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===e||r[o].listener===e){i=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():function(a,l){for(;l+1<a.length;l++)a[l]=a[l+1];a.pop()}(r,s),r.length===1&&(n[t]=r[0]),n.removeListener!==void 0&&this.emit("removeListener",t,i||e)}return this},Le.prototype.off=Le.prototype.removeListener,Le.prototype.removeAllListeners=function(t){var e,r,n;if((r=this._events)===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var s,o=Object.keys(r);for(n=0;n<o.length;++n)(s=o[n])!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(e=r[t])=="function")this.removeListener(t,e);else if(e!==void 0)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},Le.prototype.listeners=function(t){return Qs(this,t,!0)},Le.prototype.rawListeners=function(t){return Qs(this,t,!1)},Le.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Gs.call(t,e)},Le.prototype.listenerCount=Gs,Le.prototype.eventNames=function(){return this._eventsCount>0?Zs(this._events):[]},gt=Xs,gt.EventEmitter,gt.defaultMaxListeners,gt.init,gt.listenerCount,gt.EventEmitter,gt.defaultMaxListeners,gt.init,gt.listenerCount}),vr={};_r(vr,{EventEmitter:()=>xl,default:()=>gt,defaultMaxListeners:()=>Bl,init:()=>Nl,listenerCount:()=>Ml,on:()=>jl,once:()=>Ul});var xl,Bl,Nl,Ml,jl,Ul,Pr=nt(()=>{ce(),he(),ue(),ea(),ea(),gt.once=function(t,e){return new Promise((r,n)=>{function s(...i){o!==void 0&&t.removeListener("error",o),r(i)}let o;e!=="error"&&(o=i=>{t.removeListener(name,s),n(i)},t.once("error",o)),t.once(e,s)})},gt.on=function(t,e){let r=[],n=[],s=null,o=!1,i={async next(){let c=r.shift();if(c)return createIterResult(c,!1);if(s){let u=Promise.reject(s);return s=null,u}return o?createIterResult(void 0,!0):new Promise((u,d)=>n.push({resolve:u,reject:d}))},async return(){t.removeListener(e,a),t.removeListener("error",l),o=!0;for(let c of n)c.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(c){s=c,t.removeListener(e,a),t.removeListener("error",l)},[Symbol.asyncIterator](){return this}};return t.on(e,a),t.on("error",l),i;function a(...c){let u=n.shift();u?u.resolve(createIterResult(c,!1)):r.push(c)}function l(c){o=!0;let u=n.shift();u?u.reject(c):s=c,i.return()}},{EventEmitter:xl,defaultMaxListeners:Bl,init:Nl,listenerCount:Ml,on:jl,once:Ul}=gt}),ys=ye((t,e)=>{ce(),he(),ue();var{ArrayIsArray:r,ObjectSetPrototypeOf:n}=Xe(),{EventEmitter:s}=(Pr(),De(vr));function o(a){s.call(this,a)}n(o.prototype,s.prototype),n(o,s),o.prototype.pipe=function(a,l){let c=this;function u(R){a.writable&&a.write(R)===!1&&c.pause&&c.pause()}c.on("data",u);function d(){c.readable&&c.resume&&c.resume()}a.on("drain",d),!a._isStdio&&(!l||l.end!==!1)&&(c.on("end",b),c.on("close",m));let g=!1;function b(){g||(g=!0,a.end())}function m(){g||(g=!0,typeof a.destroy=="function"&&a.destroy())}function y(R){w(),s.listenerCount(this,"error")===0&&this.emit("error",R)}i(c,"error",y),i(a,"error",y);function w(){c.removeListener("data",u),a.removeListener("drain",d),c.removeListener("end",b),c.removeListener("close",m),c.removeListener("error",y),a.removeListener("error",y),c.removeListener("end",w),c.removeListener("close",w),a.removeListener("close",w)}return c.on("end",w),c.on("close",w),a.on("close",w),a.emit("pipe",c),a};function i(a,l,c){if(typeof a.prependListener=="function")return a.prependListener(l,c);!a._events||!a._events[l]?a.on(l,c):r(a._events[l])?a._events[l].unshift(c):a._events[l]=[c,a._events[l]]}e.exports={Stream:o,prependListener:i}}),Jn=ye((t,e)=>{ce(),he(),ue();var{AbortError:r,codes:n}=dt(),{isNodeStream:s,isWebStream:o,kControllerErrorFunction:i}=Wt(),a=Xt(),{ERR_INVALID_ARG_TYPE:l}=n,c=(u,d)=>{if(typeof u!="object"||!("aborted"in u))throw new l(d,"AbortSignal",u)};e.exports.addAbortSignal=function(u,d){if(c(u,"signal"),!s(d)&&!o(d))throw new l("stream",["ReadableStream","WritableStream","Stream"],d);return e.exports.addAbortSignalNoValidate(u,d)},e.exports.addAbortSignalNoValidate=function(u,d){if(typeof u!="object"||!("aborted"in u))return d;let g=s(d)?()=>{d.destroy(new r(void 0,{cause:u.reason}))}:()=>{d[i](new r(void 0,{cause:u.reason}))};return u.aborted?g():(u.addEventListener("abort",g),a(d,()=>u.removeEventListener("abort",g))),d}}),zf=ye((t,e)=>{ce(),he(),ue();var{StringPrototypeSlice:r,SymbolIterator:n,TypedArrayPrototypeSet:s,Uint8Array:o}=Xe(),{Buffer:i}=(ot(),De(it)),{inspect:a}=Dt();e.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(l){let c={data:l,next:null};this.length>0?this.tail.next=c:this.head=c,this.tail=c,++this.length}unshift(l){let c={data:l,next:this.head};this.length===0&&(this.tail=c),this.head=c,++this.length}shift(){if(this.length===0)return;let l=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,l}clear(){this.head=this.tail=null,this.length=0}join(l){if(this.length===0)return"";let c=this.head,u=""+c.data;for(;(c=c.next)!==null;)u+=l+c.data;return u}concat(l){if(this.length===0)return i.alloc(0);let c=i.allocUnsafe(l>>>0),u=this.head,d=0;for(;u;)s(c,u.data,d),d+=u.data.length,u=u.next;return c}consume(l,c){let u=this.head.data;if(l<u.length){let d=u.slice(0,l);return this.head.data=u.slice(l),d}return l===u.length?this.shift():c?this._getString(l):this._getBuffer(l)}first(){return this.head.data}*[n](){for(let l=this.head;l;l=l.next)yield l.data}_getString(l){let c="",u=this.head,d=0;do{let g=u.data;if(l>g.length)c+=g,l-=g.length;else{l===g.length?(c+=g,++d,u.next?this.head=u.next:this.head=this.tail=null):(c+=r(g,0,l),this.head=u,u.data=r(g,l));break}++d}while((u=u.next)!==null);return this.length-=d,c}_getBuffer(l){let c=i.allocUnsafe(l),u=l,d=this.head,g=0;do{let b=d.data;if(l>b.length)s(c,b,u-l),l-=b.length;else{l===b.length?(s(c,b,u-l),++g,d.next?this.head=d.next:this.head=this.tail=null):(s(c,new o(b.buffer,b.byteOffset,l),u-l),this.head=d,d.data=b.slice(l));break}++g}while((d=d.next)!==null);return this.length-=g,c}[Symbol.for("nodejs.util.inspect.custom")](l,c){return a(this,{...c,depth:0,customInspect:!1})}}}),_s=ye((t,e)=>{ce(),he(),ue();var{MathFloor:r,NumberIsInteger:n}=Xe(),{ERR_INVALID_ARG_VALUE:s}=dt().codes;function o(l,c,u){return l.highWaterMark!=null?l.highWaterMark:c?l[u]:null}function i(l){return l?16:16*1024}function a(l,c,u,d){let g=o(c,d,u);if(g!=null){if(!n(g)||g<0){let b=d?`options.${u}`:"options.highWaterMark";throw new s(b,g)}return r(g)}return i(l.objectMode)}e.exports={getHighWaterMark:a,getDefaultHighWaterMark:i}});function ta(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return r===-1&&(r=e),[r,r===e?0:4-r%4]}function Kf(t,e,r){for(var n,s,o=[],i=e;i<r;i+=3)n=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(255&t[i+2]),o.push(Et[(s=n)>>18&63]+Et[s>>12&63]+Et[s>>6&63]+Et[63&s]);return o.join("")}function jt(t){if(t>2147483647)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,me.prototype),e}function me(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Lo(t)}return Ll(t,e,r)}function Ll(t,e,r){if(typeof t=="string")return function(o,i){if(typeof i=="string"&&i!==""||(i="utf8"),!me.isEncoding(i))throw new TypeError("Unknown encoding: "+i);var a=0|Fl(o,i),l=jt(a),c=l.write(o,i);return c!==a&&(l=l.slice(0,c)),l}(t,e);if(ArrayBuffer.isView(t))return ui(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Ut(t,ArrayBuffer)||t&&Ut(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ut(t,SharedArrayBuffer)||t&&Ut(t.buffer,SharedArrayBuffer)))return Jf(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return me.from(n,e,r);var s=function(o){if(me.isBuffer(o)){var i=0|ws(o.length),a=jt(i);return a.length===0||o.copy(a,0,0,i),a}if(o.length!==void 0)return typeof o.length!="number"||vs(o.length)?jt(0):ui(o);if(o.type==="Buffer"&&Array.isArray(o.data))return ui(o.data)}(t);if(s)return s;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return me.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function Dl(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function Lo(t){return Dl(t),jt(t<0?0:0|ws(t))}function ui(t){for(var e=t.length<0?0:0|ws(t.length),r=jt(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function Jf(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=e===void 0&&r===void 0?new Uint8Array(t):r===void 0?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,me.prototype),n}function ws(t){if(t>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|t}function Fl(t,e){if(me.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Ut(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;for(var s=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Do(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ql(t).length;default:if(s)return n?-1:Do(t).length;e=(""+e).toLowerCase(),s=!0}}function Yf(t,e,r){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return id(this,e,r);case"utf8":case"utf-8":return Wl(this,e,r);case"ascii":return rd(this,e,r);case"latin1":case"binary":return nd(this,e,r);case"base64":return td(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return od(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function er(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function ra(t,e,r,n,s){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),vs(r=+r)&&(r=s?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(s)return-1;r=t.length-1}else if(r<0){if(!s)return-1;r=0}if(typeof e=="string"&&(e=me.from(e,n)),me.isBuffer(e))return e.length===0?-1:na(t,e,r,n,s);if(typeof e=="number")return e&=255,typeof Uint8Array.prototype.indexOf=="function"?s?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):na(t,[e],r,n,s);throw new TypeError("val must be string, number or Buffer")}function na(t,e,r,n,s){var o,i=1,a=t.length,l=e.length;if(n!==void 0&&((n=String(n).toLowerCase())==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;i=2,a/=2,l/=2,r/=2}function c(b,m){return i===1?b[m]:b.readUInt16BE(m*i)}if(s){var u=-1;for(o=r;o<a;o++)if(c(t,o)===c(e,u===-1?0:o-u)){if(u===-1&&(u=o),o-u+1===l)return u*i}else u!==-1&&(o-=o-u),u=-1}else for(r+l>a&&(r=a-l),o=r;o>=0;o--){for(var d=!0,g=0;g<l;g++)if(c(t,o+g)!==c(e,g)){d=!1;break}if(d)return o}return-1}function Qf(t,e,r,n){r=Number(r)||0;var s=t.length-r;n?(n=Number(n))>s&&(n=s):n=s;var o=e.length;n>o/2&&(n=o/2);for(var i=0;i<n;++i){var a=parseInt(e.substr(2*i,2),16);if(vs(a))return i;t[r+i]=a}return i}function Gf(t,e,r,n){return Yn(Do(e,t.length-r),t,r,n)}function $l(t,e,r,n){return Yn(function(s){for(var o=[],i=0;i<s.length;++i)o.push(255&s.charCodeAt(i));return o}(e),t,r,n)}function Xf(t,e,r,n){return $l(t,e,r,n)}function Zf(t,e,r,n){return Yn(ql(e),t,r,n)}function ed(t,e,r,n){return Yn(function(s,o){for(var i,a,l,c=[],u=0;u<s.length&&!((o-=2)<0);++u)i=s.charCodeAt(u),a=i>>8,l=i%256,c.push(l),c.push(a);return c}(e,t.length-r),t,r,n)}function td(t,e,r){return e===0&&r===t.length?Tn.fromByteArray(t):Tn.fromByteArray(t.slice(e,r))}function Wl(t,e,r){r=Math.min(t.length,r);for(var n=[],s=e;s<r;){var o,i,a,l,c=t[s],u=null,d=c>239?4:c>223?3:c>191?2:1;if(s+d<=r)switch(d){case 1:c<128&&(u=c);break;case 2:(192&(o=t[s+1]))==128&&(l=(31&c)<<6|63&o)>127&&(u=l);break;case 3:o=t[s+1],i=t[s+2],(192&o)==128&&(192&i)==128&&(l=(15&c)<<12|(63&o)<<6|63&i)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:o=t[s+1],i=t[s+2],a=t[s+3],(192&o)==128&&(192&i)==128&&(192&a)==128&&(l=(15&c)<<18|(63&o)<<12|(63&i)<<6|63&a)>65535&&l<1114112&&(u=l)}u===null?(u=65533,d=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),s+=d}return function(g){var b=g.length;if(b<=4096)return String.fromCharCode.apply(String,g);for(var m="",y=0;y<b;)m+=String.fromCharCode.apply(String,g.slice(y,y+=4096));return m}(n)}function rd(t,e,r){var n="";r=Math.min(t.length,r);for(var s=e;s<r;++s)n+=String.fromCharCode(127&t[s]);return n}function nd(t,e,r){var n="";r=Math.min(t.length,r);for(var s=e;s<r;++s)n+=String.fromCharCode(t[s]);return n}function id(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var s="",o=e;o<r;++o)s+=zl[t[o]];return s}function od(t,e,r){for(var n=t.slice(e,r),s="",o=0;o<n.length;o+=2)s+=String.fromCharCode(n[o]+256*n[o+1]);return s}function tt(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function ut(t,e,r,n,s,o){if(!me.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>s||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function Hl(t,e,r,n,s,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function ia(t,e,r,n,s){return e=+e,r>>>=0,s||Hl(t,0,r,4),sr.write(t,e,r,n,23,4),r+4}function oa(t,e,r,n,s){return e=+e,r>>>=0,s||Hl(t,0,r,8),sr.write(t,e,r,n,52,8),r+8}function Do(t,e){var r;e=e||1/0;for(var n=t.length,s=null,o=[],i=0;i<n;++i){if((r=t.charCodeAt(i))>55295&&r<57344){if(!s){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(i+1===n){(e-=3)>-1&&o.push(239,191,189);continue}s=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),s=r;continue}r=65536+(s-55296<<10|r-56320)}else s&&(e-=3)>-1&&o.push(239,191,189);if(s=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function ql(t){return Tn.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(Vl,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(t))}function Yn(t,e,r,n){for(var s=0;s<n&&!(s+r>=e.length||s>=t.length);++s)e[s+r]=t[s];return s}function Ut(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function vs(t){return t!=t}function sa(t,e){for(var r in t)e[r]=t[r]}function tr(t,e,r){return wt(t,e,r)}function Br(t){var e;switch(this.encoding=function(r){var n=function(s){if(!s)return"utf8";for(var o;;)switch(s){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return s;default:if(o)return;s=(""+s).toLowerCase(),o=!0}}(r);if(typeof n!="string"&&(kn.isEncoding===Fo||!Fo(r)))throw new Error("Unknown encoding: "+r);return n||r}(t),this.encoding){case"utf16le":this.text=ad,this.end=ld,e=4;break;case"utf8":this.fillLast=sd,e=4;break;case"base64":this.text=cd,this.end=ud,e=3;break;default:return this.write=hd,this.end=fd,void 0}this.lastNeed=0,this.lastTotal=0,this.lastChar=kn.allocUnsafe(e)}function hi(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function sd(t){var e=this.lastTotal-this.lastNeed,r=function(n,s,o){if((192&s[0])!=128)return n.lastNeed=0,"";if(n.lastNeed>1&&s.length>1){if((192&s[1])!=128)return n.lastNeed=1,"";if(n.lastNeed>2&&s.length>2&&(192&s[2])!=128)return n.lastNeed=2,""}}(this,t);return r!==void 0?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length,void 0)}function ad(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function ld(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function cd(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function ud(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function hd(t){return t.toString(this.encoding)}function fd(t){return t&&t.length?this.write(t):""}var aa,Et,pt,la,Zr,rr,ca,ua,Ct,Tn,sr,fi,Vl,zl,Nr,Mr,wt,ha,Cr,kn,Fo,fa=nt(()=>{for(ce(),he(),ue(),aa={byteLength:function(t){var e=ta(t),r=e[0],n=e[1];return 3*(r+n)/4-n},toByteArray:function(t){var e,r,n=ta(t),s=n[0],o=n[1],i=new la(function(c,u,d){return 3*(u+d)/4-d}(0,s,o)),a=0,l=o>0?s-4:s;for(r=0;r<l;r+=4)e=pt[t.charCodeAt(r)]<<18|pt[t.charCodeAt(r+1)]<<12|pt[t.charCodeAt(r+2)]<<6|pt[t.charCodeAt(r+3)],i[a++]=e>>16&255,i[a++]=e>>8&255,i[a++]=255&e;return o===2&&(e=pt[t.charCodeAt(r)]<<2|pt[t.charCodeAt(r+1)]>>4,i[a++]=255&e),o===1&&(e=pt[t.charCodeAt(r)]<<10|pt[t.charCodeAt(r+1)]<<4|pt[t.charCodeAt(r+2)]>>2,i[a++]=e>>8&255,i[a++]=255&e),i},fromByteArray:function(t){for(var e,r=t.length,n=r%3,s=[],o=0,i=r-n;o<i;o+=16383)s.push(Kf(t,o,o+16383>i?i:o+16383));return n===1?(e=t[r-1],s.push(Et[e>>2]+Et[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],s.push(Et[e>>10]+Et[e>>4&63]+Et[e<<2&63]+"=")),s.join("")}},Et=[],pt=[],la=typeof Uint8Array<"u"?Uint8Array:Array,Zr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rr=0,ca=Zr.length;rr<ca;++rr)Et[rr]=Zr[rr],pt[Zr.charCodeAt(rr)]=rr;pt[45]=62,pt[95]=63,ua={read:function(t,e,r,n,s){var o,i,a=8*s-n-1,l=(1<<a)-1,c=l>>1,u=-7,d=r?s-1:0,g=r?-1:1,b=t[e+d];for(d+=g,o=b&(1<<-u)-1,b>>=-u,u+=a;u>0;o=256*o+t[e+d],d+=g,u-=8);for(i=o&(1<<-u)-1,o>>=-u,u+=n;u>0;i=256*i+t[e+d],d+=g,u-=8);if(o===0)o=1-c;else{if(o===l)return i?NaN:1/0*(b?-1:1);i+=Math.pow(2,n),o-=c}return(b?-1:1)*i*Math.pow(2,o-n)},write:function(t,e,r,n,s,o){var i,a,l,c=8*o-s-1,u=(1<<c)-1,d=u>>1,g=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=n?0:o-1,m=n?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,i=u):(i=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-i))<1&&(i--,l*=2),(e+=i+d>=1?g/l:g*Math.pow(2,1-d))*l>=2&&(i++,l/=2),i+d>=u?(a=0,i=u):i+d>=1?(a=(e*l-1)*Math.pow(2,s),i+=d):(a=e*Math.pow(2,d-1)*Math.pow(2,s),i=0));s>=8;t[r+b]=255&a,b+=m,a/=256,s-=8);for(i=i<<s|a,c+=s;c>0;t[r+b]=255&i,b+=m,i/=256,c-=8);t[r+b-m]|=128*y}},Ct={},Tn=aa,sr=ua,fi=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,Ct.Buffer=me,Ct.SlowBuffer=function(t){return+t!=t&&(t=0),me.alloc(+t)},Ct.INSPECT_MAX_BYTES=50,Ct.kMaxLength=2147483647,me.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}(),me.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(me.prototype,"parent",{enumerable:!0,get:function(){if(me.isBuffer(this))return this.buffer}}),Object.defineProperty(me.prototype,"offset",{enumerable:!0,get:function(){if(me.isBuffer(this))return this.byteOffset}}),me.poolSize=8192,me.from=function(t,e,r){return Ll(t,e,r)},Object.setPrototypeOf(me.prototype,Uint8Array.prototype),Object.setPrototypeOf(me,Uint8Array),me.alloc=function(t,e,r){return function(n,s,o){return Dl(n),n<=0?jt(n):s!==void 0?typeof o=="string"?jt(n).fill(s,o):jt(n).fill(s):jt(n)}(t,e,r)},me.allocUnsafe=function(t){return Lo(t)},me.allocUnsafeSlow=function(t){return Lo(t)},me.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==me.prototype},me.compare=function(t,e){if(Ut(t,Uint8Array)&&(t=me.from(t,t.offset,t.byteLength)),Ut(e,Uint8Array)&&(e=me.from(e,e.offset,e.byteLength)),!me.isBuffer(t)||!me.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,n=e.length,s=0,o=Math.min(r,n);s<o;++s)if(t[s]!==e[s]){r=t[s],n=e[s];break}return r<n?-1:n<r?1:0},me.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},me.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return me.alloc(0);var r;if(e===void 0)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=me.allocUnsafe(e),s=0;for(r=0;r<t.length;++r){var o=t[r];if(Ut(o,Uint8Array)&&(o=me.from(o)),!me.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,s),s+=o.length}return n},me.byteLength=Fl,me.prototype._isBuffer=!0,me.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)er(this,e,e+1);return this},me.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)er(this,e,e+3),er(this,e+1,e+2);return this},me.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)er(this,e,e+7),er(this,e+1,e+6),er(this,e+2,e+5),er(this,e+3,e+4);return this},me.prototype.toString=function(){var t=this.length;return t===0?"":arguments.length===0?Wl(this,0,t):Yf.apply(this,arguments)},me.prototype.toLocaleString=me.prototype.toString,me.prototype.equals=function(t){if(!me.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||me.compare(this,t)===0},me.prototype.inspect=function(){var t="",e=Ct.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},fi&&(me.prototype[fi]=me.prototype.inspect),me.prototype.compare=function(t,e,r,n,s){if(Ut(t,Uint8Array)&&(t=me.from(t,t.offset,t.byteLength)),!me.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(e===void 0&&(e=0),r===void 0&&(r=t?t.length:0),n===void 0&&(n=0),s===void 0&&(s=this.length),e<0||r>t.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&e>=r)return 0;if(n>=s)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(s>>>=0)-(n>>>=0),i=(r>>>=0)-(e>>>=0),a=Math.min(o,i),l=this.slice(n,s),c=t.slice(e,r),u=0;u<a;++u)if(l[u]!==c[u]){o=l[u],i=c[u];break}return o<i?-1:i<o?1:0},me.prototype.includes=function(t,e,r){return this.indexOf(t,e,r)!==-1},me.prototype.indexOf=function(t,e,r){return ra(this,t,e,r,!0)},me.prototype.lastIndexOf=function(t,e,r){return ra(this,t,e,r,!1)},me.prototype.write=function(t,e,r,n){if(e===void 0)n="utf8",r=this.length,e=0;else if(r===void 0&&typeof e=="string")n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,n===void 0&&(n="utf8")):(n=r,r=void 0)}var s=this.length-e;if((r===void 0||r>s)&&(r=s),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return Qf(this,t,e,r);case"utf8":case"utf-8":return Gf(this,t,e,r);case"ascii":return $l(this,t,e,r);case"latin1":case"binary":return Xf(this,t,e,r);case"base64":return Zf(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ed(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},me.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},me.prototype.slice=function(t,e){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=e===void 0?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return Object.setPrototypeOf(n,me.prototype),n},me.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||tt(t,e,this.length);for(var n=this[t],s=1,o=0;++o<e&&(s*=256);)n+=this[t+o]*s;return n},me.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||tt(t,e,this.length);for(var n=this[t+--e],s=1;e>0&&(s*=256);)n+=this[t+--e]*s;return n},me.prototype.readUInt8=function(t,e){return t>>>=0,e||tt(t,1,this.length),this[t]},me.prototype.readUInt16LE=function(t,e){return t>>>=0,e||tt(t,2,this.length),this[t]|this[t+1]<<8},me.prototype.readUInt16BE=function(t,e){return t>>>=0,e||tt(t,2,this.length),this[t]<<8|this[t+1]},me.prototype.readUInt32LE=function(t,e){return t>>>=0,e||tt(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},me.prototype.readUInt32BE=function(t,e){return t>>>=0,e||tt(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},me.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||tt(t,e,this.length);for(var n=this[t],s=1,o=0;++o<e&&(s*=256);)n+=this[t+o]*s;return n>=(s*=128)&&(n-=Math.pow(2,8*e)),n},me.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||tt(t,e,this.length);for(var n=e,s=1,o=this[t+--n];n>0&&(s*=256);)o+=this[t+--n]*s;return o>=(s*=128)&&(o-=Math.pow(2,8*e)),o},me.prototype.readInt8=function(t,e){return t>>>=0,e||tt(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},me.prototype.readInt16LE=function(t,e){t>>>=0,e||tt(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},me.prototype.readInt16BE=function(t,e){t>>>=0,e||tt(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},me.prototype.readInt32LE=function(t,e){return t>>>=0,e||tt(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},me.prototype.readInt32BE=function(t,e){return t>>>=0,e||tt(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},me.prototype.readFloatLE=function(t,e){return t>>>=0,e||tt(t,4,this.length),sr.read(this,t,!0,23,4)},me.prototype.readFloatBE=function(t,e){return t>>>=0,e||tt(t,4,this.length),sr.read(this,t,!1,23,4)},me.prototype.readDoubleLE=function(t,e){return t>>>=0,e||tt(t,8,this.length),sr.read(this,t,!0,52,8)},me.prototype.readDoubleBE=function(t,e){return t>>>=0,e||tt(t,8,this.length),sr.read(this,t,!1,52,8)},me.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||ut(this,t,e,r,Math.pow(2,8*r)-1,0);var s=1,o=0;for(this[e]=255&t;++o<r&&(s*=256);)this[e+o]=t/s&255;return e+r},me.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||ut(this,t,e,r,Math.pow(2,8*r)-1,0);var s=r-1,o=1;for(this[e+s]=255&t;--s>=0&&(o*=256);)this[e+s]=t/o&255;return e+r},me.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||ut(this,t,e,1,255,0),this[e]=255&t,e+1},me.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||ut(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},me.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||ut(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},me.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||ut(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},me.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||ut(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},me.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var s=Math.pow(2,8*r-1);ut(this,t,e,r,s-1,-s)}var o=0,i=1,a=0;for(this[e]=255&t;++o<r&&(i*=256);)t<0&&a===0&&this[e+o-1]!==0&&(a=1),this[e+o]=(t/i>>0)-a&255;return e+r},me.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var s=Math.pow(2,8*r-1);ut(this,t,e,r,s-1,-s)}var o=r-1,i=1,a=0;for(this[e+o]=255&t;--o>=0&&(i*=256);)t<0&&a===0&&this[e+o+1]!==0&&(a=1),this[e+o]=(t/i>>0)-a&255;return e+r},me.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||ut(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},me.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||ut(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},me.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||ut(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},me.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||ut(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},me.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||ut(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},me.prototype.writeFloatLE=function(t,e,r){return ia(this,t,e,!0,r)},me.prototype.writeFloatBE=function(t,e,r){return ia(this,t,e,!1,r)},me.prototype.writeDoubleLE=function(t,e,r){return oa(this,t,e,!0,r)},me.prototype.writeDoubleBE=function(t,e,r){return oa(this,t,e,!1,r)},me.prototype.copy=function(t,e,r,n){if(!me.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||n===0||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var s=n-r;if(this===t&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(e,r,n);else if(this===t&&r<e&&e<n)for(var o=s-1;o>=0;--o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,n),e);return s},me.prototype.fill=function(t,e,r,n){if(typeof t=="string"){if(typeof e=="string"?(n=e,e=0,r=this.length):typeof r=="string"&&(n=r,r=this.length),n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!me.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(t.length===1){var s=t.charCodeAt(0);(n==="utf8"&&s<128||n==="latin1")&&(t=s)}}else typeof t=="number"?t&=255:typeof t=="boolean"&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=r===void 0?this.length:r>>>0,t||(t=0),typeof t=="number")for(o=e;o<r;++o)this[o]=t;else{var i=me.isBuffer(t)?t:me.from(t,n),a=i.length;if(a===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<r-e;++o)this[o+e]=i[o%a]}return this},Vl=/[^+/0-9A-Za-z-_]/g,zl=function(){for(var t=new Array(256),e=0;e<16;++e)for(var r=16*e,n=0;n<16;++n)t[r+n]="0123456789abcdef"[e]+"0123456789abcdef"[n];return t}(),Ct.Buffer,Ct.INSPECT_MAX_BYTES,Ct.kMaxLength,Nr={},Mr=Ct,wt=Mr.Buffer,wt.from&&wt.alloc&&wt.allocUnsafe&&wt.allocUnsafeSlow?Nr=Mr:(sa(Mr,Nr),Nr.Buffer=tr),tr.prototype=Object.create(wt.prototype),sa(wt,tr),tr.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return wt(t,e,r)},tr.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=wt(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n},tr.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return wt(t)},tr.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Mr.SlowBuffer(t)},ha=Nr,Cr={},kn=ha.Buffer,Fo=kn.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},Cr.StringDecoder=Br,Br.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if((e=this.fillLast(t))===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},Br.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e},Br.prototype.text=function(t,e){var r=function(s,o,i){var a=o.length-1;if(a<i)return 0;var l=hi(o[a]);return l>=0?(l>0&&(s.lastNeed=l-1),l):--a<i||l===-2?0:(l=hi(o[a]))>=0?(l>0&&(s.lastNeed=l-2),l):--a<i||l===-2?0:(l=hi(o[a]))>=0?(l>0&&(l===2?l=0:s.lastNeed=l-3),l):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},Br.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length},Cr.StringDecoder,Cr.StringDecoder}),Kl={};_r(Kl,{StringDecoder:()=>Jl,default:()=>Cr});var Jl,dd=nt(()=>{ce(),he(),ue(),fa(),fa(),Jl=Cr.StringDecoder}),Yl=ye((t,e)=>{ce(),he(),ue();var r=wr(),{PromisePrototypeThen:n,SymbolAsyncIterator:s,SymbolIterator:o}=Xe(),{Buffer:i}=(ot(),De(it)),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_NULL_VALUES:l}=dt().codes;function c(u,d,g){let b;if(typeof d=="string"||d instanceof i)return new u({objectMode:!0,...g,read(){this.push(d),this.push(null)}});let m;if(d&&d[s])m=!0,b=d[s]();else if(d&&d[o])m=!1,b=d[o]();else throw new a("iterable",["Iterable"],d);let y=new u({objectMode:!0,highWaterMark:1,...g}),w=!1;y._read=function(){w||(w=!0,S())},y._destroy=function(E,j){n(R(E),()=>r.nextTick(j,E),U=>r.nextTick(j,U||E))};async function R(E){let j=E!=null,U=typeof b.throw=="function";if(j&&U){let{value:T,done:I}=await b.throw(E);if(await T,I)return}if(typeof b.return=="function"){let{value:T}=await b.return();await T}}async function S(){for(;;){try{let{value:E,done:j}=m?await b.next():b.next();if(j)y.push(null);else{let U=E&&typeof E.then=="function"?await E:E;if(U===null)throw w=!1,new l;if(y.push(U))continue;w=!1}}catch(E){y.destroy(E)}break}}return y}e.exports=c}),Qn=ye((t,e)=>{ce(),he(),ue();var r=wr(),{ArrayPrototypeIndexOf:n,NumberIsInteger:s,NumberIsNaN:o,NumberParseInt:i,ObjectDefineProperties:a,ObjectKeys:l,ObjectSetPrototypeOf:c,Promise:u,SafeSet:d,SymbolAsyncIterator:g,Symbol:b}=Xe();e.exports=v,v.ReadableState=Ee;var{EventEmitter:m}=(Pr(),De(vr)),{Stream:y,prependListener:w}=ys(),{Buffer:R}=(ot(),De(it)),{addAbortSignal:S}=Jn(),E=Xt(),j=Dt().debuglog("stream",h=>{j=h}),U=zf(),T=Rr(),{getHighWaterMark:I,getDefaultHighWaterMark:N}=_s(),{aggregateTwoErrors:W,codes:{ERR_INVALID_ARG_TYPE:G,ERR_METHOD_NOT_IMPLEMENTED:ne,ERR_OUT_OF_RANGE:C,ERR_STREAM_PUSH_AFTER_EOF:V,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:re}}=dt(),{validateObject:J}=Kn(),be=b("kPaused"),{StringDecoder:ae}=(dd(),De(Kl)),q=Yl();c(v.prototype,y.prototype),c(v,y);var _e=()=>{},{errorOrDestroy:se}=T;function Ee(h,p,_){typeof _!="boolean"&&(_=p instanceof Ft()),this.objectMode=!!(h&&h.objectMode),_&&(this.objectMode=this.objectMode||!!(h&&h.readableObjectMode)),this.highWaterMark=h?I(this,h,"readableHighWaterMark",_):N(!1),this.buffer=new U,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[be]=null,this.errorEmitted=!1,this.emitClose=!h||h.emitClose!==!1,this.autoDestroy=!h||h.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=h&&h.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,h&&h.encoding&&(this.decoder=new ae(h.encoding),this.encoding=h.encoding)}function v(h){if(!(this instanceof v))return new v(h);let p=this instanceof Ft();this._readableState=new Ee(h,this,p),h&&(typeof h.read=="function"&&(this._read=h.read),typeof h.destroy=="function"&&(this._destroy=h.destroy),typeof h.construct=="function"&&(this._construct=h.construct),h.signal&&!p&&S(h.signal,this)),y.call(this,h),T.construct(this,()=>{this._readableState.needReadable&&te(this,this._readableState)})}v.prototype.destroy=T.destroy,v.prototype._undestroy=T.undestroy,v.prototype._destroy=function(h,p){p(h)},v.prototype[m.captureRejectionSymbol]=function(h){this.destroy(h)},v.prototype.push=function(h,p){return Y(this,h,p,!1)},v.prototype.unshift=function(h,p){return Y(this,h,p,!0)};function Y(h,p,_,k){j("readableAddChunk",p);let $=h._readableState,ee;if($.objectMode||(typeof p=="string"?(_=_||$.defaultEncoding,$.encoding!==_&&(k&&$.encoding?p=R.from(p,_).toString($.encoding):(p=R.from(p,_),_=""))):p instanceof R?_="":y._isUint8Array(p)?(p=y._uint8ArrayToBuffer(p),_=""):p!=null&&(ee=new G("chunk",["string","Buffer","Uint8Array"],p))),ee)se(h,ee);else if(p===null)$.reading=!1,A(h,$);else if($.objectMode||p&&p.length>0)if(k)if($.endEmitted)se(h,new re);else{if($.destroyed||$.errored)return!1;pe(h,$,p,!0)}else if($.ended)se(h,new V);else{if($.destroyed||$.errored)return!1;$.reading=!1,$.decoder&&!_?(p=$.decoder.write(p),$.objectMode||p.length!==0?pe(h,$,p,!1):te(h,$)):pe(h,$,p,!1)}else k||($.reading=!1,te(h,$));return!$.ended&&($.length<$.highWaterMark||$.length===0)}function pe(h,p,_,k){p.flowing&&p.length===0&&!p.sync&&h.listenerCount("data")>0?(p.multiAwaitDrain?p.awaitDrainWriters.clear():p.awaitDrainWriters=null,p.dataEmitted=!0,h.emit("data",_)):(p.length+=p.objectMode?1:_.length,k?p.buffer.unshift(_):p.buffer.push(_),p.needReadable&&K(h)),te(h,p)}v.prototype.isPaused=function(){let h=this._readableState;return h[be]===!0||h.flowing===!1},v.prototype.setEncoding=function(h){let p=new ae(h);this._readableState.decoder=p,this._readableState.encoding=this._readableState.decoder.encoding;let _=this._readableState.buffer,k="";for(let $ of _)k+=p.write($);return _.clear(),k!==""&&_.push(k),this._readableState.length=k.length,this};var Se=1073741824;function fe(h){if(h>Se)throw new C("size","<= 1GiB",h);return h--,h|=h>>>1,h|=h>>>2,h|=h>>>4,h|=h>>>8,h|=h>>>16,h++,h}function B(h,p){return h<=0||p.length===0&&p.ended?0:p.objectMode?1:o(h)?p.flowing&&p.length?p.buffer.first().length:p.length:h<=p.length?h:p.ended?p.length:0}v.prototype.read=function(h){j("read",h),h===void 0?h=NaN:s(h)||(h=i(h,10));let p=this._readableState,_=h;if(h>p.highWaterMark&&(p.highWaterMark=fe(h)),h!==0&&(p.emittedReadable=!1),h===0&&p.needReadable&&((p.highWaterMark!==0?p.length>=p.highWaterMark:p.length>0)||p.ended))return j("read: emitReadable",p.length,p.ended),p.length===0&&p.ended?O(this):K(this),null;if(h=B(h,p),h===0&&p.ended)return p.length===0&&O(this),null;let k=p.needReadable;if(j("need readable",k),(p.length===0||p.length-h<p.highWaterMark)&&(k=!0,j("length less than watermark",k)),p.ended||p.reading||p.destroyed||p.errored||!p.constructed)k=!1,j("reading, ended or constructing",k);else if(k){j("do read"),p.reading=!0,p.sync=!0,p.length===0&&(p.needReadable=!0);try{this._read(p.highWaterMark)}catch(ee){se(this,ee)}p.sync=!1,p.reading||(h=B(_,p))}let $;return h>0?$=z(h,p):$=null,$===null?(p.needReadable=p.length<=p.highWaterMark,h=0):(p.length-=h,p.multiAwaitDrain?p.awaitDrainWriters.clear():p.awaitDrainWriters=null),p.length===0&&(p.ended||(p.needReadable=!0),_!==h&&p.ended&&O(this)),$!==null&&!p.errorEmitted&&!p.closeEmitted&&(p.dataEmitted=!0,this.emit("data",$)),$};function A(h,p){if(j("onEofChunk"),!p.ended){if(p.decoder){let _=p.decoder.end();_&&_.length&&(p.buffer.push(_),p.length+=p.objectMode?1:_.length)}p.ended=!0,p.sync?K(h):(p.needReadable=!1,p.emittedReadable=!0,de(h))}}function K(h){let p=h._readableState;j("emitReadable",p.needReadable,p.emittedReadable),p.needReadable=!1,p.emittedReadable||(j("emitReadable",p.flowing),p.emittedReadable=!0,r.nextTick(de,h))}function de(h){let p=h._readableState;j("emitReadable_",p.destroyed,p.length,p.ended),!p.destroyed&&!p.errored&&(p.length||p.ended)&&(h.emit("readable"),p.emittedReadable=!1),p.needReadable=!p.flowing&&!p.ended&&p.length<=p.highWaterMark,oe(h)}function te(h,p){!p.readingMore&&p.constructed&&(p.readingMore=!0,r.nextTick(Z,h,p))}function Z(h,p){for(;!p.reading&&!p.ended&&(p.length<p.highWaterMark||p.flowing&&p.length===0);){let _=p.length;if(j("maybeReadMore read 0"),h.read(0),_===p.length)break}p.readingMore=!1}v.prototype._read=function(h){throw new ne("_read()")},v.prototype.pipe=function(h,p){let _=this,k=this._readableState;k.pipes.length===1&&(k.multiAwaitDrain||(k.multiAwaitDrain=!0,k.awaitDrainWriters=new d(k.awaitDrainWriters?[k.awaitDrainWriters]:[]))),k.pipes.push(h),j("pipe count=%d opts=%j",k.pipes.length,p);let $=(!p||p.end!==!1)&&h!==r.stdout&&h!==r.stderr?Te:rt;k.endEmitted?r.nextTick($):_.once("end",$),h.on("unpipe",ee);function ee(lt,et){j("onunpipe"),lt===_&&et&&et.hasUnpiped===!1&&(et.hasUnpiped=!0,Ie())}function Te(){j("onend"),h.end()}let Be,Ne=!1;function Ie(){j("cleanup"),h.removeListener("close",Ze),h.removeListener("finish",Je),Be&&h.removeListener("drain",Be),h.removeListener("error",Fe),h.removeListener("unpipe",ee),_.removeListener("end",Te),_.removeListener("end",rt),_.removeListener("data",ke),Ne=!0,Be&&k.awaitDrainWriters&&(!h._writableState||h._writableState.needDrain)&&Be()}function Oe(){Ne||(k.pipes.length===1&&k.pipes[0]===h?(j("false write response, pause",0),k.awaitDrainWriters=h,k.multiAwaitDrain=!1):k.pipes.length>1&&k.pipes.includes(h)&&(j("false write response, pause",k.awaitDrainWriters.size),k.awaitDrainWriters.add(h)),_.pause()),Be||(Be=we(_,h),h.on("drain",Be))}_.on("data",ke);function ke(lt){j("ondata");let et=h.write(lt);j("dest.write",et),et===!1&&Oe()}function Fe(lt){if(j("onerror",lt),rt(),h.removeListener("error",Fe),h.listenerCount("error")===0){let et=h._writableState||h._readableState;et&&!et.errorEmitted?se(h,lt):h.emit("error",lt)}}w(h,"error",Fe);function Ze(){h.removeListener("finish",Je),rt()}h.once("close",Ze);function Je(){j("onfinish"),h.removeListener("close",Ze),rt()}h.once("finish",Je);function rt(){j("unpipe"),_.unpipe(h)}return h.emit("pipe",_),h.writableNeedDrain===!0?k.flowing&&Oe():k.flowing||(j("pipe resume"),_.resume()),h};function we(h,p){return function(){let _=h._readableState;_.awaitDrainWriters===p?(j("pipeOnDrain",1),_.awaitDrainWriters=null):_.multiAwaitDrain&&(j("pipeOnDrain",_.awaitDrainWriters.size),_.awaitDrainWriters.delete(p)),(!_.awaitDrainWriters||_.awaitDrainWriters.size===0)&&h.listenerCount("data")&&h.resume()}}v.prototype.unpipe=function(h){let p=this._readableState,_={hasUnpiped:!1};if(p.pipes.length===0)return this;if(!h){let $=p.pipes;p.pipes=[],this.pause();for(let ee=0;ee<$.length;ee++)$[ee].emit("unpipe",this,{hasUnpiped:!1});return this}let k=n(p.pipes,h);return k===-1?this:(p.pipes.splice(k,1),p.pipes.length===0&&this.pause(),h.emit("unpipe",this,_),this)},v.prototype.on=function(h,p){let _=y.prototype.on.call(this,h,p),k=this._readableState;return h==="data"?(k.readableListening=this.listenerCount("readable")>0,k.flowing!==!1&&this.resume()):h==="readable"&&!k.endEmitted&&!k.readableListening&&(k.readableListening=k.needReadable=!0,k.flowing=!1,k.emittedReadable=!1,j("on readable",k.length,k.reading),k.length?K(this):k.reading||r.nextTick(x,this)),_},v.prototype.addListener=v.prototype.on,v.prototype.removeListener=function(h,p){let _=y.prototype.removeListener.call(this,h,p);return h==="readable"&&r.nextTick(ge,this),_},v.prototype.off=v.prototype.removeListener,v.prototype.removeAllListeners=function(h){let p=y.prototype.removeAllListeners.apply(this,arguments);return(h==="readable"||h===void 0)&&r.nextTick(ge,this),p};function ge(h){let p=h._readableState;p.readableListening=h.listenerCount("readable")>0,p.resumeScheduled&&p[be]===!1?p.flowing=!0:h.listenerCount("data")>0?h.resume():p.readableListening||(p.flowing=null)}function x(h){j("readable nexttick read 0"),h.read(0)}v.prototype.resume=function(){let h=this._readableState;return h.flowing||(j("resume"),h.flowing=!h.readableListening,D(this,h)),h[be]=!1,this};function D(h,p){p.resumeScheduled||(p.resumeScheduled=!0,r.nextTick(F,h,p))}function F(h,p){j("resume",p.reading),p.reading||h.read(0),p.resumeScheduled=!1,h.emit("resume"),oe(h),p.flowing&&!p.reading&&h.read(0)}v.prototype.pause=function(){return j("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(j("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[be]=!0,this};function oe(h){let p=h._readableState;for(j("flow",p.flowing);p.flowing&&h.read()!==null;);}v.prototype.wrap=function(h){let p=!1;h.on("data",k=>{!this.push(k)&&h.pause&&(p=!0,h.pause())}),h.on("end",()=>{this.push(null)}),h.on("error",k=>{se(this,k)}),h.on("close",()=>{this.destroy()}),h.on("destroy",()=>{this.destroy()}),this._read=()=>{p&&h.resume&&(p=!1,h.resume())};let _=l(h);for(let k=1;k<_.length;k++){let $=_[k];this[$]===void 0&&typeof h[$]=="function"&&(this[$]=h[$].bind(h))}return this},v.prototype[g]=function(){return X(this)},v.prototype.iterator=function(h){return h!==void 0&&J(h,"options"),X(this,h)};function X(h,p){typeof h.read!="function"&&(h=v.wrap(h,{objectMode:!0}));let _=M(h,p);return _.stream=h,_}async function*M(h,p){let _=_e;function k(Te){this===h?(_(),_=_e):_=Te}h.on("readable",k);let $,ee=E(h,{writable:!1},Te=>{$=Te?W($,Te):null,_(),_=_e});try{for(;;){let Te=h.destroyed?null:h.read();if(Te!==null)yield Te;else{if($)throw $;if($===null)return;await new u(k)}}}catch(Te){throw $=W($,Te),$}finally{($||(p==null?void 0:p.destroyOnReturn)!==!1)&&($===void 0||h._readableState.autoDestroy)?T.destroyer(h,null):(h.off("readable",k),ee())}}a(v.prototype,{readable:{__proto__:null,get(){let h=this._readableState;return!!h&&h.readable!==!1&&!h.destroyed&&!h.errorEmitted&&!h.endEmitted},set(h){this._readableState&&(this._readableState.readable=!!h)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(h){this._readableState&&(this._readableState.flowing=h)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(h){this._readableState&&(this._readableState.destroyed=h)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),a(Ee.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[be]!==!1},set(h){this[be]=!!h}}}),v._fromList=z;function z(h,p){if(p.length===0)return null;let _;return p.objectMode?_=p.buffer.shift():!h||h>=p.length?(p.decoder?_=p.buffer.join(""):p.buffer.length===1?_=p.buffer.first():_=p.buffer.concat(p.length),p.buffer.clear()):_=p.buffer.consume(h,p.decoder),_}function O(h){let p=h._readableState;j("endReadable",p.endEmitted),p.endEmitted||(p.ended=!0,r.nextTick(L,p,h))}function L(h,p){if(j("endReadableNT",h.endEmitted,h.length),!h.errored&&!h.closeEmitted&&!h.endEmitted&&h.length===0){if(h.endEmitted=!0,p.emit("end"),p.writable&&p.allowHalfOpen===!1)r.nextTick(H,p);else if(h.autoDestroy){let _=p._writableState;(!_||_.autoDestroy&&(_.finished||_.writable===!1))&&p.destroy()}}}function H(h){h.writable&&!h.writableEnded&&!h.destroyed&&h.end()}v.from=function(h,p){return q(v,h,p)};var le;function f(){return le===void 0&&(le={}),le}v.fromWeb=function(h,p){return f().newStreamReadableFromReadableStream(h,p)},v.toWeb=function(h,p){return f().newReadableStreamFromStreamReadable(h,p)},v.wrap=function(h,p){var _,k;return new v({objectMode:(_=(k=h.readableObjectMode)!==null&&k!==void 0?k:h.objectMode)!==null&&_!==void 0?_:!0,...p,destroy($,ee){T.destroyer(h,$),ee($)}}).wrap(h)}}),Ql=ye((t,e)=>{ce(),he(),ue();var r=wr(),{ArrayPrototypeSlice:n,Error:s,FunctionPrototypeSymbolHasInstance:o,ObjectDefineProperty:i,ObjectDefineProperties:a,ObjectSetPrototypeOf:l,StringPrototypeToLowerCase:c,Symbol:u,SymbolHasInstance:d}=Xe();e.exports=ae,ae.WritableState=J;var{EventEmitter:g}=(Pr(),De(vr)),b=ys().Stream,{Buffer:m}=(ot(),De(it)),y=Rr(),{addAbortSignal:w}=Jn(),{getHighWaterMark:R,getDefaultHighWaterMark:S}=_s(),{ERR_INVALID_ARG_TYPE:E,ERR_METHOD_NOT_IMPLEMENTED:j,ERR_MULTIPLE_CALLBACK:U,ERR_STREAM_CANNOT_PIPE:T,ERR_STREAM_DESTROYED:I,ERR_STREAM_ALREADY_FINISHED:N,ERR_STREAM_NULL_VALUES:W,ERR_STREAM_WRITE_AFTER_END:G,ERR_UNKNOWN_ENCODING:ne}=dt().codes,{errorOrDestroy:C}=y;l(ae.prototype,b.prototype),l(ae,b);function V(){}var re=u("kOnFinished");function J(x,D,F){typeof F!="boolean"&&(F=D instanceof Ft()),this.objectMode=!!(x&&x.objectMode),F&&(this.objectMode=this.objectMode||!!(x&&x.writableObjectMode)),this.highWaterMark=x?R(this,x,"writableHighWaterMark",F):S(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let oe=!!(x&&x.decodeStrings===!1);this.decodeStrings=!oe,this.defaultEncoding=x&&x.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=v.bind(void 0,D),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,be(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!x||x.emitClose!==!1,this.autoDestroy=!x||x.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[re]=[]}function be(x){x.buffered=[],x.bufferedIndex=0,x.allBuffers=!0,x.allNoop=!0}J.prototype.getBuffer=function(){return n(this.buffered,this.bufferedIndex)},i(J.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ae(x){let D=this instanceof Ft();if(!D&&!o(ae,this))return new ae(x);this._writableState=new J(x,this,D),x&&(typeof x.write=="function"&&(this._write=x.write),typeof x.writev=="function"&&(this._writev=x.writev),typeof x.destroy=="function"&&(this._destroy=x.destroy),typeof x.final=="function"&&(this._final=x.final),typeof x.construct=="function"&&(this._construct=x.construct),x.signal&&w(x.signal,this)),b.call(this,x),y.construct(this,()=>{let F=this._writableState;F.writing||fe(this,F),de(this,F)})}i(ae,d,{__proto__:null,value:function(x){return o(this,x)?!0:this!==ae?!1:x&&x._writableState instanceof J}}),ae.prototype.pipe=function(){C(this,new T)};function q(x,D,F,oe){let X=x._writableState;if(typeof F=="function")oe=F,F=X.defaultEncoding;else{if(!F)F=X.defaultEncoding;else if(F!=="buffer"&&!m.isEncoding(F))throw new ne(F);typeof oe!="function"&&(oe=V)}if(D===null)throw new W;if(!X.objectMode)if(typeof D=="string")X.decodeStrings!==!1&&(D=m.from(D,F),F="buffer");else if(D instanceof m)F="buffer";else if(b._isUint8Array(D))D=b._uint8ArrayToBuffer(D),F="buffer";else throw new E("chunk",["string","Buffer","Uint8Array"],D);let M;return X.ending?M=new G:X.destroyed&&(M=new I("write")),M?(r.nextTick(oe,M),C(x,M,!0),M):(X.pendingcb++,_e(x,X,D,F,oe))}ae.prototype.write=function(x,D,F){return q(this,x,D,F)===!0},ae.prototype.cork=function(){this._writableState.corked++},ae.prototype.uncork=function(){let x=this._writableState;x.corked&&(x.corked--,x.writing||fe(this,x))},ae.prototype.setDefaultEncoding=function(x){if(typeof x=="string"&&(x=c(x)),!m.isEncoding(x))throw new ne(x);return this._writableState.defaultEncoding=x,this};function _e(x,D,F,oe,X){let M=D.objectMode?1:F.length;D.length+=M;let z=D.length<D.highWaterMark;return z||(D.needDrain=!0),D.writing||D.corked||D.errored||!D.constructed?(D.buffered.push({chunk:F,encoding:oe,callback:X}),D.allBuffers&&oe!=="buffer"&&(D.allBuffers=!1),D.allNoop&&X!==V&&(D.allNoop=!1)):(D.writelen=M,D.writecb=X,D.writing=!0,D.sync=!0,x._write(F,oe,D.onwrite),D.sync=!1),z&&!D.errored&&!D.destroyed}function se(x,D,F,oe,X,M,z){D.writelen=oe,D.writecb=z,D.writing=!0,D.sync=!0,D.destroyed?D.onwrite(new I("write")):F?x._writev(X,D.onwrite):x._write(X,M,D.onwrite),D.sync=!1}function Ee(x,D,F,oe){--D.pendingcb,oe(F),Se(D),C(x,F)}function v(x,D){let F=x._writableState,oe=F.sync,X=F.writecb;if(typeof X!="function"){C(x,new U);return}F.writing=!1,F.writecb=null,F.length-=F.writelen,F.writelen=0,D?(D.stack,F.errored||(F.errored=D),x._readableState&&!x._readableState.errored&&(x._readableState.errored=D),oe?r.nextTick(Ee,x,F,D,X):Ee(x,F,D,X)):(F.buffered.length>F.bufferedIndex&&fe(x,F),oe?F.afterWriteTickInfo!==null&&F.afterWriteTickInfo.cb===X?F.afterWriteTickInfo.count++:(F.afterWriteTickInfo={count:1,cb:X,stream:x,state:F},r.nextTick(Y,F.afterWriteTickInfo)):pe(x,F,1,X))}function Y({stream:x,state:D,count:F,cb:oe}){return D.afterWriteTickInfo=null,pe(x,D,F,oe)}function pe(x,D,F,oe){for(!D.ending&&!x.destroyed&&D.length===0&&D.needDrain&&(D.needDrain=!1,x.emit("drain"));F-- >0;)D.pendingcb--,oe();D.destroyed&&Se(D),de(x,D)}function Se(x){if(x.writing)return;for(let X=x.bufferedIndex;X<x.buffered.length;++X){var D;let{chunk:M,callback:z}=x.buffered[X],O=x.objectMode?1:M.length;x.length-=O,z((D=x.errored)!==null&&D!==void 0?D:new I("write"))}let F=x[re].splice(0);for(let X=0;X<F.length;X++){var oe;F[X]((oe=x.errored)!==null&&oe!==void 0?oe:new I("end"))}be(x)}function fe(x,D){if(D.corked||D.bufferProcessing||D.destroyed||!D.constructed)return;let{buffered:F,bufferedIndex:oe,objectMode:X}=D,M=F.length-oe;if(!M)return;let z=oe;if(D.bufferProcessing=!0,M>1&&x._writev){D.pendingcb-=M-1;let O=D.allNoop?V:H=>{for(let le=z;le<F.length;++le)F[le].callback(H)},L=D.allNoop&&z===0?F:n(F,z);L.allBuffers=D.allBuffers,se(x,D,!0,D.length,L,"",O),be(D)}else{do{let{chunk:O,encoding:L,callback:H}=F[z];F[z++]=null;let le=X?1:O.length;se(x,D,!1,le,O,L,H)}while(z<F.length&&!D.writing);z===F.length?be(D):z>256?(F.splice(0,z),D.bufferedIndex=0):D.bufferedIndex=z}D.bufferProcessing=!1}ae.prototype._write=function(x,D,F){if(this._writev)this._writev([{chunk:x,encoding:D}],F);else throw new j("_write()")},ae.prototype._writev=null,ae.prototype.end=function(x,D,F){let oe=this._writableState;typeof x=="function"?(F=x,x=null,D=null):typeof D=="function"&&(F=D,D=null);let X;if(x!=null){let M=q(this,x,D);M instanceof s&&(X=M)}return oe.corked&&(oe.corked=1,this.uncork()),X||(!oe.errored&&!oe.ending?(oe.ending=!0,de(this,oe,!0),oe.ended=!0):oe.finished?X=new N("end"):oe.destroyed&&(X=new I("end"))),typeof F=="function"&&(X||oe.finished?r.nextTick(F,X):oe[re].push(F)),this};function B(x){return x.ending&&!x.destroyed&&x.constructed&&x.length===0&&!x.errored&&x.buffered.length===0&&!x.finished&&!x.writing&&!x.errorEmitted&&!x.closeEmitted}function A(x,D){let F=!1;function oe(X){if(F){C(x,X??U());return}if(F=!0,D.pendingcb--,X){let M=D[re].splice(0);for(let z=0;z<M.length;z++)M[z](X);C(x,X,D.sync)}else B(D)&&(D.prefinished=!0,x.emit("prefinish"),D.pendingcb++,r.nextTick(te,x,D))}D.sync=!0,D.pendingcb++;try{x._final(oe)}catch(X){oe(X)}D.sync=!1}function K(x,D){!D.prefinished&&!D.finalCalled&&(typeof x._final=="function"&&!D.destroyed?(D.finalCalled=!0,A(x,D)):(D.prefinished=!0,x.emit("prefinish")))}function de(x,D,F){B(D)&&(K(x,D),D.pendingcb===0&&(F?(D.pendingcb++,r.nextTick((oe,X)=>{B(X)?te(oe,X):X.pendingcb--},x,D)):B(D)&&(D.pendingcb++,te(x,D))))}function te(x,D){D.pendingcb--,D.finished=!0;let F=D[re].splice(0);for(let oe=0;oe<F.length;oe++)F[oe]();if(x.emit("finish"),D.autoDestroy){let oe=x._readableState;(!oe||oe.autoDestroy&&(oe.endEmitted||oe.readable===!1))&&x.destroy()}}a(ae.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(x){this._writableState&&(this._writableState.destroyed=x)}},writable:{__proto__:null,get(){let x=this._writableState;return!!x&&x.writable!==!1&&!x.destroyed&&!x.errored&&!x.ending&&!x.ended},set(x){this._writableState&&(this._writableState.writable=!!x)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let x=this._writableState;return x?!x.destroyed&&!x.ending&&x.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var Z=y.destroy;ae.prototype.destroy=function(x,D){let F=this._writableState;return!F.destroyed&&(F.bufferedIndex<F.buffered.length||F[re].length)&&r.nextTick(Se,F),Z.call(this,x,D),this},ae.prototype._undestroy=y.undestroy,ae.prototype._destroy=function(x,D){D(x)},ae.prototype[g.captureRejectionSymbol]=function(x){this.destroy(x)};var we;function ge(){return we===void 0&&(we={}),we}ae.fromWeb=function(x,D){return ge().newStreamWritableFromWritableStream(x,D)},ae.toWeb=function(x){return ge().newWritableStreamFromStreamWritable(x)}}),pd=ye((t,e)=>{ce(),he(),ue();var r=wr(),n=(ot(),De(it)),{isReadable:s,isWritable:o,isIterable:i,isNodeStream:a,isReadableNodeStream:l,isWritableNodeStream:c,isDuplexNodeStream:u}=Wt(),d=Xt(),{AbortError:g,codes:{ERR_INVALID_ARG_TYPE:b,ERR_INVALID_RETURN_VALUE:m}}=dt(),{destroyer:y}=Rr(),w=Ft(),R=Qn(),{createDeferredPromise:S}=Dt(),E=Yl(),j=globalThis.Blob||n.Blob,U=typeof j<"u"?function(ne){return ne instanceof j}:function(ne){return!1},T=globalThis.AbortController||bs().AbortController,{FunctionPrototypeCall:I}=Xe(),N=class extends w{constructor(ne){super(ne),(ne==null?void 0:ne.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(ne==null?void 0:ne.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};e.exports=function ne(C,V){if(u(C))return C;if(l(C))return G({readable:C});if(c(C))return G({writable:C});if(a(C))return G({writable:!1,readable:!1});if(typeof C=="function"){let{value:J,write:be,final:ae,destroy:q}=W(C);if(i(J))return E(N,J,{objectMode:!0,write:be,final:ae,destroy:q});let _e=J==null?void 0:J.then;if(typeof _e=="function"){let se,Ee=I(_e,J,v=>{if(v!=null)throw new m("nully","body",v)},v=>{y(se,v)});return se=new N({objectMode:!0,readable:!1,write:be,final(v){ae(async()=>{try{await Ee,r.nextTick(v,null)}catch(Y){r.nextTick(v,Y)}})},destroy:q})}throw new m("Iterable, AsyncIterable or AsyncFunction",V,J)}if(U(C))return ne(C.arrayBuffer());if(i(C))return E(N,C,{objectMode:!0,writable:!1});if(typeof(C==null?void 0:C.writable)=="object"||typeof(C==null?void 0:C.readable)=="object"){let J=C!=null&&C.readable?l(C==null?void 0:C.readable)?C==null?void 0:C.readable:ne(C.readable):void 0,be=C!=null&&C.writable?c(C==null?void 0:C.writable)?C==null?void 0:C.writable:ne(C.writable):void 0;return G({readable:J,writable:be})}let re=C==null?void 0:C.then;if(typeof re=="function"){let J;return I(re,C,be=>{be!=null&&J.push(be),J.push(null)},be=>{y(J,be)}),J=new N({objectMode:!0,writable:!1,read(){}})}throw new b(V,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],C)};function W(ne){let{promise:C,resolve:V}=S(),re=new T,J=re.signal;return{value:ne(async function*(){for(;;){let be=C;C=null;let{chunk:ae,done:q,cb:_e}=await be;if(r.nextTick(_e),q)return;if(J.aborted)throw new g(void 0,{cause:J.reason});({promise:C,resolve:V}=S()),yield ae}}(),{signal:J}),write(be,ae,q){let _e=V;V=null,_e({chunk:be,done:!1,cb:q})},final(be){let ae=V;V=null,ae({done:!0,cb:be})},destroy(be,ae){re.abort(),ae(be)}}}function G(ne){let C=ne.readable&&typeof ne.readable.read!="function"?R.wrap(ne.readable):ne.readable,V=ne.writable,re=!!s(C),J=!!o(V),be,ae,q,_e,se;function Ee(v){let Y=_e;_e=null,Y?Y(v):v&&se.destroy(v)}return se=new N({readableObjectMode:!!(C!=null&&C.readableObjectMode),writableObjectMode:!!(V!=null&&V.writableObjectMode),readable:re,writable:J}),J&&(d(V,v=>{J=!1,v&&y(C,v),Ee(v)}),se._write=function(v,Y,pe){V.write(v,Y)?pe():be=pe},se._final=function(v){V.end(),ae=v},V.on("drain",function(){if(be){let v=be;be=null,v()}}),V.on("finish",function(){if(ae){let v=ae;ae=null,v()}})),re&&(d(C,v=>{re=!1,v&&y(C,v),Ee(v)}),C.on("readable",function(){if(q){let v=q;q=null,v()}}),C.on("end",function(){se.push(null)}),se._read=function(){for(;;){let v=C.read();if(v===null){q=se._read;return}if(!se.push(v))return}}),se._destroy=function(v,Y){!v&&_e!==null&&(v=new g),q=null,be=null,ae=null,_e===null?Y(v):(_e=Y,y(V,v),y(C,v))},se}}),Ft=ye((t,e)=>{ce(),he(),ue();var{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:n,ObjectKeys:s,ObjectSetPrototypeOf:o}=Xe();e.exports=l;var i=Qn(),a=Ql();o(l.prototype,i.prototype),o(l,i);{let g=s(a.prototype);for(let b=0;b<g.length;b++){let m=g[b];l.prototype[m]||(l.prototype[m]=a.prototype[m])}}function l(g){if(!(this instanceof l))return new l(g);i.call(this,g),a.call(this,g),g?(this.allowHalfOpen=g.allowHalfOpen!==!1,g.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),g.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}r(l.prototype,{writable:{__proto__:null,...n(a.prototype,"writable")},writableHighWaterMark:{__proto__:null,...n(a.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...n(a.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...n(a.prototype,"writableBuffer")},writableLength:{__proto__:null,...n(a.prototype,"writableLength")},writableFinished:{__proto__:null,...n(a.prototype,"writableFinished")},writableCorked:{__proto__:null,...n(a.prototype,"writableCorked")},writableEnded:{__proto__:null,...n(a.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...n(a.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(g){this._readableState&&this._writableState&&(this._readableState.destroyed=g,this._writableState.destroyed=g)}}});var c;function u(){return c===void 0&&(c={}),c}l.fromWeb=function(g,b){return u().newStreamDuplexFromReadableWritablePair(g,b)},l.toWeb=function(g){return u().newReadableWritablePairFromDuplex(g)};var d;l.from=function(g){return d||(d=pd()),d(g,"body")}}),Gl=ye((t,e)=>{ce(),he(),ue();var{ObjectSetPrototypeOf:r,Symbol:n}=Xe();e.exports=l;var{ERR_METHOD_NOT_IMPLEMENTED:s}=dt().codes,o=Ft(),{getHighWaterMark:i}=_s();r(l.prototype,o.prototype),r(l,o);var a=n("kCallback");function l(d){if(!(this instanceof l))return new l(d);let g=d?i(this,d,"readableHighWaterMark",!0):null;g===0&&(d={...d,highWaterMark:null,readableHighWaterMark:g,writableHighWaterMark:d.writableHighWaterMark||0}),o.call(this,d),this._readableState.sync=!1,this[a]=null,d&&(typeof d.transform=="function"&&(this._transform=d.transform),typeof d.flush=="function"&&(this._flush=d.flush)),this.on("prefinish",u)}function c(d){typeof this._flush=="function"&&!this.destroyed?this._flush((g,b)=>{if(g){d?d(g):this.destroy(g);return}b!=null&&this.push(b),this.push(null),d&&d()}):(this.push(null),d&&d())}function u(){this._final!==c&&c.call(this)}l.prototype._final=c,l.prototype._transform=function(d,g,b){throw new s("_transform()")},l.prototype._write=function(d,g,b){let m=this._readableState,y=this._writableState,w=m.length;this._transform(d,g,(R,S)=>{if(R){b(R);return}S!=null&&this.push(S),y.ended||w===m.length||m.length<m.highWaterMark?b():this[a]=b})},l.prototype._read=function(){if(this[a]){let d=this[a];this[a]=null,d()}}}),Xl=ye((t,e)=>{ce(),he(),ue();var{ObjectSetPrototypeOf:r}=Xe();e.exports=s;var n=Gl();r(s.prototype,n.prototype),r(s,n);function s(o){if(!(this instanceof s))return new s(o);n.call(this,o)}s.prototype._transform=function(o,i,a){a(null,o)}}),Es=ye((t,e)=>{ce(),he(),ue();var r=wr(),{ArrayIsArray:n,Promise:s,SymbolAsyncIterator:o}=Xe(),i=Xt(),{once:a}=Dt(),l=Rr(),c=Ft(),{aggregateTwoErrors:u,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:g,ERR_MISSING_ARGS:b,ERR_STREAM_DESTROYED:m,ERR_STREAM_PREMATURE_CLOSE:y},AbortError:w}=dt(),{validateFunction:R,validateAbortSignal:S}=Kn(),{isIterable:E,isReadable:j,isReadableNodeStream:U,isNodeStream:T,isTransformStream:I,isWebStream:N,isReadableStream:W,isReadableEnded:G}=Wt(),ne=globalThis.AbortController||bs().AbortController,C,V;function re(Y,pe,Se){let fe=!1;Y.on("close",()=>{fe=!0});let B=i(Y,{readable:pe,writable:Se},A=>{fe=!A});return{destroy:A=>{fe||(fe=!0,l.destroyer(Y,A||new m("pipe")))},cleanup:B}}function J(Y){return R(Y[Y.length-1],"streams[stream.length - 1]"),Y.pop()}function be(Y){if(E(Y))return Y;if(U(Y))return ae(Y);throw new d("val",["Readable","Iterable","AsyncIterable"],Y)}async function*ae(Y){V||(V=Qn()),yield*V.prototype[o].call(Y)}async function q(Y,pe,Se,{end:fe}){let B,A=null,K=Z=>{if(Z&&(B=Z),A){let we=A;A=null,we()}},de=()=>new s((Z,we)=>{B?we(B):A=()=>{B?we(B):Z()}});pe.on("drain",K);let te=i(pe,{readable:!1},K);try{pe.writableNeedDrain&&await de();for await(let Z of Y)pe.write(Z)||await de();fe&&pe.end(),await de(),Se()}catch(Z){Se(B!==Z?u(B,Z):Z)}finally{te(),pe.off("drain",K)}}async function _e(Y,pe,Se,{end:fe}){I(pe)&&(pe=pe.writable);let B=pe.getWriter();try{for await(let A of Y)await B.ready,B.write(A).catch(()=>{});await B.ready,fe&&await B.close(),Se()}catch(A){try{await B.abort(A),Se(A)}catch(K){Se(K)}}}function se(...Y){return Ee(Y,a(J(Y)))}function Ee(Y,pe,Se){if(Y.length===1&&n(Y[0])&&(Y=Y[0]),Y.length<2)throw new b("streams");let fe=new ne,B=fe.signal,A=Se==null?void 0:Se.signal,K=[];S(A,"options.signal");function de(){D(new w)}A==null||A.addEventListener("abort",de);let te,Z,we=[],ge=0;function x(M){D(M,--ge===0)}function D(M,z){if(M&&(!te||te.code==="ERR_STREAM_PREMATURE_CLOSE")&&(te=M),!(!te&&!z)){for(;we.length;)we.shift()(te);A==null||A.removeEventListener("abort",de),fe.abort(),z&&(te||K.forEach(O=>O()),r.nextTick(pe,te,Z))}}let F;for(let M=0;M<Y.length;M++){let z=Y[M],O=M<Y.length-1,L=M>0,H=O||(Se==null?void 0:Se.end)!==!1,le=M===Y.length-1;if(T(z)){let f=function(h){h&&h.name!=="AbortError"&&h.code!=="ERR_STREAM_PREMATURE_CLOSE"&&x(h)};if(H){let{destroy:h,cleanup:p}=re(z,O,L);we.push(h),j(z)&&le&&K.push(p)}z.on("error",f),j(z)&&le&&K.push(()=>{z.removeListener("error",f)})}if(M===0)if(typeof z=="function"){if(F=z({signal:B}),!E(F))throw new g("Iterable, AsyncIterable or Stream","source",F)}else E(z)||U(z)||I(z)?F=z:F=c.from(z);else if(typeof z=="function"){if(I(F)){var oe;F=be((oe=F)===null||oe===void 0?void 0:oe.readable)}else F=be(F);if(F=z(F,{signal:B}),O){if(!E(F,!0))throw new g("AsyncIterable",`transform[${M-1}]`,F)}else{var X;C||(C=Xl());let f=new C({objectMode:!0}),h=(X=F)===null||X===void 0?void 0:X.then;if(typeof h=="function")ge++,h.call(F,k=>{Z=k,k!=null&&f.write(k),H&&f.end(),r.nextTick(x)},k=>{f.destroy(k),r.nextTick(x,k)});else if(E(F,!0))ge++,q(F,f,x,{end:H});else if(W(F)||I(F)){let k=F.readable||F;ge++,q(k,f,x,{end:H})}else throw new g("AsyncIterable or Promise","destination",F);F=f;let{destroy:p,cleanup:_}=re(F,!1,!0);we.push(p),le&&K.push(_)}}else if(T(z)){if(U(F)){ge+=2;let f=v(F,z,x,{end:H});j(z)&&le&&K.push(f)}else if(I(F)||W(F)){let f=F.readable||F;ge++,q(f,z,x,{end:H})}else if(E(F))ge++,q(F,z,x,{end:H});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],F);F=z}else if(N(z)){if(U(F))ge++,_e(be(F),z,x,{end:H});else if(W(F)||E(F))ge++,_e(F,z,x,{end:H});else if(I(F))ge++,_e(F.readable,z,x,{end:H});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],F);F=z}else F=c.from(z)}return(B!=null&&B.aborted||A!=null&&A.aborted)&&r.nextTick(de),F}function v(Y,pe,Se,{end:fe}){let B=!1;if(pe.on("close",()=>{B||Se(new y)}),Y.pipe(pe,{end:!1}),fe){let A=function(){B=!0,pe.end()};G(Y)?r.nextTick(A):Y.once("end",A)}else Se();return i(Y,{readable:!0,writable:!1},A=>{let K=Y._readableState;A&&A.code==="ERR_STREAM_PREMATURE_CLOSE"&&K&&K.ended&&!K.errored&&!K.errorEmitted?Y.once("end",Se).once("error",Se):Se(A)}),i(pe,{readable:!1,writable:!0},Se)}e.exports={pipelineImpl:Ee,pipeline:se}}),Zl=ye((t,e)=>{ce(),he(),ue();var{pipeline:r}=Es(),n=Ft(),{destroyer:s}=Rr(),{isNodeStream:o,isReadable:i,isWritable:a,isWebStream:l,isTransformStream:c,isWritableStream:u,isReadableStream:d}=Wt(),{AbortError:g,codes:{ERR_INVALID_ARG_VALUE:b,ERR_MISSING_ARGS:m}}=dt(),y=Xt();e.exports=function(...w){if(w.length===0)throw new m("streams");if(w.length===1)return n.from(w[0]);let R=[...w];if(typeof w[0]=="function"&&(w[0]=n.from(w[0])),typeof w[w.length-1]=="function"){let C=w.length-1;w[C]=n.from(w[C])}for(let C=0;C<w.length;++C)if(!(!o(w[C])&&!l(w[C]))){if(C<w.length-1&&!(i(w[C])||d(w[C])||c(w[C])))throw new b(`streams[${C}]`,R[C],"must be readable");if(C>0&&!(a(w[C])||u(w[C])||c(w[C])))throw new b(`streams[${C}]`,R[C],"must be writable")}let S,E,j,U,T;function I(C){let V=U;U=null,V?V(C):C?T.destroy(C):!ne&&!G&&T.destroy()}let N=w[0],W=r(w,I),G=!!(a(N)||u(N)||c(N)),ne=!!(i(W)||d(W)||c(W));if(T=new n({writableObjectMode:!!(N!=null&&N.writableObjectMode),readableObjectMode:!!(W!=null&&W.writableObjectMode),writable:G,readable:ne}),G){if(o(N))T._write=function(V,re,J){N.write(V,re)?J():S=J},T._final=function(V){N.end(),E=V},N.on("drain",function(){if(S){let V=S;S=null,V()}});else if(l(N)){let V=(c(N)?N.writable:N).getWriter();T._write=async function(re,J,be){try{await V.ready,V.write(re).catch(()=>{}),be()}catch(ae){be(ae)}},T._final=async function(re){try{await V.ready,V.close().catch(()=>{}),E=re}catch(J){re(J)}}}let C=c(W)?W.readable:W;y(C,()=>{if(E){let V=E;E=null,V()}})}if(ne){if(o(W))W.on("readable",function(){if(j){let C=j;j=null,C()}}),W.on("end",function(){T.push(null)}),T._read=function(){for(;;){let C=W.read();if(C===null){j=T._read;return}if(!T.push(C))return}};else if(l(W)){let C=(c(W)?W.readable:W).getReader();T._read=async function(){for(;;)try{let{value:V,done:re}=await C.read();if(!T.push(V))return;if(re){T.push(null);return}}catch{return}}}}return T._destroy=function(C,V){!C&&U!==null&&(C=new g),j=null,S=null,E=null,U===null?V(C):(U=V,o(W)&&s(W,C))},T}}),gd=ye((t,e)=>{ce(),he(),ue();var r=globalThis.AbortController||bs().AbortController,{codes:{ERR_INVALID_ARG_VALUE:n,ERR_INVALID_ARG_TYPE:s,ERR_MISSING_ARGS:o,ERR_OUT_OF_RANGE:i},AbortError:a}=dt(),{validateAbortSignal:l,validateInteger:c,validateObject:u}=Kn(),d=Xe().Symbol("kWeak"),{finished:g}=Xt(),b=Zl(),{addAbortSignalNoValidate:m}=Jn(),{isWritable:y,isNodeStream:w}=Wt(),{ArrayPrototypePush:R,MathFloor:S,Number:E,NumberIsNaN:j,Promise:U,PromiseReject:T,PromisePrototypeThen:I,Symbol:N}=Xe(),W=N("kEmpty"),G=N("kEof");function ne(fe,B){if(B!=null&&u(B,"options"),(B==null?void 0:B.signal)!=null&&l(B.signal,"options.signal"),w(fe)&&!y(fe))throw new n("stream",fe,"must be writable");let A=b(this,fe);return B!=null&&B.signal&&m(B.signal,A),A}function C(fe,B){if(typeof fe!="function")throw new s("fn",["Function","AsyncFunction"],fe);B!=null&&u(B,"options"),(B==null?void 0:B.signal)!=null&&l(B.signal,"options.signal");let A=1;return(B==null?void 0:B.concurrency)!=null&&(A=S(B.concurrency)),c(A,"concurrency",1),(async function*(){var K,de;let te=new r,Z=this,we=[],ge=te.signal,x={signal:ge},D=()=>te.abort();B!=null&&(K=B.signal)!==null&&K!==void 0&&K.aborted&&D(),B==null||(de=B.signal)===null||de===void 0||de.addEventListener("abort",D);let F,oe,X=!1;function M(){X=!0}async function z(){try{for await(let H of Z){var O;if(X)return;if(ge.aborted)throw new a;try{H=fe(H,x)}catch(le){H=T(le)}H!==W&&(typeof((O=H)===null||O===void 0?void 0:O.catch)=="function"&&H.catch(M),we.push(H),F&&(F(),F=null),!X&&we.length&&we.length>=A&&await new U(le=>{oe=le}))}we.push(G)}catch(H){let le=T(H);I(le,void 0,M),we.push(le)}finally{var L;X=!0,F&&(F(),F=null),B==null||(L=B.signal)===null||L===void 0||L.removeEventListener("abort",D)}}z();try{for(;;){for(;we.length>0;){let O=await we[0];if(O===G)return;if(ge.aborted)throw new a;O!==W&&(yield O),we.shift(),oe&&(oe(),oe=null)}await new U(O=>{F=O})}}finally{te.abort(),X=!0,oe&&(oe(),oe=null)}}).call(this)}function V(fe=void 0){return fe!=null&&u(fe,"options"),(fe==null?void 0:fe.signal)!=null&&l(fe.signal,"options.signal"),(async function*(){let B=0;for await(let K of this){var A;if(fe!=null&&(A=fe.signal)!==null&&A!==void 0&&A.aborted)throw new a({cause:fe.signal.reason});yield[B++,K]}}).call(this)}async function re(fe,B=void 0){for await(let A of q.call(this,fe,B))return!0;return!1}async function J(fe,B=void 0){if(typeof fe!="function")throw new s("fn",["Function","AsyncFunction"],fe);return!await re.call(this,async(...A)=>!await fe(...A),B)}async function be(fe,B){for await(let A of q.call(this,fe,B))return A}async function ae(fe,B){if(typeof fe!="function")throw new s("fn",["Function","AsyncFunction"],fe);async function A(K,de){return await fe(K,de),W}for await(let K of C.call(this,A,B));}function q(fe,B){if(typeof fe!="function")throw new s("fn",["Function","AsyncFunction"],fe);async function A(K,de){return await fe(K,de)?K:W}return C.call(this,A,B)}var _e=class extends o{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function se(fe,B,A){var K;if(typeof fe!="function")throw new s("reducer",["Function","AsyncFunction"],fe);A!=null&&u(A,"options"),(A==null?void 0:A.signal)!=null&&l(A.signal,"options.signal");let de=arguments.length>1;if(A!=null&&(K=A.signal)!==null&&K!==void 0&&K.aborted){let x=new a(void 0,{cause:A.signal.reason});throw this.once("error",()=>{}),await g(this.destroy(x)),x}let te=new r,Z=te.signal;if(A!=null&&A.signal){let x={once:!0,[d]:this};A.signal.addEventListener("abort",()=>te.abort(),x)}let we=!1;try{for await(let x of this){var ge;if(we=!0,A!=null&&(ge=A.signal)!==null&&ge!==void 0&&ge.aborted)throw new a;de?B=await fe(B,x,{signal:Z}):(B=x,de=!0)}if(!we&&!de)throw new _e}finally{te.abort()}return B}async function Ee(fe){fe!=null&&u(fe,"options"),(fe==null?void 0:fe.signal)!=null&&l(fe.signal,"options.signal");let B=[];for await(let K of this){var A;if(fe!=null&&(A=fe.signal)!==null&&A!==void 0&&A.aborted)throw new a(void 0,{cause:fe.signal.reason});R(B,K)}return B}function v(fe,B){let A=C.call(this,fe,B);return(async function*(){for await(let K of A)yield*K}).call(this)}function Y(fe){if(fe=E(fe),j(fe))return 0;if(fe<0)throw new i("number",">= 0",fe);return fe}function pe(fe,B=void 0){return B!=null&&u(B,"options"),(B==null?void 0:B.signal)!=null&&l(B.signal,"options.signal"),fe=Y(fe),(async function*(){var A;if(B!=null&&(A=B.signal)!==null&&A!==void 0&&A.aborted)throw new a;for await(let de of this){var K;if(B!=null&&(K=B.signal)!==null&&K!==void 0&&K.aborted)throw new a;fe--<=0&&(yield de)}}).call(this)}function Se(fe,B=void 0){return B!=null&&u(B,"options"),(B==null?void 0:B.signal)!=null&&l(B.signal,"options.signal"),fe=Y(fe),(async function*(){var A;if(B!=null&&(A=B.signal)!==null&&A!==void 0&&A.aborted)throw new a;for await(let de of this){var K;if(B!=null&&(K=B.signal)!==null&&K!==void 0&&K.aborted)throw new a;if(fe-- >0)yield de;else return}}).call(this)}e.exports.streamReturningOperators={asIndexedPairs:V,drop:pe,filter:q,flatMap:v,map:C,take:Se,compose:ne},e.exports.promiseReturningOperators={every:J,forEach:ae,reduce:se,toArray:Ee,some:re,find:be}}),ec=ye((t,e)=>{ce(),he(),ue();var{ArrayPrototypePop:r,Promise:n}=Xe(),{isIterable:s,isNodeStream:o,isWebStream:i}=Wt(),{pipelineImpl:a}=Es(),{finished:l}=Xt();tc();function c(...u){return new n((d,g)=>{let b,m,y=u[u.length-1];if(y&&typeof y=="object"&&!o(y)&&!s(y)&&!i(y)){let w=r(u);b=w.signal,m=w.end}a(u,(w,R)=>{w?g(w):d(R)},{signal:b,end:m})})}e.exports={finished:l,pipeline:c}}),tc=ye((t,e)=>{ce(),he(),ue();var{Buffer:r}=(ot(),De(it)),{ObjectDefineProperty:n,ObjectKeys:s,ReflectApply:o}=Xe(),{promisify:{custom:i}}=Dt(),{streamReturningOperators:a,promiseReturningOperators:l}=gd(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:c}}=dt(),u=Zl(),{pipeline:d}=Es(),{destroyer:g}=Rr(),b=Xt(),m=ec(),y=Wt(),w=e.exports=ys().Stream;w.isDisturbed=y.isDisturbed,w.isErrored=y.isErrored,w.isReadable=y.isReadable,w.Readable=Qn();for(let S of s(a)){let E=function(...U){if(new.target)throw c();return w.Readable.from(o(j,this,U))},j=a[S];n(E,"name",{__proto__:null,value:j.name}),n(E,"length",{__proto__:null,value:j.length}),n(w.Readable.prototype,S,{__proto__:null,value:E,enumerable:!1,configurable:!0,writable:!0})}for(let S of s(l)){let E=function(...U){if(new.target)throw c();return o(j,this,U)},j=l[S];n(E,"name",{__proto__:null,value:j.name}),n(E,"length",{__proto__:null,value:j.length}),n(w.Readable.prototype,S,{__proto__:null,value:E,enumerable:!1,configurable:!0,writable:!0})}w.Writable=Ql(),w.Duplex=Ft(),w.Transform=Gl(),w.PassThrough=Xl(),w.pipeline=d;var{addAbortSignal:R}=Jn();w.addAbortSignal=R,w.finished=b,w.destroy=g,w.compose=u,n(w,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return m}}),n(d,i,{__proto__:null,enumerable:!0,get(){return m.pipeline}}),n(b,i,{__proto__:null,enumerable:!0,get(){return m.finished}}),w.Stream=w,w._isUint8Array=function(S){return S instanceof Uint8Array},w._uint8ArrayToBuffer=function(S){return r.from(S.buffer,S.byteOffset,S.byteLength)}}),Er=ye((t,e)=>{ce(),he(),ue();var r=tc(),n=ec(),s=r.Readable.destroy;e.exports=r.Readable,e.exports._uint8ArrayToBuffer=r._uint8ArrayToBuffer,e.exports._isUint8Array=r._isUint8Array,e.exports.isDisturbed=r.isDisturbed,e.exports.isErrored=r.isErrored,e.exports.isReadable=r.isReadable,e.exports.Readable=r.Readable,e.exports.Writable=r.Writable,e.exports.Duplex=r.Duplex,e.exports.Transform=r.Transform,e.exports.PassThrough=r.PassThrough,e.exports.addAbortSignal=r.addAbortSignal,e.exports.finished=r.finished,e.exports.destroy=r.destroy,e.exports.destroy=s,e.exports.pipeline=r.pipeline,e.exports.compose=r.compose,Object.defineProperty(r,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=r.Stream,e.exports.default=e.exports}),md=ye((t,e)=>{ce(),he(),ue(),typeof Object.create=="function"?e.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(r,n){if(n){r.super_=n;var s=function(){};s.prototype=n.prototype,r.prototype=new s,r.prototype.constructor=r}}}),bd=ye((t,e)=>{ce(),he(),ue();var{Buffer:r}=(ot(),De(it)),n=Symbol.for("BufferList");function s(o){if(!(this instanceof s))return new s(o);s._init.call(this,o)}s._init=function(o){Object.defineProperty(this,n,{value:!0}),this._bufs=[],this.length=0,o&&this.append(o)},s.prototype._new=function(o){return new s(o)},s.prototype._offset=function(o){if(o===0)return[0,0];let i=0;for(let a=0;a<this._bufs.length;a++){let l=i+this._bufs[a].length;if(o<l||a===this._bufs.length-1)return[a,o-i];i=l}},s.prototype._reverseOffset=function(o){let i=o[0],a=o[1];for(let l=0;l<i;l++)a+=this._bufs[l].length;return a},s.prototype.get=function(o){if(o>this.length||o<0)return;let i=this._offset(o);return this._bufs[i[0]][i[1]]},s.prototype.slice=function(o,i){return typeof o=="number"&&o<0&&(o+=this.length),typeof i=="number"&&i<0&&(i+=this.length),this.copy(null,0,o,i)},s.prototype.copy=function(o,i,a,l){if((typeof a!="number"||a<0)&&(a=0),(typeof l!="number"||l>this.length)&&(l=this.length),a>=this.length||l<=0)return o||r.alloc(0);let c=!!o,u=this._offset(a),d=l-a,g=d,b=c&&i||0,m=u[1];if(a===0&&l===this.length){if(!c)return this._bufs.length===1?this._bufs[0]:r.concat(this._bufs,this.length);for(let y=0;y<this._bufs.length;y++)this._bufs[y].copy(o,b),b+=this._bufs[y].length;return o}if(g<=this._bufs[u[0]].length-m)return c?this._bufs[u[0]].copy(o,i,m,m+g):this._bufs[u[0]].slice(m,m+g);c||(o=r.allocUnsafe(d));for(let y=u[0];y<this._bufs.length;y++){let w=this._bufs[y].length-m;if(g>w)this._bufs[y].copy(o,b,m),b+=w;else{this._bufs[y].copy(o,b,m,m+g),b+=w;break}g-=w,m&&(m=0)}return o.length>b?o.slice(0,b):o},s.prototype.shallowSlice=function(o,i){if(o=o||0,i=typeof i!="number"?this.length:i,o<0&&(o+=this.length),i<0&&(i+=this.length),o===i)return this._new();let a=this._offset(o),l=this._offset(i),c=this._bufs.slice(a[0],l[0]+1);return l[1]===0?c.pop():c[c.length-1]=c[c.length-1].slice(0,l[1]),a[1]!==0&&(c[0]=c[0].slice(a[1])),this._new(c)},s.prototype.toString=function(o,i,a){return this.slice(i,a).toString(o)},s.prototype.consume=function(o){if(o=Math.trunc(o),Number.isNaN(o)||o<=0)return this;for(;this._bufs.length;)if(o>=this._bufs[0].length)o-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(o),this.length-=o;break}return this},s.prototype.duplicate=function(){let o=this._new();for(let i=0;i<this._bufs.length;i++)o.append(this._bufs[i]);return o},s.prototype.append=function(o){if(o==null)return this;if(o.buffer)this._appendBuffer(r.from(o.buffer,o.byteOffset,o.byteLength));else if(Array.isArray(o))for(let i=0;i<o.length;i++)this.append(o[i]);else if(this._isBufferList(o))for(let i=0;i<o._bufs.length;i++)this.append(o._bufs[i]);else typeof o=="number"&&(o=o.toString()),this._appendBuffer(r.from(o));return this},s.prototype._appendBuffer=function(o){this._bufs.push(o),this.length+=o.length},s.prototype.indexOf=function(o,i,a){if(a===void 0&&typeof i=="string"&&(a=i,i=void 0),typeof o=="function"||Array.isArray(o))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof o=="number"?o=r.from([o]):typeof o=="string"?o=r.from(o,a):this._isBufferList(o)?o=o.slice():Array.isArray(o.buffer)?o=r.from(o.buffer,o.byteOffset,o.byteLength):r.isBuffer(o)||(o=r.from(o)),i=Number(i||0),isNaN(i)&&(i=0),i<0&&(i=this.length+i),i<0&&(i=0),o.length===0)return i>this.length?this.length:i;let l=this._offset(i),c=l[0],u=l[1];for(;c<this._bufs.length;c++){let d=this._bufs[c];for(;u<d.length;)if(d.length-u>=o.length){let g=d.indexOf(o,u);if(g!==-1)return this._reverseOffset([c,g]);u=d.length-o.length+1}else{let g=this._reverseOffset([c,u]);if(this._match(g,o))return g;u++}u=0}return-1},s.prototype._match=function(o,i){if(this.length-o<i.length)return!1;for(let a=0;a<i.length;a++)if(this.get(o+a)!==i[a])return!1;return!0},function(){let o={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let i in o)(function(a){o[a]===null?s.prototype[a]=function(l,c){return this.slice(l,l+c)[a](0,c)}:s.prototype[a]=function(l=0){return this.slice(l,l+o[a])[a](0)}})(i)}(),s.prototype._isBufferList=function(o){return o instanceof s||s.isBufferList(o)},s.isBufferList=function(o){return o!=null&&o[n]},e.exports=s}),yd=ye((t,e)=>{ce(),he(),ue();var r=Er().Duplex,n=md(),s=bd();function o(i){if(!(this instanceof o))return new o(i);if(typeof i=="function"){this._callback=i;let a=(function(l){this._callback&&(this._callback(l),this._callback=null)}).bind(this);this.on("pipe",function(l){l.on("error",a)}),this.on("unpipe",function(l){l.removeListener("error",a)}),i=null}s._init.call(this,i),r.call(this)}n(o,r),Object.assign(o.prototype,s.prototype),o.prototype._new=function(i){return new o(i)},o.prototype._write=function(i,a,l){this._appendBuffer(i),typeof l=="function"&&l()},o.prototype._read=function(i){if(!this.length)return this.push(null);i=Math.min(i,this.length),this.push(this.slice(0,i)),this.consume(i)},o.prototype.end=function(i){r.prototype.end.call(this,i),this._callback&&(this._callback(null,this.slice()),this._callback=null)},o.prototype._destroy=function(i,a){this._bufs.length=0,this.length=0,a(i)},o.prototype._isBufferList=function(i){return i instanceof o||i instanceof s||o.isBufferList(i)},o.isBufferList=s.isBufferList,e.exports=o,e.exports.BufferListStream=o,e.exports.BufferList=s}),_d=ye((t,e)=>{ce(),he(),ue();var r=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};e.exports=r}),rc=ye((t,e)=>{ce(),he(),ue();var r=e.exports,{Buffer:n}=(ot(),De(it));r.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},r.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},r.requiredHeaderFlagsErrors={};for(let o in r.requiredHeaderFlags){let i=r.requiredHeaderFlags[o];r.requiredHeaderFlagsErrors[o]="Invalid header flag bits, must be 0x"+i.toString(16)+" for "+r.types[o]+" packet"}r.codes={};for(let o in r.types){let i=r.types[o];r.codes[i]=o}r.CMD_SHIFT=4,r.CMD_MASK=240,r.DUP_MASK=8,r.QOS_MASK=3,r.QOS_SHIFT=1,r.RETAIN_MASK=1,r.VARBYTEINT_MASK=127,r.VARBYTEINT_FIN_MASK=128,r.VARBYTEINT_MAX=268435455,r.SESSIONPRESENT_MASK=1,r.SESSIONPRESENT_HEADER=n.from([r.SESSIONPRESENT_MASK]),r.CONNACK_HEADER=n.from([r.codes.connack<<r.CMD_SHIFT]),r.USERNAME_MASK=128,r.PASSWORD_MASK=64,r.WILL_RETAIN_MASK=32,r.WILL_QOS_MASK=24,r.WILL_QOS_SHIFT=3,r.WILL_FLAG_MASK=4,r.CLEAN_SESSION_MASK=2,r.CONNECT_HEADER=n.from([r.codes.connect<<r.CMD_SHIFT]),r.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},r.propertiesCodes={};for(let o in r.properties){let i=r.properties[o];r.propertiesCodes[i]=o}r.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function s(o){return[0,1,2].map(i=>[0,1].map(a=>[0,1].map(l=>{let c=n.alloc(1);return c.writeUInt8(r.codes[o]<<r.CMD_SHIFT|(a?r.DUP_MASK:0)|i<<r.QOS_SHIFT|l,0,!0),c})))}r.PUBLISH_HEADER=s("publish"),r.SUBSCRIBE_HEADER=s("subscribe"),r.SUBSCRIBE_OPTIONS_QOS_MASK=3,r.SUBSCRIBE_OPTIONS_NL_MASK=1,r.SUBSCRIBE_OPTIONS_NL_SHIFT=2,r.SUBSCRIBE_OPTIONS_RAP_MASK=1,r.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,r.SUBSCRIBE_OPTIONS_RH_MASK=3,r.SUBSCRIBE_OPTIONS_RH_SHIFT=4,r.SUBSCRIBE_OPTIONS_RH=[0,16,32],r.SUBSCRIBE_OPTIONS_NL=4,r.SUBSCRIBE_OPTIONS_RAP=8,r.SUBSCRIBE_OPTIONS_QOS=[0,1,2],r.UNSUBSCRIBE_HEADER=s("unsubscribe"),r.ACKS={unsuback:s("unsuback"),puback:s("puback"),pubcomp:s("pubcomp"),pubrel:s("pubrel"),pubrec:s("pubrec")},r.SUBACK_HEADER=n.from([r.codes.suback<<r.CMD_SHIFT]),r.VERSION3=n.from([3]),r.VERSION4=n.from([4]),r.VERSION5=n.from([5]),r.VERSION131=n.from([131]),r.VERSION132=n.from([132]),r.QOS=[0,1,2].map(o=>n.from([o])),r.EMPTY={pingreq:n.from([r.codes.pingreq<<4,0]),pingresp:n.from([r.codes.pingresp<<4,0]),disconnect:n.from([r.codes.disconnect<<4,0])},r.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},r.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},r.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},r.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},r.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},r.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),wd=ye((t,e)=>{ce(),he(),ue();var r=1e3,n=r*60,s=n*60,o=s*24,i=o*7,a=o*365.25;e.exports=function(g,b){b=b||{};var m=typeof g;if(m==="string"&&g.length>0)return l(g);if(m==="number"&&isFinite(g))return b.long?u(g):c(g);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(g))};function l(g){if(g=String(g),!(g.length>100)){var b=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(g);if(b){var m=parseFloat(b[1]),y=(b[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return m*a;case"weeks":case"week":case"w":return m*i;case"days":case"day":case"d":return m*o;case"hours":case"hour":case"hrs":case"hr":case"h":return m*s;case"minutes":case"minute":case"mins":case"min":case"m":return m*n;case"seconds":case"second":case"secs":case"sec":case"s":return m*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function c(g){var b=Math.abs(g);return b>=o?Math.round(g/o)+"d":b>=s?Math.round(g/s)+"h":b>=n?Math.round(g/n)+"m":b>=r?Math.round(g/r)+"s":g+"ms"}function u(g){var b=Math.abs(g);return b>=o?d(g,b,o,"day"):b>=s?d(g,b,s,"hour"):b>=n?d(g,b,n,"minute"):b>=r?d(g,b,r,"second"):g+" ms"}function d(g,b,m,y){var w=b>=m*1.5;return Math.round(g/m)+" "+y+(w?"s":"")}}),vd=ye((t,e)=>{ce(),he(),ue();function r(n){o.debug=o,o.default=o,o.coerce=d,o.disable=l,o.enable=a,o.enabled=c,o.humanize=wd(),o.destroy=g,Object.keys(n).forEach(b=>{o[b]=n[b]}),o.names=[],o.skips=[],o.formatters={};function s(b){let m=0;for(let y=0;y<b.length;y++)m=(m<<5)-m+b.charCodeAt(y),m|=0;return o.colors[Math.abs(m)%o.colors.length]}o.selectColor=s;function o(b){let m,y=null,w,R;function S(...E){if(!S.enabled)return;let j=S,U=Number(new Date),T=U-(m||U);j.diff=T,j.prev=m,j.curr=U,m=U,E[0]=o.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let I=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(N,W)=>{if(N==="%%")return"%";I++;let G=o.formatters[W];if(typeof G=="function"){let ne=E[I];N=G.call(j,ne),E.splice(I,1),I--}return N}),o.formatArgs.call(j,E),(j.log||o.log).apply(j,E)}return S.namespace=b,S.useColors=o.useColors(),S.color=o.selectColor(b),S.extend=i,S.destroy=o.destroy,Object.defineProperty(S,"enabled",{enumerable:!0,configurable:!1,get:()=>y!==null?y:(w!==o.namespaces&&(w=o.namespaces,R=o.enabled(b)),R),set:E=>{y=E}}),typeof o.init=="function"&&o.init(S),S}function i(b,m){let y=o(this.namespace+(typeof m>"u"?":":m)+b);return y.log=this.log,y}function a(b){o.save(b),o.namespaces=b,o.names=[],o.skips=[];let m,y=(typeof b=="string"?b:"").split(/[\s,]+/),w=y.length;for(m=0;m<w;m++)y[m]&&(b=y[m].replace(/\*/g,".*?"),b[0]==="-"?o.skips.push(new RegExp("^"+b.slice(1)+"$")):o.names.push(new RegExp("^"+b+"$")))}function l(){let b=[...o.names.map(u),...o.skips.map(u).map(m=>"-"+m)].join(",");return o.enable(""),b}function c(b){if(b[b.length-1]==="*")return!0;let m,y;for(m=0,y=o.skips.length;m<y;m++)if(o.skips[m].test(b))return!1;for(m=0,y=o.names.length;m<y;m++)if(o.names[m].test(b))return!0;return!1}function u(b){return b.toString().substring(2,b.toString().length-2).replace(/\.\*\?$/,"*")}function d(b){return b instanceof Error?b.stack||b.message:b}function g(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return o.enable(o.load()),o}e.exports=r}),$t=ye((t,e)=>{ce(),he(),ue(),t.formatArgs=n,t.save=s,t.load=o,t.useColors=r,t.storage=i(),t.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let c="color: "+this.color;l.splice(1,0,c,"color: inherit");let u=0,d=0;l[0].replace(/%[a-zA-Z%]/g,g=>{g!=="%%"&&(u++,g==="%c"&&(d=u))}),l.splice(d,0,c)}t.log=console.debug||console.log||(()=>{});function s(l){try{l?t.storage.setItem("debug",l):t.storage.removeItem("debug")}catch{}}function o(){let l;try{l=t.storage.getItem("debug")}catch{}return!l&&typeof je<"u"&&"env"in je&&(l=je.env.DEBUG),l}function i(){try{return localStorage}catch{}}e.exports=vd()(t);var{formatters:a}=e.exports;a.j=function(l){try{return JSON.stringify(l)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}}),Ed=ye((t,e)=>{ce(),he(),ue();var r=yd(),{EventEmitter:n}=(Pr(),De(vr)),s=_d(),o=rc(),i=$t()("mqtt-packet:parser"),a=class $o extends n{constructor(){super(),this.parser=this.constructor.parser}static parser(c){return this instanceof $o?(this.settings=c||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new $o().parser(c)}_resetState(){i("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new s,this.error=null,this._list=r(),this._stateCounter=0}parse(c){for(this.error&&this._resetState(),this._list.append(c),i("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,i("parse: state complete. _stateCounter is now: %d",this._stateCounter),i("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return i("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let c=this._list.readUInt8(0),u=c>>o.CMD_SHIFT;this.packet.cmd=o.types[u];let d=c&15,g=o.requiredHeaderFlags[u];return g!=null&&d!==g?this._emitError(new Error(o.requiredHeaderFlagsErrors[u])):(this.packet.retain=(c&o.RETAIN_MASK)!==0,this.packet.qos=c>>o.QOS_SHIFT&o.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(c&o.DUP_MASK)!==0,i("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let c=this._parseVarByteNum(!0);return c&&(this.packet.length=c.value,this._list.consume(c.bytes)),i("_parseLength %d",c.value),!!c}_parsePayload(){i("_parsePayload: payload %O",this._list);let c=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}c=!0}return i("_parsePayload complete result: %s",c),c}_parseConnect(){i("_parseConnect");let c,u,d,g,b={},m=this.packet,y=this._parseString();if(y===null)return this._emitError(new Error("Cannot parse protocolId"));if(y!=="MQTT"&&y!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(m.protocolId=y,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(m.protocolVersion=this._list.readUInt8(this._pos),m.protocolVersion>=128&&(m.bridgeMode=!0,m.protocolVersion=m.protocolVersion-128),m.protocolVersion!==3&&m.protocolVersion!==4&&m.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));b.username=this._list.readUInt8(this._pos)&o.USERNAME_MASK,b.password=this._list.readUInt8(this._pos)&o.PASSWORD_MASK,b.will=this._list.readUInt8(this._pos)&o.WILL_FLAG_MASK;let w=!!(this._list.readUInt8(this._pos)&o.WILL_RETAIN_MASK),R=(this._list.readUInt8(this._pos)&o.WILL_QOS_MASK)>>o.WILL_QOS_SHIFT;if(b.will)m.will={},m.will.retain=w,m.will.qos=R;else{if(w)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(R)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(m.clean=(this._list.readUInt8(this._pos)&o.CLEAN_SESSION_MASK)!==0,this._pos++,m.keepalive=this._parseNum(),m.keepalive===-1)return this._emitError(new Error("Packet too short"));if(m.protocolVersion===5){let E=this._parseProperties();Object.getOwnPropertyNames(E).length&&(m.properties=E)}let S=this._parseString();if(S===null)return this._emitError(new Error("Packet too short"));if(m.clientId=S,i("_parseConnect: packet.clientId: %s",m.clientId),b.will){if(m.protocolVersion===5){let E=this._parseProperties();Object.getOwnPropertyNames(E).length&&(m.will.properties=E)}if(c=this._parseString(),c===null)return this._emitError(new Error("Cannot parse will topic"));if(m.will.topic=c,i("_parseConnect: packet.will.topic: %s",m.will.topic),u=this._parseBuffer(),u===null)return this._emitError(new Error("Cannot parse will payload"));m.will.payload=u,i("_parseConnect: packet.will.paylaod: %s",m.will.payload)}if(b.username){if(g=this._parseString(),g===null)return this._emitError(new Error("Cannot parse username"));m.username=g,i("_parseConnect: packet.username: %s",m.username)}if(b.password){if(d=this._parseBuffer(),d===null)return this._emitError(new Error("Cannot parse password"));m.password=d}return this.settings=m,i("_parseConnect: complete"),m}_parseConnack(){i("_parseConnack");let c=this.packet;if(this._list.length<1)return null;let u=this._list.readUInt8(this._pos++);if(u>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(c.sessionPresent=!!(u&o.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?c.reasonCode=this._list.readUInt8(this._pos++):c.reasonCode=0;else{if(this._list.length<2)return null;c.returnCode=this._list.readUInt8(this._pos++)}if(c.returnCode===-1||c.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let d=this._parseProperties();Object.getOwnPropertyNames(d).length&&(c.properties=d)}i("_parseConnack: complete")}_parsePublish(){i("_parsePublish");let c=this.packet;if(c.topic=this._parseString(),c.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(c.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(c.properties=u)}c.payload=this._list.slice(this._pos,c.length),i("_parsePublish: payload from buffer list: %o",c.payload)}}_parseSubscribe(){i("_parseSubscribe");let c=this.packet,u,d,g,b,m,y,w;if(c.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let R=this._parseProperties();Object.getOwnPropertyNames(R).length&&(c.properties=R)}if(c.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<c.length;){if(u=this._parseString(),u===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=c.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(d=this._parseByte(),this.settings.protocolVersion===5){if(d&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(d&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(g=d&o.SUBSCRIBE_OPTIONS_QOS_MASK,g>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(y=(d>>o.SUBSCRIBE_OPTIONS_NL_SHIFT&o.SUBSCRIBE_OPTIONS_NL_MASK)!==0,m=(d>>o.SUBSCRIBE_OPTIONS_RAP_SHIFT&o.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,b=d>>o.SUBSCRIBE_OPTIONS_RH_SHIFT&o.SUBSCRIBE_OPTIONS_RH_MASK,b>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));w={topic:u,qos:g},this.settings.protocolVersion===5?(w.nl=y,w.rap=m,w.rh=b):this.settings.bridgeMode&&(w.rh=0,w.rap=!0,w.nl=!0),i("_parseSubscribe: push subscription `%s` to subscription",w),c.subscriptions.push(w)}}}_parseSuback(){i("_parseSuback");let c=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(c.properties=u)}if(c.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let u=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!o.MQTT5_SUBACK_CODES[u])return this._emitError(new Error("Invalid suback code"))}else if(u>2&&u!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(u)}}}_parseUnsubscribe(){i("_parseUnsubscribe");let c=this.packet;if(c.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(c.properties=u)}if(c.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<c.length;){let u=this._parseString();if(u===null)return this._emitError(new Error("Cannot parse topic"));i("_parseUnsubscribe: push topic `%s` to unsubscriptions",u),c.unsubscriptions.push(u)}}}_parseUnsuback(){i("_parseUnsuback");let c=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&c.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(c.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let u=this._parseProperties();for(Object.getOwnPropertyNames(u).length&&(c.properties=u),c.granted=[];this._pos<this.packet.length;){let d=this._list.readUInt8(this._pos++);if(!o.MQTT5_UNSUBACK_CODES[d])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(d)}}}_parseConfirmation(){i("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let c=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(c.length>2){switch(c.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!o.MQTT5_PUBACK_PUBREC_CODES[c.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!o.MQTT5_PUBREL_PUBCOMP_CODES[c.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}i("_parseConfirmation: packet.reasonCode `%d`",c.reasonCode)}else c.reasonCode=0;if(c.length>3){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(c.properties=u)}}return!0}_parseDisconnect(){let c=this.packet;if(i("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(c.reasonCode=this._parseByte(),o.MQTT5_DISCONNECT_CODES[c.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):c.reasonCode=0;let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(c.properties=u)}return i("_parseDisconnect result: true"),!0}_parseAuth(){i("_parseAuth");let c=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(c.reasonCode=this._parseByte(),!o.MQTT5_AUTH_CODES[c.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let u=this._parseProperties();return Object.getOwnPropertyNames(u).length&&(c.properties=u),i("_parseAuth: result: true"),!0}_parseMessageId(){let c=this.packet;return c.messageId=this._parseNum(),c.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(i("_parseMessageId: packet.messageId %d",c.messageId),!0)}_parseString(c){let u=this._parseNum(),d=u+this._pos;if(u===-1||d>this._list.length||d>this.packet.length)return null;let g=this._list.toString("utf8",this._pos,d);return this._pos+=u,i("_parseString: result: %s",g),g}_parseStringPair(){return i("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let c=this._parseNum(),u=c+this._pos;if(c===-1||u>this._list.length||u>this.packet.length)return null;let d=this._list.slice(this._pos,u);return this._pos+=c,i("_parseBuffer: result: %o",d),d}_parseNum(){if(this._list.length-this._pos<2)return-1;let c=this._list.readUInt16BE(this._pos);return this._pos+=2,i("_parseNum: result: %s",c),c}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let c=this._list.readUInt32BE(this._pos);return this._pos+=4,i("_parse4ByteNum: result: %s",c),c}_parseVarByteNum(c){i("_parseVarByteNum");let u=4,d=0,g=1,b=0,m=!1,y,w=this._pos?this._pos:0;for(;d<u&&w+d<this._list.length;){if(y=this._list.readUInt8(w+d++),b+=g*(y&o.VARBYTEINT_MASK),g*=128,!(y&o.VARBYTEINT_FIN_MASK)){m=!0;break}if(this._list.length<=d)break}return!m&&d===u&&this._list.length>=d&&this._emitError(new Error("Invalid variable byte integer")),w&&(this._pos+=d),m?c?m={bytes:d,value:b}:m=b:m=!1,i("_parseVarByteNum: result: %o",m),m}_parseByte(){let c;return this._pos<this._list.length&&(c=this._list.readUInt8(this._pos),this._pos++),i("_parseByte: result: %o",c),c}_parseByType(c){switch(i("_parseByType: type: %s",c),c){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){i("_parseProperties");let c=this._parseVarByteNum(),u=this._pos+c,d={};for(;this._pos<u;){let g=this._parseByte();if(!g)return this._emitError(new Error("Cannot parse property code type")),!1;let b=o.propertiesCodes[g];if(!b)return this._emitError(new Error("Unknown property")),!1;if(b==="userProperties"){d[b]||(d[b]=Object.create(null));let m=this._parseByType(o.propertiesTypes[b]);if(d[b][m.name])if(Array.isArray(d[b][m.name]))d[b][m.name].push(m.value);else{let y=d[b][m.name];d[b][m.name]=[y],d[b][m.name].push(m.value)}else d[b][m.name]=m.value;continue}d[b]?Array.isArray(d[b])?d[b].push(this._parseByType(o.propertiesTypes[b])):(d[b]=[d[b]],d[b].push(this._parseByType(o.propertiesTypes[b]))):d[b]=this._parseByType(o.propertiesTypes[b])}return d}_newPacket(){return i("_newPacket"),this.packet&&(this._list.consume(this.packet.length),i("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),i("_newPacket: new packet"),this.packet=new s,this._pos=0,!0}_emitError(c){i("_emitError",c),this.error=c,this.emit("error",c)}};e.exports=a}),Sd=ye((t,e)=>{ce(),he(),ue();var{Buffer:r}=(ot(),De(it)),n=65536,s={},o=r.isBuffer(r.from([1,2]).subarray(0,1));function i(u){let d=r.allocUnsafe(2);return d.writeUInt8(u>>8,0),d.writeUInt8(u&255,1),d}function a(){for(let u=0;u<n;u++)s[u]=i(u)}function l(u){let d=0,g=0,b=r.allocUnsafe(4);do d=u%128|0,u=u/128|0,u>0&&(d=d|128),b.writeUInt8(d,g++);while(u>0&&g<4);return u>0&&(g=0),o?b.subarray(0,g):b.slice(0,g)}function c(u){let d=r.allocUnsafe(4);return d.writeUInt32BE(u,0),d}e.exports={cache:s,generateCache:a,generateNumber:i,genBufVariableByteInt:l,generate4ByteBuffer:c}}),Ad=ye((t,e)=>{ce(),he(),ue(),typeof je>"u"||!je.version||je.version.indexOf("v0.")===0||je.version.indexOf("v1.")===0&&je.version.indexOf("v1.8.")!==0?e.exports={nextTick:r}:e.exports=je;function r(n,s,o,i){if(typeof n!="function")throw new TypeError('"callback" argument must be a function');var a=arguments.length,l,c;switch(a){case 0:case 1:return je.nextTick(n);case 2:return je.nextTick(function(){n.call(null,s)});case 3:return je.nextTick(function(){n.call(null,s,o)});case 4:return je.nextTick(function(){n.call(null,s,o,i)});default:for(l=new Array(a-1),c=0;c<l.length;)l[c++]=arguments[c];return je.nextTick(function(){n.apply(null,l)})}}}),nc=ye((t,e)=>{ce(),he(),ue();var r=rc(),{Buffer:n}=(ot(),De(it)),s=n.allocUnsafe(0),o=n.from([0]),i=Sd(),a=Ad().nextTick,l=$t()("mqtt-packet:writeToStream"),c=i.cache,u=i.generateNumber,d=i.generateCache,g=i.genBufVariableByteInt,b=i.generate4ByteBuffer,m=ae,y=!0;function w(B,A,K){switch(l("generate called"),A.cork&&(A.cork(),a(R,A)),y&&(y=!1,d()),l("generate: packet.cmd: %s",B.cmd),B.cmd){case"connect":return S(B,A);case"connack":return E(B,A,K);case"publish":return j(B,A,K);case"puback":case"pubrec":case"pubrel":case"pubcomp":return U(B,A,K);case"subscribe":return T(B,A,K);case"suback":return I(B,A,K);case"unsubscribe":return N(B,A,K);case"unsuback":return W(B,A,K);case"pingreq":case"pingresp":return G(B,A);case"disconnect":return ne(B,A,K);case"auth":return C(B,A,K);default:return A.destroy(new Error("Unknown command")),!1}}Object.defineProperty(w,"cacheNumbers",{get(){return m===ae},set(B){B?((!c||Object.keys(c).length===0)&&(y=!0),m=ae):(y=!1,m=q)}});function R(B){B.uncork()}function S(B,A,K){let de=B||{},te=de.protocolId||"MQTT",Z=de.protocolVersion||4,we=de.will,ge=de.clean,x=de.keepalive||0,D=de.clientId||"",F=de.username,oe=de.password,X=de.properties;ge===void 0&&(ge=!0);let M=0;if(!te||typeof te!="string"&&!n.isBuffer(te))return A.destroy(new Error("Invalid protocolId")),!1;if(M+=te.length+2,Z!==3&&Z!==4&&Z!==5)return A.destroy(new Error("Invalid protocol version")),!1;if(M+=1,(typeof D=="string"||n.isBuffer(D))&&(D||Z>=4)&&(D||ge))M+=n.byteLength(D)+2;else{if(Z<4)return A.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(ge*1===0)return A.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof x!="number"||x<0||x>65535||x%1!==0)return A.destroy(new Error("Invalid keepalive")),!1;M+=2,M+=1;let z,O;if(Z===5){if(z=Ee(A,X),!z)return!1;M+=z.length}if(we){if(typeof we!="object")return A.destroy(new Error("Invalid will")),!1;if(!we.topic||typeof we.topic!="string")return A.destroy(new Error("Invalid will topic")),!1;if(M+=n.byteLength(we.topic)+2,M+=2,we.payload)if(we.payload.length>=0)typeof we.payload=="string"?M+=n.byteLength(we.payload):M+=we.payload.length;else return A.destroy(new Error("Invalid will payload")),!1;if(O={},Z===5){if(O=Ee(A,we.properties),!O)return!1;M+=O.length}}let L=!1;if(F!=null)if(fe(F))L=!0,M+=n.byteLength(F)+2;else return A.destroy(new Error("Invalid username")),!1;if(oe!=null){if(!L)return A.destroy(new Error("Username is required to use password")),!1;if(fe(oe))M+=Se(oe)+2;else return A.destroy(new Error("Invalid password")),!1}A.write(r.CONNECT_HEADER),re(A,M),se(A,te),de.bridgeMode&&(Z+=128),A.write(Z===131?r.VERSION131:Z===132?r.VERSION132:Z===4?r.VERSION4:Z===5?r.VERSION5:r.VERSION3);let H=0;return H|=F!=null?r.USERNAME_MASK:0,H|=oe!=null?r.PASSWORD_MASK:0,H|=we&&we.retain?r.WILL_RETAIN_MASK:0,H|=we&&we.qos?we.qos<<r.WILL_QOS_SHIFT:0,H|=we?r.WILL_FLAG_MASK:0,H|=ge?r.CLEAN_SESSION_MASK:0,A.write(n.from([H])),m(A,x),Z===5&&z.write(),se(A,D),we&&(Z===5&&O.write(),J(A,we.topic),se(A,we.payload)),F!=null&&se(A,F),oe!=null&&se(A,oe),!0}function E(B,A,K){let de=K?K.protocolVersion:4,te=B||{},Z=de===5?te.reasonCode:te.returnCode,we=te.properties,ge=2;if(typeof Z!="number")return A.destroy(new Error("Invalid return code")),!1;let x=null;if(de===5){if(x=Ee(A,we),!x)return!1;ge+=x.length}return A.write(r.CONNACK_HEADER),re(A,ge),A.write(te.sessionPresent?r.SESSIONPRESENT_HEADER:o),A.write(n.from([Z])),x==null||x.write(),!0}function j(B,A,K){l("publish: packet: %o",B);let de=K?K.protocolVersion:4,te=B||{},Z=te.qos||0,we=te.retain?r.RETAIN_MASK:0,ge=te.topic,x=te.payload||s,D=te.messageId,F=te.properties,oe=0;if(typeof ge=="string")oe+=n.byteLength(ge)+2;else if(n.isBuffer(ge))oe+=ge.length+2;else return A.destroy(new Error("Invalid topic")),!1;if(n.isBuffer(x)?oe+=x.length:oe+=n.byteLength(x),Z&&typeof D!="number")return A.destroy(new Error("Invalid messageId")),!1;Z&&(oe+=2);let X=null;if(de===5){if(X=Ee(A,F),!X)return!1;oe+=X.length}return A.write(r.PUBLISH_HEADER[Z][te.dup?1:0][we?1:0]),re(A,oe),m(A,Se(ge)),A.write(ge),Z>0&&m(A,D),X==null||X.write(),l("publish: payload: %o",x),A.write(x)}function U(B,A,K){let de=K?K.protocolVersion:4,te=B||{},Z=te.cmd||"puback",we=te.messageId,ge=te.dup&&Z==="pubrel"?r.DUP_MASK:0,x=0,D=te.reasonCode,F=te.properties,oe=de===5?3:2;if(Z==="pubrel"&&(x=1),typeof we!="number")return A.destroy(new Error("Invalid messageId")),!1;let X=null;if(de===5&&typeof F=="object"){if(X=v(A,F,K,oe),!X)return!1;oe+=X.length}return A.write(r.ACKS[Z][x][ge][0]),oe===3&&(oe+=D!==0?1:-1),re(A,oe),m(A,we),de===5&&oe!==2&&A.write(n.from([D])),X!==null?X.write():oe===4&&A.write(n.from([0])),!0}function T(B,A,K){l("subscribe: packet: ");let de=K?K.protocolVersion:4,te=B||{},Z=te.dup?r.DUP_MASK:0,we=te.messageId,ge=te.subscriptions,x=te.properties,D=0;if(typeof we!="number")return A.destroy(new Error("Invalid messageId")),!1;D+=2;let F=null;if(de===5){if(F=Ee(A,x),!F)return!1;D+=F.length}if(typeof ge=="object"&&ge.length)for(let X=0;X<ge.length;X+=1){let M=ge[X].topic,z=ge[X].qos;if(typeof M!="string")return A.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof z!="number")return A.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(de===5){if(typeof(ge[X].nl||!1)!="boolean")return A.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(ge[X].rap||!1)!="boolean")return A.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let O=ge[X].rh||0;if(typeof O!="number"||O>2)return A.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}D+=n.byteLength(M)+2+1}else return A.destroy(new Error("Invalid subscriptions")),!1;l("subscribe: writing to stream: %o",r.SUBSCRIBE_HEADER),A.write(r.SUBSCRIBE_HEADER[1][Z?1:0][0]),re(A,D),m(A,we),F!==null&&F.write();let oe=!0;for(let X of ge){let M=X.topic,z=X.qos,O=+X.nl,L=+X.rap,H=X.rh,le;J(A,M),le=r.SUBSCRIBE_OPTIONS_QOS[z],de===5&&(le|=O?r.SUBSCRIBE_OPTIONS_NL:0,le|=L?r.SUBSCRIBE_OPTIONS_RAP:0,le|=H?r.SUBSCRIBE_OPTIONS_RH[H]:0),oe=A.write(n.from([le]))}return oe}function I(B,A,K){let de=K?K.protocolVersion:4,te=B||{},Z=te.messageId,we=te.granted,ge=te.properties,x=0;if(typeof Z!="number")return A.destroy(new Error("Invalid messageId")),!1;if(x+=2,typeof we=="object"&&we.length)for(let F=0;F<we.length;F+=1){if(typeof we[F]!="number")return A.destroy(new Error("Invalid qos vector")),!1;x+=1}else return A.destroy(new Error("Invalid qos vector")),!1;let D=null;if(de===5){if(D=v(A,ge,K,x),!D)return!1;x+=D.length}return A.write(r.SUBACK_HEADER),re(A,x),m(A,Z),D!==null&&D.write(),A.write(n.from(we))}function N(B,A,K){let de=K?K.protocolVersion:4,te=B||{},Z=te.messageId,we=te.dup?r.DUP_MASK:0,ge=te.unsubscriptions,x=te.properties,D=0;if(typeof Z!="number")return A.destroy(new Error("Invalid messageId")),!1;if(D+=2,typeof ge=="object"&&ge.length)for(let X=0;X<ge.length;X+=1){if(typeof ge[X]!="string")return A.destroy(new Error("Invalid unsubscriptions")),!1;D+=n.byteLength(ge[X])+2}else return A.destroy(new Error("Invalid unsubscriptions")),!1;let F=null;if(de===5){if(F=Ee(A,x),!F)return!1;D+=F.length}A.write(r.UNSUBSCRIBE_HEADER[1][we?1:0][0]),re(A,D),m(A,Z),F!==null&&F.write();let oe=!0;for(let X=0;X<ge.length;X++)oe=J(A,ge[X]);return oe}function W(B,A,K){let de=K?K.protocolVersion:4,te=B||{},Z=te.messageId,we=te.dup?r.DUP_MASK:0,ge=te.granted,x=te.properties,D=te.cmd,F=0,oe=2;if(typeof Z!="number")return A.destroy(new Error("Invalid messageId")),!1;if(de===5)if(typeof ge=="object"&&ge.length)for(let M=0;M<ge.length;M+=1){if(typeof ge[M]!="number")return A.destroy(new Error("Invalid qos vector")),!1;oe+=1}else return A.destroy(new Error("Invalid qos vector")),!1;let X=null;if(de===5){if(X=v(A,x,K,oe),!X)return!1;oe+=X.length}return A.write(r.ACKS[D][F][we][0]),re(A,oe),m(A,Z),X!==null&&X.write(),de===5&&A.write(n.from(ge)),!0}function G(B,A,K){return A.write(r.EMPTY[B.cmd])}function ne(B,A,K){let de=K?K.protocolVersion:4,te=B||{},Z=te.reasonCode,we=te.properties,ge=de===5?1:0,x=null;if(de===5){if(x=v(A,we,K,ge),!x)return!1;ge+=x.length}return A.write(n.from([r.codes.disconnect<<4])),re(A,ge),de===5&&A.write(n.from([Z])),x!==null&&x.write(),!0}function C(B,A,K){let de=K?K.protocolVersion:4,te=B||{},Z=te.reasonCode,we=te.properties,ge=de===5?1:0;de!==5&&A.destroy(new Error("Invalid mqtt version for auth packet"));let x=v(A,we,K,ge);return x?(ge+=x.length,A.write(n.from([r.codes.auth<<4])),re(A,ge),A.write(n.from([Z])),x!==null&&x.write(),!0):!1}var V={};function re(B,A){if(A>r.VARBYTEINT_MAX)return B.destroy(new Error(`Invalid variable byte integer: ${A}`)),!1;let K=V[A];return K||(K=g(A),A<16384&&(V[A]=K)),l("writeVarByteInt: writing to stream: %o",K),B.write(K)}function J(B,A){let K=n.byteLength(A);return m(B,K),l("writeString: %s",A),B.write(A,"utf8")}function be(B,A,K){J(B,A),J(B,K)}function ae(B,A){return l("writeNumberCached: number: %d",A),l("writeNumberCached: %o",c[A]),B.write(c[A])}function q(B,A){let K=u(A);return l("writeNumberGenerated: %o",K),B.write(K)}function _e(B,A){let K=b(A);return l("write4ByteNumber: %o",K),B.write(K)}function se(B,A){typeof A=="string"?J(B,A):A?(m(B,A.length),B.write(A)):m(B,0)}function Ee(B,A){if(typeof A!="object"||A.length!=null)return{length:1,write(){pe(B,{},0)}};let K=0;function de(te,Z){let we=r.propertiesTypes[te],ge=0;switch(we){case"byte":{if(typeof Z!="boolean")return B.destroy(new Error(`Invalid ${te}: ${Z}`)),!1;ge+=2;break}case"int8":{if(typeof Z!="number"||Z<0||Z>255)return B.destroy(new Error(`Invalid ${te}: ${Z}`)),!1;ge+=2;break}case"binary":{if(Z&&Z===null)return B.destroy(new Error(`Invalid ${te}: ${Z}`)),!1;ge+=1+n.byteLength(Z)+2;break}case"int16":{if(typeof Z!="number"||Z<0||Z>65535)return B.destroy(new Error(`Invalid ${te}: ${Z}`)),!1;ge+=3;break}case"int32":{if(typeof Z!="number"||Z<0||Z>4294967295)return B.destroy(new Error(`Invalid ${te}: ${Z}`)),!1;ge+=5;break}case"var":{if(typeof Z!="number"||Z<0||Z>268435455)return B.destroy(new Error(`Invalid ${te}: ${Z}`)),!1;ge+=1+n.byteLength(g(Z));break}case"string":{if(typeof Z!="string")return B.destroy(new Error(`Invalid ${te}: ${Z}`)),!1;ge+=3+n.byteLength(Z.toString());break}case"pair":{if(typeof Z!="object")return B.destroy(new Error(`Invalid ${te}: ${Z}`)),!1;ge+=Object.getOwnPropertyNames(Z).reduce((x,D)=>{let F=Z[D];return Array.isArray(F)?x+=F.reduce((oe,X)=>(oe+=3+n.byteLength(D.toString())+2+n.byteLength(X.toString()),oe),0):x+=3+n.byteLength(D.toString())+2+n.byteLength(Z[D].toString()),x},0);break}default:return B.destroy(new Error(`Invalid property ${te}: ${Z}`)),!1}return ge}if(A)for(let te in A){let Z=0,we=0,ge=A[te];if(Array.isArray(ge))for(let x=0;x<ge.length;x++){if(we=de(te,ge[x]),!we)return!1;Z+=we}else{if(we=de(te,ge),!we)return!1;Z=we}if(!Z)return!1;K+=Z}return{length:n.byteLength(g(K))+K,write(){pe(B,A,K)}}}function v(B,A,K,de){let te=["reasonString","userProperties"],Z=K&&K.properties&&K.properties.maximumPacketSize?K.properties.maximumPacketSize:0,we=Ee(B,A);if(Z)for(;de+we.length>Z;){let ge=te.shift();if(ge&&A[ge])delete A[ge],we=Ee(B,A);else return!1}return we}function Y(B,A,K){switch(r.propertiesTypes[A]){case"byte":{B.write(n.from([r.properties[A]])),B.write(n.from([+K]));break}case"int8":{B.write(n.from([r.properties[A]])),B.write(n.from([K]));break}case"binary":{B.write(n.from([r.properties[A]])),se(B,K);break}case"int16":{B.write(n.from([r.properties[A]])),m(B,K);break}case"int32":{B.write(n.from([r.properties[A]])),_e(B,K);break}case"var":{B.write(n.from([r.properties[A]])),re(B,K);break}case"string":{B.write(n.from([r.properties[A]])),J(B,K);break}case"pair":{Object.getOwnPropertyNames(K).forEach(de=>{let te=K[de];Array.isArray(te)?te.forEach(Z=>{B.write(n.from([r.properties[A]])),be(B,de.toString(),Z.toString())}):(B.write(n.from([r.properties[A]])),be(B,de.toString(),te.toString()))});break}default:return B.destroy(new Error(`Invalid property ${A} value: ${K}`)),!1}}function pe(B,A,K){re(B,K);for(let de in A)if(Object.prototype.hasOwnProperty.call(A,de)&&A[de]!==null){let te=A[de];if(Array.isArray(te))for(let Z=0;Z<te.length;Z++)Y(B,de,te[Z]);else Y(B,de,te)}}function Se(B){return B?B instanceof n?B.length:n.byteLength(B):0}function fe(B){return typeof B=="string"||B instanceof n}e.exports=w}),Cd=ye((t,e)=>{ce(),he(),ue();var r=nc(),{EventEmitter:n}=(Pr(),De(vr)),{Buffer:s}=(ot(),De(it));function o(a,l){let c=new i;return r(a,c,l),c.concat()}var i=class extends n{constructor(){super(),this._array=new Array(20),this._i=0}write(a){return this._array[this._i++]=a,!0}concat(){let a=0,l=new Array(this._array.length),c=this._array,u=0,d;for(d=0;d<c.length&&c[d]!==void 0;d++)typeof c[d]!="string"?l[d]=c[d].length:l[d]=s.byteLength(c[d]),a+=l[d];let g=s.allocUnsafe(a);for(d=0;d<c.length&&c[d]!==void 0;d++)typeof c[d]!="string"?(c[d].copy(g,u),u+=l[d]):(g.write(c[d],u),u+=l[d]);return g}destroy(a){a&&this.emit("error",a)}};e.exports=o}),Id=ye(t=>{ce(),he(),ue(),t.parser=Ed().parser,t.generate=Cd(),t.writeToStream=nc()}),ic=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"__esModule",{value:!0});var e=class{constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let r=this.nextId++;return this.nextId===65536&&(this.nextId=1),r}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(r){return!0}deallocate(r){}clear(){}};t.default=e}),Td=ye((t,e)=>{ce(),he(),ue(),e.exports=n;function r(o){return o instanceof In?In.from(o):new o.constructor(o.buffer.slice(),o.byteOffset,o.length)}function n(o){if(o=o||{},o.circles)return s(o);return o.proto?l:a;function i(c,u){for(var d=Object.keys(c),g=new Array(d.length),b=0;b<d.length;b++){var m=d[b],y=c[m];typeof y!="object"||y===null?g[m]=y:y instanceof Date?g[m]=new Date(y):ArrayBuffer.isView(y)?g[m]=r(y):g[m]=u(y)}return g}function a(c){if(typeof c!="object"||c===null)return c;if(c instanceof Date)return new Date(c);if(Array.isArray(c))return i(c,a);if(c instanceof Map)return new Map(i(Array.from(c),a));if(c instanceof Set)return new Set(i(Array.from(c),a));var u={};for(var d in c)if(Object.hasOwnProperty.call(c,d)!==!1){var g=c[d];typeof g!="object"||g===null?u[d]=g:g instanceof Date?u[d]=new Date(g):g instanceof Map?u[d]=new Map(i(Array.from(g),a)):g instanceof Set?u[d]=new Set(i(Array.from(g),a)):ArrayBuffer.isView(g)?u[d]=r(g):u[d]=a(g)}return u}function l(c){if(typeof c!="object"||c===null)return c;if(c instanceof Date)return new Date(c);if(Array.isArray(c))return i(c,l);if(c instanceof Map)return new Map(i(Array.from(c),l));if(c instanceof Set)return new Set(i(Array.from(c),l));var u={};for(var d in c){var g=c[d];typeof g!="object"||g===null?u[d]=g:g instanceof Date?u[d]=new Date(g):g instanceof Map?u[d]=new Map(i(Array.from(g),l)):g instanceof Set?u[d]=new Set(i(Array.from(g),l)):ArrayBuffer.isView(g)?u[d]=r(g):u[d]=l(g)}return u}}function s(o){var i=[],a=[];return o.proto?u:c;function l(d,g){for(var b=Object.keys(d),m=new Array(b.length),y=0;y<b.length;y++){var w=b[y],R=d[w];if(typeof R!="object"||R===null)m[w]=R;else if(R instanceof Date)m[w]=new Date(R);else if(ArrayBuffer.isView(R))m[w]=r(R);else{var S=i.indexOf(R);S!==-1?m[w]=a[S]:m[w]=g(R)}}return m}function c(d){if(typeof d!="object"||d===null)return d;if(d instanceof Date)return new Date(d);if(Array.isArray(d))return l(d,c);if(d instanceof Map)return new Map(l(Array.from(d),c));if(d instanceof Set)return new Set(l(Array.from(d),c));var g={};i.push(d),a.push(g);for(var b in d)if(Object.hasOwnProperty.call(d,b)!==!1){var m=d[b];if(typeof m!="object"||m===null)g[b]=m;else if(m instanceof Date)g[b]=new Date(m);else if(m instanceof Map)g[b]=new Map(l(Array.from(m),c));else if(m instanceof Set)g[b]=new Set(l(Array.from(m),c));else if(ArrayBuffer.isView(m))g[b]=r(m);else{var y=i.indexOf(m);y!==-1?g[b]=a[y]:g[b]=c(m)}}return i.pop(),a.pop(),g}function u(d){if(typeof d!="object"||d===null)return d;if(d instanceof Date)return new Date(d);if(Array.isArray(d))return l(d,u);if(d instanceof Map)return new Map(l(Array.from(d),u));if(d instanceof Set)return new Set(l(Array.from(d),u));var g={};i.push(d),a.push(g);for(var b in d){var m=d[b];if(typeof m!="object"||m===null)g[b]=m;else if(m instanceof Date)g[b]=new Date(m);else if(m instanceof Map)g[b]=new Map(l(Array.from(m),u));else if(m instanceof Set)g[b]=new Set(l(Array.from(m),u));else if(ArrayBuffer.isView(m))g[b]=r(m);else{var y=i.indexOf(m);y!==-1?g[b]=a[y]:g[b]=u(m)}}return i.pop(),a.pop(),g}}}),kd=ye((t,e)=>{ce(),he(),ue(),e.exports=Td()()}),Rd=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"__esModule",{value:!0}),t.validateTopics=t.validateTopic=void 0;function e(n){let s=n.split("/");for(let o=0;o<s.length;o++)if(s[o]!=="+"){if(s[o]==="#")return o===s.length-1;if(s[o].indexOf("+")!==-1||s[o].indexOf("#")!==-1)return!1}return!0}t.validateTopic=e;function r(n){if(n.length===0)return"empty_topic_list";for(let s=0;s<n.length;s++)if(!e(n[s]))return n[s];return null}t.validateTopics=r}),oc=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"__esModule",{value:!0});var e=Er(),r={objectMode:!0},n={clean:!0},s=class{constructor(o){this.options=o||{},this.options=Object.assign(Object.assign({},n),o),this._inflights=new Map}put(o,i){return this._inflights.set(o.messageId,o),i&&i(),this}createStream(){let o=new e.Readable(r),i=[],a=!1,l=0;return this._inflights.forEach((c,u)=>{i.push(c)}),o._read=()=>{!a&&l<i.length?o.push(i[l++]):o.push(null)},o.destroy=c=>{if(!a)return a=!0,setTimeout(()=>{o.emit("close")},0),o},o}del(o,i){let a=this._inflights.get(o.messageId);return a?(this._inflights.delete(o.messageId),i(null,a)):i&&i(new Error("missing packet")),this}get(o,i){let a=this._inflights.get(o.messageId);return a?i(null,a):i&&i(new Error("missing packet")),this}close(o){this.options.clean&&(this._inflights=null),o&&o()}};t.default=s}),Pd=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"__esModule",{value:!0});var e=[0,16,128,131,135,144,145,151,153],r=(n,s,o)=>{n.log("handlePublish: packet %o",s),o=typeof o<"u"?o:n.noop;let i=s.topic.toString(),a=s.payload,{qos:l}=s,{messageId:c}=s,{options:u}=n;if(n.options.protocolVersion===5){let d;if(s.properties&&(d=s.properties.topicAlias),typeof d<"u")if(i.length===0)if(d>0&&d<=65535){let g=n.topicAliasRecv.getTopicByAlias(d);if(g)i=g,n.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",i,d);else{n.log("handlePublish :: unregistered topic alias. alias: %d",d),n.emit("error",new Error("Received unregistered Topic Alias"));return}}else{n.log("handlePublish :: topic alias out of range. alias: %d",d),n.emit("error",new Error("Received Topic Alias is out of range"));return}else if(n.topicAliasRecv.put(i,d))n.log("handlePublish :: registered topic: %s - alias: %d",i,d);else{n.log("handlePublish :: topic alias out of range. alias: %d",d),n.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(n.log("handlePublish: qos %d",l),l){case 2:{u.customHandleAcks(i,a,s,(d,g)=>{if(typeof d=="number"&&(g=d,d=null),d)return n.emit("error",d);if(e.indexOf(g)===-1)return n.emit("error",new Error("Wrong reason code for pubrec"));g?n._sendPacket({cmd:"pubrec",messageId:c,reasonCode:g},o):n.incomingStore.put(s,()=>{n._sendPacket({cmd:"pubrec",messageId:c},o)})});break}case 1:{u.customHandleAcks(i,a,s,(d,g)=>{if(typeof d=="number"&&(g=d,d=null),d)return n.emit("error",d);if(e.indexOf(g)===-1)return n.emit("error",new Error("Wrong reason code for puback"));g||n.emit("message",i,a,s),n.handleMessage(s,b=>{if(b)return o&&o(b);n._sendPacket({cmd:"puback",messageId:c,reasonCode:g},o)})});break}case 0:n.emit("message",i,a,s),n.handleMessage(s,o);break;default:n.log("handlePublish: unknown QoS. Doing nothing.");break}};t.default=r}),Od=ye((t,e)=>{e.exports={version:"5.10.1"}}),Or=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"__esModule",{value:!0}),t.MQTTJS_VERSION=t.nextTick=t.applyMixin=t.ErrorWithReasonCode=void 0;var e=class sc extends Error{constructor(s,o){super(s),this.code=o,Object.setPrototypeOf(this,sc.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};t.ErrorWithReasonCode=e;function r(n,s,o=!1){var i;let a=[s];for(;;){let l=a[0],c=Object.getPrototypeOf(l);if(c!=null&&c.prototype)a.unshift(c);else break}for(let l of a)for(let c of Object.getOwnPropertyNames(l.prototype))(o||c!=="constructor")&&Object.defineProperty(n.prototype,c,(i=Object.getOwnPropertyDescriptor(l.prototype,c))!==null&&i!==void 0?i:Object.create(null))}t.applyMixin=r,t.nextTick=typeof(je==null?void 0:je.nextTick)=="function"?je.nextTick:n=>{setTimeout(n,0)},t.MQTTJS_VERSION=Od().version}),Gn=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"__esModule",{value:!0}),t.ReasonCodes=void 0;var e=Or();t.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var r=(n,s)=>{let{messageId:o}=s,i=s.cmd,a=null,l=n.outgoing[o]?n.outgoing[o].cb:null,c=null;if(!l){n.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(n.log("_handleAck :: packet type",i),i){case"pubcomp":case"puback":{let u=s.reasonCode;u&&u>0&&u!==16?(c=new e.ErrorWithReasonCode(`Publish error: ${t.ReasonCodes[u]}`,u),n._removeOutgoingAndStoreMessage(o,()=>{l(c,s)})):n._removeOutgoingAndStoreMessage(o,l);break}case"pubrec":{a={cmd:"pubrel",qos:2,messageId:o};let u=s.reasonCode;u&&u>0&&u!==16?(c=new e.ErrorWithReasonCode(`Publish error: ${t.ReasonCodes[u]}`,u),n._removeOutgoingAndStoreMessage(o,()=>{l(c,s)})):n._sendPacket(a);break}case"suback":{delete n.outgoing[o],n.messageIdProvider.deallocate(o);let u=s.granted;for(let d=0;d<u.length;d++){let g=u[d];if(g&128){c=new Error(`Subscribe error: ${t.ReasonCodes[g]}`),c.code=g;let b=n.messageIdToTopic[o];b&&b.forEach(m=>{delete n._resubscribeTopics[m]})}}delete n.messageIdToTopic[o],n._invokeStoreProcessingQueue(),l(c,s);break}case"unsuback":{delete n.outgoing[o],n.messageIdProvider.deallocate(o),n._invokeStoreProcessingQueue(),l(null,s);break}default:n.emit("error",new Error("unrecognized packet type"))}n.disconnecting&&Object.keys(n.outgoing).length===0&&n.emit("outgoingEmpty")};t.default=r}),xd=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"__esModule",{value:!0});var e=Or(),r=Gn(),n=(s,o)=>{let{options:i}=s,a=i.protocolVersion,l=a===5?o.reasonCode:o.returnCode;if(a!==5){let c=new e.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${a}`,l);s.emit("error",c);return}s.handleAuth(o,(c,u)=>{if(c){s.emit("error",c);return}if(l===24)s.reconnecting=!1,s._sendPacket(u);else{let d=new e.ErrorWithReasonCode(`Connection refused: ${r.ReasonCodes[l]}`,l);s.emit("error",d)}})};t.default=n}),Bd=ye(t=>{var b,m,y,w,R,S,E,j,U,T,I,N,W,G,ne,C,V,re,J,be,ae,q,_e,se,Ee,v,Wo,pe,Se,fe,B,ac,K,de,te,Kt,Jt,Ho,fn,dn,$e,qo,Dr,M;ce(),he(),ue(),Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=void 0;var e=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,r=new Set,n=typeof je=="object"&&je?je:{},s=(z,O,L,H)=>{typeof n.emitWarning=="function"?n.emitWarning(z,O,L,H):console.error(`[${L}] ${O}: ${z}`)},o=globalThis.AbortController,i=globalThis.AbortSignal;if(typeof o>"u"){i=class{constructor(){ve(this,"onabort");ve(this,"_onabort",[]);ve(this,"reason");ve(this,"aborted",!1)}addEventListener(L,H){this._onabort.push(H)}},o=class{constructor(){ve(this,"signal",new i);O()}abort(L){var H,le;if(!this.signal.aborted){this.signal.reason=L,this.signal.aborted=!0;for(let f of this.signal._onabort)f(L);(le=(H=this.signal).onabort)==null||le.call(H,L)}}};let z=((b=n.env)==null?void 0:b.LRU_CACHE_IGNORE_AC_WARNING)!=="1",O=()=>{z&&(z=!1,s("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",O))}}var a=z=>!r.has(z),l=z=>z&&z===Math.floor(z)&&z>0&&isFinite(z),c=z=>l(z)?z<=Math.pow(2,8)?Uint8Array:z<=Math.pow(2,16)?Uint16Array:z<=Math.pow(2,32)?Uint32Array:z<=Number.MAX_SAFE_INTEGER?u:null:null,u=class extends Array{constructor(z){super(z),this.fill(0)}},d=(m=class{constructor(O,L){ve(this,"heap");ve(this,"length");if(!P(m,y))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new L(O),this.length=0}static create(O){let L=c(O);if(!L)return[];Ce(m,y,!0);let H=new m(O,L);return Ce(m,y,!1),H}push(O){this.heap[this.length++]=O}pop(){return this.heap[--this.length]}},y=new WeakMap,xe(m,y,!1),m),g=(M=class{constructor(O){xe(this,v);xe(this,w);xe(this,R);xe(this,S);xe(this,E);xe(this,j);ve(this,"ttl");ve(this,"ttlResolution");ve(this,"ttlAutopurge");ve(this,"updateAgeOnGet");ve(this,"updateAgeOnHas");ve(this,"allowStale");ve(this,"noDisposeOnSet");ve(this,"noUpdateTTL");ve(this,"maxEntrySize");ve(this,"sizeCalculation");ve(this,"noDeleteOnFetchRejection");ve(this,"noDeleteOnStaleGet");ve(this,"allowStaleOnFetchAbort");ve(this,"allowStaleOnFetchRejection");ve(this,"ignoreFetchAbort");xe(this,U);xe(this,T);xe(this,I);xe(this,N);xe(this,W);xe(this,G);xe(this,ne);xe(this,C);xe(this,V);xe(this,re);xe(this,J);xe(this,be);xe(this,ae);xe(this,q);xe(this,_e);xe(this,se);xe(this,Ee);xe(this,pe,()=>{});xe(this,Se,()=>{});xe(this,fe,()=>{});xe(this,B,()=>!1);xe(this,K,O=>{});xe(this,de,(O,L,H)=>{});xe(this,te,(O,L,H,le)=>{if(H||le)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});let{max:L=0,ttl:H,ttlResolution:le=1,ttlAutopurge:f,updateAgeOnGet:h,updateAgeOnHas:p,allowStale:_,dispose:k,disposeAfter:$,noDisposeOnSet:ee,noUpdateTTL:Te,maxSize:Be=0,maxEntrySize:Ne=0,sizeCalculation:Ie,fetchMethod:Oe,noDeleteOnFetchRejection:ke,noDeleteOnStaleGet:Fe,allowStaleOnFetchRejection:Ze,allowStaleOnFetchAbort:Je,ignoreFetchAbort:rt}=O;if(L!==0&&!l(L))throw new TypeError("max option must be a nonnegative integer");let lt=L?c(L):Array;if(!lt)throw new Error("invalid max value: "+L);if(Ce(this,w,L),Ce(this,R,Be),this.maxEntrySize=Ne||P(this,R),this.sizeCalculation=Ie,this.sizeCalculation){if(!P(this,R)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(Oe!==void 0&&typeof Oe!="function")throw new TypeError("fetchMethod must be a function if specified");if(Ce(this,j,Oe),Ce(this,se,!!Oe),Ce(this,I,new Map),Ce(this,N,new Array(L).fill(void 0)),Ce(this,W,new Array(L).fill(void 0)),Ce(this,G,new lt(L)),Ce(this,ne,new lt(L)),Ce(this,C,0),Ce(this,V,0),Ce(this,re,d.create(L)),Ce(this,U,0),Ce(this,T,0),typeof k=="function"&&Ce(this,S,k),typeof $=="function"?(Ce(this,E,$),Ce(this,J,[])):(Ce(this,E,void 0),Ce(this,J,void 0)),Ce(this,_e,!!P(this,S)),Ce(this,Ee,!!P(this,E)),this.noDisposeOnSet=!!ee,this.noUpdateTTL=!!Te,this.noDeleteOnFetchRejection=!!ke,this.allowStaleOnFetchRejection=!!Ze,this.allowStaleOnFetchAbort=!!Je,this.ignoreFetchAbort=!!rt,this.maxEntrySize!==0){if(P(this,R)!==0&&!l(P(this,R)))throw new TypeError("maxSize must be a positive integer if specified");if(!l(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");Ae(this,v,ac).call(this)}if(this.allowStale=!!_,this.noDeleteOnStaleGet=!!Fe,this.updateAgeOnGet=!!h,this.updateAgeOnHas=!!p,this.ttlResolution=l(le)||le===0?le:1,this.ttlAutopurge=!!f,this.ttl=H||0,this.ttl){if(!l(this.ttl))throw new TypeError("ttl must be a positive integer if specified");Ae(this,v,Wo).call(this)}if(P(this,w)===0&&this.ttl===0&&P(this,R)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!P(this,w)&&!P(this,R)){let et="LRU_CACHE_UNBOUNDED";a(et)&&(r.add(et),s("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",et,M))}}static unsafeExposeInternals(O){return{starts:P(O,ae),ttls:P(O,q),sizes:P(O,be),keyMap:P(O,I),keyList:P(O,N),valList:P(O,W),next:P(O,G),prev:P(O,ne),get head(){return P(O,C)},get tail(){return P(O,V)},free:P(O,re),isBackgroundFetch:L=>{var H;return Ae(H=O,v,$e).call(H,L)},backgroundFetch:(L,H,le,f)=>{var h;return Ae(h=O,v,dn).call(h,L,H,le,f)},moveToTail:L=>{var H;return Ae(H=O,v,Dr).call(H,L)},indexes:L=>{var H;return Ae(H=O,v,Kt).call(H,L)},rindexes:L=>{var H;return Ae(H=O,v,Jt).call(H,L)},isStale:L=>{var H;return P(H=O,B).call(H,L)}}}get max(){return P(this,w)}get maxSize(){return P(this,R)}get calculatedSize(){return P(this,T)}get size(){return P(this,U)}get fetchMethod(){return P(this,j)}get dispose(){return P(this,S)}get disposeAfter(){return P(this,E)}getRemainingTTL(O){return P(this,I).has(O)?1/0:0}*entries(){for(let O of Ae(this,v,Kt).call(this))P(this,W)[O]!==void 0&&P(this,N)[O]!==void 0&&!Ae(this,v,$e).call(this,P(this,W)[O])&&(yield[P(this,N)[O],P(this,W)[O]])}*rentries(){for(let O of Ae(this,v,Jt).call(this))P(this,W)[O]!==void 0&&P(this,N)[O]!==void 0&&!Ae(this,v,$e).call(this,P(this,W)[O])&&(yield[P(this,N)[O],P(this,W)[O]])}*keys(){for(let O of Ae(this,v,Kt).call(this)){let L=P(this,N)[O];L!==void 0&&!Ae(this,v,$e).call(this,P(this,W)[O])&&(yield L)}}*rkeys(){for(let O of Ae(this,v,Jt).call(this)){let L=P(this,N)[O];L!==void 0&&!Ae(this,v,$e).call(this,P(this,W)[O])&&(yield L)}}*values(){for(let O of Ae(this,v,Kt).call(this))P(this,W)[O]!==void 0&&!Ae(this,v,$e).call(this,P(this,W)[O])&&(yield P(this,W)[O])}*rvalues(){for(let O of Ae(this,v,Jt).call(this))P(this,W)[O]!==void 0&&!Ae(this,v,$e).call(this,P(this,W)[O])&&(yield P(this,W)[O])}[Symbol.iterator](){return this.entries()}find(O,L={}){for(let H of Ae(this,v,Kt).call(this)){let le=P(this,W)[H],f=Ae(this,v,$e).call(this,le)?le.__staleWhileFetching:le;if(f!==void 0&&O(f,P(this,N)[H],this))return this.get(P(this,N)[H],L)}}forEach(O,L=this){for(let H of Ae(this,v,Kt).call(this)){let le=P(this,W)[H],f=Ae(this,v,$e).call(this,le)?le.__staleWhileFetching:le;f!==void 0&&O.call(L,f,P(this,N)[H],this)}}rforEach(O,L=this){for(let H of Ae(this,v,Jt).call(this)){let le=P(this,W)[H],f=Ae(this,v,$e).call(this,le)?le.__staleWhileFetching:le;f!==void 0&&O.call(L,f,P(this,N)[H],this)}}purgeStale(){let O=!1;for(let L of Ae(this,v,Jt).call(this,{allowStale:!0}))P(this,B).call(this,L)&&(this.delete(P(this,N)[L]),O=!0);return O}dump(){let O=[];for(let L of Ae(this,v,Kt).call(this,{allowStale:!0})){let H=P(this,N)[L],le=P(this,W)[L],f=Ae(this,v,$e).call(this,le)?le.__staleWhileFetching:le;if(f===void 0||H===void 0)continue;let h={value:f};if(P(this,q)&&P(this,ae)){h.ttl=P(this,q)[L];let p=e.now()-P(this,ae)[L];h.start=Math.floor(Date.now()-p)}P(this,be)&&(h.size=P(this,be)[L]),O.unshift([H,h])}return O}load(O){this.clear();for(let[L,H]of O){if(H.start){let le=Date.now()-H.start;H.start=e.now()-le}this.set(L,H.value,H)}}set(O,L,H={}){var Te,Be,Ne,Ie,Oe;if(L===void 0)return this.delete(O),this;let{ttl:le=this.ttl,start:f,noDisposeOnSet:h=this.noDisposeOnSet,sizeCalculation:p=this.sizeCalculation,status:_}=H,{noUpdateTTL:k=this.noUpdateTTL}=H,$=P(this,te).call(this,O,L,H.size||0,p);if(this.maxEntrySize&&$>this.maxEntrySize)return _&&(_.set="miss",_.maxEntrySizeExceeded=!0),this.delete(O),this;let ee=P(this,U)===0?void 0:P(this,I).get(O);if(ee===void 0)ee=P(this,U)===0?P(this,V):P(this,re).length!==0?P(this,re).pop():P(this,U)===P(this,w)?Ae(this,v,fn).call(this,!1):P(this,U),P(this,N)[ee]=O,P(this,W)[ee]=L,P(this,I).set(O,ee),P(this,G)[P(this,V)]=ee,P(this,ne)[ee]=P(this,V),Ce(this,V,ee),Gr(this,U)._++,P(this,de).call(this,ee,$,_),_&&(_.set="add"),k=!1;else{Ae(this,v,Dr).call(this,ee);let ke=P(this,W)[ee];if(L!==ke){if(P(this,se)&&Ae(this,v,$e).call(this,ke)){ke.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:Fe}=ke;Fe!==void 0&&!h&&(P(this,_e)&&((Te=P(this,S))==null||Te.call(this,Fe,O,"set")),P(this,Ee)&&((Be=P(this,J))==null||Be.push([Fe,O,"set"])))}else h||(P(this,_e)&&((Ne=P(this,S))==null||Ne.call(this,ke,O,"set")),P(this,Ee)&&((Ie=P(this,J))==null||Ie.push([ke,O,"set"])));if(P(this,K).call(this,ee),P(this,de).call(this,ee,$,_),P(this,W)[ee]=L,_){_.set="replace";let Fe=ke&&Ae(this,v,$e).call(this,ke)?ke.__staleWhileFetching:ke;Fe!==void 0&&(_.oldValue=Fe)}}else _&&(_.set="update")}if(le!==0&&!P(this,q)&&Ae(this,v,Wo).call(this),P(this,q)&&(k||P(this,fe).call(this,ee,le,f),_&&P(this,Se).call(this,_,ee)),!h&&P(this,Ee)&&P(this,J)){let ke=P(this,J),Fe;for(;Fe=ke==null?void 0:ke.shift();)(Oe=P(this,E))==null||Oe.call(this,...Fe)}return this}pop(){var O;try{for(;P(this,U);){let L=P(this,W)[P(this,C)];if(Ae(this,v,fn).call(this,!0),Ae(this,v,$e).call(this,L)){if(L.__staleWhileFetching)return L.__staleWhileFetching}else if(L!==void 0)return L}}finally{if(P(this,Ee)&&P(this,J)){let L=P(this,J),H;for(;H=L==null?void 0:L.shift();)(O=P(this,E))==null||O.call(this,...H)}}}has(O,L={}){let{updateAgeOnHas:H=this.updateAgeOnHas,status:le}=L,f=P(this,I).get(O);if(f!==void 0){let h=P(this,W)[f];if(Ae(this,v,$e).call(this,h)&&h.__staleWhileFetching===void 0)return!1;if(P(this,B).call(this,f))le&&(le.has="stale",P(this,Se).call(this,le,f));else return H&&P(this,pe).call(this,f),le&&(le.has="hit",P(this,Se).call(this,le,f)),!0}else le&&(le.has="miss");return!1}peek(O,L={}){let{allowStale:H=this.allowStale}=L,le=P(this,I).get(O);if(le!==void 0&&(H||!P(this,B).call(this,le))){let f=P(this,W)[le];return Ae(this,v,$e).call(this,f)?f.__staleWhileFetching:f}}async fetch(O,L={}){let{allowStale:H=this.allowStale,updateAgeOnGet:le=this.updateAgeOnGet,noDeleteOnStaleGet:f=this.noDeleteOnStaleGet,ttl:h=this.ttl,noDisposeOnSet:p=this.noDisposeOnSet,size:_=0,sizeCalculation:k=this.sizeCalculation,noUpdateTTL:$=this.noUpdateTTL,noDeleteOnFetchRejection:ee=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:Te=this.allowStaleOnFetchRejection,ignoreFetchAbort:Be=this.ignoreFetchAbort,allowStaleOnFetchAbort:Ne=this.allowStaleOnFetchAbort,context:Ie,forceRefresh:Oe=!1,status:ke,signal:Fe}=L;if(!P(this,se))return ke&&(ke.fetch="get"),this.get(O,{allowStale:H,updateAgeOnGet:le,noDeleteOnStaleGet:f,status:ke});let Ze={allowStale:H,updateAgeOnGet:le,noDeleteOnStaleGet:f,ttl:h,noDisposeOnSet:p,size:_,sizeCalculation:k,noUpdateTTL:$,noDeleteOnFetchRejection:ee,allowStaleOnFetchRejection:Te,allowStaleOnFetchAbort:Ne,ignoreFetchAbort:Be,status:ke,signal:Fe},Je=P(this,I).get(O);if(Je===void 0){ke&&(ke.fetch="miss");let rt=Ae(this,v,dn).call(this,O,Je,Ze,Ie);return rt.__returned=rt}else{let rt=P(this,W)[Je];if(Ae(this,v,$e).call(this,rt)){let Ts=H&&rt.__staleWhileFetching!==void 0;return ke&&(ke.fetch="inflight",Ts&&(ke.returnedStale=!0)),Ts?rt.__staleWhileFetching:rt.__returned=rt}let lt=P(this,B).call(this,Je);if(!Oe&&!lt)return ke&&(ke.fetch="hit"),Ae(this,v,Dr).call(this,Je),le&&P(this,pe).call(this,Je),ke&&P(this,Se).call(this,ke,Je),rt;let et=Ae(this,v,dn).call(this,O,Je,Ze,Ie),Is=et.__staleWhileFetching!==void 0&&H;return ke&&(ke.fetch=lt?"stale":"refresh",Is&&lt&&(ke.returnedStale=!0)),Is?et.__staleWhileFetching:et.__returned=et}}get(O,L={}){let{allowStale:H=this.allowStale,updateAgeOnGet:le=this.updateAgeOnGet,noDeleteOnStaleGet:f=this.noDeleteOnStaleGet,status:h}=L,p=P(this,I).get(O);if(p!==void 0){let _=P(this,W)[p],k=Ae(this,v,$e).call(this,_);return h&&P(this,Se).call(this,h,p),P(this,B).call(this,p)?(h&&(h.get="stale"),k?(h&&H&&_.__staleWhileFetching!==void 0&&(h.returnedStale=!0),H?_.__staleWhileFetching:void 0):(f||this.delete(O),h&&H&&(h.returnedStale=!0),H?_:void 0)):(h&&(h.get="hit"),k?_.__staleWhileFetching:(Ae(this,v,Dr).call(this,p),le&&P(this,pe).call(this,p),_))}else h&&(h.get="miss")}delete(O){var H,le,f,h;let L=!1;if(P(this,U)!==0){let p=P(this,I).get(O);if(p!==void 0)if(L=!0,P(this,U)===1)this.clear();else{P(this,K).call(this,p);let _=P(this,W)[p];Ae(this,v,$e).call(this,_)?_.__abortController.abort(new Error("deleted")):(P(this,_e)||P(this,Ee))&&(P(this,_e)&&((H=P(this,S))==null||H.call(this,_,O,"delete")),P(this,Ee)&&((le=P(this,J))==null||le.push([_,O,"delete"]))),P(this,I).delete(O),P(this,N)[p]=void 0,P(this,W)[p]=void 0,p===P(this,V)?Ce(this,V,P(this,ne)[p]):p===P(this,C)?Ce(this,C,P(this,G)[p]):(P(this,G)[P(this,ne)[p]]=P(this,G)[p],P(this,ne)[P(this,G)[p]]=P(this,ne)[p]),Gr(this,U)._--,P(this,re).push(p)}}if(P(this,Ee)&&((f=P(this,J))!=null&&f.length)){let p=P(this,J),_;for(;_=p==null?void 0:p.shift();)(h=P(this,E))==null||h.call(this,..._)}return L}clear(){var O,L,H;for(let le of Ae(this,v,Jt).call(this,{allowStale:!0})){let f=P(this,W)[le];if(Ae(this,v,$e).call(this,f))f.__abortController.abort(new Error("deleted"));else{let h=P(this,N)[le];P(this,_e)&&((O=P(this,S))==null||O.call(this,f,h,"delete")),P(this,Ee)&&((L=P(this,J))==null||L.push([f,h,"delete"]))}}if(P(this,I).clear(),P(this,W).fill(void 0),P(this,N).fill(void 0),P(this,q)&&P(this,ae)&&(P(this,q).fill(0),P(this,ae).fill(0)),P(this,be)&&P(this,be).fill(0),Ce(this,C,0),Ce(this,V,0),P(this,re).length=0,Ce(this,T,0),Ce(this,U,0),P(this,Ee)&&P(this,J)){let le=P(this,J),f;for(;f=le==null?void 0:le.shift();)(H=P(this,E))==null||H.call(this,...f)}}},w=new WeakMap,R=new WeakMap,S=new WeakMap,E=new WeakMap,j=new WeakMap,U=new WeakMap,T=new WeakMap,I=new WeakMap,N=new WeakMap,W=new WeakMap,G=new WeakMap,ne=new WeakMap,C=new WeakMap,V=new WeakMap,re=new WeakMap,J=new WeakMap,be=new WeakMap,ae=new WeakMap,q=new WeakMap,_e=new WeakMap,se=new WeakMap,Ee=new WeakMap,v=new WeakSet,Wo=function(){let O=new u(P(this,w)),L=new u(P(this,w));Ce(this,q,O),Ce(this,ae,L),Ce(this,fe,(f,h,p=e.now())=>{if(L[f]=h!==0?p:0,O[f]=h,h!==0&&this.ttlAutopurge){let _=setTimeout(()=>{P(this,B).call(this,f)&&this.delete(P(this,N)[f])},h+1);_.unref&&_.unref()}}),Ce(this,pe,f=>{L[f]=O[f]!==0?e.now():0}),Ce(this,Se,(f,h)=>{if(O[h]){let p=O[h],_=L[h];f.ttl=p,f.start=_,f.now=H||le();let k=f.now-_;f.remainingTTL=p-k}});let H=0,le=()=>{let f=e.now();if(this.ttlResolution>0){H=f;let h=setTimeout(()=>H=0,this.ttlResolution);h.unref&&h.unref()}return f};this.getRemainingTTL=f=>{let h=P(this,I).get(f);if(h===void 0)return 0;let p=O[h],_=L[h];if(p===0||_===0)return 1/0;let k=(H||le())-_;return p-k},Ce(this,B,f=>O[f]!==0&&L[f]!==0&&(H||le())-L[f]>O[f])},pe=new WeakMap,Se=new WeakMap,fe=new WeakMap,B=new WeakMap,ac=function(){let O=new u(P(this,w));Ce(this,T,0),Ce(this,be,O),Ce(this,K,L=>{Ce(this,T,P(this,T)-O[L]),O[L]=0}),Ce(this,te,(L,H,le,f)=>{if(Ae(this,v,$e).call(this,H))return 0;if(!l(le))if(f){if(typeof f!="function")throw new TypeError("sizeCalculation must be a function");if(le=f(H,L),!l(le))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return le}),Ce(this,de,(L,H,le)=>{if(O[L]=H,P(this,R)){let f=P(this,R)-O[L];for(;P(this,T)>f;)Ae(this,v,fn).call(this,!0)}Ce(this,T,P(this,T)+O[L]),le&&(le.entrySize=H,le.totalCalculatedSize=P(this,T))})},K=new WeakMap,de=new WeakMap,te=new WeakMap,Kt=function*({allowStale:O=this.allowStale}={}){if(P(this,U))for(let L=P(this,V);!(!Ae(this,v,Ho).call(this,L)||((O||!P(this,B).call(this,L))&&(yield L),L===P(this,C)));)L=P(this,ne)[L]},Jt=function*({allowStale:O=this.allowStale}={}){if(P(this,U))for(let L=P(this,C);!(!Ae(this,v,Ho).call(this,L)||((O||!P(this,B).call(this,L))&&(yield L),L===P(this,V)));)L=P(this,G)[L]},Ho=function(O){return O!==void 0&&P(this,I).get(P(this,N)[O])===O},fn=function(O){var f,h;let L=P(this,C),H=P(this,N)[L],le=P(this,W)[L];return P(this,se)&&Ae(this,v,$e).call(this,le)?le.__abortController.abort(new Error("evicted")):(P(this,_e)||P(this,Ee))&&(P(this,_e)&&((f=P(this,S))==null||f.call(this,le,H,"evict")),P(this,Ee)&&((h=P(this,J))==null||h.push([le,H,"evict"]))),P(this,K).call(this,L),O&&(P(this,N)[L]=void 0,P(this,W)[L]=void 0,P(this,re).push(L)),P(this,U)===1?(Ce(this,C,Ce(this,V,0)),P(this,re).length=0):Ce(this,C,P(this,G)[L]),P(this,I).delete(H),Gr(this,U)._--,L},dn=function(O,L,H,le){let f=L===void 0?void 0:P(this,W)[L];if(Ae(this,v,$e).call(this,f))return f;let h=new o,{signal:p}=H;p==null||p.addEventListener("abort",()=>h.abort(p.reason),{signal:h.signal});let _={signal:h.signal,options:H,context:le},k=(Ie,Oe=!1)=>{let{aborted:ke}=h.signal,Fe=H.ignoreFetchAbort&&Ie!==void 0;if(H.status&&(ke&&!Oe?(H.status.fetchAborted=!0,H.status.fetchError=h.signal.reason,Fe&&(H.status.fetchAbortIgnored=!0)):H.status.fetchResolved=!0),ke&&!Fe&&!Oe)return ee(h.signal.reason);let Ze=Be;return P(this,W)[L]===Be&&(Ie===void 0?Ze.__staleWhileFetching?P(this,W)[L]=Ze.__staleWhileFetching:this.delete(O):(H.status&&(H.status.fetchUpdated=!0),this.set(O,Ie,_.options))),Ie},$=Ie=>(H.status&&(H.status.fetchRejected=!0,H.status.fetchError=Ie),ee(Ie)),ee=Ie=>{let{aborted:Oe}=h.signal,ke=Oe&&H.allowStaleOnFetchAbort,Fe=ke||H.allowStaleOnFetchRejection,Ze=Fe||H.noDeleteOnFetchRejection,Je=Be;if(P(this,W)[L]===Be&&(!Ze||Je.__staleWhileFetching===void 0?this.delete(O):ke||(P(this,W)[L]=Je.__staleWhileFetching)),Fe)return H.status&&Je.__staleWhileFetching!==void 0&&(H.status.returnedStale=!0),Je.__staleWhileFetching;if(Je.__returned===Je)throw Ie},Te=(Ie,Oe)=>{var Fe;let ke=(Fe=P(this,j))==null?void 0:Fe.call(this,O,f,_);ke&&ke instanceof Promise&&ke.then(Ze=>Ie(Ze===void 0?void 0:Ze),Oe),h.signal.addEventListener("abort",()=>{(!H.ignoreFetchAbort||H.allowStaleOnFetchAbort)&&(Ie(void 0),H.allowStaleOnFetchAbort&&(Ie=Ze=>k(Ze,!0)))})};H.status&&(H.status.fetchDispatched=!0);let Be=new Promise(Te).then(k,$),Ne=Object.assign(Be,{__abortController:h,__staleWhileFetching:f,__returned:void 0});return L===void 0?(this.set(O,Ne,{..._.options,status:void 0}),L=P(this,I).get(O)):P(this,W)[L]=Ne,Ne},$e=function(O){if(!P(this,se))return!1;let L=O;return!!L&&L instanceof Promise&&L.hasOwnProperty("__staleWhileFetching")&&L.__abortController instanceof o},qo=function(O,L){P(this,ne)[L]=O,P(this,G)[O]=L},Dr=function(O){O!==P(this,V)&&(O===P(this,C)?Ce(this,C,P(this,G)[O]):Ae(this,v,qo).call(this,P(this,ne)[O],P(this,G)[O]),Ae(this,v,qo).call(this,P(this,V),O),Ce(this,V,O))},M);t.LRUCache=g}),Ht=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"t",{value:!0}),t.ContainerIterator=t.Container=t.Base=void 0;var e=class{constructor(s=0){this.iteratorType=s}equals(s){return this.o===s.o}};t.ContainerIterator=e;var r=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};t.Base=r;var n=class extends r{};t.Container=n}),Nd=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var e=Ht(),r=class extends e.Base{constructor(s=[]){super(),this.S=[];let o=this;s.forEach(function(i){o.push(i)})}clear(){this.i=0,this.S=[]}push(s){return this.S.push(s),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},n=r;t.default=n}),Md=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var e=Ht(),r=class extends e.Base{constructor(s=[]){super(),this.j=0,this.q=[];let o=this;s.forEach(function(i){o.push(i)})}clear(){this.q=[],this.i=this.j=0}push(s){let o=this.q.length;if(this.j/o>.5&&this.j+this.i>=o&&o>4096){let i=this.i;for(let a=0;a<i;++a)this.q[a]=this.q[this.j+a];this.j=0,this.q[this.i]=s}else this.q[this.j+this.i]=s;return++this.i}pop(){if(this.i===0)return;let s=this.q[this.j++];return this.i-=1,s}front(){if(this.i!==0)return this.q[this.j]}},n=r;t.default=n}),jd=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var e=Ht(),r=class extends e.Base{constructor(s=[],o=function(a,l){return a>l?-1:a<l?1:0},i=!0){if(super(),this.v=o,Array.isArray(s))this.C=i?[...s]:s;else{this.C=[];let l=this;s.forEach(function(c){l.C.push(c)})}this.i=this.C.length;let a=this.i>>1;for(let l=this.i-1>>1;l>=0;--l)this.k(l,a)}m(s){let o=this.C[s];for(;s>0;){let i=s-1>>1,a=this.C[i];if(this.v(a,o)<=0)break;this.C[s]=a,s=i}this.C[s]=o}k(s,o){let i=this.C[s];for(;s<o;){let a=s<<1|1,l=a+1,c=this.C[a];if(l<this.i&&this.v(c,this.C[l])>0&&(a=l,c=this.C[l]),this.v(c,i)>=0)break;this.C[s]=c,s=a}this.C[s]=i}clear(){this.i=0,this.C.length=0}push(s){this.C.push(s),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let s=this.C[0],o=this.C.pop();return this.i-=1,this.i&&(this.C[0]=o,this.k(0,this.i>>1)),s}top(){return this.C[0]}find(s){return this.C.indexOf(s)>=0}remove(s){let o=this.C.indexOf(s);return o<0?!1:(o===0?this.pop():o===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(o,1,this.C.pop()),this.i-=1,this.m(o),this.k(o,this.i>>1)),!0)}updateItem(s){let o=this.C.indexOf(s);return o<0?!1:(this.m(o),this.k(o,this.i>>1),!0)}toArray(){return[...this.C]}},n=r;t.default=n}),Ss=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var e=Ht(),r=class extends e.Container{},n=r;t.default=n}),qt=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"t",{value:!0}),t.throwIteratorAccessError=e;function e(){throw new RangeError("Iterator access denied!")}}),lc=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"t",{value:!0}),t.RandomIterator=void 0;var e=Ht(),r=qt(),n=class extends e.ContainerIterator{constructor(s,o){super(o),this.o=s,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,r.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,r.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,r.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,r.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(s){this.container.setElementByPos(this.o,s)}};t.RandomIterator=n}),Ud=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var e=n(Ss()),r=lc();function n(a){return a&&a.t?a:{default:a}}var s=class cc extends r.RandomIterator{constructor(l,c,u){super(l,u),this.container=c}copy(){return new cc(this.o,this.container,this.iteratorType)}},o=class extends e.default{constructor(a=[],l=!0){if(super(),Array.isArray(a))this.J=l?[...a]:a,this.i=a.length;else{this.J=[];let c=this;a.forEach(function(u){c.pushBack(u)})}}clear(){this.i=0,this.J.length=0}begin(){return new s(0,this)}end(){return new s(this.i,this)}rBegin(){return new s(this.i-1,this,1)}rEnd(){return new s(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;return this.J[a]}eraseElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;return this.J.splice(a,1),this.i-=1,this.i}eraseElementByValue(a){let l=0;for(let c=0;c<this.i;++c)this.J[c]!==a&&(this.J[l++]=this.J[c]);return this.i=this.J.length=l,this.i}eraseElementByIterator(a){let l=a.o;return a=a.next(),this.eraseElementByPos(l),a}pushBack(a){return this.J.push(a),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(a,l){if(a<0||a>this.i-1)throw new RangeError;this.J[a]=l}insert(a,l,c=1){if(a<0||a>this.i)throw new RangeError;return this.J.splice(a,0,...new Array(c).fill(l)),this.i+=c,this.i}find(a){for(let l=0;l<this.i;++l)if(this.J[l]===a)return new s(l,this);return this.end()}reverse(){this.J.reverse()}unique(){let a=1;for(let l=1;l<this.i;++l)this.J[l]!==this.J[l-1]&&(this.J[a++]=this.J[l]);return this.i=this.J.length=a,this.i}sort(a){this.J.sort(a)}forEach(a){for(let l=0;l<this.i;++l)a(this.J[l],l,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}},i=o;t.default=i}),Ld=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var e=s(Ss()),r=Ht(),n=qt();function s(l){return l&&l.t?l:{default:l}}var o=class uc extends r.ContainerIterator{constructor(c,u,d,g){super(g),this.o=c,this.h=u,this.container=d,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.l}set pointer(c){this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.l=c}copy(){return new uc(this.o,this.h,this.container,this.iteratorType)}},i=class extends e.default{constructor(l=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let c=this;l.forEach(function(u){c.pushBack(u)})}V(l){let{L:c,B:u}=l;c.B=u,u.L=c,l===this.p&&(this.p=u),l===this._&&(this._=c),this.i-=1}G(l,c){let u=c.B,d={l,L:c,B:u};c.B=d,u.L=d,c===this.h&&(this.p=d),u===this.h&&(this._=d),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new o(this.p,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this._,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;let c=this.p;for(;l--;)c=c.B;return c.l}eraseElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;let c=this.p;for(;l--;)c=c.B;return this.V(c),this.i}eraseElementByValue(l){let c=this.p;for(;c!==this.h;)c.l===l&&this.V(c),c=c.B;return this.i}eraseElementByIterator(l){let c=l.o;return c===this.h&&(0,n.throwIteratorAccessError)(),l=l.next(),this.V(c),l}pushBack(l){return this.G(l,this._),this.i}popBack(){if(this.i===0)return;let l=this._.l;return this.V(this._),l}pushFront(l){return this.G(l,this.h),this.i}popFront(){if(this.i===0)return;let l=this.p.l;return this.V(this.p),l}setElementByPos(l,c){if(l<0||l>this.i-1)throw new RangeError;let u=this.p;for(;l--;)u=u.B;u.l=c}insert(l,c,u=1){if(l<0||l>this.i)throw new RangeError;if(u<=0)return this.i;if(l===0)for(;u--;)this.pushFront(c);else if(l===this.i)for(;u--;)this.pushBack(c);else{let d=this.p;for(let b=1;b<l;++b)d=d.B;let g=d.B;for(this.i+=u;u--;)d.B={l:c,L:d},d.B.L=d,d=d.B;d.B=g,g.L=d}return this.i}find(l){let c=this.p;for(;c!==this.h;){if(c.l===l)return new o(c,this.h,this);c=c.B}return this.end()}reverse(){if(this.i<=1)return;let l=this.p,c=this._,u=0;for(;u<<1<this.i;){let d=l.l;l.l=c.l,c.l=d,l=l.B,c=c.L,u+=1}}unique(){if(this.i<=1)return this.i;let l=this.p;for(;l!==this.h;){let c=l;for(;c.B!==this.h&&c.l===c.B.l;)c=c.B,this.i-=1;l.B=c.B,l.B.L=l,l=l.B}return this.i}sort(l){if(this.i<=1)return;let c=[];this.forEach(function(d){c.push(d)}),c.sort(l);let u=this.p;c.forEach(function(d){u.l=d,u=u.B})}merge(l){let c=this;if(this.i===0)l.forEach(function(u){c.pushBack(u)});else{let u=this.p;l.forEach(function(d){for(;u!==c.h&&u.l<=d;)u=u.B;c.G(d,u.L)})}return this.i}forEach(l){let c=this.p,u=0;for(;c!==this.h;)l(c.l,u++,this),c=c.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let l=this.p;for(;l!==this.h;)yield l.l,l=l.B}).bind(this)()}},a=i;t.default=a}),Dd=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var e=n(Ss()),r=lc();function n(a){return a&&a.t?a:{default:a}}var s=class hc extends r.RandomIterator{constructor(l,c,u){super(l,u),this.container=c}copy(){return new hc(this.o,this.container,this.iteratorType)}},o=class extends e.default{constructor(a=[],l=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let c=(()=>{if(typeof a.length=="number")return a.length;if(typeof a.size=="number")return a.size;if(typeof a.size=="function")return a.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=l,this.P=Math.max(Math.ceil(c/this.F),1);for(let g=0;g<this.P;++g)this.A.push(new Array(this.F));let u=Math.ceil(c/this.F);this.j=this.R=(this.P>>1)-(u>>1),this.D=this.N=this.F-c%this.F>>1;let d=this;a.forEach(function(g){d.pushBack(g)})}T(){let a=[],l=Math.max(this.P>>1,1);for(let c=0;c<l;++c)a[c]=new Array(this.F);for(let c=this.j;c<this.P;++c)a[a.length]=this.A[c];for(let c=0;c<this.R;++c)a[a.length]=this.A[c];a[a.length]=[...this.A[this.R]],this.j=l,this.R=a.length-1;for(let c=0;c<l;++c)a[a.length]=new Array(this.F);this.A=a,this.P=a.length}O(a){let l=this.D+a+1,c=l%this.F,u=c-1,d=this.j+(l-c)/this.F;return c===0&&(d-=1),d%=this.P,u<0&&(u+=this.F),{curNodeBucketIndex:d,curNodePointerIndex:u}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new s(0,this)}end(){return new s(this.i,this)}rBegin(){return new s(this.i-1,this,1)}rEnd(){return new s(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(a){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=a,this.i}popBack(){if(this.i===0)return;let a=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,a}pushFront(a){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=a,this.i}popFront(){if(this.i===0)return;let a=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,a}getElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;let{curNodeBucketIndex:l,curNodePointerIndex:c}=this.O(a);return this.A[l][c]}setElementByPos(a,l){if(a<0||a>this.i-1)throw new RangeError;let{curNodeBucketIndex:c,curNodePointerIndex:u}=this.O(a);this.A[c][u]=l}insert(a,l,c=1){if(a<0||a>this.i)throw new RangeError;if(a===0)for(;c--;)this.pushFront(l);else if(a===this.i)for(;c--;)this.pushBack(l);else{let u=[];for(let d=a;d<this.i;++d)u.push(this.getElementByPos(d));this.cut(a-1);for(let d=0;d<c;++d)this.pushBack(l);for(let d=0;d<u.length;++d)this.pushBack(u[d])}return this.i}cut(a){if(a<0)return this.clear(),0;let{curNodeBucketIndex:l,curNodePointerIndex:c}=this.O(a);return this.R=l,this.N=c,this.i=a+1,this.i}eraseElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;if(a===0)this.popFront();else if(a===this.i-1)this.popBack();else{let l=[];for(let u=a+1;u<this.i;++u)l.push(this.getElementByPos(u));this.cut(a),this.popBack();let c=this;l.forEach(function(u){c.pushBack(u)})}return this.i}eraseElementByValue(a){if(this.i===0)return 0;let l=[];for(let u=0;u<this.i;++u){let d=this.getElementByPos(u);d!==a&&l.push(d)}let c=l.length;for(let u=0;u<c;++u)this.setElementByPos(u,l[u]);return this.cut(c-1)}eraseElementByIterator(a){let l=a.o;return this.eraseElementByPos(l),a=a.next(),a}find(a){for(let l=0;l<this.i;++l)if(this.getElementByPos(l)===a)return new s(l,this);return this.end()}reverse(){let a=0,l=this.i-1;for(;a<l;){let c=this.getElementByPos(a);this.setElementByPos(a,this.getElementByPos(l)),this.setElementByPos(l,c),a+=1,l-=1}}unique(){if(this.i<=1)return this.i;let a=1,l=this.getElementByPos(0);for(let c=1;c<this.i;++c){let u=this.getElementByPos(c);u!==l&&(l=u,this.setElementByPos(a++,u))}for(;this.i>a;)this.popBack();return this.i}sort(a){let l=[];for(let c=0;c<this.i;++c)l.push(this.getElementByPos(c));l.sort(a);for(let c=0;c<this.i;++c)this.setElementByPos(c,l[c])}shrinkToFit(){if(this.i===0)return;let a=[];this.forEach(function(l){a.push(l)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let l=0;l<this.P;++l)this.A.push(new Array(this.F));for(let l=0;l<a.length;++l)this.pushBack(a[l])}forEach(a){for(let l=0;l<this.i;++l)a(this.getElementByPos(l),l,this)}[Symbol.iterator](){return(function*(){for(let a=0;a<this.i;++a)yield this.getElementByPos(a)}).bind(this)()}},i=o;t.default=i}),Fd=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"t",{value:!0}),t.TreeNodeEnableIndex=t.TreeNode=void 0;var e=class{constructor(n,s){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=n,this.l=s}L(){let n=this;if(n.ee===1&&n.tt.tt===n)n=n.W;else if(n.U)for(n=n.U;n.W;)n=n.W;else{let s=n.tt;for(;s.U===n;)n=s,s=n.tt;n=s}return n}B(){let n=this;if(n.W){for(n=n.W;n.U;)n=n.U;return n}else{let s=n.tt;for(;s.W===n;)n=s,s=n.tt;return n.W!==s?s:n}}te(){let n=this.tt,s=this.W,o=s.U;return n.tt===this?n.tt=s:n.U===this?n.U=s:n.W=s,s.tt=n,s.U=this,this.tt=s,this.W=o,o&&(o.tt=this),s}se(){let n=this.tt,s=this.U,o=s.W;return n.tt===this?n.tt=s:n.U===this?n.U=s:n.W=s,s.tt=n,s.W=this,this.tt=s,this.U=o,o&&(o.tt=this),s}};t.TreeNode=e;var r=class extends e{constructor(){super(...arguments),this.rt=1}te(){let n=super.te();return this.ie(),n.ie(),n}se(){let n=super.se();return this.ie(),n.ie(),n}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};t.TreeNodeEnableIndex=r}),fc=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var e=Fd(),r=Ht(),n=qt(),s=class extends r.Container{constructor(i=function(l,c){return l<c?-1:l>c?1:0},a=!1){super(),this.Y=void 0,this.v=i,a?(this.re=e.TreeNodeEnableIndex,this.M=function(l,c,u){let d=this.ne(l,c,u);if(d){let g=d.tt;for(;g!==this.h;)g.rt+=1,g=g.tt;let b=this.he(d);if(b){let{parentNode:m,grandParent:y,curNode:w}=b;m.ie(),y.ie(),w.ie()}}return this.i},this.V=function(l){let c=this.fe(l);for(;c!==this.h;)c.rt-=1,c=c.tt}):(this.re=e.TreeNode,this.M=function(l,c,u){let d=this.ne(l,c,u);return d&&this.he(d),this.i},this.V=this.fe),this.h=new this.re}X(i,a){let l=this.h;for(;i;){let c=this.v(i.u,a);if(c<0)i=i.W;else if(c>0)l=i,i=i.U;else return i}return l}Z(i,a){let l=this.h;for(;i;)this.v(i.u,a)<=0?i=i.W:(l=i,i=i.U);return l}$(i,a){let l=this.h;for(;i;){let c=this.v(i.u,a);if(c<0)l=i,i=i.W;else if(c>0)i=i.U;else return i}return l}rr(i,a){let l=this.h;for(;i;)this.v(i.u,a)<0?(l=i,i=i.W):i=i.U;return l}ue(i){for(;;){let a=i.tt;if(a===this.h)return;if(i.ee===1){i.ee=0;return}if(i===a.U){let l=a.W;if(l.ee===1)l.ee=0,a.ee=1,a===this.Y?this.Y=a.te():a.te();else if(l.W&&l.W.ee===1){l.ee=a.ee,a.ee=0,l.W.ee=0,a===this.Y?this.Y=a.te():a.te();return}else l.U&&l.U.ee===1?(l.ee=1,l.U.ee=0,l.se()):(l.ee=1,i=a)}else{let l=a.U;if(l.ee===1)l.ee=0,a.ee=1,a===this.Y?this.Y=a.se():a.se();else if(l.U&&l.U.ee===1){l.ee=a.ee,a.ee=0,l.U.ee=0,a===this.Y?this.Y=a.se():a.se();return}else l.W&&l.W.ee===1?(l.ee=1,l.W.ee=0,l.te()):(l.ee=1,i=a)}}}fe(i){if(this.i===1)return this.clear(),this.h;let a=i;for(;a.U||a.W;){if(a.W)for(a=a.W;a.U;)a=a.U;else a=a.U;[i.u,a.u]=[a.u,i.u],[i.l,a.l]=[a.l,i.l],i=a}this.h.U===a?this.h.U=a.tt:this.h.W===a&&(this.h.W=a.tt),this.ue(a);let l=a.tt;return a===l.U?l.U=void 0:l.W=void 0,this.i-=1,this.Y.ee=0,l}oe(i,a){return i===void 0?!1:this.oe(i.U,a)||a(i)?!0:this.oe(i.W,a)}he(i){for(;;){let a=i.tt;if(a.ee===0)return;let l=a.tt;if(a===l.U){let c=l.W;if(c&&c.ee===1){if(c.ee=a.ee=0,l===this.Y)return;l.ee=1,i=l;continue}else if(i===a.W){if(i.ee=0,i.U&&(i.U.tt=a),i.W&&(i.W.tt=l),a.W=i.U,l.U=i.W,i.U=a,i.W=l,l===this.Y)this.Y=i,this.h.tt=i;else{let u=l.tt;u.U===l?u.U=i:u.W=i}return i.tt=l.tt,a.tt=i,l.tt=i,l.ee=1,{parentNode:a,grandParent:l,curNode:i}}else a.ee=0,l===this.Y?this.Y=l.se():l.se(),l.ee=1}else{let c=l.U;if(c&&c.ee===1){if(c.ee=a.ee=0,l===this.Y)return;l.ee=1,i=l;continue}else if(i===a.U){if(i.ee=0,i.U&&(i.U.tt=l),i.W&&(i.W.tt=a),l.W=i.U,a.U=i.W,i.U=l,i.W=a,l===this.Y)this.Y=i,this.h.tt=i;else{let u=l.tt;u.U===l?u.U=i:u.W=i}return i.tt=l.tt,a.tt=i,l.tt=i,l.ee=1,{parentNode:a,grandParent:l,curNode:i}}else a.ee=0,l===this.Y?this.Y=l.te():l.te(),l.ee=1}return}}ne(i,a,l){if(this.Y===void 0){this.i+=1,this.Y=new this.re(i,a),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let c,u=this.h.U,d=this.v(u.u,i);if(d===0){u.l=a;return}else if(d>0)u.U=new this.re(i,a),u.U.tt=u,c=u.U,this.h.U=c;else{let g=this.h.W,b=this.v(g.u,i);if(b===0){g.l=a;return}else if(b<0)g.W=new this.re(i,a),g.W.tt=g,c=g.W,this.h.W=c;else{if(l!==void 0){let m=l.o;if(m!==this.h){let y=this.v(m.u,i);if(y===0){m.l=a;return}else if(y>0){let w=m.L(),R=this.v(w.u,i);if(R===0){w.l=a;return}else R<0&&(c=new this.re(i,a),w.W===void 0?(w.W=c,c.tt=w):(m.U=c,c.tt=m))}}}if(c===void 0)for(c=this.Y;;){let m=this.v(c.u,i);if(m>0){if(c.U===void 0){c.U=new this.re(i,a),c.U.tt=c,c=c.U;break}c=c.U}else if(m<0){if(c.W===void 0){c.W=new this.re(i,a),c.W.tt=c,c=c.W;break}c=c.W}else{c.l=a;return}}}}return this.i+=1,c}I(i,a){for(;i;){let l=this.v(i.u,a);if(l<0)i=i.W;else if(l>0)i=i.U;else return i}return i||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(i,a){let l=i.o;if(l===this.h&&(0,n.throwIteratorAccessError)(),this.i===1)return l.u=a,!0;if(l===this.h.U)return this.v(l.B().u,a)>0?(l.u=a,!0):!1;if(l===this.h.W)return this.v(l.L().u,a)<0?(l.u=a,!0):!1;let c=l.L().u;if(this.v(c,a)>=0)return!1;let u=l.B().u;return this.v(u,a)<=0?!1:(l.u=a,!0)}eraseElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let a=0,l=this;return this.oe(this.Y,function(c){return i===a?(l.V(c),!0):(a+=1,!1)}),this.i}eraseElementByKey(i){if(this.i===0)return!1;let a=this.I(this.Y,i);return a===this.h?!1:(this.V(a),!0)}eraseElementByIterator(i){let a=i.o;a===this.h&&(0,n.throwIteratorAccessError)();let l=a.W===void 0;return i.iteratorType===0?l&&i.next():(!l||a.U===void 0)&&i.next(),this.V(a),i}forEach(i){let a=0;for(let l of this)i(l,a++,this)}getElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let a,l=0;for(let c of this){if(l===i){a=c;break}l+=1}return a}getHeight(){if(this.i===0)return 0;let i=function(a){return a?Math.max(i(a.U),i(a.W))+1:0};return i(this.Y)}},o=s;t.default=o}),dc=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var e=Ht(),r=qt(),n=class extends e.ContainerIterator{constructor(o,i,a){super(a),this.o=o,this.h=i,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,r.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,r.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,r.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,r.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let o=this.o,i=this.h.tt;if(o===this.h)return i?i.rt-1:0;let a=0;for(o.U&&(a+=o.U.rt);o!==i;){let l=o.tt;o===l.W&&(a+=1,l.U&&(a+=l.U.rt)),o=l}return a}},s=n;t.default=s}),$d=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var e=s(fc()),r=s(dc()),n=qt();function s(l){return l&&l.t?l:{default:l}}var o=class pc extends r.default{constructor(c,u,d,g){super(c,u,g),this.container=d}get pointer(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.u}copy(){return new pc(this.o,this.h,this.container,this.iteratorType)}},i=class extends e.default{constructor(l=[],c,u){super(c,u);let d=this;l.forEach(function(g){d.insert(g)})}*K(l){l!==void 0&&(yield*this.K(l.U),yield l.u,yield*this.K(l.W))}begin(){return new o(this.h.U||this.h,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this.h.W||this.h,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(l,c){return this.M(l,void 0,c)}find(l){let c=this.I(this.Y,l);return new o(c,this.h,this)}lowerBound(l){let c=this.X(this.Y,l);return new o(c,this.h,this)}upperBound(l){let c=this.Z(this.Y,l);return new o(c,this.h,this)}reverseLowerBound(l){let c=this.$(this.Y,l);return new o(c,this.h,this)}reverseUpperBound(l){let c=this.rr(this.Y,l);return new o(c,this.h,this)}union(l){let c=this;return l.forEach(function(u){c.insert(u)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},a=i;t.default=a}),Wd=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var e=s(fc()),r=s(dc()),n=qt();function s(l){return l&&l.t?l:{default:l}}var o=class gc extends r.default{constructor(c,u,d,g){super(c,u,g),this.container=d}get pointer(){this.o===this.h&&(0,n.throwIteratorAccessError)();let c=this;return new Proxy([],{get(u,d){if(d==="0")return c.o.u;if(d==="1")return c.o.l},set(u,d,g){if(d!=="1")throw new TypeError("props must be 1");return c.o.l=g,!0}})}copy(){return new gc(this.o,this.h,this.container,this.iteratorType)}},i=class extends e.default{constructor(l=[],c,u){super(c,u);let d=this;l.forEach(function(g){d.setElement(g[0],g[1])})}*K(l){l!==void 0&&(yield*this.K(l.U),yield[l.u,l.l],yield*this.K(l.W))}begin(){return new o(this.h.U||this.h,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this.h.W||this.h,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){if(this.i===0)return;let l=this.h.U;return[l.u,l.l]}back(){if(this.i===0)return;let l=this.h.W;return[l.u,l.l]}lowerBound(l){let c=this.X(this.Y,l);return new o(c,this.h,this)}upperBound(l){let c=this.Z(this.Y,l);return new o(c,this.h,this)}reverseLowerBound(l){let c=this.$(this.Y,l);return new o(c,this.h,this)}reverseUpperBound(l){let c=this.rr(this.Y,l);return new o(c,this.h,this)}setElement(l,c,u){return this.M(l,c,u)}find(l){let c=this.I(this.Y,l);return new o(c,this.h,this)}getElementByKey(l){return this.I(this.Y,l).l}union(l){let c=this;return l.forEach(function(u){c.setElement(u[0],u[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},a=i;t.default=a}),mc=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"t",{value:!0}),t.default=e;function e(r){let n=typeof r;return n==="object"&&r!==null||n==="function"}}),bc=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"t",{value:!0}),t.HashContainerIterator=t.HashContainer=void 0;var e=Ht(),r=s(mc()),n=qt();function s(a){return a&&a.t?a:{default:a}}var o=class extends e.ContainerIterator{constructor(a,l,c){super(c),this.o=a,this.h=l,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this})}};t.HashContainerIterator=o;var i=class extends e.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(a){let{L:l,B:c}=a;l.B=c,c.L=l,a===this.p&&(this.p=c),a===this._&&(this._=l),this.i-=1}M(a,l,c){c===void 0&&(c=(0,r.default)(a));let u;if(c){let d=a[this.HASH_TAG];if(d!==void 0)return this.H[d].l=l,this.i;Object.defineProperty(a,this.HASH_TAG,{value:this.H.length,configurable:!0}),u={u:a,l,L:this._,B:this.h},this.H.push(u)}else{let d=this.g[a];if(d)return d.l=l,this.i;u={u:a,l,L:this._,B:this.h},this.g[a]=u}return this.i===0?(this.p=u,this.h.B=u):this._.B=u,this._=u,this.h.L=u,++this.i}I(a,l){if(l===void 0&&(l=(0,r.default)(a)),l){let c=a[this.HASH_TAG];return c===void 0?this.h:this.H[c]}else return this.g[a]||this.h}clear(){let a=this.HASH_TAG;this.H.forEach(function(l){delete l.u[a]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(a,l){let c;if(l===void 0&&(l=(0,r.default)(a)),l){let u=a[this.HASH_TAG];if(u===void 0)return!1;delete a[this.HASH_TAG],c=this.H[u],delete this.H[u]}else{if(c=this.g[a],c===void 0)return!1;delete this.g[a]}return this.V(c),!0}eraseElementByIterator(a){let l=a.o;return l===this.h&&(0,n.throwIteratorAccessError)(),this.V(l),a.next()}eraseElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;let l=this.p;for(;a--;)l=l.B;return this.V(l),this.i}};t.HashContainer=i}),Hd=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var e=bc(),r=qt(),n=class yc extends e.HashContainerIterator{constructor(a,l,c,u){super(a,l,u),this.container=c}get pointer(){return this.o===this.h&&(0,r.throwIteratorAccessError)(),this.o.u}copy(){return new yc(this.o,this.h,this.container,this.iteratorType)}},s=class extends e.HashContainer{constructor(i=[]){super();let a=this;i.forEach(function(l){a.insert(l)})}begin(){return new n(this.p,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this._,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(i,a){return this.M(i,void 0,a)}getElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let a=this.p;for(;i--;)a=a.B;return a.u}find(i,a){let l=this.I(i,a);return new n(l,this.h,this)}forEach(i){let a=0,l=this.p;for(;l!==this.h;)i(l.u,a++,this),l=l.B}[Symbol.iterator](){return(function*(){let i=this.p;for(;i!==this.h;)yield i.u,i=i.B}).bind(this)()}},o=s;t.default=o}),qd=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var e=bc(),r=s(mc()),n=qt();function s(l){return l&&l.t?l:{default:l}}var o=class _c extends e.HashContainerIterator{constructor(c,u,d,g){super(c,u,g),this.container=d}get pointer(){this.o===this.h&&(0,n.throwIteratorAccessError)();let c=this;return new Proxy([],{get(u,d){if(d==="0")return c.o.u;if(d==="1")return c.o.l},set(u,d,g){if(d!=="1")throw new TypeError("props must be 1");return c.o.l=g,!0}})}copy(){return new _c(this.o,this.h,this.container,this.iteratorType)}},i=class extends e.HashContainer{constructor(l=[]){super();let c=this;l.forEach(function(u){c.setElement(u[0],u[1])})}begin(){return new o(this.p,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this._,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(l,c,u){return this.M(l,c,u)}getElementByKey(l,c){if(c===void 0&&(c=(0,r.default)(l)),c){let d=l[this.HASH_TAG];return d!==void 0?this.H[d].l:void 0}let u=this.g[l];return u?u.l:void 0}getElementByPos(l){if(l<0||l>this.i-1)throw new RangeError;let c=this.p;for(;l--;)c=c.B;return[c.u,c.l]}find(l,c){let u=this.I(l,c);return new o(u,this.h,this)}forEach(l){let c=0,u=this.p;for(;u!==this.h;)l([u.u,u.l],c++,this),u=u.B}[Symbol.iterator](){return(function*(){let l=this.p;for(;l!==this.h;)yield[l.u,l.l],l=l.B}).bind(this)()}},a=i;t.default=a}),Vd=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"t",{value:!0}),Object.defineProperty(t,"Deque",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"HashMap",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"HashSet",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"LinkList",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"OrderedMap",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"OrderedSet",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"PriorityQueue",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"Queue",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"Stack",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"Vector",{enumerable:!0,get:function(){return s.default}});var e=d(Nd()),r=d(Md()),n=d(jd()),s=d(Ud()),o=d(Ld()),i=d(Dd()),a=d($d()),l=d(Wd()),c=d(Hd()),u=d(qd());function d(g){return g&&g.t?g:{default:g}}}),zd=ye((t,e)=>{ce(),he(),ue();var r=Vd().OrderedSet,n=$t()("number-allocator:trace"),s=$t()("number-allocator:error");function o(a,l){this.low=a,this.high=l}o.prototype.equals=function(a){return this.low===a.low&&this.high===a.high},o.prototype.compare=function(a){return this.low<a.low&&this.high<a.low?-1:a.low<this.low&&a.high<this.low?1:0};function i(a,l){if(!(this instanceof i))return new i(a,l);this.min=a,this.max=l,this.ss=new r([],(c,u)=>c.compare(u)),n("Create"),this.clear()}i.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},i.prototype.alloc=function(){if(this.ss.size()===0)return n("alloc():empty"),null;let a=this.ss.begin(),l=a.pointer.low,c=a.pointer.high,u=l;return u+1<=c?this.ss.updateKeyByIterator(a,new o(l+1,c)):this.ss.eraseElementByPos(0),n("alloc():"+u),u},i.prototype.use=function(a){let l=new o(a,a),c=this.ss.lowerBound(l);if(!c.equals(this.ss.end())){let u=c.pointer.low,d=c.pointer.high;return c.pointer.equals(l)?(this.ss.eraseElementByIterator(c),n("use():"+a),!0):u>a?!1:u===a?(this.ss.updateKeyByIterator(c,new o(u+1,d)),n("use():"+a),!0):d===a?(this.ss.updateKeyByIterator(c,new o(u,d-1)),n("use():"+a),!0):(this.ss.updateKeyByIterator(c,new o(a+1,d)),this.ss.insert(new o(u,a-1)),n("use():"+a),!0)}return n("use():failed"),!1},i.prototype.free=function(a){if(a<this.min||a>this.max){s("free():"+a+" is out of range");return}let l=new o(a,a),c=this.ss.upperBound(l);if(c.equals(this.ss.end())){if(c.equals(this.ss.begin())){this.ss.insert(l);return}c.pre();let u=c.pointer.high;c.pointer.high+1===a?this.ss.updateKeyByIterator(c,new o(u,a)):this.ss.insert(l)}else if(c.equals(this.ss.begin()))if(a+1===c.pointer.low){let u=c.pointer.high;this.ss.updateKeyByIterator(c,new o(a,u))}else this.ss.insert(l);else{let u=c.pointer.low,d=c.pointer.high;c.pre();let g=c.pointer.low;c.pointer.high+1===a?a+1===u?(this.ss.eraseElementByIterator(c),this.ss.updateKeyByIterator(c,new o(g,d))):this.ss.updateKeyByIterator(c,new o(g,a)):a+1===u?(this.ss.eraseElementByIterator(c.next()),this.ss.insert(new o(a,d))):this.ss.insert(l)}n("free():"+a)},i.prototype.clear=function(){n("clear()"),this.ss.clear(),this.ss.insert(new o(this.min,this.max))},i.prototype.intervalCount=function(){return this.ss.size()},i.prototype.dump=function(){console.log("length:"+this.ss.size());for(let a of this.ss)console.log(a)},e.exports=i}),wc=ye((t,e)=>{ce(),he(),ue();var r=zd();e.exports.NumberAllocator=r}),Kd=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"__esModule",{value:!0});var e=Bd(),r=wc(),n=class{constructor(s){s>0&&(this.aliasToTopic=new e.LRUCache({max:s}),this.topicToAlias={},this.numberAllocator=new r.NumberAllocator(1,s),this.max=s,this.length=0)}put(s,o){if(o===0||o>this.max)return!1;let i=this.aliasToTopic.get(o);return i&&delete this.topicToAlias[i],this.aliasToTopic.set(o,s),this.topicToAlias[s]=o,this.numberAllocator.use(o),this.length=this.aliasToTopic.size,!0}getTopicByAlias(s){return this.aliasToTopic.get(s)}getAliasByTopic(s){let o=this.topicToAlias[s];return typeof o<"u"&&this.aliasToTopic.get(o),o}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};t.default=n}),Jd=ye(t=>{ce(),he(),ue();var e=t&&t.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(t,"__esModule",{value:!0});var r=Gn(),n=e(Kd()),s=Or(),o=(i,a)=>{i.log("_handleConnack");let{options:l}=i,c=l.protocolVersion===5?a.reasonCode:a.returnCode;if(clearTimeout(i.connackTimer),delete i.topicAliasSend,a.properties){if(a.properties.topicAliasMaximum){if(a.properties.topicAliasMaximum>65535){i.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}a.properties.topicAliasMaximum>0&&(i.topicAliasSend=new n.default(a.properties.topicAliasMaximum))}a.properties.serverKeepAlive&&l.keepalive&&(l.keepalive=a.properties.serverKeepAlive),a.properties.maximumPacketSize&&(l.properties||(l.properties={}),l.properties.maximumPacketSize=a.properties.maximumPacketSize)}if(c===0)i.reconnecting=!1,i._onConnect(a);else if(c>0){let u=new s.ErrorWithReasonCode(`Connection refused: ${r.ReasonCodes[c]}`,c);i.emit("error",u)}};t.default=o}),Yd=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"__esModule",{value:!0});var e=(r,n,s)=>{r.log("handling pubrel packet");let o=typeof s<"u"?s:r.noop,{messageId:i}=n,a={cmd:"pubcomp",messageId:i};r.incomingStore.get(n,(l,c)=>{l?r._sendPacket(a,o):(r.emit("message",c.topic,c.payload,c),r.handleMessage(c,u=>{if(u)return o(u);r.incomingStore.del(c,r.noop),r._sendPacket(a,o)}))})};t.default=e}),Qd=ye(t=>{ce(),he(),ue();var e=t&&t.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(t,"__esModule",{value:!0});var r=e(Pd()),n=e(xd()),s=e(Jd()),o=e(Gn()),i=e(Yd()),a=(l,c,u)=>{let{options:d}=l;if(d.protocolVersion===5&&d.properties&&d.properties.maximumPacketSize&&d.properties.maximumPacketSize<c.length)return l.emit("error",new Error(`exceeding packets size ${c.cmd}`)),l.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),l;switch(l.log("_handlePacket :: emitting packetreceive"),l.emit("packetreceive",c),c.cmd){case"publish":(0,r.default)(l,c,u);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":l.reschedulePing(),(0,o.default)(l,c),u();break;case"pubrel":l.reschedulePing(),(0,i.default)(l,c,u);break;case"connack":(0,s.default)(l,c),u();break;case"auth":l.reschedulePing(),(0,n.default)(l,c),u();break;case"pingresp":l.log("_handlePacket :: received pingresp"),l.reschedulePing(!0),u();break;case"disconnect":l.emit("disconnect",c),u();break;default:l.log("_handlePacket :: unknown command"),u();break}};t.default=a}),Gd=ye(t=>{ce(),he(),ue();var e=t&&t.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(t,"__esModule",{value:!0}),t.TypedEventEmitter=void 0;var r=e((Pr(),De(vr))),n=Or(),s=class{};t.TypedEventEmitter=s,(0,n.applyMixin)(s,r.default)}),Xn=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"__esModule",{value:!0}),t.isReactNativeBrowser=t.isWebWorker=void 0;var e=()=>{var o;return typeof window<"u"?typeof navigator<"u"&&((o=navigator.userAgent)===null||o===void 0?void 0:o.toLowerCase().indexOf(" electron/"))>-1&&je!=null&&je.versions?!Object.prototype.hasOwnProperty.call(je.versions,"electron"):typeof window.document<"u":!1},r=()=>{var o,i;return!!(typeof self=="object"&&!((i=(o=self==null?void 0:self.constructor)===null||o===void 0?void 0:o.name)===null||i===void 0)&&i.includes("WorkerGlobalScope"))},n=()=>typeof navigator<"u"&&navigator.product==="ReactNative",s=e()||r()||n();t.isWebWorker=r(),t.isReactNativeBrowser=n(),t.default=s}),Xd=ye((t,e)=>{ce(),he(),ue(),function(r,n){typeof t=="object"&&typeof e<"u"?n(t):typeof define=="function"&&define.amd?define(["exports"],n):(r=typeof globalThis<"u"?globalThis:r||self,n(r.fastUniqueNumbers={}))}(t,function(r){var n=function(b){return function(m){var y=b(m);return m.add(y),y}},s=function(b){return function(m,y){return b.set(m,y),y}},o=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,i=536870912,a=i*2,l=function(b,m){return function(y){var w=m.get(y),R=w===void 0?y.size:w<a?w+1:0;if(!y.has(R))return b(y,R);if(y.size<i){for(;y.has(R);)R=Math.floor(Math.random()*a);return b(y,R)}if(y.size>o)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;y.has(R);)R=Math.floor(Math.random()*o);return b(y,R)}},c=new WeakMap,u=s(c),d=l(u,c),g=n(d);r.addUniqueNumber=g,r.generateUniqueNumber=d})}),Zd=ye((t,e)=>{ce(),he(),ue(),function(r,n){typeof t=="object"&&typeof e<"u"?n(t,Xd()):typeof define=="function"&&define.amd?define(["exports","fast-unique-numbers"],n):(r=typeof globalThis<"u"?globalThis:r||self,n(r.workerTimersBroker={},r.fastUniqueNumbers))}(t,function(r,n){var s=function(a){return a.method!==void 0&&a.method==="call"},o=function(a){return a.error===null&&typeof a.id=="number"},i=function(a){var l=new Map([[0,function(){}]]),c=new Map([[0,function(){}]]),u=new Map,d=new Worker(a);d.addEventListener("message",function(w){var R=w.data;if(s(R)){var S=R.params,E=S.timerId,j=S.timerType;if(j==="interval"){var U=l.get(E);if(typeof U=="number"){var T=u.get(U);if(T===void 0||T.timerId!==E||T.timerType!==j)throw new Error("The timer is in an undefined state.")}else if(typeof U<"u")U();else throw new Error("The timer is in an undefined state.")}else if(j==="timeout"){var I=c.get(E);if(typeof I=="number"){var N=u.get(I);if(N===void 0||N.timerId!==E||N.timerType!==j)throw new Error("The timer is in an undefined state.")}else if(typeof I<"u")I(),c.delete(E);else throw new Error("The timer is in an undefined state.")}}else if(o(R)){var W=R.id,G=u.get(W);if(G===void 0)throw new Error("The timer is in an undefined state.");var ne=G.timerId,C=G.timerType;u.delete(W),C==="interval"?l.delete(ne):c.delete(ne)}else{var V=R.error.message;throw new Error(V)}});var g=function(w){var R=n.generateUniqueNumber(u);u.set(R,{timerId:w,timerType:"interval"}),l.set(w,R),d.postMessage({id:R,method:"clear",params:{timerId:w,timerType:"interval"}})},b=function(w){var R=n.generateUniqueNumber(u);u.set(R,{timerId:w,timerType:"timeout"}),c.set(w,R),d.postMessage({id:R,method:"clear",params:{timerId:w,timerType:"timeout"}})},m=function(w){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,S=n.generateUniqueNumber(l);return l.set(S,function(){w(),typeof l.get(S)=="function"&&d.postMessage({id:null,method:"set",params:{delay:R,now:performance.now(),timerId:S,timerType:"interval"}})}),d.postMessage({id:null,method:"set",params:{delay:R,now:performance.now(),timerId:S,timerType:"interval"}}),S},y=function(w){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,S=n.generateUniqueNumber(c);return c.set(S,w),d.postMessage({id:null,method:"set",params:{delay:R,now:performance.now(),timerId:S,timerType:"timeout"}}),S};return{clearInterval:g,clearTimeout:b,setInterval:m,setTimeout:y}};r.load=i})}),ep=ye((t,e)=>{ce(),he(),ue(),function(r,n){typeof t=="object"&&typeof e<"u"?n(t,Zd()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],n):(r=typeof globalThis<"u"?globalThis:r||self,n(r.workerTimers={},r.workerTimersBroker))}(t,function(r,n){var s=function(d,g){var b=null;return function(){if(b!==null)return b;var m=new Blob([g],{type:"application/javascript; charset=utf-8"}),y=URL.createObjectURL(m);return b=d(y),setTimeout(function(){return URL.revokeObjectURL(y)}),b}},o=`(()=>{var e={472:(e,t,r)=>{var o,i;void 0===(i="function"==typeof(o=function(){"use strict";var e=new Map,t=new Map,r=function(t){var r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)},o=function(e){var r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)},i=function(e,t){var r,o=performance.now();return{expected:o+(r=e-Math.max(0,o-t)),remainingDelay:r}},n=function e(t,r,o,i){var n=performance.now();n>o?postMessage({id:null,method:"call",params:{timerId:r,timerType:i}}):t.set(r,setTimeout(e,o-n,t,r,o,i))},a=function(t,r,o){var a=i(t,o),s=a.expected,d=a.remainingDelay;e.set(r,setTimeout(n,d,e,r,s,"interval"))},s=function(e,r,o){var a=i(e,o),s=a.expected,d=a.remainingDelay;t.set(r,setTimeout(n,d,t,r,s,"timeout"))};addEventListener("message",(function(e){var t=e.data;try{if("clear"===t.method){var i=t.id,n=t.params,d=n.timerId,c=n.timerType;if("interval"===c)r(d),postMessage({error:null,id:i});else{if("timeout"!==c)throw new Error('The given type "'.concat(c,'" is not supported'));o(d),postMessage({error:null,id:i})}}else{if("set"!==t.method)throw new Error('The given method "'.concat(t.method,'" is not supported'));var u=t.params,l=u.delay,p=u.now,m=u.timerId,v=u.timerType;if("interval"===v)a(l,m,p);else{if("timeout"!==v)throw new Error('The given type "'.concat(v,'" is not supported'));s(l,m,p)}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))})?o.call(t,r,t,e):o)||(e.exports=i)}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,i=s(n.load,o),a=function(d){return i().clearInterval(d)},l=function(d){return i().clearTimeout(d)},c=function(){var d;return(d=i()).setInterval.apply(d,arguments)},u=function(){var d;return(d=i()).setTimeout.apply(d,arguments)};r.clearInterval=a,r.clearTimeout=l,r.setInterval=c,r.setTimeout=u})}),tp=ye(t=>{ce(),he(),ue();var e=t&&t.__createBinding||(Object.create?function(c,u,d,g){g===void 0&&(g=d);var b=Object.getOwnPropertyDescriptor(u,d);(!b||("get"in b?!u.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return u[d]}}),Object.defineProperty(c,g,b)}:function(c,u,d,g){g===void 0&&(g=d),c[g]=u[d]}),r=t&&t.__setModuleDefault||(Object.create?function(c,u){Object.defineProperty(c,"default",{enumerable:!0,value:u})}:function(c,u){c.default=u}),n=t&&t.__importStar||function(c){if(c&&c.__esModule)return c;var u={};if(c!=null)for(var d in c)d!=="default"&&Object.prototype.hasOwnProperty.call(c,d)&&e(u,c,d);return r(u,c),u};Object.defineProperty(t,"__esModule",{value:!0});var s=n(Xn()),o=ep(),i={set:o.setInterval,clear:o.clearInterval},a={set:(c,u)=>setInterval(c,u),clear:c=>clearInterval(c)},l=c=>{switch(c){case"native":return a;case"worker":return i;case"auto":default:return s.default&&!s.isWebWorker&&!s.isReactNativeBrowser?i:a}};t.default=l}),vc=ye(t=>{ce(),he(),ue();var e=t&&t.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(t,"__esModule",{value:!0});var r=e(tp()),n=class{get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(s,o){this.destroyed=!1,this.client=s,this.timer=typeof o=="object"&&"set"in o&&"clear"in o?o:(0,r.default)(o),this.setKeepalive(s.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(s){if(s*=1e3,isNaN(s)||s<=0||s>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${s}`);this._keepalive=s,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${s}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let s=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+s,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};t.default=n}),Vo=ye(t=>{ce(),he(),ue();var e=t&&t.__createBinding||(Object.create?function(U,T,I,N){N===void 0&&(N=I);var W=Object.getOwnPropertyDescriptor(T,I);(!W||("get"in W?!T.__esModule:W.writable||W.configurable))&&(W={enumerable:!0,get:function(){return T[I]}}),Object.defineProperty(U,N,W)}:function(U,T,I,N){N===void 0&&(N=I),U[N]=T[I]}),r=t&&t.__setModuleDefault||(Object.create?function(U,T){Object.defineProperty(U,"default",{enumerable:!0,value:T})}:function(U,T){U.default=T}),n=t&&t.__importStar||function(U){if(U&&U.__esModule)return U;var T={};if(U!=null)for(var I in U)I!=="default"&&Object.prototype.hasOwnProperty.call(U,I)&&e(T,U,I);return r(T,U),T},s=t&&t.__importDefault||function(U){return U&&U.__esModule?U:{default:U}};Object.defineProperty(t,"__esModule",{value:!0});var o=s(qf()),i=s(Id()),a=s(ic()),l=Er(),c=s(kd()),u=n(Rd()),d=s($t()),g=s(oc()),b=s(Qd()),m=Or(),y=Gd(),w=s(vc()),R=n(Xn()),S=globalThis.setImmediate||((...U)=>{let T=U.shift();(0,m.nextTick)(()=>{T(...U)})}),E={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,writeCache:!0,timerVariant:"auto"},j=class zo extends y.TypedEventEmitter{static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(T,I){super(),this.options=I||{};for(let N in E)typeof this.options[N]>"u"?this.options[N]=E[N]:this.options[N]=I[N];this.log=this.options.log||(0,d.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",zo.VERSION),R.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",R.default?"browser":"node"),this.log("MqttClient :: options.protocol",I.protocol),this.log("MqttClient :: options.protocolVersion",I.protocolVersion),this.log("MqttClient :: options.username",I.username),this.log("MqttClient :: options.keepalive",I.keepalive),this.log("MqttClient :: options.reconnectPeriod",I.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",I.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",I.properties?I.properties.topicAliasMaximum:void 0),this.options.clientId=typeof I.clientId=="string"?I.clientId:zo.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=I.protocolVersion===5&&I.customHandleAcks?I.customHandleAcks:(...N)=>{N[3](null,0)},this.options.writeCache||(i.default.writeToStream.cacheNumbers=!1),this.streamBuilder=T,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new a.default:this.options.messageIdProvider,this.outgoingStore=I.outgoingStore||new g.default,this.incomingStore=I.incomingStore||new g.default,this.queueQoSZero=I.queueQoSZero===void 0?!0:I.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,I.properties&&I.properties.topicAliasMaximum>0&&(I.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new o.default(I.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:N}=this,W=()=>{let G=N.shift();this.log("deliver :: entry %o",G);let ne=null;if(!G){this._resubscribe();return}ne=G.packet,this.log("deliver :: call _sendPacket for %o",ne);let C=!0;ne.messageId&&ne.messageId!==0&&(this.messageIdProvider.register(ne.messageId)||(C=!1)),C?this._sendPacket(ne,V=>{G.cb&&G.cb(V),W()}):(this.log("messageId: %d has already used. The message is skipped and removed.",ne.messageId),W())};this.log("connect :: sending queued packets"),W()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(T,I){I()}handleMessage(T,I){I()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var T;let I=new l.Writable,N=i.default.parser(this.options),W=null,G=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new g.default,this.outgoingStore=this.options.outgoingStore||new g.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),N.on("packet",J=>{this.log("parser :: on packet push to packets array."),G.push(J)});let ne=()=>{this.log("work :: getting next packet in queue");let J=G.shift();if(J)this.log("work :: packet pulled from queue"),(0,b.default)(this,J,C);else{this.log("work :: no packets in queue");let be=W;W=null,this.log("work :: done flag is %s",!!be),be&&be()}},C=()=>{if(G.length)(0,m.nextTick)(ne);else{let J=W;W=null,J()}};I._write=(J,be,ae)=>{W=ae,this.log("writable stream :: parsing buffer"),N.parse(J),ne()};let V=J=>{this.log("streamErrorHandler :: error",J.message),J.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",J)):this.noop(J)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(I),this.stream.on("error",V),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let re={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(re.will=Object.assign(Object.assign({},this.options.will),{payload:(T=this.options.will)===null||T===void 0?void 0:T.payload})),this.topicAliasRecv&&(re.properties||(re.properties={}),this.topicAliasRecv&&(re.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(re),N.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let J=Object.assign({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket(J)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(T,I,N,W){this.log("publish :: message `%s` to topic `%s`",I,T);let{options:G}=this;typeof N=="function"&&(W=N,N=null),N=N||{},N=Object.assign(Object.assign({},{qos:0,retain:!1,dup:!1}),N);let{qos:ne,retain:C,dup:V,properties:re,cbStorePut:J}=N;if(this._checkDisconnecting(W))return this;let be=()=>{let ae=0;if((ne===1||ne===2)&&(ae=this._nextId(),ae===null))return this.log("No messageId left"),!1;let q={cmd:"publish",topic:T,payload:I,qos:ne,retain:C,messageId:ae,dup:V};switch(G.protocolVersion===5&&(q.properties=re),this.log("publish :: qos",ne),ne){case 1:case 2:this.outgoing[q.messageId]={volatile:!1,cb:W||this.noop},this.log("MqttClient:publish: packet cmd: %s",q.cmd),this._sendPacket(q,void 0,J);break;default:this.log("MqttClient:publish: packet cmd: %s",q.cmd),this._sendPacket(q,W,J);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!be())&&this._storeProcessingQueue.push({invoke:be,cbStorePut:N.cbStorePut,callback:W}),this}publishAsync(T,I,N){return new Promise((W,G)=>{this.publish(T,I,N,(ne,C)=>{ne?G(ne):W(C)})})}subscribe(T,I,N){let W=this.options.protocolVersion;typeof I=="function"&&(N=I),N=N||this.noop;let G=!1,ne=[];typeof T=="string"?(T=[T],ne=T):Array.isArray(T)?ne=T:typeof T=="object"&&(G=T.resubscribe,delete T.resubscribe,ne=Object.keys(T));let C=u.validateTopics(ne);if(C!==null)return S(N,new Error(`Invalid topic ${C}`)),this;if(this._checkDisconnecting(N))return this.log("subscribe: discconecting true"),this;let V={qos:0};W===5&&(V.nl=!1,V.rap=!1,V.rh=0),I=Object.assign(Object.assign({},V),I);let re=I.properties,J=[],be=(q,_e)=>{if(_e=_e||I,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,q)||this._resubscribeTopics[q].qos<_e.qos||G){let se={topic:q,qos:_e.qos};W===5&&(se.nl=_e.nl,se.rap=_e.rap,se.rh=_e.rh,se.properties=re),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",se.topic,se.qos),J.push(se)}};if(Array.isArray(T)?T.forEach(q=>{this.log("subscribe: array topic %s",q),be(q)}):Object.keys(T).forEach(q=>{this.log("subscribe: object topic %s, %o",q,T[q]),be(q,T[q])}),!J.length)return N(null,[]),this;let ae=()=>{let q=this._nextId();if(q===null)return this.log("No messageId left"),!1;let _e={cmd:"subscribe",subscriptions:J,messageId:q};if(re&&(_e.properties=re),this.options.resubscribe){this.log("subscribe :: resubscribe true");let se=[];J.forEach(Ee=>{if(this.options.reconnectPeriod>0){let v={qos:Ee.qos};W===5&&(v.nl=Ee.nl||!1,v.rap=Ee.rap||!1,v.rh=Ee.rh||0,v.properties=Ee.properties),this._resubscribeTopics[Ee.topic]=v,se.push(Ee.topic)}}),this.messageIdToTopic[_e.messageId]=se}return this.outgoing[_e.messageId]={volatile:!0,cb(se,Ee){if(!se){let{granted:v}=Ee;for(let Y=0;Y<v.length;Y+=1)J[Y].qos=v[Y]}N(se,J,Ee)}},this.log("subscribe :: call _sendPacket"),this._sendPacket(_e),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!ae())&&this._storeProcessingQueue.push({invoke:ae,callback:N}),this}subscribeAsync(T,I){return new Promise((N,W)=>{this.subscribe(T,I,(G,ne)=>{G?W(G):N(ne)})})}unsubscribe(T,I,N){typeof T=="string"&&(T=[T]),typeof I=="function"&&(N=I),N=N||this.noop;let W=u.validateTopics(T);if(W!==null)return S(N,new Error(`Invalid topic ${W}`)),this;if(this._checkDisconnecting(N))return this;let G=()=>{let ne=this._nextId();if(ne===null)return this.log("No messageId left"),!1;let C={cmd:"unsubscribe",messageId:ne,unsubscriptions:[]};return typeof T=="string"?C.unsubscriptions=[T]:Array.isArray(T)&&(C.unsubscriptions=T),this.options.resubscribe&&C.unsubscriptions.forEach(V=>{delete this._resubscribeTopics[V]}),typeof I=="object"&&I.properties&&(C.properties=I.properties),this.outgoing[C.messageId]={volatile:!0,cb:N},this.log("unsubscribe: call _sendPacket"),this._sendPacket(C),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!G())&&this._storeProcessingQueue.push({invoke:G,callback:N}),this}unsubscribeAsync(T,I){return new Promise((N,W)=>{this.unsubscribe(T,I,(G,ne)=>{G?W(G):N(ne)})})}end(T,I,N){this.log("end :: (%s)",this.options.clientId),(T==null||typeof T!="boolean")&&(N=N||I,I=T,T=!1),typeof I!="object"&&(N=N||I,I=null),this.log("end :: cb? %s",!!N),(!N||typeof N!="function")&&(N=this.noop);let W=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(ne=>{this.outgoingStore.close(C=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),N){let V=ne||C;this.log("end :: closeStores: invoking callback with args"),N(V)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},G=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,T),this._cleanUp(T,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,m.nextTick)(W)},I)};return this.disconnecting?(N(),this):(this._clearReconnect(),this.disconnecting=!0,!T&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,G,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),G()),this)}endAsync(T,I){return new Promise((N,W)=>{this.end(T,I,G=>{G?W(G):N()})})}removeOutgoingMessage(T){if(this.outgoing[T]){let{cb:I}=this.outgoing[T];this._removeOutgoingAndStoreMessage(T,()=>{I(new Error("Message removed"))})}return this}reconnect(T){this.log("client reconnect");let I=()=>{T?(this.options.incomingStore=T.incomingStore,this.options.outgoingStore=T.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new g.default,this.outgoingStore=this.options.outgoingStore||new g.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=I:I(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(T=>{this.outgoing[T].volatile&&typeof this.outgoing[T].cb=="function"&&(this.outgoing[T].cb(new Error("Connection closed")),delete this.outgoing[T])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(T=>{typeof this.outgoing[T].cb=="function"&&(this.outgoing[T].cb(new Error("Connection closed")),delete this.outgoing[T])}))}_removeTopicAliasAndRecoverTopicName(T){let I;T.properties&&(I=T.properties.topicAlias);let N=T.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",I,N),N.length===0){if(typeof I>"u")return new Error("Unregistered Topic Alias");if(N=this.topicAliasSend.getTopicByAlias(I),typeof N>"u")return new Error("Unregistered Topic Alias");T.topic=N}I&&delete T.properties.topicAlias}_checkDisconnecting(T){return this.disconnecting&&(T&&T!==this.noop?T(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(T,I,N={}){if(I&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",I)),this.log("_cleanUp :: forced? %s",T),T)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let W=Object.assign({cmd:"disconnect"},N);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(W,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),S(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),I&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",I),I())}_storeAndSend(T,I,N){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",T.cmd);let W=T,G;if(W.cmd==="publish"&&(W=(0,c.default)(T),G=this._removeTopicAliasAndRecoverTopicName(W),G))return I&&I(G);this.outgoingStore.put(W,ne=>{if(ne)return I&&I(ne);N(),this._writePacket(T,I)})}_applyTopicAlias(T){if(this.options.protocolVersion===5&&T.cmd==="publish"){let I;T.properties&&(I=T.properties.topicAlias);let N=T.topic.toString();if(this.topicAliasSend)if(I){if(N.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",N,I),!this.topicAliasSend.put(N,I)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",N,I),new Error("Sending Topic Alias out of range")}else N.length!==0&&(this.options.autoAssignTopicAlias?(I=this.topicAliasSend.getAliasByTopic(N),I?(T.topic="",T.properties=Object.assign(Object.assign({},T.properties),{topicAlias:I}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",N,I)):(I=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(N,I),T.properties=Object.assign(Object.assign({},T.properties),{topicAlias:I}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",N,I))):this.options.autoUseTopicAlias&&(I=this.topicAliasSend.getAliasByTopic(N),I&&(T.topic="",T.properties=Object.assign(Object.assign({},T.properties),{topicAlias:I}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",N,I))));else if(I)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",N,I),new Error("Sending Topic Alias out of range")}}_noop(T){this.log("noop ::",T)}_writePacket(T,I){this.log("_writePacket :: packet: %O",T),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",T),this.log("_writePacket :: writing to stream");let N=i.default.writeToStream(T,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",N),!N&&I&&I!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",I)):I&&(this.log("_writePacket :: invoking cb"),I())}_sendPacket(T,I,N,W){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),N=N||this.noop,I=I||this.noop;let G=this._applyTopicAlias(T);if(G){I(G);return}if(!this.connected){if(T.cmd==="auth"){this._writePacket(T,I);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(T,I,N);return}if(W){this._writePacket(T,I);return}switch(T.cmd){case"publish":break;case"pubrel":this._storeAndSend(T,I,N);return;default:this._writePacket(T,I);return}switch(T.qos){case 2:case 1:this._storeAndSend(T,I,N);break;case 0:default:this._writePacket(T,I);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(T,I,N){this.log("_storePacket :: packet: %o",T),this.log("_storePacket :: cb? %s",!!I),N=N||this.noop;let W=T;if(W.cmd==="publish"){W=(0,c.default)(T);let ne=this._removeTopicAliasAndRecoverTopicName(W);if(ne)return I&&I(ne)}let G=W.qos||0;G===0&&this.queueQoSZero||W.cmd!=="publish"?this.queue.push({packet:W,cb:I}):G>0?(I=this.outgoing[W.messageId]?this.outgoing[W.messageId].cb:null,this.outgoingStore.put(W,ne=>{if(ne)return I&&I(ne);N()})):I&&I(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new w.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(T=!1){this.keepaliveManager&&this.options.keepalive&&(T||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let T=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&T.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let I=0;I<T.length;I++){let N={};N[T[I]]=this._resubscribeTopics[T[I]],N.resubscribe=!0,this.subscribe(N,{properties:N[T[I]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(T){if(this.disconnected){this.emit("connect",T);return}this.connackPacket=T,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let I=()=>{let N=this.outgoingStore.createStream(),W=()=>{N.destroy(),N=null,this._flushStoreProcessingQueue(),G()},G=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",W),N.on("error",C=>{G(),this._flushStoreProcessingQueue(),this.removeListener("close",W),this.emit("error",C)});let ne=()=>{if(!N)return;let C=N.read(1),V;if(!C){N.once("readable",ne);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[C.messageId]){ne();return}!this.disconnecting&&!this.reconnectTimer?(V=this.outgoing[C.messageId]?this.outgoing[C.messageId].cb:null,this.outgoing[C.messageId]={volatile:!1,cb(re,J){V&&V(re,J),ne()}},this._packetIdsDuringStoreProcessing[C.messageId]=!0,this.messageIdProvider.register(C.messageId)?this._sendPacket(C,void 0,void 0,!0):this.log("messageId: %d has already used.",C.messageId)):N.destroy&&N.destroy()};N.on("end",()=>{let C=!0;for(let V in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[V]){C=!1;break}this.removeListener("close",W),C?(G(),this._invokeAllStoreProcessingQueue(),this.emit("connect",T)):I()}),ne()};I()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let T=this._storeProcessingQueue[0];if(T&&T.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let T of this._storeProcessingQueue)T.cbStorePut&&T.cbStorePut(new Error("Connection closed")),T.callback&&T.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(T,I){delete this.outgoing[T],this.outgoingStore.del({messageId:T},(N,W)=>{I(N,W),this.messageIdProvider.deallocate(T),this._invokeStoreProcessingQueue()})}};j.VERSION=m.MQTTJS_VERSION,t.default=j}),rp=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"__esModule",{value:!0});var e=wc(),r=class{constructor(){this.numberAllocator=new e.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(n){return this.numberAllocator.use(n)}deallocate(n){this.numberAllocator.free(n)}clear(){this.numberAllocator.clear()}};t.default=r});function nr(t){throw new RangeError(Sc[t])}function da(t,e){let r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]);let s=function(o,i){let a=[],l=o.length;for(;l--;)a[l]=i(o[l]);return a}((t=t.replace(Ec,".")).split("."),e).join(".");return n+s}function pa(t){let e=[],r=0,n=t.length;for(;r<n;){let s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){let o=t.charCodeAt(r++);(64512&o)==56320?e.push(((1023&s)<<10)+(1023&o)+65536):(e.push(s),r--)}else e.push(s)}return e}var ga,ma,Ec,Sc,_t,en,di,pi,gi,mi,Yt,np=nt(()=>{ce(),he(),ue(),ga=/^xn--/,ma=/[^\0-\x7E]/,Ec=/[\x2E\u3002\uFF0E\uFF61]/g,Sc={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_t=Math.floor,en=String.fromCharCode,di=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},pi=function(t,e,r){let n=0;for(t=r?_t(t/700):t>>1,t+=_t(t/e);t>455;n+=36)t=_t(t/35);return _t(n+36*t/(t+38))},gi=function(t){let e=[],r=t.length,n=0,s=128,o=72,i=t.lastIndexOf("-");i<0&&(i=0);for(let l=0;l<i;++l)t.charCodeAt(l)>=128&&nr("not-basic"),e.push(t.charCodeAt(l));for(let l=i>0?i+1:0;l<r;){let c=n;for(let d=1,g=36;;g+=36){l>=r&&nr("invalid-input");let b=(a=t.charCodeAt(l++))-48<10?a-22:a-65<26?a-65:a-97<26?a-97:36;(b>=36||b>_t((2147483647-n)/d))&&nr("overflow"),n+=b*d;let m=g<=o?1:g>=o+26?26:g-o;if(b<m)break;let y=36-m;d>_t(2147483647/y)&&nr("overflow"),d*=y}let u=e.length+1;o=pi(n-c,u,c==0),_t(n/u)>2147483647-s&&nr("overflow"),s+=_t(n/u),n%=u,e.splice(n++,0,s)}var a;return String.fromCodePoint(...e)},mi=function(t){let e=[],r=(t=pa(t)).length,n=128,s=0,o=72;for(let l of t)l<128&&e.push(en(l));let i=e.length,a=i;for(i&&e.push("-");a<r;){let l=2147483647;for(let u of t)u>=n&&u<l&&(l=u);let c=a+1;l-n>_t((2147483647-s)/c)&&nr("overflow"),s+=(l-n)*c,n=l;for(let u of t)if(u<n&&++s>2147483647&&nr("overflow"),u==n){let d=s;for(let g=36;;g+=36){let b=g<=o?1:g>=o+26?26:g-o;if(d<b)break;let m=d-b,y=36-b;e.push(en(di(b+m%y,0))),d=_t(m/y)}e.push(en(di(d,0))),o=pi(s,c,a==i),s=0,++a}++s,++n}return e.join("")},Yt={version:"2.1.0",ucs2:{decode:pa,encode:t=>String.fromCodePoint(...t)},decode:gi,encode:mi,toASCII:function(t){return da(t,function(e){return ma.test(e)?"xn--"+mi(e):e})},toUnicode:function(t){return da(t,function(e){return ga.test(e)?gi(e.slice(4).toLowerCase()):e})}},Yt.decode,Yt.encode,Yt.toASCII,Yt.toUnicode,Yt.ucs2,Yt.version});function ip(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var ba,Sr,ya,It,op=nt(()=>{ce(),he(),ue(),ba=function(t,e,r,n){e=e||"&",r=r||"=";var s={};if(typeof t!="string"||t.length===0)return s;var o=/\+/g;t=t.split(e);var i=1e3;n&&typeof n.maxKeys=="number"&&(i=n.maxKeys);var a=t.length;i>0&&a>i&&(a=i);for(var l=0;l<a;++l){var c,u,d,g,b=t[l].replace(o,"%20"),m=b.indexOf(r);m>=0?(c=b.substr(0,m),u=b.substr(m+1)):(c=b,u=""),d=decodeURIComponent(c),g=decodeURIComponent(u),ip(s,d)?Array.isArray(s[d])?s[d].push(g):s[d]=[s[d],g]:s[d]=g}return s},Sr=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},ya=function(t,e,r,n){return e=e||"&",r=r||"=",t===null&&(t=void 0),typeof t=="object"?Object.keys(t).map(function(s){var o=encodeURIComponent(Sr(s))+r;return Array.isArray(t[s])?t[s].map(function(i){return o+encodeURIComponent(Sr(i))}).join(e):o+encodeURIComponent(Sr(t[s]))}).join(e):n?encodeURIComponent(Sr(n))+r+encodeURIComponent(Sr(t)):""},It={},It.decode=It.parse=ba,It.encode=It.stringify=ya,It.decode,It.encode,It.parse,It.stringify});function Ko(){throw new Error("setTimeout has not been defined")}function Jo(){throw new Error("clearTimeout has not been defined")}function Ac(t){if(xt===setTimeout)return setTimeout(t,0);if((xt===Ko||!xt)&&setTimeout)return xt=setTimeout,setTimeout(t,0);try{return xt(t,0)}catch{try{return xt.call(null,t,0)}catch{return xt.call(this||gr,t,0)}}}function sp(){mr&&ur&&(mr=!1,ur.length?kt=ur.concat(kt):$r=-1,kt.length&&Cc())}function Cc(){if(!mr){var t=Ac(sp);mr=!0;for(var e=kt.length;e;){for(ur=kt,kt=[];++$r<e;)ur&&ur[$r].run();$r=-1,e=kt.length}ur=null,mr=!1,function(r){if(Bt===clearTimeout)return clearTimeout(r);if((Bt===Jo||!Bt)&&clearTimeout)return Bt=clearTimeout,clearTimeout(r);try{Bt(r)}catch{try{return Bt.call(null,r)}catch{return Bt.call(this||gr,r)}}}(t)}}function _a(t,e){(this||gr).fun=t,(this||gr).array=e}function Rt(){}var wa,xt,Bt,gr,Ke,ur,kt,mr,$r,Ve,ap=nt(()=>{ce(),he(),ue(),gr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,Ke=wa={},function(){try{xt=typeof setTimeout=="function"?setTimeout:Ko}catch{xt=Ko}try{Bt=typeof clearTimeout=="function"?clearTimeout:Jo}catch{Bt=Jo}}(),kt=[],mr=!1,$r=-1,Ke.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];kt.push(new _a(t,e)),kt.length!==1||mr||Ac(Cc)},_a.prototype.run=function(){(this||gr).fun.apply(null,(this||gr).array)},Ke.title="browser",Ke.browser=!0,Ke.env={},Ke.argv=[],Ke.version="",Ke.versions={},Ke.on=Rt,Ke.addListener=Rt,Ke.once=Rt,Ke.off=Rt,Ke.removeListener=Rt,Ke.removeAllListeners=Rt,Ke.emit=Rt,Ke.prependListener=Rt,Ke.prependOnceListener=Rt,Ke.listeners=function(t){return[]},Ke.binding=function(t){throw new Error("process.binding is not supported")},Ke.cwd=function(){return"/"},Ke.chdir=function(t){throw new Error("process.chdir is not supported")},Ke.umask=function(){return 0},Ve=wa,Ve.addListener,Ve.argv,Ve.binding,Ve.browser,Ve.chdir,Ve.cwd,Ve.emit,Ve.env,Ve.listeners,Ve.nextTick,Ve.off,Ve.on,Ve.once,Ve.prependListener,Ve.prependOnceListener,Ve.removeAllListeners,Ve.removeListener,Ve.title,Ve.umask,Ve.version,Ve.versions});function lp(){if(Yo)return pn;Yo=!0;var t=pn={},e,r;function n(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=n}catch{e=n}try{typeof clearTimeout=="function"?r=clearTimeout:r=s}catch{r=s}})();function o(y){if(e===setTimeout)return setTimeout(y,0);if((e===n||!e)&&setTimeout)return e=setTimeout,setTimeout(y,0);try{return e(y,0)}catch{try{return e.call(null,y,0)}catch{return e.call(this||or,y,0)}}}function i(y){if(r===clearTimeout)return clearTimeout(y);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(y);try{return r(y)}catch{try{return r.call(null,y)}catch{return r.call(this||or,y)}}}var a=[],l=!1,c,u=-1;function d(){!l||!c||(l=!1,c.length?a=c.concat(a):u=-1,a.length&&g())}function g(){if(!l){var y=o(d);l=!0;for(var w=a.length;w;){for(c=a,a=[];++u<w;)c&&c[u].run();u=-1,w=a.length}c=null,l=!1,i(y)}}t.nextTick=function(y){var w=new Array(arguments.length-1);if(arguments.length>1)for(var R=1;R<arguments.length;R++)w[R-1]=arguments[R];a.push(new b(y,w)),a.length===1&&!l&&o(g)};function b(y,w){(this||or).fun=y,(this||or).array=w}b.prototype.run=function(){(this||or).fun.apply(null,(this||or).array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function m(){}return t.on=m,t.addListener=m,t.once=m,t.off=m,t.removeListener=m,t.removeAllListeners=m,t.emit=m,t.prependListener=m,t.prependOnceListener=m,t.listeners=function(y){return[]},t.binding=function(y){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(y){throw new Error("process.chdir is not supported")},t.umask=function(){return 0},pn}var pn,Yo,or,We,Ic=nt(()=>{ce(),he(),ue(),pn={},Yo=!1,or=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,We=lp(),We.platform="browser",We.addListener,We.argv,We.binding,We.browser,We.chdir,We.cwd,We.emit,We.env,We.listeners,We.nextTick,We.off,We.on,We.once,We.prependListener,We.prependOnceListener,We.removeAllListeners,We.removeListener,We.title,We.umask,We.version,We.versions});function cp(){if(Qo)return gn;Qo=!0;var t=We;function e(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function r(o,i){for(var a="",l=0,c=-1,u=0,d,g=0;g<=o.length;++g){if(g<o.length)d=o.charCodeAt(g);else{if(d===47)break;d=47}if(d===47){if(!(c===g-1||u===1))if(c!==g-1&&u===2){if(a.length<2||l!==2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){var b=a.lastIndexOf("/");if(b!==a.length-1){b===-1?(a="",l=0):(a=a.slice(0,b),l=a.length-1-a.lastIndexOf("/")),c=g,u=0;continue}}else if(a.length===2||a.length===1){a="",l=0,c=g,u=0;continue}}i&&(a.length>0?a+="/..":a="..",l=2)}else a.length>0?a+="/"+o.slice(c+1,g):a=o.slice(c+1,g),l=g-c-1;c=g,u=0}else d===46&&u!==-1?++u:u=-1}return a}function n(o,i){var a=i.dir||i.root,l=i.base||(i.name||"")+(i.ext||"");return a?a===i.root?a+l:a+o+l:l}var s={resolve:function(){for(var o="",i=!1,a,l=arguments.length-1;l>=-1&&!i;l--){var c;l>=0?c=arguments[l]:(a===void 0&&(a=t.cwd()),c=a),e(c),c.length!==0&&(o=c+"/"+o,i=c.charCodeAt(0)===47)}return o=r(o,!i),i?o.length>0?"/"+o:"/":o.length>0?o:"."},normalize:function(o){if(e(o),o.length===0)return".";var i=o.charCodeAt(0)===47,a=o.charCodeAt(o.length-1)===47;return o=r(o,!i),o.length===0&&!i&&(o="."),o.length>0&&a&&(o+="/"),i?"/"+o:o},isAbsolute:function(o){return e(o),o.length>0&&o.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var o,i=0;i<arguments.length;++i){var a=arguments[i];e(a),a.length>0&&(o===void 0?o=a:o+="/"+a)}return o===void 0?".":s.normalize(o)},relative:function(o,i){if(e(o),e(i),o===i||(o=s.resolve(o),i=s.resolve(i),o===i))return"";for(var a=1;a<o.length&&o.charCodeAt(a)===47;++a);for(var l=o.length,c=l-a,u=1;u<i.length&&i.charCodeAt(u)===47;++u);for(var d=i.length,g=d-u,b=c<g?c:g,m=-1,y=0;y<=b;++y){if(y===b){if(g>b){if(i.charCodeAt(u+y)===47)return i.slice(u+y+1);if(y===0)return i.slice(u+y)}else c>b&&(o.charCodeAt(a+y)===47?m=y:y===0&&(m=0));break}var w=o.charCodeAt(a+y),R=i.charCodeAt(u+y);if(w!==R)break;w===47&&(m=y)}var S="";for(y=a+m+1;y<=l;++y)(y===l||o.charCodeAt(y)===47)&&(S.length===0?S+="..":S+="/..");return S.length>0?S+i.slice(u+m):(u+=m,i.charCodeAt(u)===47&&++u,i.slice(u))},_makeLong:function(o){return o},dirname:function(o){if(e(o),o.length===0)return".";for(var i=o.charCodeAt(0),a=i===47,l=-1,c=!0,u=o.length-1;u>=1;--u)if(i=o.charCodeAt(u),i===47){if(!c){l=u;break}}else c=!1;return l===-1?a?"/":".":a&&l===1?"//":o.slice(0,l)},basename:function(o,i){if(i!==void 0&&typeof i!="string")throw new TypeError('"ext" argument must be a string');e(o);var a=0,l=-1,c=!0,u;if(i!==void 0&&i.length>0&&i.length<=o.length){if(i.length===o.length&&i===o)return"";var d=i.length-1,g=-1;for(u=o.length-1;u>=0;--u){var b=o.charCodeAt(u);if(b===47){if(!c){a=u+1;break}}else g===-1&&(c=!1,g=u+1),d>=0&&(b===i.charCodeAt(d)?--d===-1&&(l=u):(d=-1,l=g))}return a===l?l=g:l===-1&&(l=o.length),o.slice(a,l)}else{for(u=o.length-1;u>=0;--u)if(o.charCodeAt(u)===47){if(!c){a=u+1;break}}else l===-1&&(c=!1,l=u+1);return l===-1?"":o.slice(a,l)}},extname:function(o){e(o);for(var i=-1,a=0,l=-1,c=!0,u=0,d=o.length-1;d>=0;--d){var g=o.charCodeAt(d);if(g===47){if(!c){a=d+1;break}continue}l===-1&&(c=!1,l=d+1),g===46?i===-1?i=d:u!==1&&(u=1):i!==-1&&(u=-1)}return i===-1||l===-1||u===0||u===1&&i===l-1&&i===a+1?"":o.slice(i,l)},format:function(o){if(o===null||typeof o!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof o);return n("/",o)},parse:function(o){e(o);var i={root:"",dir:"",base:"",ext:"",name:""};if(o.length===0)return i;var a=o.charCodeAt(0),l=a===47,c;l?(i.root="/",c=1):c=0;for(var u=-1,d=0,g=-1,b=!0,m=o.length-1,y=0;m>=c;--m){if(a=o.charCodeAt(m),a===47){if(!b){d=m+1;break}continue}g===-1&&(b=!1,g=m+1),a===46?u===-1?u=m:y!==1&&(y=1):u!==-1&&(y=-1)}return u===-1||g===-1||y===0||y===1&&u===g-1&&u===d+1?g!==-1&&(d===0&&l?i.base=i.name=o.slice(1,g):i.base=i.name=o.slice(d,g)):(d===0&&l?(i.name=o.slice(1,u),i.base=o.slice(1,g)):(i.name=o.slice(d,u),i.base=o.slice(d,g)),i.ext=o.slice(u,g)),d>0?i.dir=o.slice(0,d-1):l&&(i.dir="/"),i},sep:"/",delimiter:":",win32:null,posix:null};return s.posix=s,gn=s,gn}var gn,Qo,Go,up=nt(()=>{ce(),he(),ue(),Ic(),gn={},Qo=!1,Go=cp()}),Tc={};_r(Tc,{URL:()=>Vc,Url:()=>Fc,default:()=>Ue,fileURLToPath:()=>kc,format:()=>$c,parse:()=>qc,pathToFileURL:()=>Rc,resolve:()=>Wc,resolveObject:()=>Hc});function yt(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function jr(t,e,r){if(t&&vt.isObject(t)&&t instanceof yt)return t;var n=new yt;return n.parse(t,e,r),n}function hp(){if(Xo)return mn;Xo=!0;var t=Ve;function e(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function r(o,i){for(var a="",l=0,c=-1,u=0,d,g=0;g<=o.length;++g){if(g<o.length)d=o.charCodeAt(g);else{if(d===47)break;d=47}if(d===47){if(!(c===g-1||u===1))if(c!==g-1&&u===2){if(a.length<2||l!==2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){var b=a.lastIndexOf("/");if(b!==a.length-1){b===-1?(a="",l=0):(a=a.slice(0,b),l=a.length-1-a.lastIndexOf("/")),c=g,u=0;continue}}else if(a.length===2||a.length===1){a="",l=0,c=g,u=0;continue}}i&&(a.length>0?a+="/..":a="..",l=2)}else a.length>0?a+="/"+o.slice(c+1,g):a=o.slice(c+1,g),l=g-c-1;c=g,u=0}else d===46&&u!==-1?++u:u=-1}return a}function n(o,i){var a=i.dir||i.root,l=i.base||(i.name||"")+(i.ext||"");return a?a===i.root?a+l:a+o+l:l}var s={resolve:function(){for(var o="",i=!1,a,l=arguments.length-1;l>=-1&&!i;l--){var c;l>=0?c=arguments[l]:(a===void 0&&(a=t.cwd()),c=a),e(c),c.length!==0&&(o=c+"/"+o,i=c.charCodeAt(0)===47)}return o=r(o,!i),i?o.length>0?"/"+o:"/":o.length>0?o:"."},normalize:function(o){if(e(o),o.length===0)return".";var i=o.charCodeAt(0)===47,a=o.charCodeAt(o.length-1)===47;return o=r(o,!i),o.length===0&&!i&&(o="."),o.length>0&&a&&(o+="/"),i?"/"+o:o},isAbsolute:function(o){return e(o),o.length>0&&o.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var o,i=0;i<arguments.length;++i){var a=arguments[i];e(a),a.length>0&&(o===void 0?o=a:o+="/"+a)}return o===void 0?".":s.normalize(o)},relative:function(o,i){if(e(o),e(i),o===i||(o=s.resolve(o),i=s.resolve(i),o===i))return"";for(var a=1;a<o.length&&o.charCodeAt(a)===47;++a);for(var l=o.length,c=l-a,u=1;u<i.length&&i.charCodeAt(u)===47;++u);for(var d=i.length,g=d-u,b=c<g?c:g,m=-1,y=0;y<=b;++y){if(y===b){if(g>b){if(i.charCodeAt(u+y)===47)return i.slice(u+y+1);if(y===0)return i.slice(u+y)}else c>b&&(o.charCodeAt(a+y)===47?m=y:y===0&&(m=0));break}var w=o.charCodeAt(a+y),R=i.charCodeAt(u+y);if(w!==R)break;w===47&&(m=y)}var S="";for(y=a+m+1;y<=l;++y)(y===l||o.charCodeAt(y)===47)&&(S.length===0?S+="..":S+="/..");return S.length>0?S+i.slice(u+m):(u+=m,i.charCodeAt(u)===47&&++u,i.slice(u))},_makeLong:function(o){return o},dirname:function(o){if(e(o),o.length===0)return".";for(var i=o.charCodeAt(0),a=i===47,l=-1,c=!0,u=o.length-1;u>=1;--u)if(i=o.charCodeAt(u),i===47){if(!c){l=u;break}}else c=!1;return l===-1?a?"/":".":a&&l===1?"//":o.slice(0,l)},basename:function(o,i){if(i!==void 0&&typeof i!="string")throw new TypeError('"ext" argument must be a string');e(o);var a=0,l=-1,c=!0,u;if(i!==void 0&&i.length>0&&i.length<=o.length){if(i.length===o.length&&i===o)return"";var d=i.length-1,g=-1;for(u=o.length-1;u>=0;--u){var b=o.charCodeAt(u);if(b===47){if(!c){a=u+1;break}}else g===-1&&(c=!1,g=u+1),d>=0&&(b===i.charCodeAt(d)?--d===-1&&(l=u):(d=-1,l=g))}return a===l?l=g:l===-1&&(l=o.length),o.slice(a,l)}else{for(u=o.length-1;u>=0;--u)if(o.charCodeAt(u)===47){if(!c){a=u+1;break}}else l===-1&&(c=!1,l=u+1);return l===-1?"":o.slice(a,l)}},extname:function(o){e(o);for(var i=-1,a=0,l=-1,c=!0,u=0,d=o.length-1;d>=0;--d){var g=o.charCodeAt(d);if(g===47){if(!c){a=d+1;break}continue}l===-1&&(c=!1,l=d+1),g===46?i===-1?i=d:u!==1&&(u=1):i!==-1&&(u=-1)}return i===-1||l===-1||u===0||u===1&&i===l-1&&i===a+1?"":o.slice(i,l)},format:function(o){if(o===null||typeof o!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof o);return n("/",o)},parse:function(o){e(o);var i={root:"",dir:"",base:"",ext:"",name:""};if(o.length===0)return i;var a=o.charCodeAt(0),l=a===47,c;l?(i.root="/",c=1):c=0;for(var u=-1,d=0,g=-1,b=!0,m=o.length-1,y=0;m>=c;--m){if(a=o.charCodeAt(m),a===47){if(!b){d=m+1;break}continue}g===-1&&(b=!1,g=m+1),a===46?u===-1?u=m:y!==1&&(y=1):u!==-1&&(y=-1)}return u===-1||g===-1||y===0||y===1&&u===g-1&&u===d+1?g!==-1&&(d===0&&l?i.base=i.name=o.slice(1,g):i.base=i.name=o.slice(d,g)):(d===0&&l?(i.name=o.slice(1,u),i.base=o.slice(1,g)):(i.name=o.slice(d,u),i.base=o.slice(d,g)),i.ext=o.slice(u,g)),d>0?i.dir=o.slice(0,d-1):l&&(i.dir="/"),i},sep:"/",delimiter:":",win32:null,posix:null};return s.posix=s,mn=s,mn}function fp(t){if(typeof t=="string")t=new URL(t);else if(!(t instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(t.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Rn?dp(t):pp(t)}function dp(t){let e=t.hostname,r=t.pathname;for(let n=0;n<r.length;n++)if(r[n]==="%"){let s=r.codePointAt(n+2)||32;if(r[n+1]==="2"&&s===102||r[n+1]==="5"&&s===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(r=r.replace(Nc,"\\"),r=decodeURIComponent(r),e!=="")return`\\\\${e}${r}`;{let n=r.codePointAt(1)|32,s=r[2];if(n<xc||n>Bc||s!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return r.slice(1)}}function pp(t){if(t.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let e=t.pathname;for(let r=0;r<e.length;r++)if(e[r]==="%"){let n=e.codePointAt(r+2)||32;if(e[r+1]==="2"&&n===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(e)}function gp(t){let e=Zo.resolve(t),r=t.charCodeAt(t.length-1);(r===Oc||Rn&&r===Pc)&&e[e.length-1]!==Zo.sep&&(e+="/");let n=new URL("file://");return e.includes("%")&&(e=e.replace(Mc,"%25")),!Rn&&e.includes("\\")&&(e=e.replace(jc,"%5C")),e.includes(`
`)&&(e=e.replace(Uc,"%0A")),e.includes("\r")&&(e=e.replace(Lc,"%0D")),e.includes("	")&&(e=e.replace(Dc,"%09")),n.pathname=e,n}function kc(t){if(typeof t=="string")t=new URL(t);else if(!(t instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(t.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Pn?mp(t):bp(t)}function mp(t){let e=t.hostname,r=t.pathname;for(let n=0;n<r.length;n++)if(r[n]==="%"){let s=r.codePointAt(n+2)||32;if(r[n+1]==="2"&&s===102||r[n+1]==="5"&&s===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(r=r.replace(Qc,"\\"),r=decodeURIComponent(r),e!=="")return`\\\\${e}${r}`;{let n=r.codePointAt(1)|32,s=r[2];if(n<Jc||n>Yc||s!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return r.slice(1)}}function bp(t){if(t.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let e=t.pathname;for(let r=0;r<e.length;r++)if(e[r]==="%"){let n=e.codePointAt(r+2)||32;if(e[r+1]==="2"&&n===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(e)}function Rc(t){let e=Go.resolve(t),r=t.charCodeAt(t.length-1);(r===Kc||Pn&&r===zc)&&e[e.length-1]!==Go.sep&&(e+="/");let n=new URL("file://");return e.includes("%")&&(e=e.replace(Gc,"%25")),!Pn&&e.includes("\\")&&(e=e.replace(Xc,"%5C")),e.includes(`
`)&&(e=e.replace(Zc,"%0A")),e.includes("\r")&&(e=e.replace(eu,"%0D")),e.includes("	")&&(e=e.replace(tu,"%09")),n.pathname=e,n}var Ue,va,vt,Ea,Sa,Aa,Ca,tn,bi,yi,_i,Ia,Ta,rn,ir,nn,mn,Xo,Zo,ka,Pc,Oc,xc,Bc,Rn,Nc,Mc,jc,Uc,Lc,Dc,Ra,Fc,$c,Wc,Hc,qc,Vc,zc,Kc,Jc,Yc,Pn,Qc,Gc,Xc,Zc,eu,tu,yp=nt(()=>{ce(),he(),ue(),np(),op(),ap(),up(),Ic(),Ue={},va=Yt,vt={isString:function(t){return typeof t=="string"},isObject:function(t){return typeof t=="object"&&t!==null},isNull:function(t){return t===null},isNullOrUndefined:function(t){return t==null}},Ue.parse=jr,Ue.resolve=function(t,e){return jr(t,!1,!0).resolve(e)},Ue.resolveObject=function(t,e){return t?jr(t,!1,!0).resolveObject(e):e},Ue.format=function(t){return vt.isString(t)&&(t=jr(t)),t instanceof yt?t.format():yt.prototype.format.call(t)},Ue.Url=yt,Ea=/^([a-z0-9.+-]+:)/i,Sa=/:[0-9]*$/,Aa=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Ca=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),tn=["'"].concat(Ca),bi=["%","/","?",";","#"].concat(tn),yi=["/","?","#"],_i=/^[+a-z0-9A-Z_-]{0,63}$/,Ia=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Ta={javascript:!0,"javascript:":!0},rn={javascript:!0,"javascript:":!0},ir={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},nn=It,yt.prototype.parse=function(t,e,r){if(!vt.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),s=n!==-1&&n<t.indexOf("#")?"?":"#",o=t.split(s);o[0]=o[0].replace(/\\/g,"/");var i=t=o.join(s);if(i=i.trim(),!r&&t.split("#").length===1){var a=Aa.exec(i);if(a)return this.path=i,this.href=i,this.pathname=a[1],a[2]?(this.search=a[2],this.query=e?nn.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var l=Ea.exec(i);if(l){var c=(l=l[0]).toLowerCase();this.protocol=c,i=i.substr(l.length)}if(r||l||i.match(/^\/\/[^@\/]+@[^@\/]+/)){var u=i.substr(0,2)==="//";!u||l&&rn[l]||(i=i.substr(2),this.slashes=!0)}if(!rn[l]&&(u||l&&!ir[l])){for(var d,g,b=-1,m=0;m<yi.length;m++)(y=i.indexOf(yi[m]))!==-1&&(b===-1||y<b)&&(b=y);for((g=b===-1?i.lastIndexOf("@"):i.lastIndexOf("@",b))!==-1&&(d=i.slice(0,g),i=i.slice(g+1),this.auth=decodeURIComponent(d)),b=-1,m=0;m<bi.length;m++){var y;(y=i.indexOf(bi[m]))!==-1&&(b===-1||y<b)&&(b=y)}b===-1&&(b=i.length),this.host=i.slice(0,b),i=i.slice(b),this.parseHost(),this.hostname=this.hostname||"";var w=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!w)for(var R=this.hostname.split(/\./),S=(m=0,R.length);m<S;m++){var E=R[m];if(E&&!E.match(_i)){for(var j="",U=0,T=E.length;U<T;U++)E.charCodeAt(U)>127?j+="x":j+=E[U];if(!j.match(_i)){var I=R.slice(0,m),N=R.slice(m+1),W=E.match(Ia);W&&(I.push(W[1]),N.unshift(W[2])),N.length&&(i="/"+N.join(".")+i),this.hostname=I.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),w||(this.hostname=va.toASCII(this.hostname));var G=this.port?":"+this.port:"",ne=this.hostname||"";this.host=ne+G,this.href+=this.host,w&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),i[0]!=="/"&&(i="/"+i))}if(!Ta[c])for(m=0,S=tn.length;m<S;m++){var C=tn[m];if(i.indexOf(C)!==-1){var V=encodeURIComponent(C);V===C&&(V=escape(C)),i=i.split(C).join(V)}}var re=i.indexOf("#");re!==-1&&(this.hash=i.substr(re),i=i.slice(0,re));var J=i.indexOf("?");if(J!==-1?(this.search=i.substr(J),this.query=i.substr(J+1),e&&(this.query=nn.parse(this.query)),i=i.slice(0,J)):e&&(this.search="",this.query={}),i&&(this.pathname=i),ir[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){G=this.pathname||"";var be=this.search||"";this.path=G+be}return this.href=this.format(),this},yt.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",s=!1,o="";this.host?s=t+this.host:this.hostname&&(s=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&vt.isObject(this.query)&&Object.keys(this.query).length&&(o=nn.stringify(this.query));var i=this.search||o&&"?"+o||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||ir[e])&&s!==!1?(s="//"+(s||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):s||(s=""),n&&n.charAt(0)!=="#"&&(n="#"+n),i&&i.charAt(0)!=="?"&&(i="?"+i),e+s+(r=r.replace(/[?#]/g,function(a){return encodeURIComponent(a)}))+(i=i.replace("#","%23"))+n},yt.prototype.resolve=function(t){return this.resolveObject(jr(t,!1,!0)).format()},yt.prototype.resolveObject=function(t){if(vt.isString(t)){var e=new yt;e.parse(t,!1,!0),t=e}for(var r=new yt,n=Object.keys(this),s=0;s<n.length;s++){var o=n[s];r[o]=this[o]}if(r.hash=t.hash,t.href==="")return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var i=Object.keys(t),a=0;a<i.length;a++){var l=i[a];l!=="protocol"&&(r[l]=t[l])}return ir[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!ir[t.protocol]){for(var c=Object.keys(t),u=0;u<c.length;u++){var d=c[u];r[d]=t[d]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||rn[t.protocol])r.pathname=t.pathname;else{for(var g=(t.pathname||"").split("/");g.length&&!(t.host=g.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),g[0]!==""&&g.unshift(""),g.length<2&&g.unshift(""),r.pathname=g.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var b=r.pathname||"",m=r.search||"";r.path=b+m}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var y=r.pathname&&r.pathname.charAt(0)==="/",w=t.host||t.pathname&&t.pathname.charAt(0)==="/",R=w||y||r.host&&t.pathname,S=R,E=r.pathname&&r.pathname.split("/")||[],j=(g=t.pathname&&t.pathname.split("/")||[],r.protocol&&!ir[r.protocol]);if(j&&(r.hostname="",r.port=null,r.host&&(E[0]===""?E[0]=r.host:E.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(g[0]===""?g[0]=t.host:g.unshift(t.host)),t.host=null),R=R&&(g[0]===""||E[0]==="")),w)r.host=t.host||t.host===""?t.host:r.host,r.hostname=t.hostname||t.hostname===""?t.hostname:r.hostname,r.search=t.search,r.query=t.query,E=g;else if(g.length)E||(E=[]),E.pop(),E=E.concat(g),r.search=t.search,r.query=t.query;else if(!vt.isNullOrUndefined(t.search))return j&&(r.hostname=r.host=E.shift(),(W=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=W.shift(),r.host=r.hostname=W.shift())),r.search=t.search,r.query=t.query,vt.isNull(r.pathname)&&vt.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!E.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var U=E.slice(-1)[0],T=(r.host||t.host||E.length>1)&&(U==="."||U==="..")||U==="",I=0,N=E.length;N>=0;N--)(U=E[N])==="."?E.splice(N,1):U===".."?(E.splice(N,1),I++):I&&(E.splice(N,1),I--);if(!R&&!S)for(;I--;I)E.unshift("..");!R||E[0]===""||E[0]&&E[0].charAt(0)==="/"||E.unshift(""),T&&E.join("/").substr(-1)!=="/"&&E.push("");var W,G=E[0]===""||E[0]&&E[0].charAt(0)==="/";return j&&(r.hostname=r.host=G?"":E.length?E.shift():"",(W=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=W.shift(),r.host=r.hostname=W.shift())),(R=R||r.host&&E.length)&&!G&&E.unshift(""),E.length?r.pathname=E.join("/"):(r.pathname=null,r.path=null),vt.isNull(r.pathname)&&vt.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},yt.prototype.parseHost=function(){var t=this.host,e=Sa.exec(t);e&&((e=e[0])!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)},Ue.Url,Ue.format,Ue.resolve,Ue.resolveObject,mn={},Xo=!1,Zo=hp(),ka=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Ue.URL=typeof URL<"u"?URL:null,Ue.pathToFileURL=gp,Ue.fileURLToPath=fp,Ue.Url,Ue.format,Ue.resolve,Ue.resolveObject,Ue.URL,Pc=92,Oc=47,xc=97,Bc=122,Rn=ka==="win32",Nc=/\//g,Mc=/%/g,jc=/\\/g,Uc=/\n/g,Lc=/\r/g,Dc=/\t/g,Ra=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Ue.URL=typeof URL<"u"?URL:null,Ue.pathToFileURL=Rc,Ue.fileURLToPath=kc,Fc=Ue.Url,$c=Ue.format,Wc=Ue.resolve,Hc=Ue.resolveObject,qc=Ue.parse,Vc=Ue.URL,zc=92,Kc=47,Jc=97,Yc=122,Pn=Ra==="win32",Qc=/\//g,Gc=/%/g,Xc=/\\/g,Zc=/\n/g,eu=/\r/g,tu=/\t/g}),_p=ye((t,e)=>{ce(),he(),ue(),e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),As=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"__esModule",{value:!0}),t.BufferedDuplex=t.writev=void 0;var e=Er(),r=(ot(),De(it));function n(o,i){let a=new Array(o.length);for(let l=0;l<o.length;l++)typeof o[l].chunk=="string"?a[l]=r.Buffer.from(o[l].chunk,"utf8"):a[l]=o[l].chunk;this._write(r.Buffer.concat(a),"binary",i)}t.writev=n;var s=class extends e.Duplex{constructor(o,i,a){super({objectMode:!0}),this.proxy=i,this.socket=a,this.writeQueue=[],o.objectMode||(this._writev=n.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",l=>{this.destroyed||this.push(l)})}_read(o){this.proxy.read(o)}_write(o,i,a){this.isSocketOpen?this.writeToProxy(o,i,a):this.writeQueue.push({chunk:o,encoding:i,cb:a})}_final(o){this.writeQueue=[],this.proxy.end(o)}_destroy(o,i){this.writeQueue=[],this.proxy.destroy(),i(o)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(o,i,a){this.proxy.write(o,i)===!1?this.proxy.once("drain",a):a()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:o,encoding:i,cb:a}=this.writeQueue.shift();this.writeToProxy(o,i,a)}}};t.BufferedDuplex=s}),on=ye(t=>{ce(),he(),ue();var e=t&&t.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(t,"__esModule",{value:!0}),t.streamBuilder=t.browserStreamBuilder=void 0;var r=(ot(),De(it)),n=e(_p()),s=e($t()),o=Er(),i=e(Xn()),a=As(),l=(0,s.default)("mqttjs:ws"),c=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function u(R,S){let E=`${R.protocol}://${R.hostname}:${R.port}${R.path}`;return typeof R.transformWsUrl=="function"&&(E=R.transformWsUrl(E,R,S)),E}function d(R){let S=R;return R.port||(R.protocol==="wss"?S.port=443:S.port=80),R.path||(S.path="/"),R.wsOptions||(S.wsOptions={}),!i.default&&!R.forceNativeWebSocket&&R.protocol==="wss"&&c.forEach(E=>{Object.prototype.hasOwnProperty.call(R,E)&&!Object.prototype.hasOwnProperty.call(R.wsOptions,E)&&(S.wsOptions[E]=R[E])}),S}function g(R){let S=d(R);if(S.hostname||(S.hostname=S.host),!S.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let E=new URL(document.URL);S.hostname=E.hostname,S.port||(S.port=Number(E.port))}return S.objectMode===void 0&&(S.objectMode=!(S.binary===!0||S.binary===void 0)),S}function b(R,S,E){l("createWebSocket"),l(`protocol: ${E.protocolId} ${E.protocolVersion}`);let j=E.protocolId==="MQIsdp"&&E.protocolVersion===3?"mqttv3.1":"mqtt";l(`creating new Websocket for url: ${S} and protocol: ${j}`);let U;return E.createWebsocket?U=E.createWebsocket(S,[j],E):U=new n.default(S,[j],E.wsOptions),U}function m(R,S){let E=S.protocolId==="MQIsdp"&&S.protocolVersion===3?"mqttv3.1":"mqtt",j=u(S,R),U;return S.createWebsocket?U=S.createWebsocket(j,[E],S):U=new WebSocket(j,[E]),U.binaryType="arraybuffer",U}var y=(R,S)=>{l("streamBuilder");let E=d(S);E.hostname=E.hostname||E.host||"localhost";let j=u(E,R),U=b(R,j,E),T=n.default.createWebSocketStream(U,E.wsOptions);return T.url=j,U.on("close",()=>{T.destroy()}),T};t.streamBuilder=y;var w=(R,S)=>{l("browserStreamBuilder");let E,j=g(S).browserBufferSize||1024*512,U=S.browserBufferTimeout||1e3,T=!S.objectMode,I=m(R,S),N=G(S,J,be);S.objectMode||(N._writev=a.writev.bind(N)),N.on("close",()=>{I.close()});let W=typeof I.addEventListener<"u";I.readyState===I.OPEN?(E=N,E.socket=I):(E=new a.BufferedDuplex(S,N,I),W?I.addEventListener("open",ne):I.onopen=ne),W?(I.addEventListener("close",C),I.addEventListener("error",V),I.addEventListener("message",re)):(I.onclose=C,I.onerror=V,I.onmessage=re);function G(ae,q,_e){let se=new o.Transform({objectMode:ae.objectMode});return se._write=q,se._flush=_e,se}function ne(){l("WebSocket onOpen"),E instanceof a.BufferedDuplex&&E.socketReady()}function C(ae){l("WebSocket onClose",ae),E.end(),E.destroy()}function V(ae){l("WebSocket onError",ae);let q=new Error("WebSocket error");q.event=ae,E.destroy(q)}async function re(ae){let{data:q}=ae;q instanceof ArrayBuffer?q=r.Buffer.from(q):q instanceof Blob?q=r.Buffer.from(await new Response(q).arrayBuffer()):q=r.Buffer.from(q,"utf8"),N&&!N.destroyed&&N.push(q)}function J(ae,q,_e){if(I.bufferedAmount>j){setTimeout(J,U,ae,q,_e);return}T&&typeof ae=="string"&&(ae=r.Buffer.from(ae,"utf8"));try{I.send(ae)}catch(se){return _e(se)}_e()}function be(ae){I.close(),ae()}return E};t.browserStreamBuilder=w}),Cs={};_r(Cs,{Server:()=>qe,Socket:()=>qe,Stream:()=>qe,_createServerHandle:()=>qe,_normalizeArgs:()=>qe,_setSimultaneousAccepts:()=>qe,connect:()=>qe,createConnection:()=>qe,createServer:()=>qe,default:()=>ru,isIP:()=>qe,isIPv4:()=>qe,isIPv6:()=>qe});function qe(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var ru,nu=nt(()=>{ce(),he(),ue(),ru={_createServerHandle:qe,_normalizeArgs:qe,_setSimultaneousAccepts:qe,connect:qe,createConnection:qe,createServer:qe,isIP:qe,isIPv4:qe,isIPv6:qe,Server:qe,Socket:qe,Stream:qe}}),Pa=ye(t=>{ce(),he(),ue();var e=t&&t.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(t,"__esModule",{value:!0});var r=e((nu(),De(Cs))),n=e($t()),s=(0,n.default)("mqttjs:tcp"),o=(i,a)=>{a.port=a.port||1883,a.hostname=a.hostname||a.host||"localhost";let{port:l,path:c}=a,u=a.hostname;return s("port %d and host %s",l,u),r.default.createConnection({port:l,host:u,path:c})};t.default=o}),iu={};_r(iu,{default:()=>ou});var ou,wp=nt(()=>{ce(),he(),ue(),ou={}}),Oa=ye(t=>{ce(),he(),ue();var e=t&&t.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(t,"__esModule",{value:!0});var r=e((wp(),De(iu))),n=e((nu(),De(Cs))),s=e($t()),o=(0,s.default)("mqttjs:tls"),i=(a,l)=>{l.port=l.port||8883,l.host=l.hostname||l.host||"localhost",n.default.isIP(l.host)===0&&(l.servername=l.host),l.rejectUnauthorized=l.rejectUnauthorized!==!1,delete l.path,o("port %d host %s rejectUnauthorized %b",l.port,l.host,l.rejectUnauthorized);let c=r.default.connect(l);c.on("secureConnect",()=>{l.rejectUnauthorized&&!c.authorized?c.emit("error",new Error("TLS not authorized")):c.removeListener("error",u)});function u(d){l.rejectUnauthorized&&a.emit("error",d),c.end()}return c.on("error",u),c};t.default=i}),xa=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"__esModule",{value:!0});var e=(ot(),De(it)),r=Er(),n=As(),s,o,i;function a(){let g=new r.Transform;return g._write=(b,m,y)=>{s.send({data:b.buffer,success(){y()},fail(w){y(new Error(w))}})},g._flush=b=>{s.close({success(){b()}})},g}function l(g){g.hostname||(g.hostname="localhost"),g.path||(g.path="/"),g.wsOptions||(g.wsOptions={})}function c(g,b){let m=g.protocol==="wxs"?"wss":"ws",y=`${m}://${g.hostname}${g.path}`;return g.port&&g.port!==80&&g.port!==443&&(y=`${m}://${g.hostname}:${g.port}${g.path}`),typeof g.transformWsUrl=="function"&&(y=g.transformWsUrl(y,g,b)),y}function u(){s.onOpen(()=>{i.socketReady()}),s.onMessage(g=>{let{data:b}=g;b instanceof ArrayBuffer?b=e.Buffer.from(b):b=e.Buffer.from(b,"utf8"),o.push(b)}),s.onClose(()=>{i.emit("close"),i.end(),i.destroy()}),s.onError(g=>{let b=new Error(g.errMsg);i.destroy(b)})}var d=(g,b)=>{if(b.hostname=b.hostname||b.host,!b.hostname)throw new Error("Could not determine host. Specify host manually.");let m=b.protocolId==="MQIsdp"&&b.protocolVersion===3?"mqttv3.1":"mqtt";l(b);let y=c(b,g);s=wx.connectSocket({url:y,protocols:[m]}),o=a(),i=new n.BufferedDuplex(b,o,s),i._destroy=(R,S)=>{s.close({success(){S&&S(R)}})};let w=i.destroy;return i.destroy=(R,S)=>(i.destroy=w,setTimeout(()=>{s.close({fail(){i._destroy(R,S)}})},0),i),u(),i};t.default=d}),Ba=ye(t=>{ce(),he(),ue(),Object.defineProperty(t,"__esModule",{value:!0});var e=(ot(),De(it)),r=Er(),n=As(),s,o,i,a=!1;function l(){let b=new r.Transform;return b._write=(m,y,w)=>{s.sendSocketMessage({data:m.buffer,success(){w()},fail(){w(new Error)}})},b._flush=m=>{s.closeSocket({success(){m()}})},b}function c(b){b.hostname||(b.hostname="localhost"),b.path||(b.path="/"),b.wsOptions||(b.wsOptions={})}function u(b,m){let y=b.protocol==="alis"?"wss":"ws",w=`${y}://${b.hostname}${b.path}`;return b.port&&b.port!==80&&b.port!==443&&(w=`${y}://${b.hostname}:${b.port}${b.path}`),typeof b.transformWsUrl=="function"&&(w=b.transformWsUrl(w,b,m)),w}function d(){a||(a=!0,s.onSocketOpen(()=>{i.socketReady()}),s.onSocketMessage(b=>{if(typeof b.data=="string"){let m=e.Buffer.from(b.data,"base64");o.push(m)}else{let m=new FileReader;m.addEventListener("load",()=>{let y=m.result;y instanceof ArrayBuffer?y=e.Buffer.from(y):y=e.Buffer.from(y,"utf8"),o.push(y)}),m.readAsArrayBuffer(b.data)}}),s.onSocketClose(()=>{i.end(),i.destroy()}),s.onSocketError(b=>{i.destroy(b)}))}var g=(b,m)=>{if(m.hostname=m.hostname||m.host,!m.hostname)throw new Error("Could not determine host. Specify host manually.");let y=m.protocolId==="MQIsdp"&&m.protocolVersion===3?"mqttv3.1":"mqtt";c(m);let w=u(m,b);return s=m.my,s.connectSocket({url:w,protocols:y}),o=l(),i=new n.BufferedDuplex(m,o,s),d(),i};t.default=g}),vp=ye(t=>{ce(),he(),ue();var e=t&&t.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(t,"__esModule",{value:!0}),t.connectAsync=void 0;var r=e($t()),n=e((yp(),De(Tc))),s=e(Vo()),o=e(Xn());typeof(je==null?void 0:je.nextTick)!="function"&&(je.nextTick=setImmediate);var i=(0,r.default)("mqttjs"),a=null;function l(d){let g;d.auth&&(g=d.auth.match(/^(.+):(.+)$/),g?(d.username=g[1],d.password=g[2]):d.username=d.auth)}function c(d,g){var b,m,y,w;if(i("connecting to an MQTT broker..."),typeof d=="object"&&!g&&(g=d,d=""),g=g||{},d&&typeof d=="string"){let E=n.default.parse(d,!0),j={};if(E.port!=null&&(j.port=Number(E.port)),j.host=E.hostname,j.query=E.query,j.auth=E.auth,j.protocol=E.protocol,j.path=E.path,j.protocol=(b=j.protocol)===null||b===void 0?void 0:b.replace(/:$/,""),g=Object.assign(Object.assign({},j),g),!g.protocol)throw new Error("Missing protocol")}if(g.unixSocket=g.unixSocket||((m=g.protocol)===null||m===void 0?void 0:m.includes("+unix")),g.unixSocket?g.protocol=g.protocol.replace("+unix",""):!(!((y=g.protocol)===null||y===void 0)&&y.startsWith("ws"))&&!(!((w=g.protocol)===null||w===void 0)&&w.startsWith("wx"))&&delete g.path,l(g),g.query&&typeof g.query.clientId=="string"&&(g.clientId=g.query.clientId),g.cert&&g.key)if(g.protocol){if(["mqtts","wss","wxs","alis"].indexOf(g.protocol)===-1)switch(g.protocol){case"mqtt":g.protocol="mqtts";break;case"ws":g.protocol="wss";break;case"wx":g.protocol="wxs";break;case"ali":g.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${g.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(a||(a={},!o.default&&!g.forceNativeWebSocket?(a.ws=on().streamBuilder,a.wss=on().streamBuilder,a.mqtt=Pa().default,a.tcp=Pa().default,a.ssl=Oa().default,a.tls=a.ssl,a.mqtts=Oa().default):(a.ws=on().browserStreamBuilder,a.wss=on().browserStreamBuilder,a.wx=xa().default,a.wxs=xa().default,a.ali=Ba().default,a.alis=Ba().default)),!a[g.protocol]){let E=["mqtts","wss"].indexOf(g.protocol)!==-1;g.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((j,U)=>E&&U%2===0?!1:typeof a[j]=="function")[0]}if(g.clean===!1&&!g.clientId)throw new Error("Missing clientId for unclean clients");g.protocol&&(g.defaultProtocol=g.protocol);function R(E){return g.servers&&((!E._reconnectCount||E._reconnectCount===g.servers.length)&&(E._reconnectCount=0),g.host=g.servers[E._reconnectCount].host,g.port=g.servers[E._reconnectCount].port,g.protocol=g.servers[E._reconnectCount].protocol?g.servers[E._reconnectCount].protocol:g.defaultProtocol,g.hostname=g.host,E._reconnectCount++),i("calling streambuilder for",g.protocol),a[g.protocol](E,g)}let S=new s.default(R,g);return S.on("error",()=>{}),S}function u(d,g,b=!0){return new Promise((m,y)=>{let w=c(d,g),R={connect:E=>{S(),m(w)},end:()=>{S(),m(w)},error:E=>{S(),w.end(),y(E)}};b===!1&&(R.close=()=>{R.error(new Error("Couldn't connect to server"))});function S(){Object.keys(R).forEach(E=>{w.off(E,R[E])})}Object.keys(R).forEach(E=>{w.on(E,R[E])})})}t.connectAsync=u,t.default=c}),Na=ye(t=>{ce(),he(),ue();var e=t&&t.__createBinding||(Object.create?function(b,m,y,w){w===void 0&&(w=y);var R=Object.getOwnPropertyDescriptor(m,y);(!R||("get"in R?!m.__esModule:R.writable||R.configurable))&&(R={enumerable:!0,get:function(){return m[y]}}),Object.defineProperty(b,w,R)}:function(b,m,y,w){w===void 0&&(w=y),b[w]=m[y]}),r=t&&t.__setModuleDefault||(Object.create?function(b,m){Object.defineProperty(b,"default",{enumerable:!0,value:m})}:function(b,m){b.default=m}),n=t&&t.__importStar||function(b){if(b&&b.__esModule)return b;var m={};if(b!=null)for(var y in b)y!=="default"&&Object.prototype.hasOwnProperty.call(b,y)&&e(m,b,y);return r(m,b),m},s=t&&t.__exportStar||function(b,m){for(var y in b)y!=="default"&&!Object.prototype.hasOwnProperty.call(m,y)&&e(m,b,y)},o=t&&t.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReasonCodes=t.KeepaliveManager=t.UniqueMessageIdProvider=t.DefaultMessageIdProvider=t.Store=t.MqttClient=t.connectAsync=t.connect=t.Client=void 0;var i=o(Vo());t.MqttClient=i.default;var a=o(ic());t.DefaultMessageIdProvider=a.default;var l=o(rp());t.UniqueMessageIdProvider=l.default;var c=o(oc());t.Store=c.default;var u=n(vp());t.connect=u.default,Object.defineProperty(t,"connectAsync",{enumerable:!0,get:function(){return u.connectAsync}});var d=o(vc());t.KeepaliveManager=d.default,t.Client=i.default,s(Vo(),t),s(Or(),t);var g=Gn();Object.defineProperty(t,"ReasonCodes",{enumerable:!0,get:function(){return g.ReasonCodes}})}),Ep=ye(t=>{ce(),he(),ue();var e=t&&t.__createBinding||(Object.create?function(i,a,l,c){c===void 0&&(c=l);var u=Object.getOwnPropertyDescriptor(a,l);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[l]}}),Object.defineProperty(i,c,u)}:function(i,a,l,c){c===void 0&&(c=l),i[c]=a[l]}),r=t&&t.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),n=t&&t.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var l in i)l!=="default"&&Object.prototype.hasOwnProperty.call(i,l)&&e(a,i,l);return r(a,i),a},s=t&&t.__exportStar||function(i,a){for(var l in i)l!=="default"&&!Object.prototype.hasOwnProperty.call(a,l)&&e(a,i,l)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(Na());t.default=o,s(Na(),t)});const Sp=Ep();/*! Bundled license information:

@jspm/core/nodelibs/browser/buffer.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/class Ap{constructor(e,r,n){ve(this,"serverUrl");ve(this,"crisEndpoint");ve(this,"mqttTopic");ve(this,"client");ve(this,"clientId");ve(this,"messageHandlers",[]);ve(this,"closeHandlers",[e=>console.log("mqtt disconnected: "+e)]);this.serverUrl=e,this.crisEndpoint=r,this.mqttTopic=n,this.clientId="od-watcher-"+crypto.randomUUID()}async startListeningAsync(e){const r={},n=e.map(async s=>{const o=new En(this.clientId,s.domainName,s.transactionCount),i=await this.crisEndpoint.sendOrThrowAsync(o);i?r[s.domainName]=JSON.parse(i):(console.warn(`Domain ${s.domainName} doesn't exists.`),r[s.domainName]="")});return await Promise.all(n),r}async startAsync(){try{return console.log(`connecting to mqtt with client id ${this.clientId}...`),this.client=await Sp.connectAsync(this.serverUrl,{clean:!0,clientId:this.clientId}),this.client.on("message",(e,r,n)=>this.handleMessages(e,r,n)),this.client.on("disconnect",e=>this.handleClose(void 0)),console.log("connected"),!0}catch(e){return console.log("not connected"),console.error(e),!1}}handleMessages(e,r,n){if(console.log("Received MQTT message."),!e.startsWith(this.mqttTopic))return;const s=r.readInt32LE(),o=r.toString("utf-8",4,s+4),i=r.readInt32LE(4+s),a=r.toString("utf-8",8+s,8+s+i);this.messageHandlers.forEach(l=>{l(o,JSON.parse(a))})}handleClose(e){this.closeHandlers.forEach(r=>{r(e)})}onMessage(e){this.messageHandlers.push(e)}onClose(e){this.closeHandlers.push(e)}stopAsync(){return this.client.endAsync(!0)}}function Ma(t,e){const{prefix:r,activator:n}=Object.assign({prefix:"~$"},e),s=r+">",o=r+"",i=r+"";let a=null,l=null;const c=new Array;function u(m,y){let w=null;if(y instanceof Array)if(y.length>0&&y[0]!=null&&(w=y[0][i])!==void 0){switch(y.splice(0,1),w[1]){case"A":break;case"M":y=Object.assign(new Map,{v:y});break;case"S":y=Object.assign(new Set,{v:y});break;default:throw new Error("Expecting typed array to be 'A', 'M' or 'S'.")}c[w[0]]=y}else l===null&&(l=new Set),l.add(y);else if(y!==null){const R=y[o];R!==void 0?(delete y[o],(w=y[i])!==void 0&&(delete y[i],n&&(y=n(y,w),y&&(a===null&&(a=new Set),a.add(y)))),c[R]=y):(l===null&&(l=new Set),l.add(y))}return y}function d(m){if(m){if(m instanceof Array)for(let y=0;y<m.length;++y){const w=m[y];d(w),m[y]=u(y,w)}else if(typeof m=="object")for(const y in m){const w=m[y];d(w),m[y]=u(y,w)}}return m}const g=typeof t=="string"?JSON.parse(t,u):u(void 0,d(t));function b(m,y){const w=y.length;for(let R=0;R<w;++R){const S=y[R];if(S){const E=S[s];E!==void 0&&(y[R]=m[E])}}}for(let m of c)if(a===null||!a.has(m))if(m instanceof Array)b(c,m);else if(m instanceof Map)m.v.forEach(y=>b(c,y)),m.v.forEach(y=>m.set(y[0],y[1])),delete m.v;else if(m instanceof Set)b(c,m.v),m.v.forEach(y=>m.add(y)),delete m.v;else for(const y in m){const w=m[y];if(w!==null){const R=w[s];R!==void 0&&(m[y]=c[R])}}if(l!==null)for(let m of l)if(m instanceof Array)b(c,m);else for(const y in m){const w=m[y];if(w!==null){const R=w[s];R!==void 0&&(m[y]=c[R])}}return g}class Gt{constructor(e){ve(this,"_props");ve(this,"_tranNum");ve(this,"_objCount");ve(this,"_graph");ve(this,"_roots");ve(this,"_isInitialExport");if(this._isInitialExport=!0,e===void 0)this._props=[],this._tranNum=0,this._objCount=0,this._graph=[],this._roots=[];else{const r=typeof e=="string"?Ma(e,{prefix:""}):e;this._props=r.P,this._tranNum=r.N,this._objCount=r.C,this._graph=r.O,this._roots=r.R.map(n=>this._graph[n])}}get transactionNumber(){return this._tranNum}get allObjectsCount(){return this._objCount}get allObjects(){function*e(r){for(const n of r)n!==null&&(yield n)}return e(this._graph)}get roots(){return this._roots}static isTransactionSetEvent(e){return e===""?!1:"E"in e}static isDomainExportEvent(e){return e===""?!1:"P"in e}static isErrorEvent(e){return e===""?!1:"Error"in e}applyWatchEvent(e){if(e===""){this._props.length=0,this._objCount=0,this._graph.length=0,this._roots.length=0,console.warn("Empty OD watch event.");return}if(e=Ma(e,{prefix:""}),Gt.isTransactionSetEvent(e)){const r=e.N-e.E.length+1;if(e.L)if(e.L!==this._tranNum)if(this._tranNum>e.L&&this._tranNum<e.N&&this._isInitialExport)console.warn(`Event claims last event was TN ${e.L}, current TN is ${this._tranNum}. Accepting partial event.`),this._tranNum=r-1;else throw new Error(`Event claims last event was TN ${e.L}, current TN is ${this._tranNum}`);else this._tranNum=r-1;for(let n=0;n<e.E.length;n++)this.applyEvent(r+n,e.E[n])}else if(Gt.isDomainExportEvent(e))this.applyDomainExport(e);else throw e===""?new Error("The watch event received is empty. The domain doesn't exist (or has been destroyed)."):Gt.isErrorEvent(e)?new Error("Domain error: "+e.Error):new Error("Unknown WatchEvent: "+JSON.stringify(e,void 0,4))}applyDomainExport(e){this._props.splice(0,this._props.length);for(let r=0;r<e.P.length;r++)this._props.push(e.P[r]);this._tranNum=e.N,this._objCount=e.C,this._graph.splice(0,this._graph.length);for(let r=0;r<e.O.length;r++)this._graph.push(e.O[r]);this._roots.splice(0,this._roots.length);for(let r=0;r<e.R.length;r++)this._roots.push(this._graph[e.R[r]]);this._isInitialExport=!0}applyEvent(e,r){if(this._tranNum+1!==e)throw new Error(`Invalid transaction number. Expected: ${this._tranNum+1}, got ${e}.`);const n=new Set,s=r;for(let o=0;o<s.length;++o){const i=s[o];switch(i[0]){case"N":{let l;switch(i[2]){case"":l={};break;case"A":l=[];break;case"M":l=new Map;break;case"S":l=new Set;break;default:throw new Error(`Unexpected Object type; ${i[2]}. Must be A, M, S or empty string.`)}n.delete(i[1]),this._graph[i[1]]=l,this._objCount++;break}case"D":{n.add(i[1]),this._objCount--;break}case"P":{if(i[2]!=this._props.length)throw new Error(`Invalid property creation event for '${i[1]}': index must be ${this._props.length}, got ${i[2]}.`);this._props.push(i[1]);break}case"C":{this._graph[i[1]][this._props[i[2]]]=this.getValue(i[3]);break}case"I":{const l=this._graph[i[1]],c=i[2],u=this.getValue(i[3]);c===l.length?l[c]=u:l.splice(c,0,u);break}case"CL":{const l=this._graph[i[1]];l instanceof Array?l.length=0:l.clear();break}case"R":{this._graph[i[1]].splice(i[2],1);break}case"S":{this._graph[i[1]].splice(i[2],1,this.getValue(i[3]));break}case"K":{this._graph[i[1]].delete(this.getValue(i[2]));break}case"M":{this._graph[i[1]].set(this.getValue(i[2]),this.getValue(i[3]));break}case"A":{this._graph[i[1]].add(this.getValue(i[2]));break}default:throw new Error(`Unexpected Event code: '${i[0]}'.`)}}n.forEach(o=>this._graph[o]=null),this._tranNum=e,this._isInitialExport=!1}getValue(e){if(e!=null){var r=e["="];if(r!==void 0)return this._graph[r]}return e}}var es=function(t,e){return es=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},es(t,e)};function Qr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");es(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function ts(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function rs(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,o=[],i;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)o.push(s.value)}catch(a){i={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return o}function ns(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,o;n<s;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function Lt(t){return typeof t=="function"}function su(t){var e=function(n){Error.call(n),n.stack=new Error().stack},r=t(e);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var wi=su(function(t){return function(r){t(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,s){return s+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function is(t,e){if(t){var r=t.indexOf(e);0<=r&&t.splice(r,1)}}var Zn=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,r,n,s,o;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var a=ts(i),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(y){e={error:y}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}else i.remove(this);var u=this.initialTeardown;if(Lt(u))try{u()}catch(y){o=y instanceof wi?y.errors:[y]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var g=ts(d),b=g.next();!b.done;b=g.next()){var m=b.value;try{ja(m)}catch(y){o=o??[],y instanceof wi?o=ns(ns([],rs(o)),rs(y.errors)):o.push(y)}}}catch(y){n={error:y}}finally{try{b&&!b.done&&(s=g.return)&&s.call(g)}finally{if(n)throw n.error}}}if(o)throw new wi(o)}},t.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)ja(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(e)}},t.prototype._hasParent=function(e){var r=this._parentage;return r===e||Array.isArray(r)&&r.includes(e)},t.prototype._addParent=function(e){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(e),r):r?[r,e]:e},t.prototype._removeParent=function(e){var r=this._parentage;r===e?this._parentage=null:Array.isArray(r)&&is(r,e)},t.prototype.remove=function(e){var r=this._finalizers;r&&is(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),au=Zn.EMPTY;function lu(t){return t instanceof Zn||t&&"closed"in t&&Lt(t.remove)&&Lt(t.add)&&Lt(t.unsubscribe)}function ja(t){Lt(t)?t():t.unsubscribe()}var cu={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Cp={setTimeout:function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setTimeout.apply(void 0,ns([t,e],rs(r)))},clearTimeout:function(t){return clearTimeout(t)},delegate:void 0};function Ip(t){Cp.setTimeout(function(){throw t})}function Ua(){}function bn(t){t()}var uu=function(t){Qr(e,t);function e(r){var n=t.call(this)||this;return n.isStopped=!1,r?(n.destination=r,lu(r)&&r.add(n)):n.destination=Pp,n}return e.create=function(r,n,s){return new os(r,n,s)},e.prototype.next=function(r){this.isStopped||this._next(r)},e.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Zn),Tp=Function.prototype.bind;function vi(t,e){return Tp.call(t,e)}var kp=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var r=this.partialObserver;if(r.next)try{r.next(e)}catch(n){sn(n)}},t.prototype.error=function(e){var r=this.partialObserver;if(r.error)try{r.error(e)}catch(n){sn(n)}else sn(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(r){sn(r)}},t}(),os=function(t){Qr(e,t);function e(r,n,s){var o=t.call(this)||this,i;if(Lt(r)||!r)i={next:r??void 0,error:n??void 0,complete:s??void 0};else{var a;o&&cu.useDeprecatedNextContext?(a=Object.create(r),a.unsubscribe=function(){return o.unsubscribe()},i={next:r.next&&vi(r.next,a),error:r.error&&vi(r.error,a),complete:r.complete&&vi(r.complete,a)}):i=r}return o.destination=new kp(i),o}return e}(uu);function sn(t){Ip(t)}function Rp(t){throw t}var Pp={closed:!0,next:Ua,error:Rp,complete:Ua},Op=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function xp(t){return t}function Bp(t){return t.length===0?xp:t.length===1?t[0]:function(r){return t.reduce(function(n,s){return s(n)},r)}}var La=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(e,r,n){var s=this,o=Mp(e)?e:new os(e,r,n);return bn(function(){var i=s,a=i.operator,l=i.source;o.add(a?a.call(o,l):l?s._subscribe(o):s._trySubscribe(o))}),o},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){e.error(r)}},t.prototype.forEach=function(e,r){var n=this;return r=Da(r),new r(function(s,o){var i=new os({next:function(a){try{e(a)}catch(l){o(l),i.unsubscribe()}},error:o,complete:s});n.subscribe(i)})},t.prototype._subscribe=function(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)},t.prototype[Op]=function(){return this},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Bp(e)(this)},t.prototype.toPromise=function(e){var r=this;return e=Da(e),new e(function(n,s){var o;r.subscribe(function(i){return o=i},function(i){return s(i)},function(){return n(o)})})},t.create=function(e){return new t(e)},t}();function Da(t){var e;return(e=t??cu.Promise)!==null&&e!==void 0?e:Promise}function Np(t){return t&&Lt(t.next)&&Lt(t.error)&&Lt(t.complete)}function Mp(t){return t&&t instanceof uu||Np(t)&&lu(t)}var jp=su(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),hu=function(t){Qr(e,t);function e(){var r=t.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return e.prototype.lift=function(r){var n=new Fa(this,this);return n.operator=r,n},e.prototype._throwIfClosed=function(){if(this.closed)throw new jp},e.prototype.next=function(r){var n=this;bn(function(){var s,o;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var i=ts(n.currentObservers),a=i.next();!a.done;a=i.next()){var l=a.value;l.next(r)}}catch(c){s={error:c}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(s)throw s.error}}}})},e.prototype.error=function(r){var n=this;bn(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=r;for(var s=n.observers;s.length;)s.shift().error(r)}})},e.prototype.complete=function(){var r=this;bn(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var n=r.observers;n.length;)n.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(r){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,r)},e.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},e.prototype._innerSubscribe=function(r){var n=this,s=this,o=s.hasError,i=s.isStopped,a=s.observers;return o||i?au:(this.currentObservers=null,a.push(r),new Zn(function(){n.currentObservers=null,is(a,r)}))},e.prototype._checkFinalizedStatuses=function(r){var n=this,s=n.hasError,o=n.thrownError,i=n.isStopped;s?r.error(o):i&&r.complete()},e.prototype.asObservable=function(){var r=new La;return r.source=this,r},e.create=function(r,n){return new Fa(r,n)},e}(La),Fa=function(t){Qr(e,t);function e(r,n){var s=t.call(this)||this;return s.destination=r,s.source=n,s}return e.prototype.next=function(r){var n,s;(s=(n=this.destination)===null||n===void 0?void 0:n.next)===null||s===void 0||s.call(n,r)},e.prototype.error=function(r){var n,s;(s=(n=this.destination)===null||n===void 0?void 0:n.error)===null||s===void 0||s.call(n,r)},e.prototype.complete=function(){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||n===void 0||n.call(r)},e.prototype._subscribe=function(r){var n,s;return(s=(n=this.source)===null||n===void 0?void 0:n.subscribe(r))!==null&&s!==void 0?s:au},e}(hu),$a=function(t){Qr(e,t);function e(r){var n=t.call(this)||this;return n._value=r,n}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(r){var n=t.prototype._subscribe.call(this,r);return!n.closed&&r.next(this._value),n},e.prototype.getValue=function(){var r=this,n=r.hasError,s=r.thrownError,o=r._value;if(n)throw s;return this._throwIfClosed(),o},e.prototype.next=function(r){t.prototype.next.call(this,this._value=r)},e}(hu),ar;(function(t){t[t.Disconnected=0]="Disconnected",t[t.Connected=1]="Connected",t[t.CatchingUp=2]="CatchingUp"})(ar||(ar={}));class Wa{constructor(e){ve(this,"driver");ve(this,"connectionState",new $a(ar.Disconnected));ve(this,"connectionState$",this.connectionState.asObservable());ve(this,"stopping",!1);ve(this,"buffering",!1);ve(this,"bufferedEvents",[]);ve(this,"onCloseHandler");ve(this,"domains",{});ve(this,"onClose",e=>{this.onCloseHandler!=null&&this.onCloseHandler(e)});ve(this,"onMessage",(e,r)=>{const n=this.domains[e];if(n===void 0){console.log(`Received event for unknown domain ${e}, ignoring this event.`);return}if(this.buffering){console.log("OD Client is starting, buffering an event for "+e),this.bufferedEvents.push({domainName:e,watchEvent:r});return}try{if(Gt.isTransactionSetEvent(r)){if(r.N<=n.domain.transactionNumber){console.warn(`Ignoring received past event. Current TN: ${n.domain.transactionNumber}. New TN: ${r.N}`);return}console.log(`Received OD event for domain ${e}. Current TN: ${n.domain.transactionNumber}. New TN: ${r.N}`)}else Gt.isDomainExportEvent(r)&&console.log(`Received domain export for domain ${e}. New TN: ${r.N}`);n.domain.applyWatchEvent(r),n.obs.next(n.domain.roots)}catch(s){console.error(s),n.domain=new Gt,this.driver.stopAsync();return}});this.driver=e,this.driver.onMessage(this.onMessage),this.driver.onClose(this.onClose)}get domainsRoots(){const e={};return Object.keys(this.domains).forEach(r=>{e[r]=this.domains[r].domain.roots}),e}start(){this.loopReconnectAsync()}async listenToDomainAsync(e){if(this.domains[e]===void 0){const r=new Gt,n=new $a(r.roots);if(this.domains[e]={domain:r,obs:n},this.connectionState.value!=ar.Disconnected){const s=(await this.driver.startListeningAsync([{domainName:e,transactionCount:0}]))[e];r.applyWatchEvent(s)}}return this.domains[e].obs}async loopReconnectAsync(){for(;!this.stopping;)try{if(this.buffering=!0,this.bufferedEvents=[],!await this.driver.startAsync())continue;this.connectionState.next(ar.CatchingUp);const e=await this.driver.startListeningAsync(Object.keys(this.domains).map(r=>{var n;return{domainName:r,transactionCount:((n=this.domains[r])==null?void 0:n.domain.transactionNumber)??0}}));this.buffering=!1,Object.keys(e).forEach(r=>{this.onMessage(r,e[r]);const n=this.domains[r];console.log(`Domain ${r}: ${n.domain.allObjectsCount} objects. ${n.domain.roots.length} root(s). Current Transaction Number: ${n.domain.transactionNumber}`)});for(const r of this.bufferedEvents)this.onMessage(r.domainName,r.watchEvent);this.connectionState.next(ar.Connected),await new Promise(r=>{this.onCloseHandler=n=>{n!=null?console.log("OD driver Disconnected due to : "+n):console.log("OD driver Disconnected for an unknown reason"),r()}})}catch(e){console.error("Error in OD reconnect loop:",e)}finally{this.connectionState.next(ar.Disconnected),this.driver.stopAsync()}}async stopAsync(){this.stopping=!0,await this.driver.stopAsync(),this.connectionState.complete()}}const Up=Ye.create(),ss=new Qh(Up,"http://localhost:5000/.cris");(async function(){const t=new Ap("ws://localhost:8080/mqtt/",ss,"CK-OD"),e=new Pi("http://localhost:5000/hub/league",ss),r=new Wa(t);r.start();const n=new Wa(e);n.start();const s=await r.listenToDomainAsync("Test-Domain"),o=await n.listenToDomainAsync("Test-Domain"),i=document.getElementById("slider-left"),a=document.getElementById("slider-right");s.forEach(l=>{l.length<1||(console.log("Mqtt value: "+l[0].Slider),i.value=l[0].Slider)}),o.forEach(l=>{l.length<1||(console.log("SignalR value: "+l[0].Slider),a.value=l[0].Slider)})})();async function Lp(t){await ss.sendOrThrowAsync(new vn(t))}window.sliderUpdate=Lp;
